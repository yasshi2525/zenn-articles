---
title: "選ばせたい、でも負担はかけたくない：鉄道の敷設操作の設計"
---

# 鉄道を自由に作りたい

鉄道バトルゲームの開発を始めて最初に取り組んだことが鉄道の敷設機能の実装でした。どうやってプレイヤーに線路網を描いてもらおうか？まず考えたのは[一人プレイの前作](https://namagame.coe.nicovideo.jp/games/lg224)の敷設方法を流用することでした。前作ではプレイヤーが画面をなぞった軌跡に線路を敷き、一定間隔で駅と電車を配置させました。プレイヤーは線路をどこに敷くかだけを考えるシンプルな仕様としました。

![](/images/rushmini-screenshot.png)
*前作「出勤のお時間です！」のプレイ画面*

しかし、対戦要素を持たせるためにはこの敷設方法はシンプルすぎて、戦略性を持たせられないと判断しました。たとえば他のプレイヤーを妨害するような競合路線を作りたくても、駅の位置が自動で決まる前作の仕様は幾分不便です。駅数を絞って長距離輸送に特化するか、駅数を増やしてきめ細かく通勤客を拾いにいくかと決めることもできません。

だから前作よりももっとゲームの自由度を高めなければならないと考えました。

# 対戦ゲームにするには

## スモールスタートを選んだ理由

一人で路線を作る前作に何を加えれば対戦ゲームになるのか考えます。ゲーム設計論的には、対象とする鉄道路線の性質からどのようなバトルが起こり得るのかすべて洗い出すのが正しいのでしょう。ただ、風呂敷を広げすぎて実装できずに頓挫してしまうことが怖かったので、思いついた要素から実装してみるというスモールスタートの形式で開発してみることにしました。というのは、実は前作を開発する前にプロトタイプを数回作ったのですが、いずれも発散しすぎて収集がつかなくなって諦めてしまった苦い経験があるからです。

では、どんな要素を最初に実装しようかと考えたのですが、鉄道ゲームというものに対戦要素があったら面白そうと思ったきっかけのエピソードは絶対に反映したいと思いました。

## 最初に実装したい「並走バトル」要素

鉄道バトルゲームを作ってみたいと思ったきっかけは、[電車の走行動画](https://www.nicovideo.jp/watch/sm553706)を見たことでした。これは異なる鉄道会社が並走している区間で撮影されたもので、一方の会社の電車が他方の会社の電車を追い抜くという内容でした。「ロックオン」というコメントや真剣に見つめる子どもの姿が面白くて調べてみたところ、信号システムを改良して走行速度の最高速度を引き上げたとか、加速の早い特別なモーターを搭載させているとか、独自の工夫を加えてしのぎを削っていることがわかりました。天下の国鉄（ＪＲ）を地域の私鉄が切り込むという下剋上要素が特に惹かれ、あるプレイヤーが別のプレイヤーのドル箱路線にぴったりと新しい路線をバッティングさせて客を奪い、プレイヤー同士が笑いながらやり取りする、そんな想像が頭に浮かびました。

このような談笑が起こるようにするには、以下の機能が必要と考えました。

* 前作と同様、自由に線路を敷ける
* 並走路線を作って客を奪えるよう、他の路線と非常に近い距離であっても制限なく敷けるようにする
* 妨害工作に報復できるよう、いつでも路線を拡張（延伸）できるようにする
* 並走路線建設時など、鉄道空白地帯に駅を作れるよう好きな場所に駅を作れる
* 新しく駅を作られたことに対抗して同じような位置に駅が作れるよう、駅は後からでも好きなときに追加できるようにする
* 機動力のある電車を投入して逆転できるよう、遅い電車をアップグレードして早い電車にできるようにする
* 電車の運行状況を見て通勤客が路線を選べるよう、距離だけでなく所要時間も考慮して経路決定するようにする

色々な機能が出てきました。でも私は思い描いたぼんやりとした構想が具体化したと感じ、よし、実装するぞと心とやる気がメラメラと燃え出しました。と、同時にちょっと待ったという心の声がしました。前作をリリースしたときのプレイヤーの反応を思い出しました。

# 自由は人を困らせる

ゲームの自由度が高いという言葉は褒め言葉として使われることが多いのではないでしょうか。ゲーム制作者にとっても魅力的な要素ではないでしょうか。「実装するのが大変だったけど、頑張ってプレイヤーが思い思いに遊べるようにしました！」なんて作者の声もよくあるのではないでしょうか。すべてを頭ごなしに否定する訳ではないのですが、 私はこの「自由度の高さ」は諸刃の剣だと思っています。

というのは、前作を公開した直後、「何をすれば良いのか分からない」「どうすればいいの？」という声を沢山いただいたからです。これは操作が難しいというより、「自由すぎて何を目的にして良いのかが見えなかった」ことによるもの──背景の説明が足りなかったことが原因──ですが、そうか、「自由にしていい」と言われたとき、人は「じゃあ、何を考えたらいいの？」と迷ってしまうのだと感じました。前作は住宅と会社がポツンとあるマップにプレイヤーが自由に線路を敷くという仕様でした。制作者である私は「直行するようにしようかな、環状線にしようかな」と色々思いを馳せてしまうのですが、プレイヤーは「好きにしてって言われても、何をすればいいの」と感じてしまったのです。それはそうですよね。そもそもなんで線路を敷かないといけないのか背景が分からないし、この先どういう問題が起こってくるのかも分からない。そんな状況で好きにしてと言われても困ってしまいますよね。だから、ただ「自由に作れます」だけでは不十分と考えました。

# 自由と分かりやすさの両立

分かりやすいかを気にしつつ、線路の敷設機能の設計に着手します。

まずはプレイヤーになぞってもらって線路を位置を決めてもらいます。

![](/images/railway-screenshot1.png)
*線路の敷設ステップ1: 線路をなぞって敷く。後々住宅が建て込んでくるため、うまく家のそばを通すのがポイントです。*

次に駅の場所を決めてもらいます。プレイヤーの操作の手間を減らすため、線路の始点と終点には自動で駅で作られるようにし、途中駅をどこにするかを決めてもらうようにしました。これは線路の端を駅とするか自由にさせても──行き止まりの線路に向かう経路が存在してもよいとしても──、行き止まりに向かって電車が走ったとしても通勤客の輸送に関係がなく、ゲームとして意味をなさないからです。したがって、ゲームとして必要な始点・終点駅の駅は自動で設置されるようにし、プレイヤーが入力しなければならない対象を途中駅だけに絞りました。

![](/images/railway-screenshot2.png)
*線路の敷設ステップ2: 途中駅をタップで追加。ここで駅数を絞るか増やすかが戦略の分かれ目になります。*

最後に電車の台数を決めてもらいます。電車の台数は数値で入力させる必要があり、入力操作に負担をかけてしまいます。そこで、少しでも操作の手間を下げるためにオススメの台数を初期値として設定されるようにしました。オススメの台数は敷いた線路の長さからに比例させるようにしています。オススメと表記することで、目安が分からないプレイヤーを困らせないようにもしています。電車の初期位置は自動で決めるようにしました。等間隔になるよう配置させてます。これは後のテストプレイで電車の位置をつねに等間隔に保たないと輸送に滞りが発生してしまうことが分かったことによる措置です。仮にプレイヤーが自由に配置したとしてもデメリットはあれどメリットがなかったため、自動で配置するようにしました。

ここで、電車の性能を上げて輸送力を上げるアイデアは実装を見送りました。というのは後々問題となった「電車の位置を等間隔に保たないと輸送が滞ってしまう」ことに対応すると、せっかく電車の機動力を高めても、結局待機が発生して速く移動した意味がなくなってしまったからです。なので、電車の台数を増やすという見た目にも分かりやすい操作で輸送力の改善ができるようにしました。

![](/images/railway-screenshot3.png)
*線路の敷設ステップ3: 電車の台数決め*

# どのプレイヤーのために作るかという選択

少しでも分かりやすいよう対策を講じる。それでも戦略を練って対戦するというコンセプトのため、ある一定の複雑さは避けて通れない。私は不安になりました。もしも誰も遊んでくれなかったらどうしようと。考えてもあがいても不安は拭えません。しかし、私には一つ大きな自信がありました。それは複雑ゆえ敬遠されることが少なくなかった前作でも、いわゆる「ガチ勢」という人たちが攻略法を語り合いながら、生放送で繰り返し遊んでくれたことです。全体の中で数は決して多くないけれど、鉄道を敷いて通勤客を運ぶというテーマを受け入れてくれる人たちが確かにいました。だから不安になった私は自分に言い聞かせました。「**きっとこのゲームの楽しさを分かってくれる人はいるはず**」だと。万人に好かれるようなゲームにはなれないけど、同好の士にはたまらない濃いゲームを作ろうと決意しました。

# 当時を振り返ってみて

鉄道の敷設機能が思ったより複雑で、プレイヤー操作も多くなりそうと分かったときの不安はとても大きかったです。努力が報われないかもしれないという不確かさのもとで、自分が経験したレベルにないくらい複雑な実装作業を完遂するということは、非常にハードルが高かったです。でも、前作で熱中してくれた人たちがいたという記憶が、折れそうになる私の心を強く支えてくれました。

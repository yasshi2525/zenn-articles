<!doctype html>
<!-- Generated by akashic-cli-export-html@1.9.20. -->
<!-- Options: {"strip":true,"hashFilename":true,"minify":true,"bundle":true,"magnify":true} -->
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>game</title>
<script>

	((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).engineFilesV3_10_1=e()})(this,function(){var P,x={},t={};function E(){return P||(P=1,Object.defineProperty(t,"__esModule",{value:!0}),t.PSEUDO_INFINITE_AGE=t.DEFAULT_POLLING_TICK_THRESHOLD=t.DEFAULT_JUMP_IGNORE_THRESHOLD=t.DEFAULT_JUMP_TRY_THRESHOLD=t.DEFAULT_SKIP_THRESHOLD=t.DEFAULT_SKIP_TICKS_AT_ONCE=t.DEFAULT_DELAY_IGNORE_THRESHOLD=void 0,t.DEFAULT_DELAY_IGNORE_THRESHOLD=6,t.DEFAULT_SKIP_TICKS_AT_ONCE=100,t.DEFAULT_SKIP_THRESHOLD=100,t.DEFAULT_JUMP_TRY_THRESHOLD=3e4,t.DEFAULT_JUMP_IGNORE_THRESHOLD=15e3,t.DEFAULT_POLLING_TICK_THRESHOLD=1e4,t.PSEUDO_INFINITE_AGE=189216e4),t}function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var i,r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,"symbol"==typeof(i=(t=>{if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return String(t);if("object"!=typeof(e=e.call(t,"string")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")})(o.key))?i:String(i),o)}}function M(t,e,i){e&&k(t.prototype,e),i&&k(t,i),Object.defineProperty(t,"prototype",{writable:!1})}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function L(t,e){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function R(i){var r=(()=>{if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}})();return function(){var t,e=s(i),e=(t=r?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(!t||"object"!=typeof t&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=e))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}}function i(){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=((t,e)=>{for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t})(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:i):r.value}).apply(this,arguments)}var Tt,At,wt,St,bt,e={},C={},I={},F={},Pt={},xt={},Et={},Ot={},kt={},Mt={};var D,j,G,U,B={},H={},N={},W={},V={};function X(){var n;return U||(U=1,Object.defineProperty(W,"__esModule",{value:!0}),W.Trigger=void 0,G||(G=1,Object.defineProperty(V,"__esModule",{value:!0}),V.isPromise=void 0,V.isPromise=function(t){return null!=t&&("object"===dt(t)||"function"==typeof t)&&"function"==typeof t.then}),n=V,M(t,[{key:"add",value:function(t,e){"function"==typeof t?this._addHandler({func:t,owner:e,once:!1,name:void 0,filter:void 0}):(e="number"==typeof t.index?t.index:void 0,this._addHandler({func:t.func,owner:t.owner,once:!1,name:t.name,filter:t.filter},e)),this.length=this._handlers.length}},{key:"addOnce",value:function(t,e){"function"==typeof t?this._addHandler({func:t,owner:e,once:!0,name:void 0,filter:void 0}):(e="number"==typeof t.index?t.index:void 0,this._addHandler({func:t.func,owner:t.owner,once:!0,name:t.name,filter:t.filter},e)),this.length=this._handlers.length}},{key:"handle",value:function(t,e,i){this.add(e?{owner:t,func:e,name:i}:{func:t})}},{key:"fire",value:function(t){if(this._handlers&&this._handlers.length){for(var e=this._handlers.concat(),i=0;i<e.length;i++){var r,o=e[i];o.filter&&!o.filter(o)||(r=o.func.call(o.owner,t),(!(0,n.isPromise)(r)&&r||o.once)&&this._handlers&&-1!==(r=this._handlers.indexOf(o))&&this._handlers.splice(r,1))}null!=this._handlers&&(this.length=this._handlers.length)}}},{key:"contains",value:function(t,e){for(var i="function"==typeof t?{func:t,owner:e}:t,r=0;r<this._handlers.length;r++)if(this._comparePartial(i,this._handlers[r]))return!0;return!1}},{key:"remove",value:function(t,e){for(var i="function"==typeof t?{func:t,owner:e}:t,r=0;r<this._handlers.length;r++){var o=this._handlers[r];if(i.func===o.func&&i.owner===o.owner&&i.name===o.name&&i.filter===o.filter)return this._handlers.splice(r,1),void--this.length}}},{key:"removeAll",value:function(t){var e=[];if(t)for(var i=0;i<this._handlers.length;i++){var r=this._handlers[i];this._comparePartial(t,r)||e.push(r)}this._handlers=e,this.length=this._handlers.length}},{key:"destroy",value:function(){this._handlers=null,this.length=null}},{key:"destroyed",value:function(){return null===this._handlers}},{key:"_addHandler",value:function(t,e){null==e?this._handlers.push({func:t.func,owner:t.owner,once:t.once,name:t.name,filter:t.filter}):this._handlers.splice(e,0,{func:t.func,owner:t.owner,once:t.once,name:t.name,filter:t.filter})}},{key:"_comparePartial",value:function(t,e){return!(void 0!==t.func&&t.func!==e.func||void 0!==t.owner&&t.owner!==e.owner||void 0!==t.name&&t.name!==e.name||void 0!==t.filter&&t.filter!==e.filter)}}]),W.Trigger=t),W;function t(){O(this,t),this._handlers=[],this.length=0}}var z,q,Y={};function K(){var t;return z||(z=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.ChainTrigger=void 0,t=(t=>{var e=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t);var o=R(n);function n(t,e,i){var r;return O(this,n),(r=o.call(this)).chain=t,r.filter=null!=e?e:null,r.filterOwner=i,r._isActivated=!1,r}return M(n,[{key:"add",value:function(t,e){i(s(n.prototype),"add",this).call(this,t,e),this._isActivated||(this.chain.add(this._onChainTriggerFired,this),this._isActivated=!0)}},{key:"addOnce",value:function(t,e){i(s(n.prototype),"addOnce",this).call(this,t,e),this._isActivated||(this.chain.add(this._onChainTriggerFired,this),this._isActivated=!0)}},{key:"remove",value:function(t,e){i(s(n.prototype),"remove",this).call(this,t,e),0===this.length&&this._isActivated&&(this.chain.remove(this._onChainTriggerFired,this),this._isActivated=!1)}},{key:"removeAll",value:function(t){i(s(n.prototype),"removeAll",this).call(this,t),0===this.length&&this._isActivated&&(this.chain.remove(this._onChainTriggerFired,this),this._isActivated=!1)}},{key:"destroy",value:function(){i(s(n.prototype),"destroy",this).call(this),this.chain.remove(this._onChainTriggerFired,this),this.filter=null,this.filterOwner=null,this._isActivated=!1}},{key:"_onChainTriggerFired",value:function(t){this.filter&&!this.filter.call(this.filterOwner,t)||this.fire(t)}}]),n})(X().Trigger),Y.ChainTrigger=t),Y}function pt(){return q||(q=1,r=(t=B)&&B.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var o=Object.getOwnPropertyDescriptor(e,i);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,o)}:function(t,e,i,r){t[r=void 0===r?i:r]=e[i]}),e=B&&B.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||r(e,t,i)},Object.defineProperty(t,"__esModule",{value:!0}),e((D||(D=1,Object.defineProperty(H,"__esModule",{value:!0})),H),t),e((j||(j=1,Object.defineProperty(N,"__esModule",{value:!0})),N),t),e(X(),t),e(K(),t)),B;var t,r,e}var $,J,Z,Q,tt,et,it,st,at,ht,ut,ct,lt,Lt,Rt,Ct,It,Ft,Dt,jt,Gt,Ut,Bt,Ht,Nt,Wt,Vt,Xt,zt,qt,Yt,Kt,$t,Jt,Zt,Qt,te,ee,ie,re,oe,ne,se={},ae={},he={},ue={},ce={},le={},de={},pe={},fe={},_e={},ye={},ge={},me={},ve={},Te={},Ae={},we={},Se={},be={},Pe={},xe={},Ee={},Oe={},ke={},Me={},Le={},Re={},Ce={},Ie={},Fe={},De={},je={},Ge={},Ue={},Be={},He={},Ne={},We={},Ve={},Xe={},ze={},qe={};function Ye(){return ne||(ne=1,n=(t=se)&&se.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var o=Object.getOwnPropertyDescriptor(e,i);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,o)}:function(t,e,i,r){t[r=void 0===r?i:r]=e[i]}),s=se&&se.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)},Object.defineProperty(t,"__esModule",{value:!0}),s(($||($=1,Object.defineProperty(ae,"__esModule",{value:!0})),ae),t),s((J||(J=1,Object.defineProperty(he,"__esModule",{value:!0})),he),t),s((Z||(Z=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.CompositeOperation=void 0,(o=o||(ue.CompositeOperation=o={}))[o.SourceOver=0]="SourceOver",o[o.SourceAtop=1]="SourceAtop",o[o.Lighter=2]="Lighter",o[o.Copy=3]="Copy",o[o.ExperimentalSourceIn=4]="ExperimentalSourceIn",o[o.ExperimentalSourceOut=5]="ExperimentalSourceOut",o[o.ExperimentalDestinationAtop=6]="ExperimentalDestinationAtop",o[o.ExperimentalDestinationIn=7]="ExperimentalDestinationIn",o[o.DestinationOut=8]="DestinationOut",o[o.DestinationOver=9]="DestinationOver",o[o.Xor=10]="Xor",o[o.Difference=11]="Difference",o[o.Saturation=12]="Saturation"),ue),t),s((Q||(Q=1,Object.defineProperty(ce,"__esModule",{value:!0})),ce),t),s((tt||(tt=1,Object.defineProperty(le,"__esModule",{value:!0})),le),t),s((et||(et=1,Object.defineProperty(de,"__esModule",{value:!0})),de),t),s((it||(it=1,Object.defineProperty(pe,"__esModule",{value:!0})),pe),t),s((st||(st=1,Object.defineProperty(fe,"__esModule",{value:!0})),fe),t),s((at||(at=1,Object.defineProperty(_e,"__esModule",{value:!0})),_e),t),s((ht||(ht=1,Object.defineProperty(ye,"__esModule",{value:!0})),ye),t),s((ut||(ut=1,Object.defineProperty(ge,"__esModule",{value:!0})),ge),t),s((ct||(ct=1,Object.defineProperty(me,"__esModule",{value:!0})),me),t),s((lt||(lt=1,Object.defineProperty(ve,"__esModule",{value:!0})),ve),t),s((Lt||(Lt=1,Object.defineProperty(Te,"__esModule",{value:!0})),Te),t),s((Rt||(Rt=1,Object.defineProperty(Ae,"__esModule",{value:!0})),Ae),t),s((Ct||(Ct=1,Object.defineProperty(we,"__esModule",{value:!0})),we),t),s((It||(It=1,Object.defineProperty(Se,"__esModule",{value:!0})),Se),t),s((Ft||(Ft=1,Object.defineProperty(be,"__esModule",{value:!0})),be),t),s((Dt||(Dt=1,Object.defineProperty(Pe,"__esModule",{value:!0})),Pe),t),s((jt||(jt=1,Object.defineProperty(xe,"__esModule",{value:!0})),xe),t),s((Gt||(Gt=1,Object.defineProperty(Ee,"__esModule",{value:!0})),Ee),t),s((Ut||(Ut=1,Object.defineProperty(Oe,"__esModule",{value:!0})),Oe),t),s((Bt||(Bt=1,Object.defineProperty(ke,"__esModule",{value:!0})),ke),t),s((Ht||(Ht=1,Object.defineProperty(Me,"__esModule",{value:!0})),Me),t),s((Nt||(Nt=1,Object.defineProperty(Le,"__esModule",{value:!0})),Le),t),s((Wt||(Wt=1,Object.defineProperty(Re,"__esModule",{value:!0})),Re),t),s((Vt||(Vt=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.AssetLoadErrorType=void 0,(o=r||(Ce.AssetLoadErrorType=r={}))[o.Unspecified=0]="Unspecified",o[o.RetryLimitExceeded=1]="RetryLimitExceeded",o[o.NetworkError=2]="NetworkError",o[o.ClientError=3]="ClientError",o[o.ServerError=4]="ServerError"),Ce),t),s((Xt||(Xt=1,Object.defineProperty(Ie,"__esModule",{value:!0})),Ie),t),s((zt||(zt=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.FontWeight=void 0,(r=e||(Fe.FontWeight=e={}))[r.Normal=0]="Normal",r[r.Bold=1]="Bold"),Fe),t),s((qt||(qt=1,Object.defineProperty(De,"__esModule",{value:!0}),De.FontFamily=void 0,(o=i||(De.FontFamily=i={}))[o.SansSerif=0]="SansSerif",o[o.Serif=1]="Serif",o[o.Monospace=2]="Monospace"),De),t),s((Yt||(Yt=1,Object.defineProperty(je,"__esModule",{value:!0})),je),t),s((Kt||(Kt=1,Object.defineProperty(Ge,"__esModule",{value:!0})),Ge),t),s(($t||($t=1,Object.defineProperty(Ue,"__esModule",{value:!0})),Ue),t),s((Jt||(Jt=1,Object.defineProperty(Be,"__esModule",{value:!0})),Be),t),s((Zt||(Zt=1,Object.defineProperty(He,"__esModule",{value:!0})),He),t),s((Qt||(Qt=1,Object.defineProperty(Ne,"__esModule",{value:!0})),Ne),t),s((te||(te=1,Object.defineProperty(We,"__esModule",{value:!0})),We),t),s((ee||(ee=1,Object.defineProperty(Ve,"__esModule",{value:!0})),Ve),t),s((ie||(ie=1,Object.defineProperty(Xe,"__esModule",{value:!0})),Xe),t),s((re||(re=1,Object.defineProperty(ze,"__esModule",{value:!0})),ze),t),s((oe||(oe=1,Object.defineProperty(qe,"__esModule",{value:!0})),qe),t)),se;var t,e,i,r,o,n,s}var Ke,l={},$e={};function Je(){var i;return Ke||(Ke=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.AudioPlayContext=void 0,i=pt(),Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},enumerable:!1,configurable:!0}),t.prototype.play=function(){this._player.play(this.asset)},t.prototype.stop=function(){this._player.stop()},t.prototype.changeVolume=function(t){this._volume=t,this._player.changeVolume(t)},t.prototype._startSuppress=function(){"music"!==this._systemId?this.stop():this._player.changeVolume(0)},t.prototype._endSuppress=function(){"music"===this._systemId&&this._player.changeVolume(this._volume)},t.prototype._createAudioPlayer=function(){var t=this._resourceFactory.createAudioPlayer(this._system);return t.changeVolume(this._volume),t.onPlay.add(this.onPlay.fire,this.onPlay),t.onStop.add(this.onStop.fire,this.onStop),t},$e.AudioPlayContext=t),$e;function t(t){var e;this.onPlay=new i.Trigger,this.onStop=new i.Trigger,this.asset=t.asset,this._system=t.system,this._resourceFactory=t.resourceFactory,this._volume=null!=(e=t.volume)?e:1,this._id=t.id,this._systemId=t.systemId,this._player=this._createAudioPlayer(),this.asset.onDestroyed.addOnce(this.stop,this)}}var Ze,Qe={};function ft(){return Ze||(Ze=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.ExceptionFactory=void 0,(t=t||(Qe.ExceptionFactory=t={})).createAssertionError=function(t,e){t=new Error(t);return t.name="AssertionError",t.cause=e,t},t.createTypeMismatchError=function(t,e,i,r){var o="Type mismatch on "+t+", expected type is "+e;if(2<arguments.length)try{var n=void 0;o+=", actual type is "+(40<(n=i&&i.constructor&&i.constructor.name?i.constructor.name:dt(i)).length?n.substr(0,40):n)}catch(t){}o+=".";n=new Error(o);return n.name="TypeMismatchError",n.cause=r,n.expected=e,n.actual=i,n},t.createAssetLoadError=function(t,e,i,r){void 0===e&&(e=!0);t=new Error(t);return t.name="AssetLoadError",t.cause=r,t.retriable=e,t},t.createRequestAssetLoadError=function(t,e,i){t=new Error(t);return t.name="RequestAssetLoadError",t.detail=e,t.cause=i,t}),Qe;var t}var ti,ei,ii={};function ri(){var t;return ti||(ti=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.WeakRefKVS=void 0,i.prototype.deref=function(){return this._target},t=i,e.prototype.set=function(t,e){this._refMap[t]&&this.delete(t),this._refMap[t]=new this._weakRefClass(e)},e.prototype.get=function(t){t=this._refMap[t];if(t)return t.deref()},e.prototype.has=function(t){return t in this._refMap},e.prototype.delete=function(t){delete this._refMap[t]},e.prototype.keys=function(){return Object.keys(this._refMap)},e.prototype.clear=function(){this._refMap=Object.create(null)},e.prototype.clean=function(){for(var t=0,e=Object.entries(this._refMap);t<e.length;t++){var i=e[t],r=i[0];void 0===i[1].deref()&&this.delete(r)}},ii.WeakRefKVS=e),ii;function e(){this._weakRefClass="undefined"!=typeof WeakRef?WeakRef:t,this._refMap=Object.create(null)}function i(t){this._target=t}}function oi(){var r,t,e,i,o,n,s,a;return ei||(ei=1,t=l&&l.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(l,"__esModule",{value:!0}),l.SoundAudioSystem=l.MusicAudioSystem=l.AudioSystem=void 0,e=Je(),i=ft(),o=ri(),Object.defineProperty(h.prototype,"volume",{get:function(){return this._volume},set:function(t){if(t<0||1<t||isNaN(t)||"number"!=typeof t)throw i.ExceptionFactory.createAssertionError("AudioSystem#volume: expected: 0.0-1.0, actual: "+t);this._volume=t,this._onVolumeChanged()},enumerable:!1,configurable:!0}),h.prototype.play=function(t){t=this.create(t);return t.play(),t},h.prototype.create=function(t){t=new e.AudioPlayContext({id:this._generateAudioPlayContextId(),resourceFactory:this._resourceFactory,asset:t,system:this,systemId:this.id,volume:1});return this._contextCount%this._contentMapCleaningFrequency==0&&this._contextMap.clean(),this._contextMap.set(t._id,t),t},h.prototype.stopAll=function(){for(var t=0,e=this._contextMap.keys();t<e.length;t++){var i=e[t],i=this._contextMap.get(i);null!=i&&i.stop()}this._contextMap.clean()},h.prototype.requestDestroy=function(t){this._destroyRequestedAssets[t.id]=t},h.prototype.cancelRequestDestroy=function(t){delete this._destroyRequestedAssets[t.id]},h.prototype.getDestroyRequestedAsset=function(t){return this._destroyRequestedAssets.hasOwnProperty(t)?this._destroyRequestedAssets[t]:null},h.prototype._reset=function(){this.stopAll(),this._volume=1,this._destroyRequestedAssets={},this._muted=!1,this._suppressed=!1,this._explicitMuted=!1},h.prototype._setMuted=function(t){var e=this._explicitMuted;this._explicitMuted=!!t,this._explicitMuted!==e&&(this._updateMuted(),this._onMutedChanged())},h.prototype._setPlaybackRate=function(t){if(t<0||isNaN(t)||"number"!=typeof t)throw i.ExceptionFactory.createAssertionError("AudioSystem#playbackRate: expected: greater or equal to 0.0, actual: "+t);this._suppressed=1!==t,this._updateMuted(),this._onPlaybackRateChanged()},h.prototype._updateMuted=function(){this._muted=this._explicitMuted||this._suppressed},h.prototype._generateAudioPlayContextId=function(){return"".concat(this.id,"-").concat(this._contextCount++)},h.prototype._startSuppress=function(){this._setPlaybackRate(100);for(var t=0,e=this._contextMap.keys();t<e.length;t++){var i=e[t],i=this._contextMap.get(i);null!=i&&i._startSuppress()}},h.prototype._endSuppress=function(){this._setPlaybackRate(1);for(var t=0,e=this._contextMap.keys();t<e.length;t++){var i=e[t],i=this._contextMap.get(i);null!=i&&i._endSuppress()}},l.AudioSystem=n=h,t(u,s=n),Object.defineProperty(u.prototype,"player",{get:function(){return this._player||(this._player=this._resourceFactory.createAudioPlayer(this),this._player.onPlay.add(this._handlePlay,this),this._player.onStop.add(this._handleStop,this)),this._player},set:function(t){this._player=t},enumerable:!1,configurable:!0}),u.prototype.findPlayers=function(t){return this.player.currentAudio&&this.player.currentAudio.id===t.id?[this.player]:[]},u.prototype.createPlayer=function(){return this.player},u.prototype.stopAll=function(){s.prototype.stopAll.call(this),this._player&&this._player.stop()},u.prototype._reset=function(){s.prototype._reset.call(this),this._player&&(this._player.onPlay.remove(this._handlePlay,this),this._player.onStop.remove(this._handleStop,this)),this._player=void 0},u.prototype._onVolumeChanged=function(){this.player._notifyVolumeChanged()},u.prototype._onMutedChanged=function(){this.player._changeMuted(this._muted)},u.prototype._onPlaybackRateChanged=function(){this.player._changeMuted(this._muted)},u.prototype._handlePlay=function(t){if(t.player!==this._player)throw i.ExceptionFactory.createAssertionError("MusicAudioSystem#_onPlayerPlayed: unexpected audio player")},u.prototype._handleStop=function(t){this._destroyRequestedAssets[t.audio.id]&&(delete this._destroyRequestedAssets[t.audio.id],t.audio.destroy())},l.MusicAudioSystem=u,t(c,a=n),c.prototype.createPlayer=function(){var t=this._resourceFactory.createAudioPlayer(this);return t.canHandleStopped()&&this.players.push(t),t.onPlay.add(this._handlePlay,this),t.onStop.add(this._handleStop,this),t},c.prototype.findPlayers=function(t){for(var e=[],i=0;i<this.players.length;++i){var r=this.players[i].currentAudio;r&&r.id===t.id&&e.push(this.players[i])}return e},c.prototype.stopAll=function(){a.prototype.stopAll.call(this);for(var t=this.players.concat(),e=0;e<t.length;++e)t[e].stop()},c.prototype._reset=function(){a.prototype._reset.call(this);for(var t=0;t<this.players.length;++t){var e=this.players[t];e.onPlay.remove(this._handlePlay,this),e.onStop.remove(this._handleStop,this)}this.players=[]},c.prototype._onMutedChanged=function(){for(var t=this.players,e=0;e<t.length;++e)t[e]._changeMuted(this._muted)},c.prototype._onPlaybackRateChanged=function(){var t=this.players;if(this._suppressed)for(var e=0;e<t.length;++e)t[e]._changeMuted(!0)},c.prototype._handlePlay=function(t){},c.prototype._handleStop=function(t){var e=this.players.indexOf(t.player);e<0||(t.player.onStop.remove(this._handleStop,this),this.players.splice(e,1),this._destroyRequestedAssets[t.audio.id]&&(delete this._destroyRequestedAssets[t.audio.id],t.audio.destroy()))},c.prototype._onVolumeChanged=function(){for(var t=0;t<this.players.length;++t)this.players[t]._notifyVolumeChanged()},l.SoundAudioSystem=c),l;function h(t){this.id=t.id,this._volume=t.volume||1,this._destroyRequestedAssets={},this._explicitMuted=t.muted||!1,this._suppressed=!1,this._muted=!1,this._contextMap=new o.WeakRefKVS,this._contextCount=0,this._resourceFactory=t.resourceFactory,this._updateMuted()}function u(t){t=s.call(this,t)||this;return t._contentMapCleaningFrequency=5,t._player=void 0,t}function c(t){t=a.call(this,t)||this;return t._contentMapCleaningFrequency=50,t.players=[],t}}var ni,si,ai={},hi={};function ui(){return ni||(ni=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.PathUtil=void 0,(h=t||(hi.PathUtil=t={})).resolvePath=function(t,e){function i(t){t=t.split("/");return""===t[t.length-1]&&t.pop(),t}if(""===e)return t;for(var t=h.splitPath(t),r=i(t.path).concat(i(e)),o=[],n=0;n<r.length;++n){var s=r[n];switch(s){case"..":var a=o.pop();if(void 0===a||""===a||"."===a)throw new Error("PathUtil.resolvePath: invalid arguments");break;case".":0===o.length&&o.push(".");break;case"":o=[""];break;default:o.push(s)}}return t.host+o.join("/")},h.resolveDirname=function(t){var e=t.lastIndexOf("/");return-1===e?t:t.substr(0,e)},h.resolveExtname=function(t){for(var e=t.length-1;0<=e;--e){var i=t.charAt(e);if("."===i)return t.substr(e);if("/"===i)return""}return""},h.makeNodeModulePaths=function(t){for(var e,i=h.splitPath(t),r=i.host,o=(t="/"===(t=i.path)[t.length-1]?t.slice(0,t.length-1):t).split("/"),i=o.indexOf("node_modules"),n=0<i?i-1:0,s=[],a=o.length-1;n<=a;--a)"node_modules"!==o[a]&&((e=o.slice(0,a+1)).push("node_modules"),e=e.join("/"),s.push(r+e));return s},h.splitPath=function(t){var e="",i=t.indexOf("//");return 0<=i?t=0<=(i=t.indexOf("/",i+2))?(e=t.slice(0,i),t.slice(i)):(e=t,"/"):e="",{host:e,path:t}}),hi;var h,t}function ci(){var h;return si||(si=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.Module=void 0,h=ui(),ai.Module=function(t){function e(t){return s(t,i)}var i=this,r=t.path,o=h.PathUtil.resolveDirname(r),n=t.virtualPath,n=n?h.PathUtil.resolveDirname(n):void 0,s=t.requireFunc,a=t.resolveFunc;this._runtimeValue=Object.create(t.runtimeValueBase,{filename:{value:r,enumerable:!0},dirname:{value:o,enumerable:!0},module:{value:this,writable:!0,enumerable:!0,configurable:!0}}),this.id=t.id,this.filename=t.path,this.exports={},this.parent=null,this.loaded=!1,this.children=[],this.paths=n?h.PathUtil.makeNodeModulePaths(n):[],this._dirname=o,this._virtualDirname=n;e.resolve=function(t){return a(t,i)},this.require=e}),ai}var li,di={};function pi(){return li||(li=1,Object.defineProperty(di,"__esModule",{value:!0}),di.ShaderProgram=void 0,di.ShaderProgram=function(t){this.fragmentShader=t.fragmentShader,this.uniforms=t.uniforms}),di}var fi,_i={};function yi(){return fi||(fi=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.VideoSystem=void 0,_i.VideoSystem=function(){}),_i}var gi,o={},y={},a={};function mi(){var r,t,e,i,u,c;return gi||(gi=1,t=a&&a.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(a,"__esModule",{value:!0}),a.SeedEvent=a.PlayerInfoEvent=a.TimestampEvent=a.LeaveEvent=a.JoinEvent=a.OperationEvent=a.MessageEvent=a.PointMoveEventBase=a.PointUpEventBase=a.PointDownEventBase=a.PointEventBase=void 0,a.PointEventBase=e=function(t,e,i,r,o,n,s){this.eventFlags=n,this.local=!!o,this.player=r,this.pointerId=t,this.target=e,this.point=i,this.button=null!=s?s:0},t(o,i=e),a.PointDownEventBase=o,t(n,u=e),a.PointUpEventBase=n,t(s,c=e),a.PointMoveEventBase=s,a.MessageEvent=function(t,e,i,r){this.type="message",this.eventFlags=r,this.local=!!i,this.player=e,this.data=t},a.OperationEvent=function(t,e,i,r,o){this.type="operation",this.eventFlags=o,this.local=!!r,this.player=i,this.code=t,this.data=e},a.JoinEvent=function(t,e){this.type="join",this.eventFlags=e,this.player=t},a.LeaveEvent=function(t,e){this.type="leave",this.eventFlags=e,this.player=t},a.TimestampEvent=function(t,e,i){this.type="timestamp",this.eventFlags=i,this.player=e,this.timestamp=t},a.PlayerInfoEvent=function(t,e){this.type="player-info",this.eventFlags=e,this.player=t},a.SeedEvent=function(t,e){this.type="seed",this.eventFlags=e,this.generator=t}),a;function o(){var t=null!==i&&i.apply(this,arguments)||this;return t.type="point-down",t}function n(t,e,i,r,o,n,s,a,h){t=u.call(this,t,e,i,n,s,a,h)||this;return t.type="point-up",t.prevDelta=r,t.startDelta=o,t}function s(t,e,i,r,o,n,s,a,h){t=c.call(this,t,e,i,n,s,a,h)||this;return t.type="point-move",t.prevDelta=r,t.startDelta=o,t}}var vi,Ti={};function Ai(){return vi||(vi=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.PlainMatrix=void 0,t.prototype.update=function(t,e,i,r,o,n,s,a,h){var u,c,l,d;null!=a&&null!=h?(l=o*Math.PI/180,u=Math.cos(l),c=(l=Math.sin(l))*i,l=l*r,d=u*r,a=a*t,h=h*e,this._matrix[0]=u=u*i,this._matrix[1]=c,this._matrix[2]=-l,this._matrix[3]=d,this._matrix[4]=-u*a+l*h+n,this._matrix[5]=-c*a-d*h+s):this._updateWithoutAnchor(t,e,i,r,o,n,s)},t.prototype._updateWithoutAnchor=function(t,e,i,r,o,n,s){var o=o*Math.PI/180,a=Math.cos(o),o=Math.sin(o),h=a*i,i=o*i,o=o*r,a=a*r,r=t/2,t=e/2;this._matrix[0]=h,this._matrix[1]=i,this._matrix[2]=-o,this._matrix[3]=a,this._matrix[4]=-h*r+o*t+r+n,this._matrix[5]=-i*r-a*t+t+s},t.prototype.updateByInverse=function(t,e,i,r,o,n,s,a,h){var u,c,l,d;null!=a&&null!=h?(l=o*Math.PI/180,u=Math.cos(l),c=(l=Math.sin(l))/r,l=l/i,d=u/r,a=a*t,h=h*e,this._matrix[0]=u=u/i,this._matrix[1]=-c,this._matrix[2]=l,this._matrix[3]=d,this._matrix[4]=-u*n-l*s+a,this._matrix[5]=c*n-d*s+h):this._updateByInverseWithoutAnchor(t,e,i,r,o,n,s)},t.prototype._updateByInverseWithoutAnchor=function(t,e,i,r,o,n,s){var o=o*Math.PI/180,a=Math.cos(o),o=Math.sin(o),h=a/i,u=o/r,o=o/i,i=a/r,a=t/2,r=e/2;this._matrix[0]=h,this._matrix[1]=-u,this._matrix[2]=o,this._matrix[3]=i,this._matrix[4]=-h*(a+n)-o*(r+s)+a,this._matrix[5]=u*(a+n)-i*(r+s)+r},t.prototype.multiply=function(t){var e=this._matrix,t=t._matrix,i=e[0],r=e[1],o=e[2],n=e[3];e[0]=i*t[0]+o*t[1],e[1]=r*t[0]+n*t[1],e[2]=i*t[2]+o*t[3],e[3]=r*t[2]+n*t[3],e[4]=i*t[4]+o*t[5]+e[4],e[5]=r*t[4]+n*t[5]+e[5]},t.prototype.multiplyLeft=function(t){var t=t._matrix,e=this._matrix,i=e[0],r=e[2],o=e[4];e[0]=t[0]*i+t[2]*e[1],e[1]=t[1]*i+t[3]*e[1],e[2]=t[0]*r+t[2]*e[3],e[3]=t[1]*r+t[3]*e[3],e[4]=t[0]*o+t[2]*e[5]+t[4],e[5]=t[1]*o+t[3]*e[5]+t[5]},t.prototype.multiplyNew=function(t){var e=this.clone();return e.multiply(t),e},t.prototype.reset=function(t,e){this._matrix[0]=1,this._matrix[1]=0,this._matrix[2]=0,this._matrix[3]=1,this._matrix[4]=t||0,this._matrix[5]=e||0},t.prototype.clone=function(){return new t(this)},t.prototype.multiplyInverseForPoint=function(t){var e=this._matrix,i=1/(e[0]*e[3]+e[2]*-e[1]);return{x:e[3]*i*t.x+-e[2]*i*t.y+(e[5]*e[2]-e[4]*e[3])*i,y:e[0]*i*t.y+-e[1]*i*t.x+(-e[5]*e[0]+e[4]*e[1])*i}},t.prototype.scale=function(t,e){var i=this._matrix;i[0]*=t,i[1]*=e,i[2]*=t,i[3]*=e,i[4]*=t,i[5]*=e},t.prototype.multiplyPoint=function(t){var e=this._matrix;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},Ti.PlainMatrix=t),Ti;function t(t,e,i,r,o,n,s){void 0===t?(this._modified=!1,this._matrix=[1,0,0,1,0,0]):"number"==typeof t?(this._modified=!1,this._matrix=new Array(6),this.update(t,e,i,r,o,0,0,n,s)):(this._modified=t._modified,this._matrix=[t._matrix[0],t._matrix[1],t._matrix[2],t._matrix[3],t._matrix[4],t._matrix[5]])}}var wi,Si={};function bi(){var i,t;return wi||(wi=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.Object2D=void 0,i=ft(),t=Ai(),e.prototype.moveTo=function(t,e){if("number"==typeof t&&"number"!=typeof e)throw i.ExceptionFactory.createAssertionError("Object2D#moveTo: arguments must be CommonOffset or pair of x and y as a number.");"number"==typeof t?(this.x=t,this.y=e):(this.x=t.x,this.y=t.y)},e.prototype.moveBy=function(t,e){this.x+=t,this.y+=e},e.prototype.resizeTo=function(t,e){if("number"==typeof t&&"number"!=typeof e)throw i.ExceptionFactory.createAssertionError("Object2D#resizeTo: arguments must be CommonSize or pair of width and height as a number.");"number"==typeof t?(this.width=t,this.height=e):(this.width=t.width,this.height=t.height)},e.prototype.resizeBy=function(t,e){this.width+=t,this.height+=e},e.prototype.scale=function(t){this.scaleX=t,this.scaleY=t},e.prototype.anchor=function(t,e){this.anchorX=t,this.anchorY=e},e.prototype.getMatrix=function(){if(this._matrix){if(!this._matrix._modified)return this._matrix}else this._matrix=new t.PlainMatrix;return this._updateMatrix(),this._matrix._modified=!1,this._matrix},e.prototype._updateMatrix=function(){this.angle||1!==this.scaleX||1!==this.scaleY||0!==this.anchorX||0!==this.anchorY?this._matrix.update(this.width,this.height,this.scaleX,this.scaleY,this.angle,this.x,this.y,this.anchorX,this.anchorY):this._matrix.reset(this.x,this.y)},Si.Object2D=e),Si;function e(t){t?(this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0,this.opacity=null!=t.opacity?t.opacity:1,this.scaleX=null!=t.scaleX?t.scaleX:1,this.scaleY=null!=t.scaleY?t.scaleY:1,this.angle=t.angle||0,this.compositeOperation=t.compositeOperation,this.anchorX=void 0===t.anchorX?0:t.anchorX,this.anchorY=void 0===t.anchorY?0:t.anchorY):(this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.scaleX=1,this.scaleY=1,this.angle=0,this.compositeOperation=void 0,this.anchorX=0,this.anchorY=0),this._matrix=void 0}}var Pi,xi,Ei,Oi={};function _t(){var t,i,e;return Pi||(Pi=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Util=void 0,t=Ye(),(i=Oi.Util={distance:function(t,e,i,r){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-r,2))},distanceBetweenOffsets:function(t,e){return i.distance(t.x,t.y,e.x,e.y)},distanceBetweenAreas:function(t,e){return i.distance(t.x+t.width/2,t.y+t.height/2,e.x+e.width/2,e.y+e.height/2)},charCodeAt:function(t,e){var i=t.charCodeAt(e);return 55296<=i&&i<=56319?i<<16|t.charCodeAt(e+1):56320<=i&&i<=57343?null:i},enumToSnakeCase:function(t,e){t=t[e];return t[0].toLowerCase()+t.slice(1).replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})},clamp:function(t,e,i){return Math.min(Math.max(t,e),i)}}).compositeOperationStringTable=((e={})[t.CompositeOperation.SourceOver]="source-over",e[t.CompositeOperation.SourceAtop]="source-atop",e[t.CompositeOperation.Lighter]="lighter",e[t.CompositeOperation.Copy]="copy",e[t.CompositeOperation.ExperimentalSourceIn]="experimental-source-in",e[t.CompositeOperation.ExperimentalSourceOut]="experimental-source-out",e[t.CompositeOperation.ExperimentalDestinationAtop]="experimental-destination-atop",e[t.CompositeOperation.ExperimentalDestinationIn]="experimental-destination-in",e[t.CompositeOperation.DestinationOut]="destination-out",e[t.CompositeOperation.DestinationOver]="destination-over",e[t.CompositeOperation.Xor]="xor",e[t.CompositeOperation.Difference]="difference",e[t.CompositeOperation.Saturation]="saturation",e)),Oi}function yt(){var r,t,e,i,o,n,s,a,h,u,c,l;return xi||(xi=1,t=y&&y.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(y,"__esModule",{value:!0}),y.E=y.PointMoveEvent=y.PointUpEvent=y.PointDownEvent=void 0,e=pt(),i=mi(),o=ft(),n=Ai(),s=bi(),a=_t(),h=i.PointDownEventBase,t(d,h),y.PointDownEvent=d,u=i.PointUpEventBase,t(p,u),y.PointUpEvent=p,c=i.PointMoveEventBase,t(f,c),y.PointMoveEvent=f,l=s.Object2D,t(_,l),Object.defineProperty(_.prototype,"onUpdate",{get:function(){return this._onUpdate||(this._onUpdate=new e.ChainTrigger(this.scene.onUpdate)),this._onUpdate},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onMessage",{get:function(){return this._onMessage||(this._onMessage=new e.ChainTrigger(this.scene.onMessage)),this._onMessage},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onPointDown",{get:function(){return this._onPointDown||(this._onPointDown=new e.ChainTrigger(this.scene.onPointDownCapture,this._isTargetOperation,this)),this._onPointDown},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onPointUp",{get:function(){return this._onPointUp||(this._onPointUp=new e.ChainTrigger(this.scene.onPointUpCapture,this._isTargetOperation,this)),this._onPointUp},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onPointMove",{get:function(){return this._onPointMove||(this._onPointMove=new e.ChainTrigger(this.scene.onPointMoveCapture,this._isTargetOperation,this)),this._onPointMove},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"touchable",{get:function(){return this._touchable},set:function(t){this._touchable!==t&&((this._touchable=t)?this._enableTouchPropagation():this._disableTouchPropagation())},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"update",{get:function(){return this.onUpdate},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"message",{get:function(){return this.onMessage},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"pointDown",{get:function(){return this.onPointDown},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"pointUp",{get:function(){return this.onPointUp},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"pointMove",{get:function(){return this.onPointMove},enumerable:!1,configurable:!0}),_.prototype.render=function(t,e){if(this.state&=-5,!(1&this.state))if(8&this.state){if(t.translate(this.x,this.y),this.renderSelf(t,e)&&this.children)for(var i=(n=this.children).length,r=0;r<i;++r)n[r].render(t,e);t.translate(-this.x,-this.y)}else{t.save(),this.angle||1!==this.scaleX||1!==this.scaleY||0!==this.anchorX||0!==this.anchorY?t.transform(this.getMatrix()._matrix):t.translate(this.x,this.y),1!==this.opacity&&t.opacity(this.opacity);var o=this.compositeOperation;if(void 0!==o&&t.setCompositeOperation("string"==typeof o?o:a.Util.compositeOperationStringTable[o]),void 0!==this.shaderProgram&&t.isSupportedShaderProgram()&&t.setShaderProgram(this.shaderProgram),this.renderSelf(t,e)&&this.children)for(var n=this.children,r=0;r<n.length;++r)n[r].render(t,e);t.restore()}},_.prototype.renderSelf=function(t,e){return!0},_.prototype.game=function(){return this.scene.game},_.prototype.append=function(t){this.insertBefore(t,void 0)},_.prototype.insertBefore=function(t,e){t.parent&&t.remove(),this.children||(this.children=[]),t.parent=this;var i=-1;void 0!==e&&-1<(i=this.children.indexOf(e))?this.children.splice(i,0,t):this.children.push(t),(t._touchable||t._hasTouchableChildren)&&(this._hasTouchableChildren=!0,this._enableTouchPropagation()),this.modified(!0)},_.prototype.remove=function(t){if(void 0!==t){var e=this.children?this.children.indexOf(t):-1;if(e<0)throw o.ExceptionFactory.createAssertionError("E#remove: invalid child");this.children[e].parent=void 0,this.children.splice(e,1),!t._touchable&&!t._hasTouchableChildren||this._findTouchableChildren(this)||(this._hasTouchableChildren=!1,this._disableTouchPropagation()),this.modified(!0)}else this.parent.remove(this)},_.prototype.destroy=function(){if(!this.destroyed()){if(this.parent&&this.remove(),this.children){for(var t=this.children.length-1;0<=t;--t)this.children[t].destroy();if(0!==this.children.length)throw o.ExceptionFactory.createAssertionError("E#destroy: can not destroy all children, "+this.children.length);this.children=void 0}this._onUpdate&&(this._onUpdate.destroy(),this._onUpdate=void 0),this._onMessage&&(this._onMessage.destroy(),this._onMessage=void 0),this._onPointDown&&(this._onPointDown.destroy(),this._onPointDown=void 0),this._onPointMove&&(this._onPointMove.destroy(),this._onPointMove=void 0),this._onPointUp&&(this._onPointUp.destroy(),this._onPointUp=void 0),this.scene.unregister(this)}},_.prototype.destroyed=function(){return void 0===this.scene},_.prototype.modified=function(t){this._matrix&&(this._matrix._modified=!0),this.angle||1!==this.scaleX||1!==this.scaleY||0!==this.anchorX||0!==this.anchorY||1!==this.opacity||void 0!==this.compositeOperation||void 0!==this.shaderProgram?this.state&=-9:this.state|=8,4&this.state||(this.state|=4,this.parent&&this.parent.modified(!0))},_.prototype.shouldFindChildrenByPoint=function(t){return!0},_.prototype.findPointSourceByPoint=function(t,e,i){if(!(1&this.state)){var r=(e=e?e.multiplyNew(this.getMatrix()):this.getMatrix().clone()).multiplyInverseForPoint(t);if(this._hasTouchableChildren||i&&this.children&&this.children.length){var o=this.children;if(this.shouldFindChildrenByPoint(r))for(var n=o.length-1;0<=n;--n){var s=o[n];if(i||s._touchable||s._hasTouchableChildren){s=s.findPointSourceByPoint(t,e,i);if(s)return s}}}return i||this._touchable?0<=r.x&&this.width>r.x&&0<=r.y&&this.height>r.y?{target:this,point:r}:void 0:void 0}},_.prototype.visible=function(){return 1!=(1&this.state)},_.prototype.show=function(){1&this.state&&(this.state&=-2,this.parent)&&this.parent.modified(!0)},_.prototype.hide=function(){1&this.state||(this.state|=1,this.parent&&this.parent.modified(!0))},_.prototype.calculateBoundingRect=function(){return this._calculateBoundingRect(void 0)},_.prototype.localToGlobal=function(t){for(var e=t,i=this;i instanceof _;i=i.parent)e=i.getMatrix().multiplyPoint(e);return e},_.prototype.globalToLocal=function(t){for(var e=new n.PlainMatrix,i=this;i instanceof _;i=i.parent)e.multiplyLeft(i.getMatrix());return e.multiplyInverseForPoint(t)},_.prototype._calculateMatrixTo=function(t){for(var e=new n.PlainMatrix,i=this;i instanceof _&&i!==t;i=i.parent)e.multiplyLeft(i.getMatrix());return e},_.prototype._findLowestCommonAncestorWith=function(t){for(var e={},i=this;i instanceof _;i=i.parent)e[i.id]=!0;for(var r=t;r instanceof _&&!e.hasOwnProperty(r.id);r=r.parent);return r},_.prototype._calculateBoundingRect=function(t){var e=this.getMatrix();if(t&&(e=t.multiplyNew(e)),this.visible()){for(var t={left:0,right:this.width,top:0,bottom:this.height},i=[{x:t.left,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.top},{x:t.right,y:t.bottom}],r=e.multiplyPoint(i[0]),o={left:r.x,right:r.x,top:r.y,bottom:r.y},n=1;n<i.length;++n)r=e.multiplyPoint(i[n]),o.left>r.x&&(o.left=r.x),o.right<r.x&&(o.right=r.x),r.y<o.top&&(o.top=r.y),o.bottom<r.y&&(o.bottom=r.y);if(void 0!==this.children)for(n=0;n<this.children.length;++n){var s=this.children[n]._calculateBoundingRect(e);s&&(o.left>s.left&&(o.left=s.left),o.right<s.right&&(o.right=s.right),o.top>s.top&&(o.top=s.top),o.bottom<s.bottom)&&(o.bottom=s.bottom)}return o}},_.prototype._enableTouchPropagation=function(){for(var t=this.parent;t instanceof _&&!t._hasTouchableChildren;)t._hasTouchableChildren=!0,t=t.parent},_.prototype._disableTouchPropagation=function(){for(var t=this.parent;t instanceof _&&t._hasTouchableChildren&&!this._findTouchableChildren(t);)t._hasTouchableChildren=!1,t=t.parent},_.prototype._isTargetOperation=function(t){return!(1&this.state)&&t instanceof i.PointEventBase&&this._touchable&&t.target===this},_.prototype._findTouchableChildren=function(t){if(t.children)for(var e=0;e<t.children.length;++e){if(t.children[e].touchable)return t.children[e];var i=this._findTouchableChildren(t.children[e]);if(i)return i}},y.E=_),y;function d(){return null!==h&&h.apply(this,arguments)||this}function p(){return null!==u&&u.apply(this,arguments)||this}function f(){return null!==c&&c.apply(this,arguments)||this}function _(t){var e=l.call(this,t)||this;if(e.children=void 0,e.parent=void 0,e._touchable=!1,e.state=0,e._hasTouchableChildren=!1,e._onUpdate=void 0,e._onMessage=void 0,e._onPointDown=void 0,e._onPointMove=void 0,e._onPointUp=void 0,e.tag=t.tag,e.shaderProgram=t.shaderProgram,e.local="non-local"!==t.scene.local||!!t.local,t.children)for(var i=0;i<t.children.length;++i)e.append(t.children[i]);return t.parent&&t.parent.append(e),null!=t.touchable&&(e.touchable=t.touchable),t.hidden&&e.hide(),e.id=t.id,t.scene.register(e),e}}function ki(){var r,t,e;return Ei||(Ei=1,t=o&&o.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(o,"__esModule",{value:!0}),o.CacheableE=void 0,e=yt().E,t(s,e),s.prototype.invalidate=function(){this.state&=-3,this.modified()},s.prototype.renderSelf=function(t,e){var i,r,o,n=s.PADDING;return this._renderedCamera!==e&&(this.state&=-3,this._renderedCamera=e),2&this.state||(this._cacheSize=this.calculateCacheSize(),o=Math.ceil(this._cacheSize.width)+2*n,i=Math.ceil(this._cacheSize.height)+2*n,(r=!this._cache||this._cache.width<o||this._cache.height<i)&&(this._cache&&!this._cache.destroyed()&&this._cache.destroy(),this._cache=this.scene.game.resourceFactory.createSurface(o,i),this._renderer=this._cache.renderer()),(o=this._renderer).begin(),r||o.clear(),o.save(),o.translate(n,n),this.renderCache(o,e),o.restore(),this.state|=2,o.end()),this._cache&&0<this._cacheSize.width&&0<this._cacheSize.height&&(t.translate(-n,-n),this.renderSelfFromCache(t),t.translate(n,n)),this._shouldRenderChildren},s.prototype.renderSelfFromCache=function(t){t.drawImage(this._cache,0,0,this._cacheSize.width+s.PADDING,this._cacheSize.height+s.PADDING,0,0)},s.prototype.destroy=function(){this._cache&&!this._cache.destroyed()&&this._cache.destroy(),this._cache=void 0,e.prototype.destroy.call(this)},s.prototype.calculateCacheSize=function(){return{width:this.width,height:this.height}},s.PADDING=1,o.CacheableE=s),o;function s(t){t=e.call(this,t)||this;return t._shouldRenderChildren=!0,t._cache=void 0,t._renderer=void 0,t._renderedCamera=void 0,t}}var Mi,n={};function Li(){var r,t,i,o;return Mi||(Mi=1,t=n&&n.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(n,"__esModule",{value:!0}),n.FilledRect=void 0,i=ft(),o=yt().E,t(e,o),e.prototype.renderSelf=function(t){return t.fillRect(0,0,this.width,this.height,this.cssColor),!0},n.FilledRect=e),n;function e(t){var e=o.call(this,t)||this;if("string"!=typeof t.cssColor)throw i.ExceptionFactory.createTypeMismatchError("ColorBox#constructor(cssColor)","string",t.cssColor);return e.cssColor=t.cssColor,e}}var Ri,Ci,Ii,gt={},h={},Fi={};function Di(){var e,t;return Ri||(Ri=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.SurfaceUtil=void 0,e=ft(),(t=Fi.SurfaceUtil={asSurface:function(t){if(t){if("type"in t&&"image"===t.type)return t.asSurface();if("_drawable"in t)return t;throw e.ExceptionFactory.createTypeMismatchError("SurfaceUtil#asSurface","ImageAsset|Surface",t)}},setupAnimatingHandler:function(t,e){e.isPlaying()&&t._handleAnimationStart()},migrateAnimatingHandler:function(t,e,i){t._handleAnimationStop(),i.isPlaying()&&t._handleAnimationStart()},drawNinePatch:function(t,e,i){void 0===i&&(i=4);var r=t.renderer();r.begin(),r.clear(),o(r,t.width,t.height,e,i),r.end()}}).renderNinePatch=o),Fi;function o(t,e,i,r,o){for(var n=(o="number"==typeof(o=void 0===o?4:o)?{top:o,bottom:o,left:o,right:o}:o).left,s=r.width-o.right,a=o.top,h=r.height-o.bottom,u=o.left,e=e-o.right,c=o.top,i=i-o.bottom,l=[{x:0,y:0,width:o.left,height:o.top},{x:s,y:0,width:o.right,height:o.top},{x:0,y:h,width:o.left,height:o.bottom},{x:s,y:h,width:o.right,height:o.bottom}],d=[{x:0,y:0},{x:e,y:0},{x:0,y:i},{x:e,y:i}],p=0;p<l.length;++p){var f=l[p];t.save(),t.translate(d[p].x,d[p].y),t.drawImage(r,f.x,f.y,f.width,f.height,0,0),t.restore()}for(var _=[{x:n,y:0,width:s-n,height:o.top},{x:0,y:a,width:o.left,height:h-a},{x:s,y:a,width:o.right,height:h-a},{x:n,y:h,width:s-n,height:o.bottom}],y=[{x:u,y:0,width:e-u,height:o.top},{x:0,y:c,width:o.left,height:i-c},{x:e,y:c,width:o.right,height:i-c},{x:u,y:i,width:e-u,height:o.bottom}],p=0;p<_.length;++p){var g=_[p],m=y[p];t.save(),t.translate(m.x,m.y),t.transform([m.width/g.width,0,0,m.height/g.height,0,0]),t.drawImage(r,g.x,g.y,g.width,g.height,0,0),t.restore()}o=s-n,s=h-a,h=e-u,e=i-c;t.save(),t.translate(u,c),t.transform([h/o,0,0,e/s,0,0]),t.drawImage(r,n,a,o,s,0,0),t.restore()}}function ji(){var r,t,e,i,o;return Ci||(Ci=1,t=h&&h.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(h,"__esModule",{value:!0}),h.Sprite=void 0,e=Ai(),i=Di(),o=yt().E,t(n,o),n.prototype._handleUpdate=function(){this.modified()},n.prototype._handleAnimationStart=function(){this.onUpdate.contains(this._handleUpdate,this)||this.onUpdate.add(this._handleUpdate,this)},n.prototype._handleAnimationStop=function(){this.destroyed()||this.onUpdate.remove(this._handleUpdate,this)},n.prototype.renderSelf=function(t,e){return this.srcWidth<=0||this.srcHeight<=0||(this._stretchMatrix&&(t.save(),t.transform(this._stretchMatrix._matrix)),t.drawImage(this._surface,this.srcX,this.srcY,this.srcWidth,this.srcHeight,0,0),this._stretchMatrix&&t.restore()),!0},n.prototype.invalidate=function(){this._invalidateSelf(),this.modified()},n.prototype.destroy=function(t){this._surface&&!this._surface.destroyed()&&t&&this._surface.destroy(),this.src=void 0,this._beforeSrc=void 0,this._surface=void 0,o.prototype.destroy.call(this)},n.prototype._invalidateSelf=function(){this.width===this.srcWidth&&this.height===this.srcHeight?this._stretchMatrix=void 0:(this._stretchMatrix=new e.PlainMatrix,this._stretchMatrix.scale(this.width/this.srcWidth,this.height/this.srcHeight)),this.src!==this._beforeSrc&&(this._beforeSrc=this.src,"_drawable"in this.src?this._surface=this.src:this._surface=i.SurfaceUtil.asSurface(this.src)),this._surface!==this._beforeSurface&&(i.SurfaceUtil.migrateAnimatingHandler(this,this._beforeSurface,this._surface),this._beforeSurface=this._surface)},h.Sprite=n),h;function n(t){var e=o.call(this,t)||this;return e.src=t.src,"_drawable"in t.src?e._surface=t.src:e._surface=i.SurfaceUtil.asSurface(t.src),null==t.width&&(e.width=e._surface.width),null==t.height&&(e.height=e._surface.height),e.srcWidth=null!=t.srcWidth?t.srcWidth:e.width,e.srcHeight=null!=t.srcHeight?t.srcHeight:e.height,e.srcX=t.srcX||0,e.srcY=t.srcY||0,e._stretchMatrix=void 0,e._beforeSrc=e.src,e._beforeSurface=e._surface,i.SurfaceUtil.setupAnimatingHandler(e,e._surface),e._invalidateSelf(),e}}var Gi,Ui,mt={},Bi={};function Hi(){return Gi||(Gi=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.TextAlign=void 0,(t=t||(Bi.TextAlign=t={}))[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"),Bi;var t}var Ni,Wi,Vi,vt={},Xi={},zi={};function qi(){return Vi||(Vi=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.AssetAccessor=void 0,t.prototype.getImage=function(t){return this._assetManager.peekLiveAssetByAccessorPath(t,"image")},t.prototype.getAudio=function(t){return this._assetManager.peekLiveAssetByAccessorPath(t,"audio")},t.prototype.getScript=function(t){return this._assetManager.peekLiveAssetByAccessorPath(t,"script")},t.prototype.getText=function(t){return this._assetManager.peekLiveAssetByAccessorPath(t,"text")},t.prototype.getTextContent=function(t){return this.getText(t).data},t.prototype.getJSONContent=function(t){return JSON.parse(this.getTextContent(t))},t.prototype.getVectorImage=function(t){return this._assetManager.peekLiveAssetByAccessorPath(t,"vector-image")},t.prototype.getBinary=function(t){return this._assetManager.peekLiveAssetByAccessorPath(t,"binary")},t.prototype.getBinaryData=function(t){return this.getBinary(t).data},t.prototype.getAllImages=function(t){return this._assetManager.peekAllLiveAssetsByPattern(null!=t?t:"**/*","image")},t.prototype.getAllAudios=function(t){return this._assetManager.peekAllLiveAssetsByPattern(null!=t?t:"**/*","audio")},t.prototype.getAllScripts=function(t){return this._assetManager.peekAllLiveAssetsByPattern(null!=t?t:"**/*","script")},t.prototype.getAllTexts=function(t){return this._assetManager.peekAllLiveAssetsByPattern(null!=t?t:"**/*","text")},t.prototype.getAllVectorImages=function(t){return this._assetManager.peekAllLiveAssetsByPattern(null!=t?t:"**/*","vector-image")},t.prototype.getAllBinaries=function(t){return this._assetManager.peekAllLiveAssetsByPattern(null!=t?t:"**/*","binary")},t.prototype.getImageById=function(t){return this._assetManager.peekLiveAssetById(t,"image")},t.prototype.getAudioById=function(t){return this._assetManager.peekLiveAssetById(t,"audio")},t.prototype.getScriptById=function(t){return this._assetManager.peekLiveAssetById(t,"script")},t.prototype.getTextById=function(t){return this._assetManager.peekLiveAssetById(t,"text")},t.prototype.getTextContentById=function(t){return this.getTextById(t).data},t.prototype.getJSONContentById=function(t){return JSON.parse(this.getTextById(t).data)},t.prototype.getVectorImageById=function(t){return this._assetManager.peekLiveAssetById(t,"vector-image")},t.prototype.getBinaryById=function(t){return this._assetManager.peekLiveAssetById(t,"binary")},t.prototype.getBinaryDataById=function(t){return this.getBinaryById(t).data},t.prototype.pathOf=function(t){return this._assetManager.resolveAccessorPath(t)},zi.AssetAccessor=t),zi;function t(t){this._assetManager=t}}var Yi,Ki,$i={},Ji={};function Zi(){var o;return Ki||(Ki=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.AssetHolder=void 0,o=ft(),t.prototype.request=function(){return 0!==this.waitingAssetsCount&&(this._requested||(this._requested=!0,this._assetManager.requestAssets(this._assetIds,this)),!0)},t.prototype.destroy=function(){this._requested&&this._assetManager.unrefAssets(this._assets),this.waitingAssetsCount=0,this.userData=void 0,this._handlerSet=void 0,this._assetIds=void 0,this._failureAssetIds=void 0,this._requested=!1},t.prototype.destroyed=function(){return!this._handlerSet},t.prototype._onAssetError=function(t,e){var i,r=this._handlerSet;this.destroyed()||r.owner.destroyed()||(r.handleLoadFailure.call(r.owner,i={asset:t,error:e,cancelRetry:!1}),e.retriable&&!i.cancelRetry?this._assetManager.retryLoad(t):this._assetManager.configuration[t.id]?r.handleFinish.call(r.owner,this,!1):this._alwaysNotifyFinish&&(e=this._peekAssetConfFromAssetId(t.id),this._failureAssetIds.push(e),this._decrementWaitingAssetCount()))},t.prototype._onAssetLoad=function(t){var e=this._handlerSet;this.destroyed()||e.owner.destroyed()||(e.handleLoad.call(e.owner,t),this._assets.push(t),this._decrementWaitingAssetCount())},t.prototype._decrementWaitingAssetCount=function(){if(--this.waitingAssetsCount,!(0<this.waitingAssetsCount)){if(this.waitingAssetsCount<0)throw o.ExceptionFactory.createAssertionError("AssetHolder#_onAssetLoad: broken waitingAssetsCount");var t=this._handlerSet;t.handleFinish.call(t.owner,this,!0)}},t.prototype._getFailureAssetIds=function(){return this._failureAssetIds},t.prototype._peekAssetConfFromAssetId=function(t){for(var e=0,i=this._assetIds;e<i.length;e++){var r=i[e];if(t===("string"==typeof r?r:r.id))return r}throw o.ExceptionFactory.createAssertionError("AssetHolder#_peekAssetConfFromAssetId: could not peek the asset: ".concat(t))},Ji.AssetHolder=t),Ji;function t(t){var e=t.assetManager,i=t.assetIds?t.assetIds.concat():[];i.push.apply(i,e.resolvePatternsToAssetIds(t.assetPaths||[])),this.waitingAssetsCount=i.length,this.userData=t.userData,this._assetManager=e,this._assetIds=i,this._assets=[],this._handlerSet=t.handlerSet,this._requested=!1,this._alwaysNotifyFinish=!!t.alwaysNotifyFinish,this._failureAssetIds=[]}}var Qi,tr,er,ir,rr,or={},A={},nr={},sr={},w={},ar={};function hr(){var n;return ir||(ir=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.EmptyVectorImageAsset=void 0,n=pt(),t.prototype.createSurface=function(t,e,i,r,o,n){return null},t.prototype.inUse=function(){return!1},t.prototype.destroy=function(){this.destroyed()||(this.onDestroyed.destroy(),this.onDestroyed=void 0)},t.prototype.destroyed=function(){return!this.onDestroyed},t.prototype._load=function(t){t._onAssetLoad(this)},t.prototype._assetPathFilter=function(t){return t},ar.EmptyVectorImageAsset=t),ar;function t(t,e,i,r,o){this.type="vector-image",this.width=0,this.height=0,this.onDestroyed=new n.Trigger,this.id=t,this.path=e,this.originalPath=e,this.width=i,this.height=r,this.hint=o}}var ur,cr,lr={};function dr(){var h,u,c,r,l,d,p,f,a,s,o,t,n,i,e;return cr||(cr=1,h=A&&A.__assign||function(){return(h=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Object.defineProperty(A,"__esModule",{value:!0}),A.AssetManager=void 0,tr||(tr=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.BundledScriptAsset=void 0,e=pt(),m.prototype.inUse=function(){return!0},m.prototype.destroy=function(){this.onDestroyed.destroyed()||this.onDestroyed.destroy(),this.execute=void 0},m.prototype.destroyed=function(){return!this.execute},m.prototype._load=function(t){t._onAssetLoad(this)},m.prototype._assetPathFilter=function(t){return t},nr.BundledScriptAsset=m),u=nr,er||(er=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.EmptyBinaryAsset=void 0,i=pt(),g.prototype.inUse=function(){return!1},g.prototype.destroy=function(){this.destroyed()||(this.onDestroyed.destroy(),this.onDestroyed=void 0)},g.prototype.destroyed=function(){return!this.onDestroyed},g.prototype._load=function(t){t._onAssetLoad(this)},g.prototype._assetPathFilter=function(t){return t},sr.EmptyBinaryAsset=g),c=sr,rr||(rr=1,t=w&&w.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(w,"__esModule",{value:!0}),w.EmptyGeneratedVectorImageAsset=void 0,n=hr().EmptyVectorImageAsset,t(y,n),w.EmptyGeneratedVectorImageAsset=y),r=w,l=hr(),ur||(ur=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.PartialImageAsset=void 0,s=pt(),_.prototype.initialize=function(t){this.hint=t,this._src.initialize(t)},_.prototype.inUse=function(){return!1},_.prototype.destroy=function(){this.destroyed()||(this.onDestroyed.fire(this),this._src.destroy(),this._src=null,this._slice=null,this._resourceFactory=null,this._surface=null,this._loadHandler=null,this.onDestroyed.destroy(),this.onDestroyed=void 0)},_.prototype.destroyed=function(){return!this._src},_.prototype.asSurface=function(){var t,e,i,r,o,n;return this._surface||(t=(r=this._slice).x,e=r.y,(n=(o=this._resourceFactory.createSurface(i=r.width,r=r.height)).renderer()).begin(),n.drawImage(this._src.asSurface(),t,e,i,r,0,0),n.end(),this._surface=o)},_.prototype._load=function(t){this._loadHandler=t,this._src._load(this)},_.prototype._onAssetLoad=function(t){this._loadHandler._onAssetLoad(this)},_.prototype._onAssetError=function(t,e){this._loadHandler._onAssetError(this,e)},_.prototype._assetPathFilter=function(t){return t},lr.PartialImageAsset=_),d=lr,p=ft(),f=yi(),a=function(t,e){this.asset=t,this.handlers=[e],this.errorCount=0,this.loading=!1},T.prototype.destroy=function(){for(var t=Object.keys(this._refCounts),e=0;e<t.length;++e)this._releaseAsset(t[e]);this.configuration=void 0,this._assets=void 0,this._liveAssetVirtualPathTable=void 0,this._liveAssetPathTable=void 0,this._refCounts=void 0,this._loadings=void 0,this._assetBundle=void 0},T.prototype.destroyed=function(){return void 0===this._assets},T.prototype.retryLoad=function(t){if(!this._loadings.hasOwnProperty(t.id))throw p.ExceptionFactory.createAssertionError("AssetManager#retryLoad: invalid argument.");var e=this._loadings[t.id];if(e.errorCount>T.MAX_ERROR_COUNT){if(this.configuration[t.id])throw p.ExceptionFactory.createAssertionError("AssetManager#retryLoad: too many retrying.")}else e.loading||(e.loading=!0,t._load(this))},T.prototype.globalAssetIds=function(){var t,e=[],i=this.configuration;for(t in i)i.hasOwnProperty(t)&&i[t].global&&e.push(t);return e},T.prototype.preloadScriptAssetPaths=function(){var t=[];return this._assetBundle&&t.push.apply(t,Object.values(this._assetBundle.assets).filter(function(t){return"script"===t.type&&t.preload}).map(function(t){return t.path})),t.push.apply(t,Object.values(this.configuration).filter(function(t){return"script"===t.type&&t.global&&t.preload}).map(function(t){return t.virtualPath})),t.map(function(t){return t.startsWith("./")?t:"./".concat(t)})},T.prototype.resolvePatternsToAssetIds=function(t){if(0===t.length)return[];for(var e=Object.keys(this._virtualPathToIdTable),i=[],r=0;r<t.length;++r)for(var o=t[r],n="string"==typeof o?v(this._replaceModulePathToAbsolute(o)):o,s=0;s<e.length;++s){var a=e[s];n("/"+a)&&i.push(this._virtualPathToIdTable[a])}return i},T.prototype.requestAsset=function(t,e){var i;"string"==typeof t?i=t:"uri"in t?(i=t.id,t=this._normalizeAssetBaseDeclaration(i,Object.create(t))):i=t.id;var r,o,n,s=!1;return this._assets.hasOwnProperty(i)?(++this._refCounts[i],e._onAssetLoad(this._assets[i])):this._loadings.hasOwnProperty(i)?((n=this._loadings[i]).handlers.push(e),++this._refCounts[i],s=!0):(r=null==(o=this._getAudioSystem(t))?void 0:o.getDestroyRequestedAsset(i),o&&r?(o.cancelRequestDestroy(r),this._addAssetToTables(r),this._refCounts[i]=1,e._onAssetLoad(r)):(o=this._createAssetFor(t),n=new a(o,e),this._loadings[i]=n,this._refCounts[i]=1,n.loading=s=!0,o._load(this))),s},T.prototype.unrefAsset=function(t){t="string"==typeof t?t:t.id;0<--this._refCounts[t]||this._releaseAsset(t)},T.prototype.requestAssets=function(t,e){for(var i=0,r=0,o=t.length;r<o;++r)this.requestAsset(t[r],e)&&++i;return i},T.prototype.unrefAssets=function(t){for(var e=0,i=t.length;e<i;++e)this.unrefAsset(t[e])},T.prototype.peekLiveAssetByAccessorPath=function(t,e){if("/"!==(t=this._replaceModulePathToAbsolute(t))[0])throw p.ExceptionFactory.createAssertionError("AssetManager#peekLiveAssetByAccessorPath(): accessorPath must start with '/'");var i=t.slice(1),i=this._liveAssetVirtualPathTable[i];if(i&&e===i.type)return i;throw p.ExceptionFactory.createAssertionError("AssetManager#peekLiveAssetByAccessorPath(): No ".concat(e," asset for ").concat(t))},T.prototype.peekLiveAssetById=function(t,e){var i=this._assets[t];if(i&&e===i.type)return i;throw p.ExceptionFactory.createAssertionError("AssetManager#peekLiveAssetById(): No ".concat(e," asset for id ").concat(t))},T.prototype.peekAllLiveAssetsByPattern=function(t,e){for(var i=Object.keys(this._liveAssetVirtualPathTable),r="string"==typeof t?v(this._replaceModulePathToAbsolute(t)):t,o=[],n=0;n<i.length;++n){var s=i[n],a=this._liveAssetVirtualPathTable[s];e&&a.type!==e||r("/"+s)&&o.push(a)}return o},T.prototype.resolveAccessorPath=function(t){var t=this._assets[t];return(t=t&&this._liveAssetPathTable[t.path])?"/"+t:null},T.prototype.setAssetBundle=function(t){this._assetBundle=t},T.prototype._normalize=function(t){var e,i={};if(!(t instanceof Object))throw p.ExceptionFactory.createAssertionError("AssetManager#_normalize: invalid arguments.");for(e in t)if(t.hasOwnProperty(e)){var r=this._normalizeAssetBaseDeclaration(e,Object.create(t[e]));if(!r.path)throw p.ExceptionFactory.createAssertionError("AssetManager#_normalize: No path given for: "+e);if(!r.virtualPath)throw p.ExceptionFactory.createAssertionError("AssetManager#_normalize: No virtualPath given for: "+e);r.global||(r.global=!1),i[e]=r}return i},T.prototype._normalizeAssetBaseDeclaration=function(t,e){if(!e.type)throw p.ExceptionFactory.createAssertionError("AssetManager#_normalize: No type given for: "+t);if("image"===e.type){if("number"!=typeof e.width)throw p.ExceptionFactory.createAssertionError("AssetManager#_normalize: wrong width given for the image asset: "+t);if("number"!=typeof e.height)throw p.ExceptionFactory.createAssertionError("AssetManager#_normalize: wrong height given for the image asset: "+t);e.slice=e.slice?(i=e.slice,Array.isArray(i)?{x:i[0],y:i[1],width:i[2],height:i[3]}:i):void 0}if("audio"===e.type){void 0===e.duration&&(e.duration=0);var i=this._audioSystemConfMap[e.systemId];if(void 0===e.loop&&(e.loop=!!i&&!!i.loop),void 0===e.hint&&(e.hint=i?i.hint:{}),"music"!==e.systemId&&"sound"!==e.systemId)throw p.ExceptionFactory.createAssertionError("AssetManager#_normalize: wrong systemId given for the audio asset: "+t)}if("video"===e.type&&!e.useRealSize){if("number"!=typeof e.width)throw p.ExceptionFactory.createAssertionError("AssetManager#_normalize: wrong width given for the video asset: "+t);if("number"!=typeof e.height)throw p.ExceptionFactory.createAssertionError("AssetManager#_normalize: wrong height given for the video asset: "+t);e.useRealSize=!1}if("vector-image"===e.type){if("number"!=typeof e.width)throw p.ExceptionFactory.createAssertionError("AssetManager#_normalize: wrong width given for the vector-image asset: "+t);if("number"!=typeof e.height)throw p.ExceptionFactory.createAssertionError("AssetManager#_normalize: wrong height given for the vector-image asset: "+t)}return e},T.prototype._createAssetFor=function(t){var e,i,r;if(this._assetBundle&&"string"==typeof t){var o=this._assetBundle.assets[t];if("script"===(null==o?void 0:o.type))return new u.BundledScriptAsset(h({id:t},o))}if("string"==typeof t)r=this.configuration[e=t],i=this.configuration[e].path;else{if(!("uri"in t))return this._createGeneratedAssetFor(t);e=t.id,i=(r=t).uri}var n=this._resourceFactory;if(!r)throw p.ExceptionFactory.createAssertionError("AssetManager#_createAssetFor: unknown asset ID: "+e);var s=r.type;switch(s){case"image":if(Array.isArray(r.slice))throw new Error("AssetManager#_createAssetFor: array type of configuration.slice is not yet supported");return(a=r.slice?new d.PartialImageAsset(n,e,i,r.width,r.height,r.slice):n.createImageAsset(e,i,r.width,r.height)).initialize(r.hint),a;case"audio":var a=r.systemId?this._audioSystemManager[r.systemId]:this._audioSystemManager[this._defaultAudioSystemId];return n.createAudioAsset(e,i,r.duration,a,!!r.loop,null!=(a=r.hint)?a:{},r.offset);case"text":return n.createTextAsset(e,i);case"script":return n.createScriptAsset(e,i,r.exports);case"video":a=new f.VideoSystem;return n.createVideoAsset(e,i,r.width,r.height,a,!!r.loop,!!r.useRealSize);case"vector-image":return n.createVectorImageAsset?n.createVectorImageAsset(e,i,r.width,r.height,r.hint):new l.EmptyVectorImageAsset(e,i,r.width,r.height,r.hint);case"binary":return n.createBinaryAsset?n.createBinaryAsset(e,i):new c.EmptyBinaryAsset(e,i);default:throw p.ExceptionFactory.createAssertionError("AssertionError#_createAssetFor: unknown asset type "+s+" for asset ID: "+e)}},T.prototype._createGeneratedAssetFor=function(t){var e=this._resourceFactory,i="%akashic%/generated-asset-".concat(this._generatedAssetCount++);if("vector-image"===t.type)return e.createVectorImageAssetFromString?e.createVectorImageAssetFromString(t.id,i,t.data):new r.EmptyGeneratedVectorImageAsset(t.id,i,t.data);throw p.ExceptionFactory.createAssertionError("AssertionError#_createFromAssetGenerationFor: unsupported asset type ".concat(t.type," for asset ID: ").concat(t.id))},T.prototype._releaseAsset=function(t){var e=this._assets[t]||this._loadings[t]&&this._loadings[t].asset,i=null;if(e)if(i=e.path,e.inUse())if("audio"===e.type)e._system.requestDestroy(e);else{if("video"!==e.type)throw p.ExceptionFactory.createAssertionError("AssetManager#unrefAssets: Unsupported in-use "+e.id);e.destroy()}else e.destroy();delete this._refCounts[t],delete this._loadings[t],delete this._assets[t],this.configuration[t]&&((e=this.configuration[t].virtualPath)&&this._liveAssetVirtualPathTable.hasOwnProperty(e)&&delete this._liveAssetVirtualPathTable[e],i)&&this._liveAssetPathTable.hasOwnProperty(i)&&delete this._liveAssetPathTable[i]},T.prototype._countLoadingAsset=function(){return Object.keys(this._loadings).length},T.prototype._onAssetError=function(t,e){if(!this.destroyed()&&!t.destroyed()){var i=this._loadings[t.id],r=i.handlers;i.loading=!1,++i.errorCount,(e=T.MAX_ERROR_COUNT<i.errorCount&&e.retriable?p.ExceptionFactory.createAssetLoadError("Retry limit exceeded",!1,null,e):e).retriable||delete this._loadings[t.id];for(var o=0;o<r.length;++o)r[o]._onAssetError(t,e,this.retryLoad.bind(this))}},T.prototype._onAssetLoad=function(t){if(!this.destroyed()&&!t.destroyed()){var e=this._loadings[t.id];e.loading=!1,delete this._loadings[t.id],this._addAssetToTables(t);for(var i=e.handlers,r=0;r<i.length;++r)i[r]._onAssetLoad(t)}},T.prototype._replaceModulePathToAbsolute=function(t){if("/"!==t[0]&&"*"!==t[0])for(var e in this._moduleMainScripts)if(this._moduleMainScripts.hasOwnProperty(e)&&0===t.lastIndexOf(e,0))return"/node_modules/"+t;return t},T.prototype._getAudioSystem=function(t){var e=null;return"string"==typeof t?e=this.configuration[t]:"uri"in t&&(e=t),!e||"audio"!==e.type?null:e.systemId?this._audioSystemManager[e.systemId]:this._audioSystemManager[this._defaultAudioSystemId]},T.prototype._addAssetToTables=function(t){var e;if(this._assets[t.id]=t,this.configuration[t.id]?e=this.configuration[t.id].virtualPath:this._assetBundle&&this._assetBundle.assets[t.id]&&(e=this._assetBundle.assets[t.id].path),e){if(this._liveAssetVirtualPathTable.hasOwnProperty(e)){if(this._liveAssetVirtualPathTable[e].path!==t.path)throw p.ExceptionFactory.createAssertionError("AssetManager#_onAssetLoad(): duplicated asset path")}else this._liveAssetVirtualPathTable[e]=t;this._liveAssetPathTable.hasOwnProperty(t.path)||(this._liveAssetPathTable[t.path]=e)}},T.MAX_ERROR_COUNT=3,A.AssetManager=T),A;function _(t,e,i,r,o,n){this.type="image",this.hint=void 0,this.onDestroyed=new s.Trigger,this._surface=null,this._loadHandler=null,this.id=e,this.path=i,this.originalPath=i,this.width=n.width,this.height=n.height,this._slice=n,this._resourceFactory=t;n="".concat(e,"/<internal>");this._src=t.createImageAsset(n,i,r,o)}function y(t,e,i){t=n.call(this,t,e,0,0)||this;return t.data=i,t}function g(t,e){this.type="binary",this.onDestroyed=new i.Trigger,this.id=t,this.path=e,this.originalPath=e,this.data=new ArrayBuffer(0)}function m(t){this.type="script",this.id=t.id,this.script="",this.path=t.path,this.originalPath=t.path,this.onDestroyed=new e.Trigger,this.execute=t.execute.bind(this)}function v(t){for(var e=/([^\*\\\?]*)(\\\*|\\\?|\?|\*(?!\*)|\*\*\/|$)/g,i={"":"","\\*":"\\*","\\?":"\\?","*":"[^/]*","?":"[^/]","**/":"(?:^/)?(?:[^/]+/)*"},r=/[\\^$.*+?()[\]{}|]/g,o="",n=e.exec(t);n&&""!==n[0];n=e.exec(t))o+=n[1].replace(r,"\\$&")+i[n[2]];var s=new RegExp("^"+o+"$");return function(t){return s.test(t)}}function T(t,e,i,r,o){this._resourceFactory=t.resourceFactory,this._audioSystemManager=t.audio,this._defaultAudioSystemId=t.defaultAudioSystemId,this._audioSystemConfMap=(t=>{void 0===t&&(t={});var e,i={music:{loop:!0,hint:{streaming:!0}},sound:{loop:!1,hint:{streaming:!1}}};for(e in i)e in t||(t[e]=i[e]);return t})(i),this.configuration=this._normalize(e||{}),this._assets={},this._virtualPathToIdTable={},this._liveAssetVirtualPathTable={},this._liveAssetPathTable={},this._moduleMainScripts=r||{},this._moduleMainPaths=null!=o?o:null,this._refCounts={},this._loadings={},this._generatedAssetCount=0,this._assetBundle=null;for(var n=Object.keys(this.configuration),s=0;s<n.length;++s){var a=n[s],h=this.configuration[a];this._virtualPathToIdTable[h.virtualPath]=a}}}var pr,fr,_r={},yr={};function gr(){var e,i;return fr||(fr=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.AudioSystemManager=void 0,e=oi(),i=ft(),t.prototype.create=function(t){if("music"===t._system.id)return this.music.create(t);if("sound"===t._system.id)return this.sound.create(t);throw i.ExceptionFactory.createAssertionError('AudioSystemManager#create(): unknown systemId "'.concat(t._system.id,'" for asset ID "').concat(t.id,'"'))},t.prototype.play=function(t){if("music"===t._system.id)return this.music.play(t);if("sound"===t._system.id)return this.sound.play(t);throw i.ExceptionFactory.createAssertionError('AudioSystemManager#play(): unknown systemId "'.concat(t._system.id,'" for asset ID "').concat(t.id,'"'))},t.prototype._reset=function(){this._muted=!1,this.music._reset(),this.sound._reset()},t.prototype._setMuted=function(t){this._muted!==t&&(this._muted=t,this.music._setMuted(t),this.sound._setMuted(t))},t.prototype._setPlaybackRate=function(t){this.music._setPlaybackRate(t),this.sound._setPlaybackRate(t)},t.prototype._startSuppress=function(){this.music._startSuppress(),this.sound._startSuppress()},t.prototype._endSuppress=function(){this.music._endSuppress(),this.sound._endSuppress()},t.prototype.stopAll=function(){this.music.stopAll(),this.sound.stopAll()},yr.AudioSystemManager=t),yr;function t(t){this._muted=!1,this._resourceFactory=t,this.music=new e.MusicAudioSystem({id:"music",muted:this._muted,resourceFactory:t}),this.sound=new e.SoundAudioSystem({id:"sound",muted:this._muted,resourceFactory:t})}}var mr,vr,Tr,Ar={},wr={},Sr={};function br(){var a;return vr||(vr=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.Font=void 0,a=_t(),t.prototype.measureText=function(t){for(var e=0,i=0,r=0,o=null,n=0;n<t.length;n++){var s=a.Util.charCodeAt(t,n);!s||!(s=this.glyphForCharacter(s))||s.x<0||s.y<0||s.width<0||s.height<0||(0===n&&(i=-s.offsetX),e+=(o=s).advanceWidth)}return{width:e,actualBoundingBoxLeft:i,actualBoundingBoxRight:r=o?e+o.offsetX+o.width-o.advanceWidth:r}},Sr.Font=t),Sr;function t(){}}function Pr(){var r,t,e,i,o;return Tr||(Tr=1,t=wr&&wr.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(wr,"__esModule",{value:!0}),wr.BitmapFont=void 0,e=br(),i=Di(),o=e.Font,t(n,o),n.prototype.glyphForCharacter=function(t){var e,i,r,o,n=this.map[t]||this.missingGlyph;return n?(e=void 0===n.width?this.defaultGlyphWidth:n.width,i=void 0===n.height?this.defaultGlyphHeight:n.height,r=void 0===n.advanceWidth?e:n.advanceWidth,o=0===e||0===i?void 0:this.surface,{code:t,x:n.x,y:n.y,width:e,height:i,surface:o,offsetX:n.offsetX||0,offsetY:n.offsetY||0,advanceWidth:r,isSurfaceValid:!0,_atlas:null}):null},n.prototype.destroy=function(){this.surface&&!this.surface.destroyed()&&this.surface.destroy(),this.map=void 0},n.prototype.destroyed=function(){return!this.map},wr.BitmapFont=n),wr;function n(t){var e=o.call(this)||this;return e.surface=i.SurfaceUtil.asSurface(t.src),t.glyphInfo?(e.map=t.glyphInfo.map,e.defaultGlyphWidth=t.glyphInfo.width,e.defaultGlyphHeight=t.glyphInfo.height,e.missingGlyph=t.glyphInfo.missingGlyph,e.size=t.glyphInfo.height):(e.map=t.map||{},e.defaultGlyphWidth=t.defaultGlyphWidth||0,e.defaultGlyphHeight=t.defaultGlyphHeight||0,e.missingGlyph=t.missingGlyph,e.size=t.defaultGlyphHeight||0),e}}var xr,Er,Or={},kr={};function Mr(){var r,t,i;return Er||(Er=1,t=kr&&kr.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(kr,"__esModule",{value:!0}),kr.Camera2D=void 0,i=bi().Object2D,t(e,i),e.deserialize=function(t){return new e(t.param)},e.prototype.modified=function(){this._modifiedCount=(this._modifiedCount+1)%32768,this._matrix&&(this._matrix._modified=!0)},e.prototype.serialize=function(){return{param:{local:this.local,name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,opacity:this.opacity,scaleX:this.scaleX,scaleY:this.scaleY,angle:this.angle,anchorX:this.anchorX,anchorY:this.anchorY,compositeOperation:this.compositeOperation}}},e.prototype._applyTransformToRenderer=function(t){this.angle||1!==this.scaleX||1!==this.scaleY||0!==this.anchorX||0!==this.anchorY?t.transform(this.getMatrix()._matrix):t.translate(-this.x,-this.y),1!==this.opacity&&t.opacity(this.opacity)},e.prototype._updateMatrix=function(){this._matrix&&(this.angle||1!==this.scaleX||1!==this.scaleY||0!==this.anchorX||0!==this.anchorY?this._matrix.updateByInverse(this.width,this.height,this.scaleX,this.scaleY,this.angle,this.x,this.y,this.anchorX,this.anchorY):this._matrix.reset(-this.x,-this.y))},kr.Camera2D=e),kr;function e(t){var e=i.call(this,t)||this;return e.local=!!t.local,e.name=t.name,e._modifiedCount=0,e}}var Lr,Rr,Cr={},Ir={},Fr={};function Dr(){var r,t,s,e,i;return Rr||(Rr=1,t=Fr&&Fr.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.CameraCancellingE=void 0,s=Mr(),e=bi(),i=yt().E,t(o,i),o.prototype.renderSelf=function(t,e){if(this.children){var i,r;e&&e instanceof s.Camera2D&&(r=this._canceller,(i=e).x===r.x&&i.y===r.y&&i.angle===r.angle&&i.scaleX===r.scaleX&&i.scaleY===r.scaleY||(r.x=i.x,r.y=i.y,r.angle=i.angle,r.scaleX=i.scaleX,r.scaleY=i.scaleY,r._matrix&&(r._matrix._modified=!0)),t.save(),t.transform(r.getMatrix()._matrix));for(var o=this.children,n=0;n<o.length;++n)o[n].render(t,e);e&&t.restore()}return!1},Fr.CameraCancellingE=o),Fr;function o(t){t=i.call(this,t)||this;return t._canceller=new e.Object2D,t}}var jr,Gr,Ur,Br,Hr,Nr={},Wr={},Vr={},Xr={};function zr(){var i;return jr||(jr=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.Timer=void 0,i=pt(),t.prototype.tick=function(){for(this._scaledElapsed+=1e3;this._scaledElapsed>=this._scaledInterval&&this.onElapse;)this.onElapse.fire(),this._scaledElapsed-=this._scaledInterval},t.prototype.canDelete=function(){return!this.onElapse||0===this.onElapse.length},t.prototype.destroy=function(){this.interval=void 0,this.onElapse.destroy(),this.onElapse=void 0,this.elapsed=void 0,this._scaledInterval=0,this._scaledElapsed=0},t.prototype.destroyed=function(){return void 0===this.onElapse},Xr.Timer=t),Xr;function t(t,e){this.interval=t,this._scaledInterval=Math.round(t*e),this.onElapse=new i.Trigger,this.elapsed=this.onElapse,this._scaledElapsed=0}}function qr(){var o,n,r;return Gr||(Gr=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.TimerManager=Vr.TimerIdentifier=void 0,o=ft(),n=zr(),t.prototype.destroy=function(){this._timer.onElapse.remove(this._handleElapse,this),this._timer=void 0,this._handler=void 0,this._handlerOwner=void 0,this._fired=void 0,this._firedOwner=void 0},t.prototype.destroyed=function(){return void 0===this._timer},t.prototype._handleElapse=function(){this.destroyed()||(this._handler.call(this._handlerOwner),this._fired&&this._fired.call(this._firedOwner,this))},r=t,Vr.TimerIdentifier=r,e.prototype.destroy=function(){for(var t=0;t<this._identifiers.length;++t)this._identifiers[t].destroy();for(t=0;t<this._timers.length;++t)this._timers[t].destroy();this._timers=void 0,this._trigger=void 0,this._identifiers=void 0,this._fps=void 0},e.prototype.destroyed=function(){return void 0===this._timers},e.prototype.createTimer=function(t){if(this._registered||(this._trigger.add(this._tick,this),this._registered=!0),t<0)throw o.ExceptionFactory.createAssertionError("TimerManager#createTimer: invalid interval");t<1&&(t=1);for(var e=Math.min(1e3,t*this._fps),i=0;i<this._timers.length;++i)if(this._timers[i].interval===t&&this._timers[i]._scaledElapsed<e)return this._timers[i];var r=new n.Timer(t,this._fps);return this._timers.push(r),r},e.prototype.deleteTimer=function(t){if(t.canDelete()){var e=this._timers.indexOf(t);if(e<0)throw o.ExceptionFactory.createAssertionError("TimerManager#deleteTimer: can not find timer");if(this._timers.splice(e,1),t.destroy(),!this._timers.length){if(!this._registered)throw o.ExceptionFactory.createAssertionError("TimerManager#deleteTimer: handler is not handled");this._trigger.remove(this._tick,this),this._registered=!1}}},e.prototype.setTimeout=function(t,e,i){e=this.createTimer(e),e=new r(e,t,i,this._onTimeoutFired,this);return this._identifiers.push(e),e},e.prototype.clearTimeout=function(t){this._clear(t)},e.prototype.setInterval=function(t,e,i){e=this.createTimer(e),e=new r(e,t,i);return this._identifiers.push(e),e},e.prototype.clearInterval=function(t){this._clear(t)},e.prototype._tick=function(){for(var t=this._timers.concat(),e=0;e<t.length;++e)t[e].tick()},e.prototype._onTimeoutFired=function(t){var e=this._identifiers.indexOf(t);if(e<0)throw o.ExceptionFactory.createAssertionError("TimerManager#_onTimeoutFired: can not find identifier");this._identifiers.splice(e,1);e=t._timer;t.destroy(),this.deleteTimer(e)},e.prototype._clear=function(t){var e=this._identifiers.indexOf(t);if(e<0)throw o.ExceptionFactory.createAssertionError("TimerManager#_clear: can not find identifier");if(t.destroyed())throw o.ExceptionFactory.createAssertionError("TimerManager#_clear: invalid identifier");this._identifiers.splice(e,1);e=t._timer;t.destroy(),this.deleteTimer(e)},Vr.TimerManager=e),Vr;function t(t,e,i,r,o){this._timer=t,this._handler=e,this._handlerOwner=i,this._fired=r,this._firedOwner=o,this._timer.onElapse.add(this._handleElapse,this)}function e(t,e){this._timers=[],this._trigger=t,this._identifiers=[],this._fps=e,this._registered=!1}}function Yr(){var o,n,h,s,a;return Ur||(Ur=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.Scene=void 0,o=pt(),n=Zi(),h=Mr(),s=ft(),a=qr(),t.prototype.modified=function(t){this.game.modified()},t.prototype.destroy=function(){this.state="before-destroyed",this.onStateChange.fire(this.state);for(var t=0,e=[this.game.db,this.game._localDb];t<e.length;t++)for(var i=e[t],r=0,o=i.keys();r<o.length;r++){var n=o[r],n=i.get(n);(null==n?void 0:n.scene)===this&&n.destroy()}this._timer.destroy(),this.onUpdate.destroy(),this.onMessage.destroy(),this.onPointDownCapture.destroy(),this.onPointMoveCapture.destroy(),this.onPointUpCapture.destroy(),this.onOperation.destroy(),this.onLoad.destroy(),this.onAssetLoad.destroy(),this.onAssetLoadFailure.destroy(),this.onAssetLoadComplete.destroy(),this.assets={},this.vars={};for(var s=0;s<this._assetHolders.length;++s)this._assetHolders[s].destroy();this._sceneAssetHolder.destroy(),this.game=void 0,this._waitingPrepare=void 0,this.state="destroyed",this.onStateChange.fire(this.state),this.onStateChange.destroy()},t.prototype.destroyed=function(){return void 0===this.game},t.prototype.createTimer=function(t){return this._timer.createTimer(t)},t.prototype.deleteTimer=function(t){this._timer.deleteTimer(t)},t.prototype.setInterval=function(t,e,i){return this._timer.setInterval(t,e,i)},t.prototype.clearInterval=function(t){this._timer.clearInterval(t)},t.prototype.setTimeout=function(t,e,i){return this._timer.setTimeout(t,e,i)},t.prototype.clearTimeout=function(t){this._timer.clearTimeout(t)},t.prototype.isCurrentScene=function(){return this.game.scene()===this},t.prototype.gotoScene=function(t,e){if(!this.isCurrentScene())throw s.ExceptionFactory.createAssertionError("Scene#gotoScene: this scene is not the current scene");e?this.game.pushScene(t):this.game.replaceScene(t)},t.prototype.end=function(){if(!this.isCurrentScene())throw s.ExceptionFactory.createAssertionError("Scene#end: this scene is not the current scene");this.game.popScene()},t.prototype.register=function(t){this.game.register(t),t.scene=this},t.prototype.unregister=function(t){t.scene=void 0,this.game.unregister(t)},t.prototype.append=function(t){this.insertBefore(t,void 0)},t.prototype.insertBefore=function(t,e){t.parent&&t.remove(),t.parent=this;var i=-1;void 0!==e&&-1<(i=this.children.indexOf(e))?this.children.splice(i,0,t):this.children.push(t),this.modified(!0)},t.prototype.remove=function(t){t=this.children.indexOf(t);-1!==t&&(this.children[t].parent=void 0,this.children.splice(t,1),this.modified(!0))},t.prototype.findPointSourceByPoint=function(t,e,i){for(var r="non-local"!==this.local,o=this.children,n=i&&i instanceof h.Camera2D?i.getMatrix():void 0,s=o.length-1;0<=s;--s){var a=o[s].findPointSourceByPoint(t,n,e);if(a)return a.local=a.target&&a.target.local||r,a}return{target:void 0,point:void 0,local:r}},t.prototype.prefetch=function(){this._loaded||this._prefetchRequested||(this._prefetchRequested=!0,this._sceneAssetHolder.request())},t.prototype.requestAssets=function(t,e){var i,r=this;if("ready-fired"!==this._loadingState&&"loaded-fired"!==this._loadingState)throw s.ExceptionFactory.createAssertionError("Scene#requestAssets(): can be called after loaded.");var t=Array.isArray(t)?(i=t,!1):(i=t.assetIds,!!t.notifyErrorOnCallback),o=new n.AssetHolder({assetManager:this.game._assetManager,assetIds:i,alwaysNotifyFinish:t,handlerSet:{owner:this,handleLoad:this._handleSceneAssetLoad,handleLoadFailure:this._handleSceneAssetLoadFailure,handleFinish:this._handleSceneAssetLoadFinish},userData:function(){var t;r.destroyed()||((t=o._getFailureAssetIds()).length?(t=s.ExceptionFactory.createRequestAssetLoadError("Scene#requestAssets(): failed to load the asset. refer to the 'detail' property for more information.",{failureAssetIds:t}),e(t)):e())}});this._assetHolders.push(o),o.request()},t.prototype._activate=function(){this.state="active",this.onStateChange.fire(this.state)},t.prototype._deactivate=function(){this.state="deactive",this.onStateChange.fire(this.state)},t.prototype._needsLoading=function(){return 0<this._sceneAssetHolder.waitingAssetsCount||!!this._waitingPrepare},t.prototype._load=function(){this._loaded||(this._loaded=!0,this._sceneAssetHolder.request())||this._notifySceneReady()},t.prototype._handleSceneAssetLoad=function(t){this.assets[t.id]=t,this.onAssetLoad.fire(t),this.onAssetLoadComplete.fire(t)},t.prototype._handleSceneAssetLoadFailure=function(t){this.onAssetLoadFailure.fire(t),this.onAssetLoadComplete.fire(t.asset)},t.prototype._handleSceneAssetLoadFinish=function(t,e){e?t.userData?this.game._pushPostTickTask(t.userData,null):this._loaded&&this._notifySceneReady():this.game.terminateGame()},t.prototype._notifySceneReady=function(){this._loadingState="ready",this.game._pushPostTickTask(this._fireReady,this)},t.prototype._fireReady=function(){this.destroyed()||(this._onReady.fire(this),this._loadingState="ready-fired")},t.prototype._fireLoaded=function(){this.destroyed()||"loaded-fired"!==this._loadingState&&(this.onLoad.fire(this),this._loadingState="loaded-fired")},Wr.Scene=t),Wr;function t(t){var e=t.game,i=void 0===t.local||!1===t.local?"non-local":!0===t.local?"full-local":t.local,r=void 0!==t.tickGenerationMode?t.tickGenerationMode:"by-clock";this.name=t.name,this.game=e,this.local=i,this.tickGenerationMode=r,this.onLoad=new o.Trigger,this.loaded=this.onLoad,this._onReady=new o.Trigger,this._ready=this._onReady,this.assets={},this.asset=e.asset,this.vars={},this._loaded=!1,this._prefetchRequested=!1,this._loadingState="initial",this.onUpdate=new o.Trigger,this.update=this.onUpdate,this._timer=new a.TimerManager(this.onUpdate,this.game.fps),this.onAssetLoad=new o.Trigger,this.onAssetLoadFailure=new o.Trigger,this.onAssetLoadComplete=new o.Trigger,this.assetLoaded=this.onAssetLoad,this.assetLoadFailed=this.onAssetLoadFailure,this.assetLoadCompleted=this.onAssetLoadComplete,this.onMessage=new o.Trigger,this.onPointDownCapture=new o.Trigger,this.onPointMoveCapture=new o.Trigger,this.onPointUpCapture=new o.Trigger,this.onOperation=new o.Trigger,this.message=this.onMessage,this.pointDownCapture=this.onPointDownCapture,this.pointMoveCapture=this.onPointMoveCapture,this.pointUpCapture=this.onPointUpCapture,this.operation=this.onOperation,this.children=[],this.state="standby",this.onStateChange=new o.Trigger,this._assetHolders=[],this._sceneAssetHolder=new n.AssetHolder({assetManager:this.game._assetManager,assetIds:t.assetIds,assetPaths:t.assetPaths,handlerSet:{owner:this,handleLoad:this._handleSceneAssetLoad,handleLoadFailure:this._handleSceneAssetLoadFailure,handleFinish:this._handleSceneAssetLoadFinish},userData:null}),this.seethrough=null!=t.seethrough&&t.seethrough}}function Kr(){var r,t,i,e,o;return Br||(Br=1,t=Nr&&Nr.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.LoadingScene=void 0,i=pt(),e=ft(),o=Yr().Scene,t(n,o),n.prototype.destroy=function(){this._clearTargetScene(),o.prototype.destroy.call(this)},n.prototype.reset=function(t){this._clearTargetScene(),this._targetScene=t,"loaded-fired"!==this._loadingState?this.onLoad.addOnce(this._doReset,this):this._doReset()},n.prototype.getTargetWaitingAssetsCount=function(){return this._targetScene?this._targetScene._sceneAssetHolder.waitingAssetsCount:0},n.prototype.end=function(){var t;if(!this._targetScene||"initial"===this._targetScene._loadingState)throw t="LoadingScene#end(): the target scene is in invalid state: "+(this._targetScene?this._targetScene._loadingState:"(no scene)"),e.ExceptionFactory.createAssertionError(t);this.game._popSceneRaw(!0),this.game._pushPostTickTask(this._targetScene._fireLoaded,this._targetScene),this._clearTargetScene()},n.prototype._clearTargetScene=function(){this._targetScene&&(this.onLoad.removeAll({owner:this,func:this._doReset}),this._targetScene._onReady.removeAll({owner:this}),this._targetScene.onAssetLoad.removeAll({owner:this}),this._targetScene=void 0)},n.prototype._doReset=function(){this.onTargetReset.fire(this._targetScene),"initial"===this._targetScene._loadingState||"ready"===this._targetScene._loadingState?(this._targetScene._onReady.add(this._handleReady,this),this._targetScene.onAssetLoad.add(this._handleAssetLoad,this),this._targetScene._load()):this._handleReady(this._targetScene)},n.prototype._handleAssetLoad=function(t){this.onTargetAssetLoad.fire(t)},n.prototype._handleReady=function(t){this.onTargetReady.fire(t),this._explicitEnd||this.end()},Nr.LoadingScene=n),Nr;function n(t){var e=this;return t.local=!0,(e=o.call(this,t)||this).onTargetReset=new i.Trigger,e.onTargetReady=new i.Trigger,e.onTargetAssetLoad=new i.Trigger,e.targetReset=e.onTargetReset,e.targetReady=e.onTargetReady,e.targetAssetLoaded=e.onTargetAssetLoad,e._explicitEnd=!!t.explicitEnd,e._targetScene=void 0,e}}function $r(){var r,t,o,n,i;return Hr||(Hr=1,t=Ir&&Ir.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.DefaultLoadingScene=void 0,o=Dr(),n=Li(),i=Kr().LoadingScene,t(e,i),e.prototype._handleLoad=function(){var t,e,i;return i="compact"===this._style?(e=.05*Math.min(this.game.width,this.game.height),t=this.game.width-e-this._barWidth,e=this.game.height-e-this._barHeight,"transparent"):(t=(this.game.width-this._barWidth)/2,e=(this.game.height-this._barHeight)/2,"rgba(0, 0, 0, 0.8)"),this.append(new o.CameraCancellingE({scene:this,children:[new n.FilledRect({scene:this,width:this.game.width,height:this.game.height,cssColor:i,children:[new n.FilledRect({scene:this,x:t,y:e,width:this._barWidth,height:this._barHeight,cssColor:"gray",children:[i=new n.FilledRect({scene:this,width:0,height:this._barHeight,cssColor:"white"})]})]})]})),i.onUpdate.add(this._handleUpdate,this),this._gauge=i,!0},e.prototype._handleUpdate=function(){++this._gaugeUpdateCount;var t=Math.round(205+50*Math.sin(this._gaugeUpdateCount/this.game.fps*(2/3)*(2*Math.PI)));this._gauge.cssColor="rgb("+t+","+t+","+t+")",this._gauge.modified()},e.prototype._handleTargetReset=function(t){this._gauge&&(this._gauge.width=0,this._gauge.modified()),this._totalWaitingAssetCount=t._sceneAssetHolder.waitingAssetsCount},e.prototype._handleTargetAssetLoad=function(t){var e=this._targetScene._sceneAssetHolder.waitingAssetsCount;this._gauge.width=Math.ceil((1-e/this._totalWaitingAssetCount)*this._barWidth),this._gauge.modified()},Ir.DefaultLoadingScene=e),Ir;function e(t){var e=i.call(this,{game:t.game,name:"akashic:default-loading-scene"})||this;return"compact"===t.style?(e._barWidth=e.game.width/4,e._barHeight=5,e._style="compact"):(e._barWidth=Math.min(e.game.width,Math.max(100,e.game.width/2)),e._barHeight=5,e._style="default"),e._gauge=void 0,e._gaugeUpdateCount=0,e._totalWaitingAssetCount=0,e.onLoad.add(e._handleLoad,e),e.onTargetReset.add(e._handleTargetReset,e),e.onTargetAssetLoad.add(e._handleTargetAssetLoad,e),e}}var Jr,Zr={};function Qr(){var r,t,e,i,o,l,n,s;return Jr||(Jr=1,t=Zr&&Zr.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.DefaultSkippingScene=void 0,e=Dr(),i=Li(),o=Yr(),s=i.FilledRect,t(h,s),h.prototype._incrementAge=function(){this.age++},h.prototype._updateColor=function(){var t=this._calculateCSSColor();this.cssColor!==t&&(this.cssColor=t,this.modified())},h.prototype._calculateCSSColor=function(){var t=this,e=t.age,i=t.easingDurationFrame,r=t.valueFrom,o=t.valueTo,e=(0,t.easing)(Math.max(e-t.offsetDurationFrame,0)%i,r,o-r,i);return"rgb(".concat(e,", ").concat(e,", ").concat(e,")")},l=h,n=o.Scene,t(a,n),a.prototype._handleLoadForIndicator=function(){var i=this,r=this.game,o=.03*Math.min(r.width,r.height)|0,n=.03*Math.min(r.width,r.height)|0,s=.05*Math.min(r.width,r.height)|0,a=.05*Math.min(r.width,r.height)|0,h=400/(1e3/r.fps),u=2500/(1e3/r.fps),c=d;this.append(new e.CameraCancellingE({scene:this,children:[3,2,1,0].map(function(t,e){return new l({scene:i,cssColor:"rgb(".concat(255,", ").concat(255,", ").concat(255,")"),width:o,height:o,x:r.width-e*(o+n)-s,y:r.height-a,anchorX:1,anchorY:1,offsetDurationFrame:h*t,easingDurationFrame:u,valueFrom:205,valueTo:255,easing:c})})}))},Zr.DefaultSkippingScene=a),Zr;function d(t,e,i,r){r*=.15;return 0<t&&t<r?(t=t,(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e):e+i}function a(t){var e=n.call(this,{game:t.game,local:"full-local",name:"akashic:default-skipping-scene"})||this;return"indicator"===t.style&&e.onLoad.addOnce(e._handleLoadForIndicator,e),e}function h(t){var e=s.call(this,t)||this;return e.age=0,e.offsetDurationFrame=t.offsetDurationFrame,e.easingDurationFrame=t.easingDurationFrame,e.valueFrom=t.valueFrom,e.valueTo=t.valueTo,e.easing=t.easing,e.onUpdate.add(e._incrementAge,e),e.onUpdate.add(e._updateColor,e),e}}var to,eo,io,ro,oo,no={},so={},ao={},ho={},uo={};function co(){return eo||(eo=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.SurfaceAtlasSlot=void 0,uo.SurfaceAtlasSlot=function(t,e,i,r){this.x=t,this.y=e,this.width=i,this.height=r,this.prev=null,this.next=null}),uo}function lo(){var s;return io||(io=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.SurfaceAtlas=void 0,s=co(),t.prototype.reset=function(){var t=this._surface.renderer();t.begin(),t.clear(),t.end(),this._emptySurfaceAtlasSlotHead=new s.SurfaceAtlasSlot(0,0,this._surface.width,this._surface.height),this._accessScore=0,this._usedRectangleAreaSize.width=0,this._usedRectangleAreaSize.height=0},t.prototype._acquireSurfaceAtlasSlot=function(t,e){var i,r,o,n=((t,e,i)=>{for(;t;){if(t.width>=e&&t.height>=i)return t;t=t.next}return null})(this._emptySurfaceAtlasSlotHead,t+=1,e+=1);return n?(r=(o=n.width-t)<=(r=n.height-e)?(i=new s.SurfaceAtlasSlot(n.x+t,n.y,o,e),new s.SurfaceAtlasSlot(n.x,n.y+e,n.width,r)):(i=new s.SurfaceAtlasSlot(n.x,n.y+e,t,r),new s.SurfaceAtlasSlot(n.x+t,n.y,o,n.height)),i.prev=n.prev,i.next=r,null===i.prev?this._emptySurfaceAtlasSlotHead=i:i.prev.next=i,r.prev=i,r.next=n.next,r.next&&(r.next.prev=r),o=new s.SurfaceAtlasSlot(n.x,n.y,t,e),this._updateUsedRectangleAreaSize(o),o):null},t.prototype._updateUsedRectangleAreaSize=function(t){var e=t.x+t.width,t=t.y+t.height;e>this._usedRectangleAreaSize.width&&(this._usedRectangleAreaSize.width=e),t>this._usedRectangleAreaSize.height&&(this._usedRectangleAreaSize.height=t)},t.prototype.addSurface=function(t,e,i,r,o){var n,s=this._acquireSurfaceAtlasSlot(r,o);return s?((n=this._surface.renderer()).begin(),n.drawImage(t,e,i,r,o,s.x,s.y),n.end(),s):null},t.prototype.destroy=function(){this._surface.destroy()},t.prototype.destroyed=function(){return this._surface.destroyed()},t.prototype.getAtlasUsedSize=function(){return this._usedRectangleAreaSize},t.prototype.getAccessScore=function(){return this._accessScore},ho.SurfaceAtlas=t),ho;function t(t){this._surface=t,this._emptySurfaceAtlasSlotHead=new s.SurfaceAtlasSlot(0,0,this._surface.width,this._surface.height),this._accessScore=0,this._usedRectangleAreaSize={width:0,height:0}}}function po(){var e;return ro||(ro=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.SurfaceAtlasSet=void 0,e=lo(),i.prototype._deleteAtlas=function(t){for(var e=0;e<t;++e){var i=this._spliceLeastFrequentlyUsedAtlas();if(!i)return;i.destroy()}},i.prototype._findLeastFrequentlyUsedAtlasIndex=function(){for(var t=Number.MAX_VALUE,e=-1,i=0;i<this._surfaceAtlases.length;++i)this._surfaceAtlases[i]._accessScore<=t&&(t=this._surfaceAtlases[i]._accessScore,e=i);return e},i.prototype._spliceLeastFrequentlyUsedAtlas=function(){var t=this._findLeastFrequentlyUsedAtlasIndex();if(-1===t)return null;this._currentAtlasIndex>=t&&--this._currentAtlasIndex;for(var e=this._surfaceAtlases.splice(t,1)[0],i=this._atlasGlyphsTable.splice(t,1)[0],r=0;r<i.length;r++){var o=i[r];o.surface=void 0,o.isSurfaceValid=!1,o._atlas=null}return e},i.prototype._moveGlyphSurface=function(t){for(var e=0;e<this._surfaceAtlases.length;++e){var i=(this._currentAtlasIndex+e)%this._surfaceAtlases.length,r=this._surfaceAtlases[i],o=r.addSurface(t.surface,t.x,t.y,t.width,t.height);if(o)return this._currentAtlasIndex=i,t.surface&&t.surface.destroy(),t.surface=r._surface,t.x=o.x,t.y=o.y,t._atlas=r,this._atlasGlyphsTable[i].push(t),!0}return!1},i.prototype._reallocateAtlas=function(){var t=null;this._surfaceAtlases.length>=this._maxAtlasNum?(t=this._spliceLeastFrequentlyUsedAtlas()).reset():t=new e.SurfaceAtlas(this._resourceFactory.createSurface(this._atlasSize.width,this._atlasSize.height)),this._surfaceAtlases.push(t),this._atlasGlyphsTable.push([]),this._currentAtlasIndex=this._surfaceAtlases.length-1},i.prototype.getAtlas=function(t){return this._surfaceAtlases[t]},i.prototype.getAtlasNum=function(){return this._surfaceAtlases.length},i.prototype.getMaxAtlasNum=function(){return this._maxAtlasNum},i.prototype.changeMaxAtlasNum=function(t){this._maxAtlasNum=t,this._surfaceAtlases.length>this._maxAtlasNum&&(t=this._surfaceAtlases.length-this._maxAtlasNum,this._deleteAtlas(t))},i.prototype.getAtlasUsedSize=function(){return this._atlasSize},i.prototype.addGlyph=function(t){return!(t.width>this._atlasSize.width||t.height>this._atlasSize.height)&&(!!this._moveGlyphSurface(t)||(this._reallocateAtlas(),this._moveGlyphSurface(t)))},i.prototype.touchGlyph=function(t){t._atlas&&(t._atlas._accessScore+=1);for(var e=0;e<this._surfaceAtlases.length;e++)this._surfaceAtlases[e]._accessScore/=2},i.prototype.destroy=function(){for(var t=0;t<this._surfaceAtlases.length;++t)this._surfaceAtlases[t].destroy();this._surfaceAtlases=void 0,this._resourceFactory=void 0,this._atlasGlyphsTable=void 0},i.prototype.destroyed=function(){return void 0===this._surfaceAtlases},i.INITIAL_MAX_SURFACEATLAS_NUM=10,ao.SurfaceAtlasSet=i),ao;function i(t){this._surfaceAtlases=[],this._atlasGlyphsTable=[],this._resourceFactory=t.resourceFactory,this._currentAtlasIndex=0;var t=t.hint||{};this._maxAtlasNum=t.maxAtlasNum||i.INITIAL_MAX_SURFACEATLAS_NUM,t.initialAtlasWidth=t.initialAtlasWidth||512,t.initialAtlasHeight=t.initialAtlasHeight||512,t.maxAtlasWidth=t.maxAtlasWidth||512,t.maxAtlasHeight=t.maxAtlasHeight||512,this._atlasSize=(t=t,{width:Math.ceil(Math.min(t.initialAtlasWidth,t.maxAtlasWidth)),height:Math.ceil(Math.min(t.initialAtlasHeight,t.maxAtlasHeight))})}}var fo,_o,yo={},go={};function mo(){var c,l,d;return _o||(_o=1,Object.defineProperty(go,"__esModule",{value:!0}),go.EventConverter=void 0,c=yt(),l=mi(),d=ft(),t.prototype.toGameEvent=function(t){var e,i,r=t[0],o=t[1],n=t[2],s=this._playerTable[n]||{id:n};switch(r){case 0:return s={id:n,name:t[3]},this._playerTable[n]&&null!=this._playerTable[n].userData&&(s.userData=this._playerTable[n].userData),this._playerTable[n]=s,new l.JoinEvent(s,o);case 1:return delete this._playerTable[s.id],new l.LeaveEvent(s,o);case 2:return h=t[3],new l.TimestampEvent(h,s,o);case 3:return s={id:n,name:t[3],userData:t[4]},this._playerTable[n]=s,new l.PlayerInfoEvent(s,o);case 32:return a=t[4],new l.MessageEvent(t[3],s,a,o);case 33:return a=t[8],e=t[3],i=null==(u=t[6])?void 0:(0<=u?this._game.db:this._game._localDb).get(u),new c.PointDownEvent(e,i,{x:t[4],y:t[5]},s,a,o,t[7]);case 34:return a=t[12],e=t[3],i=null==(u=t[10])?void 0:(0<=u?this._game.db:this._game._localDb).get(u),new c.PointMoveEvent(e,i,{x:t[4],y:t[5]},{x:t[8],y:t[9]},{x:t[6],y:t[7]},s,a,o,t[11]);case 35:return a=t[12],e=t[3],i=null==(u=t[10])?void 0:(0<=u?this._game.db:this._game._localDb).get(u),new c.PointUpEvent(e,i,{x:t[4],y:t[5]},{x:t[8],y:t[9]},{x:t[6],y:t[7]},s,a,o,t[11]);case 64:var a=t[5],h=t[3],u=this._game._decodeOperationPluginOperation(h,t[4]);return new l.OperationEvent(h,u,s,a,o);default:throw d.ExceptionFactory.createAssertionError("EventConverter#toGameEvent")}},t.prototype.toPlaylogEvent=function(t,e){var i;switch(t.type){case"join":case"leave":throw d.ExceptionFactory.createAssertionError("EventConverter#toPlaylogEvent: Invalid type: "+t.type);case"timestamp":var r=e?null!=(r=t.player.id)?r:null:this._playerId;return[2,t.eventFlags,r,t.timestamp];case"player-info":return r=e?null!=(i=t.player.id)?i:null:this._playerId,[3,t.eventFlags,r,t.player.name,t.player.userData];case"point-down":var o=t.target?t.target.id:null;return r=e&&t.player?null!=(i=t.player.id)?i:null:this._playerId,[33,t.eventFlags,r,t.pointerId,t.point.x,t.point.y,o,t.button,!!t.local];case"point-move":return o=t.target?t.target.id:null,r=e&&t.player?null!=(i=t.player.id)?i:null:this._playerId,[34,t.eventFlags,r,t.pointerId,t.point.x,t.point.y,t.startDelta.x,t.startDelta.y,t.prevDelta.x,t.prevDelta.y,o,t.button,!!t.local];case"point-up":return o=t.target?t.target.id:null,r=e&&t.player?null!=(i=t.player.id)?i:null:this._playerId,[35,t.eventFlags,r,t.pointerId,t.point.x,t.point.y,t.startDelta.x,t.startDelta.y,t.prevDelta.x,t.prevDelta.y,o,t.button,!!t.local];case"message":return r=e&&t.player?null!=(i=t.player.id)?i:null:this._playerId,[32,t.eventFlags,r,t.data,!!t.local];case"operation":return r=e&&t.player?null!=(o=t.player.id)?o:null:this._playerId,[64,t.eventFlags,r,t.code,t.data,!!t.local];default:throw d.ExceptionFactory.createAssertionError("Unknown type: "+t.type)}},t.prototype.makePlaylogOperationEvent=function(t){var e=this._playerId;return[64,null!=t.priority?3&t.priority:0,e,t._code,t.data,!!t.local]},go.EventConverter=t),go;function t(t){this._game=t.game,this._playerId=null!=(t=t.playerId)?t:null,this._playerTable={}}}var vo,To,Ao,wo,So,bo,Po={},xo={},Eo={},Oo={},ko={},Mo={};function Lo(){var r,t,e,i;return bo||(bo=1,t=Mo&&Mo.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.InitialScene=void 0,e=pt(),i=Yr().Scene,t(o,i),o.prototype.destroy=function(){i.prototype.destroy.call(this),this.onAllAssetsLoad.destroyed()||this.onAllAssetsLoad.destroy(),this.onAllAssetsLoad=void 0},o.prototype._handleLoad=function(){var t;this.game._configuration.assetBundle?(t=this.game._moduleManager._internalRequire(this.game._configuration.assetBundle),this.game._assetManager.setAssetBundle(t),t=Object.keys(t.assets),this.requestAssets(t,this._handleRequestAssets.bind(this))):this.onAllAssetsLoad.fire()},o.prototype._handleRequestAssets=function(){this.onAllAssetsLoad.fire()},Mo.InitialScene=o),Mo;function o(t){t=i.call(this,t)||this;return t.onAllAssetsLoad=new e.Trigger,t.onLoad.add(t._handleLoad,t),t}}var Ro,Co,Io,Fo={},Do={},jo={},Go={};function Uo(){return Io||(Io=1,Object.defineProperty(Go,"__esModule",{value:!0}),Go.RequireCachedValue=void 0,t.prototype._cachedValue=function(){return this._value},Go.RequireCachedValue=t),Go;function t(t){this._value=t}}var Bo,Ho,No={};function Wo(){var t;return Bo||(Bo=1,Object.defineProperty(No,"__esModule",{value:!0}),No.ScriptAssetContext=void 0,t=ft(),e.prototype._cachedValue=function(){if(this._started)return this._module.exports;throw t.ExceptionFactory.createAssertionError("ScriptAssetContext#_cachedValue: not executed yet.")},e.prototype._executeScript=function(t){return this._started||(t&&(this._module.parent=t).children.push(this._module),this._started=!0,this._asset.execute(this._module._runtimeValue),this._module.loaded=!0),this._module.exports},No.ScriptAssetContext=e),No;function e(t,e){this._asset=t,this._module=e,this._started=!1}}function Vo(){var u,c,a,h,l;return Ho||(Ho=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.ModuleManager=void 0,u=ui(),c=ft(),a=ci(),h=Uo(),l=Wo(),t.prototype._internalRequire=function(t,e){t=this._require(t,e);return t.__esModule?t.default:t},t.prototype._require=function(t,e){var i,r,o=this,n=this._assetManager._liveAssetVirtualPathTable,s=this._assetManager._moduleMainScripts;if(-1===t.indexOf("/")&&this._assetManager._assets.hasOwnProperty(t)&&(i=this._assetManager._assets[t],r=this._assetManager._liveAssetPathTable[i.path]),r||(r=this._resolvePath(t,e),/^\//.test(r)&&(r=r.slice(1))),this._scriptCaches.hasOwnProperty(r))return this._scriptCaches[r]._cachedValue();if(i=s[t]?n[r]:this._findAssetByPathAsFile(r,n)){if(this._scriptCaches.hasOwnProperty(r))return this._scriptCaches[r]._cachedValue();if("script"===i.type)return s=new a.Module({runtimeValueBase:this._runtimeValueBase,id:i.id,path:i.path,virtualPath:this._assetManager._liveAssetPathTable[i.path],requireFunc:function(t,e){return o._require(t,e)},resolveFunc:function(t,e){return o._resolvePath(t,e)}}),n=new l.ScriptAssetContext(i,s),(this._scriptCaches[r]=n)._executeScript(e);if("text"===i.type&&i&&".json"===u.PathUtil.resolveExtname(t))return(this._scriptCaches[r]=new h.RequireCachedValue(JSON.parse(i.data)))._cachedValue()}throw c.ExceptionFactory.createAssertionError("g._require: can not find module: "+t)},t.prototype._resolvePath=function(t,e){var i=null,r=this._assetManager._liveAssetVirtualPathTable,o=this._assetManager._moduleMainScripts;if(/^\.\/|^\.\.\/|^\//.test(t)){if(e){if(!e._virtualDirname)throw c.ExceptionFactory.createAssertionError("g._require.resolve: couldn't resolve the module path without virtualPath");i=u.PathUtil.resolvePath(e._virtualDirname,t)}else if(/^\.\//.test(t))i=t.substring(2);else{if(!/^\//.test(t))throw c.ExceptionFactory.createAssertionError("g._require.resolve: entry point path must start with './'");i=t.substring(1)}if(h=this._resolveAbsolutePathAsFile(i,r))return h;if(h=this._resolveAbsolutePathAsDirectory(i,r))return h}else{if(o[t])return o[t];var n=e?e.paths.concat():[];n.push("node_modules");for(var s=0;s<n.length;++s){var a=n[s],h=u.PathUtil.resolvePath(a,t);if(i=this._resolveAbsolutePathAsFile(h,r))return i;if(i=this._resolveAbsolutePathAsDirectory(h,r))return i}}throw c.ExceptionFactory.createAssertionError("g._require.resolve: couldn't resolve the path: "+t)},t.prototype._findAssetByPathAsFile=function(t,e){return e.hasOwnProperty(t)?e[t]:e.hasOwnProperty(t+".js")?e[t+".js"]:void 0},t.prototype._resolveAbsolutePathAsFile=function(t,e){return e.hasOwnProperty(t)?"/"+t:e.hasOwnProperty(t+".js")?"/"+t+".js":null},t.prototype._resolveAbsolutePathAsDirectory=function(t,e){var i=t+"/package.json",r=e[i],o=this._assetManager._moduleMainPaths;if(o&&o[i])return o[i];if(e.hasOwnProperty(i)&&"text"===r.type){o=JSON.parse(r.data);if(o&&"string"==typeof o.main){r=this._resolveAbsolutePathAsFile(u.PathUtil.resolvePath(t,o.main),e);if(r)return r}}return e.hasOwnProperty(i=t+"/index.js")?"/"+i:null},jo.ModuleManager=t),jo;function t(t,e){this._assetManager=e,this._runtimeValueBase=t,this._scriptCaches={}}}var Xo,zo,qo,Yo={},Ko={},$o={};function Jo(){var e,i,r;return qo||(qo=1,e=$o&&$o.__assign||function(){return(e=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Object.defineProperty($o,"__esModule",{value:!0}),$o.OperationPluginManager=void 0,i=pt(),o.prototype.onOperation=function(t){t=Array.isArray(t)?{_code:this._code,data:t}:e({_code:this._code},t);this._handler.call(this._handlerOwner,t)},r=o,t.prototype.register=function(t,e,i){return this._instantiateOperationPlugin(t,e,i)},t.prototype.start=function(t){t=this.plugins[t];t&&t.start()},t.prototype.stop=function(t){t=this.plugins[t];t&&t.stop()},t.prototype.destroy=function(){this.stopAll(),this.onOperate.destroy(),this.onOperate=void 0,this.operated=void 0,this.plugins=void 0,this._game=void 0,this._viewInfo=void 0},t.prototype.reset=function(){this.stopAll(),this.onOperate.removeAll(),this.plugins={}},t.prototype.stopAll=function(){for(var t in this.plugins)this.plugins.hasOwnProperty(t)&&(t=this.plugins[t])&&t.stop()},t.prototype._instantiateOperationPlugin=function(t,e,i){if(t.isSupported()){if(this.plugins[e])throw new Error("Plugin#code conflicted for code: ".concat(e));t=new t(this._game,this._viewInfo,i),i=(this.plugins[e]=t,new r(e,this.onOperate,this.onOperate.fire));return t.operationTrigger.add(i.onOperation,i),t}},$o.OperationPluginManager=t),$o;function t(t,e){this.onOperate=new i.Trigger,this.operated=this.onOperate,this.plugins={},this._game=t,this._viewInfo=e}function o(t,e,i){this._code=t,this._handler=i,this._handlerOwner=e}}var Zo,Qo,tn,en,rn={},on={},nn={},sn={};function an(){return en||(en=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.PointEventResolver=void 0,t.prototype.pointDown=function(t){var e,i,r;return null!=this._maxPoints&&this._currentPoints>=this._maxPoints?null:(r=(e=this._sourceResolver.findPointSource(t.offset)).point||t.offset,i=e.target?e.target.id:void 0,this._pointEventMap[t.identifier]={targetId:i,local:e.local,point:r,start:{x:t.offset.x,y:t.offset.y},prev:{x:t.offset.x,y:t.offset.y}},this._currentPoints++,r=[33,2,this._playerId,t.identifier,r.x,r.y,i,t.button],e&&e.local&&r.push(e.local),r)},t.prototype.pointMove=function(t){var e,i,r=this._pointEventMap[t.identifier];return r?(this._pointMoveAndUp(r,t.offset,e={x:0,y:0},i={x:0,y:0}),i=[34,2,this._playerId,t.identifier,r.point.x,r.point.y,i.x,i.y,e.x,e.y,r.targetId,t.button],r.local&&i.push(r.local),i):null},t.prototype.pointUp=function(t){var e,i,r=this._pointEventMap[t.identifier];return r?(this._pointMoveAndUp(r,t.offset,e={x:0,y:0},i={x:0,y:0}),delete this._pointEventMap[t.identifier],this._currentPoints--,i=[35,2,this._playerId,t.identifier,r.point.x,r.point.y,i.x,i.y,e.x,e.y,r.targetId,t.button],r.local&&i.push(r.local),i):null},t.prototype._pointMoveAndUp=function(t,e,i,r){r.x=e.x-t.start.x,r.y=e.y-t.start.y,i.x=e.x-t.prev.x,i.y=e.y-t.prev.y,t.prev.x=e.x,t.prev.y=e.y},sn.PointEventResolver=t),sn;function t(t){this._currentPoints=0,this._pointEventMap={},this._sourceResolver=t.sourceResolver,this._playerId=t.playerId,this._maxPoints=null!=(t=t.maxPoints)?t:null}}var hn,un={};function cn(){return hn||(hn=1,Object.defineProperty(un,"__esModule",{value:!0}),un.RandomGenerator=void 0,un.RandomGenerator=function(t){this.seed=t}),un}var ln,dn,pn,fn,_n,yn,gn,mn,vn,Tn={},An={},wn={},Sn={},bn={},Pn={},xn={},En={},On={};function kn(){return vn||(vn=1,Object.defineProperty(On,"__esModule",{value:!0}),On.Xorshift=void 0,e.deserialize=function(t){return new e([t._state0U,t._state0L,t._state1U,t._state1L])},e.prototype.initState=function(t){t=this.generateSeeds(t);this._state0L=0|t[0],this._state0U=0|t[1],this._state1L=0|t[2],this._state1U=0|t[3]},e.prototype.randomInt=function(){var t=this._state0U,e=this._state0L,i=this._state1U,r=this._state1L,o=(r>>>0)+(e>>>0),n=i+t+(o/2>>>31)>>>0,o=o>>>0,s=0,a=(t^=t<<23|(-512&e)>>>9)^(this._state0U=i);return s=(s=(e^=s=e<<23)^(this._state0L=r))^(e>>>18|(262143&t)<<14)^(r>>>5|(31&i)<<27),this._state1U=a^t>>>18^i>>>5,this._state1L=s,[n,o]},e.prototype.random=function(){var t=this.randomInt();return 2.3283064365386963e-10*t[0]+2220446049250313e-31*(t[1]>>>12)},e.prototype.nextInt=function(t,e){return Math.floor(t+this.random()*(e-t))},e.prototype.serialize=function(){return{_state0U:this._state0U,_state0L:this._state0L,_state1U:this._state1U,_state1L:this._state1L}},e.prototype.generateSeeds=function(t){var e=1812433253;return[t=e*(t^t>>30)+1,t=e*(t^t>>30)+2,t=e*(t^t>>30)+3,t=e*(t^t>>30)+4]},On.Xorshift=e),On;function e(t){t=Array.isArray(t)?t:this.generateSeeds(t);this._state0U=0|t[0],this._state0L=0|t[1],this._state1U=0|t[2],this._state1L=0|t[3]}}var Mn,Ln={};function Rn(){var r,t,o,e,n,s;return Mn||(Mn=1,t=Ln&&Ln.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.XorshiftRandomGenerator=void 0,o=ft(),e=cn(),n=kn(),s=e.RandomGenerator,t(i,s),i.deserialize=function(t){return new i(t._seed,t._xorshift)},i.prototype.get=function(t,e){return this._xorshift.nextInt(t,e+1)},i.prototype.generate=function(){return this._xorshift.random()},i.prototype.serialize=function(){return{_seed:this.seed,_xorshift:this._xorshift.serialize()}},Ln.XorshiftRandomGenerator=i),Ln;function i(t,e){var i=this;if(void 0===t)throw o.ExceptionFactory.createAssertionError("XorshiftRandomGenerator#constructor: seed is undefined");return(i=s.call(this,t)||this)._xorshift=e?n.Xorshift.deserialize(e):new n.Xorshift(t),i}}var Cn,In,Fn={};function Dn(){return In||(In=1,st=(s=Pt)&&Pt.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var o=Object.getOwnPropertyDescriptor(e,i);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,o)}:function(t,e,i,r){t[r=void 0===r?i:r]=e[i]}),F=Pt&&Pt.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||st(e,t,i)},Object.defineProperty(s,"__esModule",{value:!0}),s.PathUtil=s.VideoSystem=s.ShaderProgram=s.Module=s.AudioSystem=void 0,F((bt||(bt=1,U=(k=xt)&&xt.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var o=Object.getOwnPropertyDescriptor(e,i);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,o)}:function(t,e,i,r){t[r=void 0===r?i:r]=e[i]}),C=xt&&xt.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||U(e,t,i)},Object.defineProperty(k,"__esModule",{value:!0}),C((Tt||(Tt=1,Object.defineProperty(Et,"__esModule",{value:!0})),Et),k),C((At||(At=1,Object.defineProperty(Ot,"__esModule",{value:!0})),Ot),k),C((wt||(wt=1,Object.defineProperty(kt,"__esModule",{value:!0})),kt),k),C((St||(St=1,Object.defineProperty(Mt,"__esModule",{value:!0})),Mt),k)),xt),s),F(pt(),s),F(Ye(),s),at=oi(),Object.defineProperty(s,"AudioSystem",{enumerable:!0,get:function(){return at.AudioSystem}}),ht=ci(),Object.defineProperty(s,"Module",{enumerable:!0,get:function(){return ht.Module}}),ut=pi(),Object.defineProperty(s,"ShaderProgram",{enumerable:!0,get:function(){return ut.ShaderProgram}}),ct=yi(),Object.defineProperty(s,"VideoSystem",{enumerable:!0,get:function(){return ct.VideoSystem}}),lt=ui(),Object.defineProperty(s,"PathUtil",{enumerable:!0,get:function(){return lt.PathUtil}}),F(ki(),s),F(yt(),s),F(Li(),s),F((Ii||(Ii=1,C=gt&&gt.__extends||(ot=function(t,e){return(ot=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}ot(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(gt,"__esModule",{value:!0}),gt.FrameSprite=void 0,nt=pt(),I=ji().Sprite,C(n,I),n.createBySprite=function(t,e,i){var r=new n({scene:t.scene,src:t.src,width:void 0===e?t.width:e,height:void 0===i?t.height:i});return r.srcHeight=void 0===i?t.srcHeight:i,r.srcWidth=void 0===e?t.srcWidth:e,r},n.prototype.start=function(){void 0===this.interval&&(this.interval=1e3/this.game().fps),this._timer&&this._free(),this._timer=this.scene.createTimer(this.interval),this._timer.onElapse.add(this._handleElapse,this)},n.prototype.destroy=function(t){this.stop(),I.prototype.destroy.call(this,t)},n.prototype.stop=function(){this._timer&&this._free()},n.prototype.modified=function(t){this._modifiedSelf(t),I.prototype.modified.call(this,t)},n.prototype._handleElapse=function(){this.frameNumber===this.frames.length-1?this.loop?this.frameNumber=0:(this.stop(),this.onFinish.fire()):this.frameNumber++,this.modified()},n.prototype._free=function(){this._timer&&(this._timer.onElapse.remove(this._handleElapse,this),this._timer.canDelete()&&this.scene.deleteTimer(this._timer),this._timer=void 0)},n.prototype._changeFrame=function(){var t=this.frames[this.frameNumber],e=Math.floor(this._surface.width/this.srcWidth);this.srcX=t%e*this.srcWidth,this.srcY=Math.floor(t/e)*this.srcHeight,this._lastUsedIndex=t},n.prototype._modifiedSelf=function(t){this._lastUsedIndex!==this.frames[this.frameNumber]&&this._changeFrame()},gt.FrameSprite=n),gt),s),F((Ui||(Ui=1,k=mt&&mt.__extends||(it=function(t,e){return(it=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}it(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(mt,"__esModule",{value:!0}),mt.Label=void 0,rt=Hi(),M=_t(),L=ki(),R=L.CacheableE,k(o,R),o.prototype.aligning=function(t,e){this.width=t,this.widthAutoAdjust=!1,this.textAlign=e},o.prototype.invalidate=function(){this._invalidateSelf(),R.prototype.invalidate.call(this)},o.prototype.renderSelfFromCache=function(t){var e;switch(this._realTextAlign){case"center":e=this.widthAutoAdjust?this._overhangLeft:0;break;case"right":e=this.widthAutoAdjust?this._overhangLeft:this._overhangRight;break;default:e=this._overhangLeft}t.drawImage(this._cache,0,0,this._cacheSize.width+L.CacheableE.PADDING,this._cacheSize.height+L.CacheableE.PADDING,e,0)},o.prototype.renderCache=function(t){if(!(!this.fontSize||this.height<=0||this._textWidth<=0)){var e=this.maxWidth&&0<this.maxWidth&&this.maxWidth<this._textWidth?this.maxWidth/this._textWidth:1,i=0;switch(this._realTextAlign){case"center":i=this.width/2-(this._textWidth+this._overhangLeft)/2*e;break;case"right":i=this.width-(this._textWidth+this._overhangLeft)*e;break;default:i-=this._overhangLeft*e}t.translate(Math.round(i),0),1!=e&&t.transform([e,0,0,1,0,0]),t.save();for(var r=this.fontSize/this.font.size,o=0,n=0;n<this.glyphs.length;++n){var s=this.glyphs[n],a=s.advanceWidth*r,h=s.code;s.isSurfaceValid||(s=this.font.glyphForCharacter(h))?(s.surface&&(t.save(),t.translate(Math.round(o),0),t.transform([r,0,0,r,0,0]),t.drawImage(s.surface,s.x,s.y,s.width,s.height,s.offsetX,s.offsetY),t.restore()),o+=a):this._outputOfWarnLogWithNoGlyph(h,"renderCache()")}t.restore(),t.save(),this.textColor&&(t.setCompositeOperation("source-atop"),t.fillRect(0,0,this._textWidth,this.height,this.textColor)),t.restore()}},o.prototype.destroy=function(){R.prototype.destroy.call(this)},o.prototype._invalidateSelf=function(){this.glyphs.length=0,this._textWidth=0;var t=this.textAlign;if(this._realTextAlign="string"==typeof t?t:M.Util.enumToSnakeCase(rt.TextAlign,t),this.fontSize){for(var e=this.text.length-1,i=this.text.length-1;0<=i;--i)if((r=M.Util.charCodeAt(this.text,i))&&(o=this.font.glyphForCharacter(r))&&0!==o.width&&0!==o.advanceWidth){e=i;break}for(var r,o,n,s=0,a=0<this.font.size?this.fontSize/this.font.size:0,i=0;i<=e;++i)(r=M.Util.charCodeAt(this.text,i))&&((o=this.font.glyphForCharacter(r))?o.width<0||o.height<0||o.x<0||o.y<0||(this.glyphs.push(o),(n=0)===i&&(this._overhangLeft=Math.min(o.offsetX,0),n=-this._overhangLeft),i===e&&(this._overhangRight=Math.max(o.width+o.offsetX-o.advanceWidth,0),n+=this._overhangRight),this._textWidth+=(o.advanceWidth+n)*a,s<(n=o.offsetY+o.height)&&(s=n)):this._outputOfWarnLogWithNoGlyph(r,"_invalidateSelf()"));this.widthAutoAdjust&&(this.width=this._textWidth),this.height=s*a}else this.height=0},o.prototype._outputOfWarnLogWithNoGlyph=function(t,e){t=4294901760&t?String.fromCharCode((4294901760&t)>>>16,65535&t):String.fromCharCode(t);console.warn("Label#"+e+": failed to get a glyph for '"+t+"' (BitmapFont might not have the glyph or DynamicFont might create a glyph larger than its atlas).")},mt.Label=o),mt),s),F((Ni||(Ni=1,E=vt&&vt.__extends||(tt=function(t,e){return(tt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}tt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(vt,"__esModule",{value:!0}),vt.Pane=void 0,et=Di(),O=ki().CacheableE,E(r,O),Object.defineProperty(r.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding=t,this._paddingChanged=!0},enumerable:!1,configurable:!0}),r.prototype.modified=function(t){t&&(this.state&=-3),O.prototype.modified.call(this)},r.prototype.shouldFindChildrenByPoint=function(t){var e=this._normalizedPadding;return e.left<t.x&&this.width-e.right>t.x&&e.top<t.y&&this.height-e.bottom>t.y},r.prototype.renderCache=function(t,e){this.width<=0||this.height<=0||(this._renderBackground(),this._renderChildren(e),this._bgSurface?t.drawImage(this._bgSurface,0,0,this.width,this.height,0,0):this._backgroundImageSurface&&t.drawImage(this._backgroundImageSurface,0,0,this.width,this.height,0,0),this._childrenArea.width<=0)||this._childrenArea.height<=0||(t.save(),0===this._childrenArea.x&&0===this._childrenArea.y||t.translate(this._childrenArea.x,this._childrenArea.y),t.drawImage(this._childrenSurface,0,0,this._childrenArea.width,this._childrenArea.height,0,0),t.restore())},r.prototype.destroy=function(t){t&&this._backgroundImageSurface&&!this._backgroundImageSurface.destroyed()&&this._backgroundImageSurface.destroy(),this._bgSurface&&!this._bgSurface.destroyed()&&this._bgSurface.destroy(),this._childrenSurface&&!this._childrenSurface.destroyed()&&this._childrenSurface.destroy(),this.backgroundImage=void 0,this._backgroundImageSurface=void 0,this._beforeBackgroundImage=void 0,this._bgSurface=void 0,this._childrenSurface=void 0,O.prototype.destroy.call(this)},r.prototype._renderBackground=function(){var t;this.backgroundImage!==this._beforeBackgroundImage&&(this._backgroundImageSurface=et.SurfaceUtil.asSurface(this.backgroundImage),this._beforeBackgroundImage=this.backgroundImage),this._backgroundImageSurface&&this.backgroundEffector?(t=this.backgroundEffector.render(this._backgroundImageSurface,this.width,this.height),this._bgSurface!==t&&(this._bgSurface&&!this._bgSurface.destroyed()&&this._bgSurface.destroy(),this._bgSurface=t)):this._bgSurface=void 0},r.prototype._renderChildren=function(t){var e=this._oldWidth!==this.width||this._oldHeight!==this.height||this._paddingChanged;if(e&&(this._initialize(),this._paddingChanged=!1,this._oldWidth=this.width,this._oldHeight=this.height),this._childrenRenderer.begin(),e||this._childrenRenderer.clear(),this.children)for(var i=this.children,r=0;r<i.length;++r)i[r].render(this._childrenRenderer,t);this._childrenRenderer.end()},r.prototype._initialize=function(){var t=this._padding,t="number"==typeof t?{top:t,bottom:t,left:t,right:t}:t,e=(this._childrenArea={x:t.left,y:t.top,width:this.width-t.left-t.right,height:this.height-t.top-t.bottom},this.scene.game.resourceFactory);this._childrenSurface&&!this._childrenSurface.destroyed()&&this._childrenSurface.destroy(),this._childrenSurface=e.createSurface(Math.ceil(this._childrenArea.width),Math.ceil(this._childrenArea.height)),this._childrenRenderer=this._childrenSurface.renderer(),this._normalizedPadding=t},r.prototype._calculateBoundingRect=function(t){var e=this.getMatrix();if(t&&(e=t.multiplyNew(e)),this.visible()){for(var t={left:0,right:this.width,top:0,bottom:this.height},i=[{x:t.left,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.top},{x:t.right,y:t.bottom}],r=e.multiplyPoint(i[0]),o={left:r.x,right:r.x,top:r.y,bottom:r.y},n=1;n<i.length;++n)r=e.multiplyPoint(i[n]),o.left>r.x&&(o.left=r.x),o.right<r.x&&(o.right=r.x),r.y<o.top&&(o.top=r.y),o.bottom<r.y&&(o.bottom=r.y);return o}},vt.Pane=r),vt),s),F(ji(),s),F((Wi||(Wi=1,Object.defineProperty(Xi,"__esModule",{value:!0})),Xi),s),F(qi(),s),F((Yi||(Yi=1,Object.defineProperty($i,"__esModule",{value:!0})),$i),s),F(Zi(),s),F((Qi||(Qi=1,Object.defineProperty(or,"__esModule",{value:!0})),or),s),F(dr(),s),F((pr||(pr=1,Object.defineProperty(_r,"__esModule",{value:!0})),_r),s),F(Je(),s),F(oi(),s),F(gr(),s),F((mr||(mr=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.AudioUtil=void 0,P=_t(),x=function(t,e,i,r){return i*t/r+e},(E=Ar.AudioUtil={}).fadeIn=j,E.fadeOut=G,E.crossFade=function(t,e,i,r,o,n){var s=j(t,e,r,o=void 0===o?1:o,n=void 0===n?x:n),a=G(t,i,r,n);return{complete:function(){s.complete(),a.complete()},cancel:function(t){s.cancel(t=void 0===t?!1:t),a.cancel(t)}}},E.transitionVolume=a),Ar),s),F(Pr(),s),F((xr||(xr=1,Object.defineProperty(Or,"__esModule",{value:!0})),Or),s),F(Mr(),s),F((Lr||(Lr=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.Collision=void 0,S=_t(),b=Cr.Collision={intersectEntities:function(t,e,i,r){var o,n,s,a,h,u,c,l=t._findLowestCommonAncestorWith(e);return!(!l||(i=i?{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height}:{left:0,top:0,right:t.width,bottom:t.height},r=r?{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height}:{left:0,top:0,right:e.width,bottom:e.height},t=t._calculateMatrixTo(l),e=e._calculateMatrixTo(l),l=t.multiplyPoint({x:i.left,y:i.top}),o=t.multiplyPoint({x:i.right,y:i.top}),n=t.multiplyPoint({x:i.left,y:i.bottom}),t=t.multiplyPoint({x:i.right,y:i.bottom}),i=e.multiplyPoint({x:r.left,y:r.top}),s=e.multiplyPoint({x:r.right,y:r.top}),a=e.multiplyPoint({x:r.left,y:r.bottom}),e=e.multiplyPoint({x:r.right,y:r.bottom}),r=Math.min(l.x,o.x,n.x,t.x),h=Math.max(l.x,o.x,n.x,t.x),u=Math.min(i.x,s.x,a.x,e.x),c=Math.max(i.x,s.x,a.x,e.x),h<u)||c<r||(h=Math.min(l.y,o.y,n.y,t.y),u=Math.max(l.y,o.y,n.y,t.y),c=Math.min(i.y,s.y,a.y,e.y),r=Math.max(i.y,s.y,a.y,e.y),u<c)||r<h||!(!!(b.intersectLineSegments(l,o,i,s)||b.intersectLineSegments(l,o,s,e)||b.intersectLineSegments(l,o,e,a)||b.intersectLineSegments(l,o,a,i)||b.intersectLineSegments(o,t,i,s)||b.intersectLineSegments(o,t,s,e)||b.intersectLineSegments(o,t,e,a)||b.intersectLineSegments(o,t,a,i)||b.intersectLineSegments(t,n,i,s)||b.intersectLineSegments(t,n,s,e)||b.intersectLineSegments(t,n,e,a)||b.intersectLineSegments(t,n,a,i)||b.intersectLineSegments(n,l,i,s)||b.intersectLineSegments(n,l,s,e)||b.intersectLineSegments(n,l,e,a)||b.intersectLineSegments(n,l,a,i))||0<=(u=d(p(l,o),p(i,o)))*d(p(n,l),p(i,l))&&0<=u*d(p(t,n),p(i,n))&&0<=u*d(p(o,t),p(i,t))||0<=(c=d(p(i,s),p(l,s)))*d(p(a,i),p(l,i))&&0<=c*d(p(e,a),p(l,a))&&0<=c*d(p(s,e),p(l,e))))},intersectLineSegments:function(t,e,i,r){var o=p(e,t),n=p(r,i);return d(p(i,t),o)*d(p(r,t),o)<=0&&d(p(t,i),n)*d(p(e,i),n)<=0},intersect:function(t,e,i,r,o,n,s,a){return t<=o+s&&o<=t+i&&e<=n+a&&n<=e+r},intersectAreas:function(t,e){return b.intersect(t.x,t.y,t.width,t.height,e.x,e.y,e.width,e.height)},within:function(t,e,i,r,o){return(o=void 0===o?1:o)>=S.Util.distance(t,e,i,r)},withinAreas:function(t,e,i){return(i=void 0===i?1:i)>=S.Util.distanceBetweenAreas(t,e)}}),Cr),s),F($r(),s),F(Qr(),s),F((to||(to=1,Object.defineProperty(no,"__esModule",{value:!0})),no),s),F((oo||(oo=1,$=so&&so.__extends||(v=function(t,e){return(v=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(so,"__esModule",{value:!0}),so.DynamicFont=void 0,T=Ye(),J=Pr(),Z=br(),Q=po(),A=_t(),w=Z.Font,$(i,w),i.prototype.glyphForCharacter=function(t){var e=this._glyphs[t];if(!e||!e.isSurfaceValid){if((e=this._glyphFactory.create(t)).surface&&!this._atlasSet.addGlyph(e))return null;this._glyphs[t]=e}return this._atlasSet.touchGlyph(e),e},i.prototype.asBitmapFont=function(t){var i,e,r,o,n,s=this;return 1!==this._atlasSet.getAtlasNum()?null:(e=null,t&&(e=A.Util.charCodeAt(t,0),this.glyphForCharacter(e)),i={},Object.keys(this._glyphs).forEach(function(t){var t=Number(t),e=s._glyphs[t],e={x:e.x,y:e.y,width:e.width,height:e.height,offsetX:e.offsetX,offsetY:e.offsetY,advanceWidth:e.advanceWidth};i[t]=e}),t=i[e],r=(e=this._atlasSet.getAtlas(0)).getAtlasUsedSize(),(n=(o=this._resourceFactory.createSurface(r.width,r.height)).renderer()).begin(),n.drawImage(e._surface,0,0,r.width,r.height,0,0),n.end(),new J.BitmapFont({src:o,map:i,defaultGlyphWidth:0,defaultGlyphHeight:this.size,missingGlyph:t}))},i.prototype.destroy=function(){this._isSurfaceAtlasSetOwner&&this._atlasSet.destroy(),this._glyphs=void 0,this._glyphFactory=void 0,this._destroyed=!0},i.prototype.destroyed=function(){return this._destroyed},so.DynamicFont=i),so),s),F((fo||(fo=1,Object.defineProperty(yo,"__esModule",{value:!0})),yo),s),F(mi(),s),F(mo(),s),F((vo||(vo=1,Object.defineProperty(Po,"__esModule",{value:!0})),Po),s),F((To||(To=1,Object.defineProperty(xo,"__esModule",{value:!0})),xo),s),F((Ao||(Ao=1,Object.defineProperty(Eo,"__esModule",{value:!0})),Eo),s),F((wo||(wo=1,Object.defineProperty(Oo,"__esModule",{value:!0})),Oo),s),F(ft(),s),F(br(),s),F((So||(So=1,Object.defineProperty(ko,"__esModule",{value:!0})),ko),s),F(Lo(),s),F((Ro||(Ro=1,Object.defineProperty(Fo,"__esModule",{value:!0})),Fo),s),F(Kr(),s),F((Co||(Co=1,Object.defineProperty(Do,"__esModule",{value:!0})),Do),s),F(Ai(),s),F(ci(),s),F(Vo(),s),F((Xo||(Xo=1,Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.NinePatchSurfaceEffector=void 0,K=Di(),D.prototype.render=function(t,e,i){return this._surface&&this._surface.width===e&&this._surface.height===i&&this._beforeSrcSurface===t||(this._surface=this.game.resourceFactory.createSurface(Math.ceil(e),Math.ceil(i)),this._beforeSrcSurface=t),K.SurfaceUtil.drawNinePatch(this._surface,t,this.borderWidth),this._surface},Yo.NinePatchSurfaceEffector=D),Yo),s),F(bi(),s),F((zo||(zo=1,Object.defineProperty(Ko,"__esModule",{value:!0})),Ko),s),F(Jo(),s),F((Zo||(Zo=1,Object.defineProperty(rn,"__esModule",{value:!0})),rn),s),F((Qo||(Qo=1,Object.defineProperty(on,"__esModule",{value:!0})),on),s),F((tn||(tn=1,Object.defineProperty(nn,"__esModule",{value:!0})),nn),s),F(an(),s),F(cn(),s),F((ln||(ln=1,Object.defineProperty(Tn,"__esModule",{value:!0})),Tn),s),F((dn||(dn=1,Object.defineProperty(An,"__esModule",{value:!0})),An),s),F(Uo(),s),F(Wo(),s),F(pi(),s),F((pn||(pn=1,Object.defineProperty(wn,"__esModule",{value:!0})),wn),s),F((fn||(fn=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.SpriteFactory=void 0,m=ji(),Y=ft(),e.createSpriteFromE=function(t,e,i){var r,o,n=e.x,s=e.y,a=0,h=0,u=e.calculateBoundingRect();if(!u)throw Y.ExceptionFactory.createAssertionError("SpriteFactory.createSpriteFromE: camera must look e");r=u.right-u.left,o=u.bottom-u.top,u.left<e.x&&(a=e.x-u.left),u.top<e.y&&(h=e.y-u.top),e.moveTo(a,h),e._matrix&&(e._matrix._modified=!0);a=t.game.resourceFactory.createSurface(Math.ceil(r),Math.ceil(o)),h=a.renderer(),h.begin(),e.render(h,i),h.end(),i=new m.Sprite({scene:t,src:a,width:r,height:o});return i.moveTo(u.left,u.top),e.moveTo(n,s),e._matrix&&(e._matrix._modified=!0),i},e.createSpriteFromScene=function(t,e,i){var r=t.game.resourceFactory.createSurface(Math.ceil(e.game.width),Math.ceil(e.game.height)),o=r.renderer();o.begin();for(var n=e.children,s=0;s<n.length;++s)n[s].render(o,i);return o.end(),new m.Sprite({scene:t,src:r,width:e.game.width,height:e.game.height})},Sn.SpriteFactory=e),Sn),s),F(lo(),s),F(po(),s),F(co(),s),F((_n||(_n=1,Object.defineProperty(bn,"__esModule",{value:!0})),bn),s),F(Di(),s),F(Hi(),s),F((yn||(yn=1,Object.defineProperty(Pn,"__esModule",{value:!0})),Pn),s),F((gn||(gn=1,Object.defineProperty(xn,"__esModule",{value:!0})),xn),s),F((mn||(mn=1,Object.defineProperty(En,"__esModule",{value:!0})),En),s),F(zr(),s),F(qr(),s),F(_t(),s),F(yi(),s),F(ri(),s),F(kn(),s),F(Rn(),s),F(Yr(),s),F((Cn||(Cn=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.Game=void 0,h=pt(),B=qi(),H=dr(),N=gr(),u=$r(),c=Qr(),W=mo(),l=ft(),V=Lo(),f=Kr(),X=Vo(),z=Jo(),q=an(),_=po(),y=ri(),g=Rn(),Object.defineProperty(t.prototype,"focusingCamera",{get:function(){return this._focusingCamera},set:function(t){t!==this._focusingCamera&&(this._modified&&this.render(),this._focusingCamera=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skippingScene",{get:function(){return this._skippingScene},set:function(t){if(t!==this._skippingScene){if(t){if("full-local"!==t.local)throw l.ExceptionFactory.createAssertionError("Game#skippingScene: only 'full-local' scene is supported.");if(t._needsLoading())throw l.ExceptionFactory.createAssertionError("Game#skippingScene: must not depend on any assets.")}this._skippingScene=t}},enumerable:!1,configurable:!0}),t.prototype.pushScene=function(t,e){this._postTickTasks.push({type:0,scene:t,prepare:null==e?void 0:e.prepare})},t.prototype.replaceScene=function(t,e){var i,r;"object"===dt(e)?(i=!!e.preserveCurrent,r=e.prepare):i=!!e,this._postTickTasks.push({type:1,scene:t,preserveCurrent:i,prepare:r})},t.prototype.popScene=function(t,e){void 0===e&&(e=1);for(var i=0;i<e;i++)this._postTickTasks.push({type:2,preserveCurrent:!!t})},t.prototype.scene=function(){if(this.scenes.length)return this.scenes[this.scenes.length-1]},t.prototype.tick=function(t,e,i){var r=null;if(this._isTerminated)return!1;if(this.isLastTickLocal=!t,this.lastOmittedLocalTickCount=e||0,this.scenes.length){if(r=this.scenes[this.scenes.length-1],i&&i.length)for(var o=0;o<i.length;++o){var n=this._eventConverter.toGameEvent(i[o]),s=this._eventTriggerMap[n.type];s&&s.fire(n)}r.onUpdate.fire(),t&&++this.age}return this.onUpdate.fire(),!!this._postTickTasks.length&&(this._flushPostTickTasks(),r!==this.scenes[this.scenes.length-1])},t.prototype.render=function(){var t,e,i=null!=(t=this._skippingScene)?t:this._defaultSkippingScene;if(i&&this.isSkipping?(e=i).onUpdate.fire():e=this.scene(),this._modified&&e){for(var r=this.focusingCamera,o=this.renderers,n=this.scenes.length-1;0<=n&&this.scenes[n].seethrough;)--n;for(var s=n,a=0;a<o.length;++a){var h=o[a];if(h.begin(),h.save(),h.clear(),r&&(h.save(),r._applyTransformToRenderer(h)),e===i)for(var u=0;u<e.children.length;++u)e.children[u].render(h,r);else for(var c=s;c<this.scenes.length;++c)for(var l=this.scenes[c].children,u=0;u<l.length;++u)l[u].render(h,r);r&&h.restore(),h.restore(),h.end()}this._modified=!1}},t.prototype.resolvePointEvent=function(t){switch(t.type){case 0:return this._pointEventResolver.pointDown(t);case 1:return this._pointEventResolver.pointMove(t);case 2:return this._pointEventResolver.pointUp(t)}},t.prototype.findPointSource=function(t,e){e=e||this.focusingCamera;var i=this.scene();if(i)return i.findPointSourceByPoint(t,!1,e)},t.prototype.register=function(t){if(t.local){if(void 0===t.id)t.id=--this._localIdx;else{if(0<t.id)throw l.ExceptionFactory.createAssertionError("Game#register: invalid local id: "+t.id);if(this._localDb.has(t.id))throw l.ExceptionFactory.createAssertionError("Game#register: conflicted id: "+t.id);this._localIdx>t.id&&(this._localIdx=t.id)}this._localDb.set(t.id,t)}else{if(void 0===t.id)t.id=++this._idx;else{if(t.id<0)throw l.ExceptionFactory.createAssertionError("Game#register: invalid non-local id: "+t.id);if(this.db.has(t.id))throw l.ExceptionFactory.createAssertionError("Game#register: conflicted id: "+t.id);this._idx<t.id&&(this._idx=t.id)}this.db.set(t.id,t)}},t.prototype.unregister=function(t){(t.local?this._localDb:this.db).delete(t.id)},t.prototype.terminateGame=function(){this._isTerminated=!0,this._terminateGame()},t.prototype.modified=function(){this._modified=!0},t.prototype.raiseEvent=function(t){this.handlerSet.raiseEvent(this._eventConverter.toPlaylogEvent(t))},t.prototype.raiseTick=function(t){if(null!=t&&t.length){for(var e=[],i=0;i<t.length;i++)e.push(this._eventConverter.toPlaylogEvent(t[i]));this.handlerSet.raiseTick(e)}else this.handlerSet.raiseTick()},t.prototype.addEventFilter=function(t,e){this.handlerSet.addEventFilter(t,e)},t.prototype.removeEventFilter=function(t){this.handlerSet.removeEventFilter(t)},t.prototype.shouldSaveSnapshot=function(){return this.handlerSet.shouldSaveSnapshot()},t.prototype.saveSnapshot=function(t,e){this.handlerSet.saveSnapshot(this.age,t,this.random.serialize(),this._idx,e)},t.prototype.requestSaveSnapshot=function(e,i){var r=this;this._postTickTasks.unshift({type:3,fun:function(){var t;r.handlerSet.shouldSaveSnapshot()&&(t=e.call(i))&&r.handlerSet.saveSnapshot(r.age,t.snapshot,r.random.serialize(),r._idx,t.timestamp)},owner:null})},t.prototype.getCurrentTime=function(){return this.handlerSet.getCurrentTime()},t.prototype.isActiveInstance=function(){return"active"===this.handlerSet.getInstanceType()},t.prototype._pushPostTickTask=function(t,e){this._postTickTasks.push({type:3,fun:t,owner:e})},t.prototype._popSceneRaw=function(t){this._postTickTasks.push({type:4,preserveCurrent:t})},t.prototype._normalizeConfiguration=function(t){if(!t)throw l.ExceptionFactory.createAssertionError("Game#_normalizeConfiguration: invalid arguments");if(null==t.assets&&(t.assets={}),null==t.fps&&(t.fps=30),"number"!=typeof t.fps)throw l.ExceptionFactory.createAssertionError("Game#_normalizeConfiguration: fps must be given as a number");if(!(0<=t.fps&&t.fps<=60))throw l.ExceptionFactory.createAssertionError("Game#_normalizeConfiguration: fps must be a number in (0, 60].");if("number"!=typeof t.width)throw l.ExceptionFactory.createAssertionError("Game#_normalizeConfiguration: width must be given as a number");if("number"!=typeof t.height)throw l.ExceptionFactory.createAssertionError("Game#_normalizeConfiguration: height must be given as a number");return t},t.prototype._setAudioPlaybackRate=function(t){this.audio._setPlaybackRate(t)},t.prototype._startSuppressAudio=function(){this.audio._startSuppress()},t.prototype._endSuppressAudio=function(){this.audio._endSuppress()},t.prototype._setMuted=function(t){this.audio._setMuted(t)},t.prototype._decodeOperationPluginOperation=function(t,e){t=this.operationPluginManager.plugins[t];return t&&t.decode?t.decode(e):e},t.prototype._reset=function(t){if(this.operationPluginManager.reset(),this.operationPluginManager.onOperate.add(this._onOperationPluginOperated.fire,this._onOperationPluginOperated),this.scene()){for(;this.scene()!==this._initialScene;)this._popSceneRaw(!1),this._flushPostTickTasks();this.isLoaded||this.scenes.pop()}switch(this._skippingScene&&!this._skippingScene.destroyed()&&this._skippingScene.destroy(),t&&(void 0!==t.age&&(this.age=t.age),void 0!==t.randGenSer?this.random=g.XorshiftRandomGenerator.deserialize(t.randGenSer):void 0!==t.randSeed&&(this.random=new g.XorshiftRandomGenerator(t.randSeed))),this.audio._reset(),this._onLoad.removeAll({func:this._handleLoad,owner:this}),this.onJoin.removeAll(),this.onLeave.removeAll(),this.onSeed.removeAll(),this.onResized.removeAll(),this.onSkipChange.removeAll(),this.onSceneChange.removeAll(),this.onUpdate.removeAll(),this.handlerSet.removeAllEventFilters(),this.isSkipping=!1,this.onSkipChange.add(this._handleSkipChange,this),this.joinedPlayerIds=[],this.onJoin.add(this._handleJoinEvent,this),this.onLeave.add(this._handleLeaveEvent,this),this._idx=null!=(t=null==t?void 0:t.nextEntityId)?t:0,this._localIdx=0,this._cameraIdx=0,this.db=new y.WeakRefKVS,this._localDb=new y.WeakRefKVS,this._modified=!0,this.loadingScene=void 0,this._skippingScene=void 0,this._focusingCamera=void 0,this.lastLocalTickMode=null,this.lastTickGenerationMode=null,this.onSnapshotRequest.removeAll(),this._postTickTasks=[],this._toBeDestroyedScenes=[],this._eventConverter=new W.EventConverter({game:this,playerId:this.selfId}),this._pointEventResolver=new q.PointEventResolver({sourceResolver:this,playerId:this.selfId,maxPoints:this._configuration.maxPoints}),this.localRandom=new g.XorshiftRandomGenerator(Math.floor(9007199254740991*Math.random())),this._isTerminated=!1,this.vars={},this._moduleManager=new X.ModuleManager(this._runtimeValueBase,this._assetManager),this.surfaceAtlasSet.destroy(),this.surfaceAtlasSet=new _.SurfaceAtlasSet({resourceFactory:this.resourceFactory}),this._configuration.defaultLoadingScene){case"none":this._defaultLoadingScene=new f.LoadingScene({game:this});break;case"compact":this._defaultLoadingScene=new u.DefaultLoadingScene({game:this,style:"compact"});break;default:this._defaultLoadingScene=new u.DefaultLoadingScene({game:this})}switch(this._configuration.defaultSkippingScene){case"none":this._defaultSkippingScene=new c.DefaultSkippingScene({game:this,style:"none"});break;case"indicator":this._defaultSkippingScene=new c.DefaultSkippingScene({game:this,style:"indicator"});break;default:this._defaultSkippingScene=void 0}},t.prototype._destroy=function(){if(this.operationPluginManager.destroy(),this.scene())for(;this.scene()!==this._initialScene;)this.popScene(),this._flushPostTickTasks();this._initialScene.destroy(),this.loadingScene&&!this.loadingScene.destroyed()&&this.loadingScene.destroy(),this._defaultLoadingScene.destroyed()||this._defaultLoadingScene.destroy(),this._defaultSkippingScene&&!this._defaultSkippingScene.destroyed()&&this._defaultSkippingScene.destroy(),this._skippingScene&&!this._skippingScene.destroyed()&&this._skippingScene.destroy(),this.db=void 0,this.renderers=void 0,this.scenes=void 0,this.random=void 0,this._modified=!1,this.age=0,this.assets=void 0,this.isLoaded=!1,this.loadingScene=void 0,this.assetBase="",this.selfId=void 0,this.audio.music.stopAll(),this.audio.sound.stopAll(),this.audio=void 0,this.defaultAudioSystemId=void 0,this.handlerSet=void 0,this.localRandom=void 0,this.onJoin.destroy(),this.onJoin=void 0,this.onLeave.destroy(),this.onLeave=void 0,this.onSeed.destroy(),this.onSeed=void 0,this.onPlayerInfo.destroy(),this.onPlayerInfo=void 0,this.onResized.destroy(),this.onResized=void 0,this.onSkipChange.destroy(),this.onSkipChange=void 0,this.onSceneChange.destroy(),this.onSceneChange=void 0,this.onUpdate.destroy(),this.onUpdate=void 0,this.onSnapshotRequest.destroy(),this.onSnapshotRequest=void 0,this.join=void 0,this.leave=void 0,this.seed=void 0,this.playerInfo=void 0,this.snapshotRequest=void 0,this.resized=void 0,this.skippingChanged=void 0,this._sceneChanged=void 0,this._loaded=void 0,this._started=void 0,this._operationPluginOperated=void 0,this._onSceneChange.destroy(),this._onSceneChange=void 0,this._onLoad.destroy(),this._onLoad=void 0,this._onStart.destroy(),this._onStart=void 0,this.resourceFactory=void 0,this.playId=void 0,this.operationPlugins=void 0,this._eventTriggerMap=void 0,this._initialScene=void 0,this._defaultLoadingScene=void 0,this._main=void 0,this._mainFunc=void 0,this._mainParameter=void 0,this._assetManager.destroy(),this._assetManager=void 0,this.asset=void 0,this._eventConverter=void 0,this._pointEventResolver=void 0,this.operationPluginManager=void 0,this._onOperationPluginOperated.destroy(),this._onOperationPluginOperated=void 0,this._idx=0,this._localDb=void 0,this._localIdx=0,this._cameraIdx=0,this._isTerminated=!0,this._focusingCamera=void 0,this._skippingScene=void 0,this._configuration=void 0,this._postTickTasks=void 0,this.surfaceAtlasSet.destroy(),this.surfaceAtlasSet=void 0,this._moduleManager=void 0},t.prototype._loadAndStart=function(t){this._mainParameter=t||{},this.isLoaded?this._handleLoad():(this._onLoad.add(this._handleLoad,this),this.pushScene(this._initialScene),this._flushPostTickTasks())},t.prototype._startLoadingGlobalAssets=function(){if(this.isLoaded)throw l.ExceptionFactory.createAssertionError("Game#_startLoadingGlobalAssets: already loaded.");this.pushScene(this._initialScene),this._flushPostTickTasks()},t.prototype._updateEventTriggers=function(t){this._modified=!0,t?(this._eventTriggerMap.message=t.onMessage,this._eventTriggerMap["point-down"]=t.onPointDownCapture,this._eventTriggerMap["point-move"]=t.onPointMoveCapture,this._eventTriggerMap["point-up"]=t.onPointUpCapture,this._eventTriggerMap.operation=t.onOperation,t._activate()):(this._eventTriggerMap.message=void 0,this._eventTriggerMap["point-down"]=void 0,this._eventTriggerMap["point-move"]=void 0,this._eventTriggerMap["point-up"]=void 0,this._eventTriggerMap.operation=void 0)},t.prototype._handleInitialSceneLoad=function(){this._initialScene.onLoad.remove(this._handleInitialSceneLoad,this),this.assets=this._initialScene.assets,this.isLoaded=!0,this._onLoad.fire(this)},t.prototype._handleOperationPluginOperated=function(t){t=this._eventConverter.makePlaylogOperationEvent(t);this.handlerSet.raiseEvent(t)},t.prototype._handleSceneChanged=function(t){this._updateEventTriggers(t);var e=t?t.local:"full-local",t=t?t.tickGenerationMode:"by-clock";this.lastLocalTickMode===e&&this.lastTickGenerationMode===t||(this.lastLocalTickMode=e,this.lastTickGenerationMode=t,this.handlerSet.changeSceneMode({local:e,tickGenerationMode:t}))},t.prototype._handleSkippingSceneReady=function(t){this._pushPostTickTask(t._fireLoaded,t)},t.prototype._terminateGame=function(){},t.prototype._flushPostTickTasks=function(){do{var t=this._postTickTasks;this._postTickTasks=[];for(var e=0;e<t.length;++e){var i=t[e];switch(i.type){case 0:var r=this.scene();r&&r._deactivate(),this._doPushScene(i.scene,!1,i.prepare?this._createPreparingLoadingScene(i.scene,i.prepare,"akashic:preparing-".concat(i.scene.name)):void 0);break;case 1:this._doPopScene(i.preserveCurrent,!1,!1),this._doPushScene(i.scene,!1,i.prepare?this._createPreparingLoadingScene(i.scene,i.prepare,"akashic:preparing-".concat(i.scene.name)):void 0);break;case 2:this._doPopScene(i.preserveCurrent,!1,!0);break;case 3:i.fun.call(i.owner);break;case 4:this._doPopScene(i.preserveCurrent,!0,!0);break;default:throw l.ExceptionFactory.createAssertionError("Game#_flushPostTickTasks: unknown post-tick task type.")}}}while(0<this._postTickTasks.length);if(0<this._toBeDestroyedScenes.length){for(var o=0,n=this._toBeDestroyedScenes;o<n.length;o++)n[o].destroy();this._toBeDestroyedScenes=[]}},t.prototype._handleSkipChange=function(t){(this.isSkipping=t)&&(t=null!=(t=this._skippingScene)?t:this._defaultSkippingScene)&&!t._loaded&&(t._load(),t._onReady.addOnce(this._handleSkippingSceneReady,this)),this._cleanDB(),this._modified=!0},t.prototype._handleJoinEvent=function(t){t.player.id&&-1===this.joinedPlayerIds.indexOf(t.player.id)&&this.joinedPlayerIds.push(t.player.id)},t.prototype._handleLeaveEvent=function(e){this.joinedPlayerIds=this.joinedPlayerIds.filter(function(t){return t!==e.player.id})},t.prototype._doPopScene=function(t,e,i){var r,o=this.scenes.pop();if(!e)for(;o&&o instanceof f.LoadingScene;)o._clearTargetScene(),o=this.scenes.pop();if(!o)throw l.ExceptionFactory.createAssertionError("Game#_doPopScene: invalid call; scene stack underflow");if(o===this._initialScene)throw l.ExceptionFactory.createAssertionError("Game#_doPopScene: invalid call; attempting to pop the initial scene");t||this._toBeDestroyedScenes.includes(o)||this._toBeDestroyedScenes.push(o),!e&&(r=this.scene())&&r._needsLoading()&&"loaded-fired"!==r._loadingState&&(e=r._waitingPrepare?this._createPreparingLoadingScene(r,r._waitingPrepare,"akashic:preparing-".concat(r.name)):null!=(t=this.loadingScene)?t:this._defaultLoadingScene,this._doPushScene(e,!0,this._defaultLoadingScene),e.reset(r)),i&&(r=this.scene(),this.onSceneChange.fire(r),this._onSceneChange.fire(r))},t.prototype._handleLoad=function(){for(var t=0,e=this._configuration.operationPlugins||[];t<e.length;t++){var i,r=e[t];r.script&&(i=this._moduleManager._internalRequire(r.script),i=this.operationPluginManager.register(i,r.code,r.option),!r.manualStart)&&i&&i.start()}this.operationPlugins=this.operationPluginManager.plugins;for(var o=0,n=this._assetManager.preloadScriptAssetPaths();o<n.length;o++){var s=n[o],a=this._moduleManager._internalRequire(s);if(!a||"function"!=typeof a)throw l.ExceptionFactory.createAssertionError("Game#_handleLoad: ".concat(s," has no-exported function."));a()}if(this._mainFunc)this._mainFunc(this._runtimeValueBase,this._mainParameter||{});else{if(!this._main)throw l.ExceptionFactory.createAssertionError("Game#_handleLoad: does not have an entry point");var h=this._moduleManager._internalRequire(this._main);if(!h||"function"!=typeof h)throw l.ExceptionFactory.createAssertionError("Game#_handleLoad: Entry point ".concat(this._main," not found."));h(this._mainParameter)}this._flushPostTickTasks(),this._onStart.fire()},t.prototype._doPushScene=function(t,e,i){var r=this.scenes;if(!e)for(;0<r.length&&r[r.length-1]instanceof f.LoadingScene;)r.pop()._clearTargetScene();if(i=i||this.loadingScene||this._defaultLoadingScene,r.push(t),t._needsLoading()&&"loaded-fired"!==t._loadingState){if(this._defaultLoadingScene._needsLoading())throw l.ExceptionFactory.createAssertionError("Game#_doPushScene: _defaultLoadingScene must not depend on any assets.");this._doPushScene(i,!0,this._defaultLoadingScene),i.reset(t)}else this.onSceneChange.fire(t),this._onSceneChange.fire(t),t._loaded||(t._load(),this._pushPostTickTask(t._fireLoaded,t));this._modified=!0},t.prototype._createPreparingLoadingScene=function(e,t,i){var r=this,o=(e._waitingPrepare=t,new f.LoadingScene({game:this,explicitEnd:!0,name:i}));return o.onTargetReady.addOnce(function(){var t=e._waitingPrepare;e._waitingPrepare=void 0,t?t(function(){r._isTerminated||o.end()}):r._pushPostTickTask(o.end,o)}),o},t.prototype._cleanDB=function(){this.db.clean(),this._localDb.clean()},Fn.Game=t),Fn),s)),Pt;function t(t){var e=this._normalizeConfiguration(t.configuration);if(this.fps=e.fps,this.width=e.width,this.height=e.height,this.renderers=[],this.scenes=[],this.age=0,this.assetBase=t.assetBase||"",this.resourceFactory=t.resourceFactory,this.handlerSet=t.handlerSet,this.selfId=t.selfId,this.db=void 0,this.loadingScene=void 0,this.operationPlugins=void 0,this.random=void 0,this.localRandom=void 0,this._defaultLoadingScene=void 0,this._defaultSkippingScene=void 0,this._eventConverter=void 0,this._pointEventResolver=void 0,this._idx=void 0,this._localDb=void 0,this._localIdx=void 0,this._cameraIdx=void 0,this._isTerminated=void 0,this._modified=void 0,this._postTickTasks=void 0,this._toBeDestroyedScenes=[],this.playId=void 0,this.isSkipping=!1,this.joinedPlayerIds=[],this.audio=new N.AudioSystemManager(this.resourceFactory),this.defaultAudioSystemId="sound",this.assets={},this.surfaceAtlasSet=new _.SurfaceAtlasSet({resourceFactory:this.resourceFactory}),this.onJoin=new h.Trigger,this.onLeave=new h.Trigger,this.onPlayerInfo=new h.Trigger,this.onSeed=new h.Trigger,this.join=this.onJoin,this.leave=this.onLeave,this.playerInfo=this.onPlayerInfo,this.seed=this.onSeed,this._eventTriggerMap={unknown:void 0,timestamp:void 0,join:this.onJoin,leave:this.onLeave,"player-info":this.onPlayerInfo,seed:this.onSeed,message:void 0,"point-down":void 0,"point-move":void 0,"point-up":void 0,operation:void 0},this.onResized=new h.Trigger,this.onSkipChange=new h.Trigger,this.resized=this.onResized,this.skippingChanged=this.onSkipChange,this.isLastTickLocal=!0,this.lastOmittedLocalTickCount=0,this.lastLocalTickMode=null,this.lastTickGenerationMode=null,this._onLoad=new h.Trigger,this._onStart=new h.Trigger,this._loaded=this._onLoad,this._started=this._onStart,this.isLoaded=!1,this.onSnapshotRequest=new h.Trigger,this.snapshotRequest=this.onSnapshotRequest,this.external={},this._runtimeValueBase=Object.create(t.engineModule,{game:{value:this,enumerable:!0}}),this._main=e.main,this._mainFunc=t.mainFunc,this._mainParameter=void 0,this._configuration=e,Array.isArray(e.assets))throw new Error("Game#constructor: array type of configuration.assets is not yet supported");this._assetManager=new H.AssetManager(this,e.assets,e.audio,e.moduleMainScripts,e.moduleMainPaths),this._moduleManager=void 0,this.asset=new B.AssetAccessor(this._assetManager),this.operationPluginManager=new z.OperationPluginManager(this,t.operationPluginViewInfo||null),this._onOperationPluginOperated=new h.Trigger,this._operationPluginOperated=this._onOperationPluginOperated,this._onOperationPluginOperated.add(this._handleOperationPluginOperated,this),this.onSceneChange=new h.Trigger,this._onSceneChange=new h.Trigger,this._onSceneChange.add(this._handleSceneChanged,this),this._sceneChanged=this._onSceneChange,this.onUpdate=new h.Trigger,this._initialScene=new V.InitialScene({game:this,assetIds:this._assetManager.globalAssetIds(),local:!0,name:"akashic:initial-scene"}),this._initialScene.onAllAssetsLoad.add(this._handleInitialSceneLoad,this),this._reset({age:0})}function e(){}function D(t,e){void 0===e&&(e=4),this.game=t,this.borderWidth="number"==typeof e?{top:e,bottom:e,left:e,right:e}:e}function i(t){var e=w.call(this)||this,i=(e.fontFamily=t.fontFamily,e.size=t.size,e.hint=null!=t.hint?t.hint:{},e.fontColor=null!=t.fontColor?t.fontColor:"black",e.fontWeight=null!=t.fontWeight?t.fontWeight:T.FontWeight.Normal,e.strokeWidth=null!=t.strokeWidth?t.strokeWidth:0,e.strokeColor=null!=t.strokeColor?t.strokeColor:"black",e.strokeOnly=null!=t.strokeOnly&&t.strokeOnly,t.game);e._resourceFactory=i.resourceFactory;var r,o=e.fontFamily;if("string"==typeof o)r=o;else{if(Array.isArray(o))for(var n=[],s=0;s<o.length;++s){var a=o[s];n.push("string"==typeof a?a:A.Util.enumToSnakeCase(T.FontFamily,a))}else(n=[]).push("string"==typeof o?o:A.Util.enumToSnakeCase(T.FontFamily,o));r=n}var h=e.fontWeight,h="string"==typeof h?h:A.Util.enumToSnakeCase(T.FontWeight,h);if(e._glyphFactory=e._resourceFactory.createGlyphFactory(r,e.size,e.hint.baselineHeight,e.fontColor,e.strokeWidth,e.strokeColor,e.strokeOnly,h),e._glyphs={},e._destroyed=!1,e._isSurfaceAtlasSetOwner=!1,t.surfaceAtlasSet?e._atlasSet=t.surfaceAtlasSet:t.hint?(e._isSurfaceAtlasSetOwner=!0,e._atlasSet=new Q.SurfaceAtlasSet({resourceFactory:i.resourceFactory,hint:e.hint})):e._atlasSet=i.surfaceAtlasSet,e.hint.presetChars)for(var s=0,u=e.hint.presetChars.length;s<u;s++){var c=A.Util.charCodeAt(e.hint.presetChars,s);c&&e.glyphForCharacter(c)}return e}function d(t,e){return t.x*e.y-t.y*e.x}function p(t,e){return{x:t.x-e.x,y:t.y-e.y}}function j(t,e,i,r,o){void 0===r&&(r=1),void 0===o&&(o=x),e.changeVolume(0),e.play();var t=a(t,e,i,r,o),n=t.complete,s=t.cancel;return{complete:function(){n()},cancel:function(t){s(t=void 0===t?!1:t),t&&e.stop()}}}function G(t,e,i,r){var t=a(t,e,i,0,r=void 0===r?x:r),o=t.complete,n=t.cancel;return{complete:function(){o(),e.stop()},cancel:function(t){n(t=void 0===t?!1:t)}}}function a(t,e,i,r,o){void 0===o&&(o=x);function n(){var t;return(u+=a)<=i?(t=o(u,h,r-h,i),e.changeVolume(P.Util.clamp(t,0,1)),!1):(e.changeVolume(r),!0)}function s(){t.onUpdate.contains(n)&&t.onUpdate.remove(n)}var a=1e3/t.fps,h=e.volume,u=0;e.changeVolume(P.Util.clamp(h,0,1));return t.onUpdate.add(n),{complete:function(){s(),e.changeVolume(r)},cancel:function(t){s(),t&&e.changeVolume(h)}}}function r(t){var e=O.call(this,t)||this;return e._oldWidth=t.width,e._oldHeight=t.height,e.backgroundImage=t.backgroundImage,e._beforeBackgroundImage=t.backgroundImage,e._backgroundImageSurface=et.SurfaceUtil.asSurface(t.backgroundImage),e.backgroundEffector=t.backgroundEffector,e._shouldRenderChildren=!1,e._padding=t.padding||0,e._initialize(),e._paddingChanged=!1,e}function o(t){var e=R.call(this,t)||this;return e.text=t.text,e.font=t.font,e.textAlign=null!=t.textAlign?t.textAlign:rt.TextAlign.Left,e.glyphs=new Array(t.text.length),e.fontSize=null!=t.fontSize?t.fontSize:t.font.size,e.maxWidth=t.maxWidth,e.widthAutoAdjust=null==t.widthAutoAdjust||t.widthAutoAdjust,e.textColor=t.textColor,e._realTextAlign="left",e._textWidth=0,e._overhangLeft=0,e._overhangRight=0,e._invalidateSelf(),e}function n(t){var e=I.call(this,t)||this;return e._lastUsedIndex=0,e.frameNumber=t.frameNumber||0,e.frames=null!=t.frames?t.frames:[0],e.interval=t.interval,e._timer=void 0,e.loop=null==t.loop||t.loop,e.onFinish=new nt.Trigger,e.finished=e.onFinish,e._modifiedSelf(),e}var s,U,h,B,H,N,u,c,W,l,V,f,X,z,q,_,y,g,m,Y,K,v,$,T,J,Z,Q,A,w,S,b,P,x,tt,E,et,O,it,k,rt,M,L,R,ot,C,nt,I,st,F,at,ht,ut,ct,lt}var jn,Gn,Un,Bn,Hn,Nn={};function S(){return Bn?Un:(Bn=1,Gn||(Gn=1,r=(t=F)&&F.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var o=Object.getOwnPropertyDescriptor(e,i);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,o)}:function(t,e,i,r){t[r=void 0===r?i:r]=e[i]}),e=F&&F.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||r(e,t,i)},Object.defineProperty(t,"__esModule",{value:!0}),e(Dn(),t),e((jn||(jn=1,Object.defineProperty(Nn,"__esModule",{value:!0})),Nn),t)),Un=F);var t,r,e}var Wn,Vn={};function Xn(){return Wn||(Wn=1,Object.defineProperty(Vn,"__esModule",{value:!0}),(t=e=e||{})[t.Active=0]="Active",t[t.Passive=1]="Passive",Vn.default=e),Vn;var t,e}var zn,qn={};function Yn(){var r,t,i,o;return zn||(zn=1,t=qn&&qn.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(qn,"__esModule",{value:!0}),qn.Game=void 0,i=S(),o=i.Game,t(e,o),e.prototype.requestNotifyAgePassed=function(t){this._notifyPassedAgeTable[t]=!0},e.prototype.cancelNotifyAgePassed=function(t){delete this._notifyPassedAgeTable[t]},e.prototype.requestNotifyTargetTimeReached=function(){this._notifiesTargetTimeReached=!0},e.prototype.cancelNofityTargetTimeReached=function(){this._notifiesTargetTimeReached=!1},e.prototype.fireAgePassedIfNeeded=function(){var t=this.age-1;return!!this._notifyPassedAgeTable[t]&&(delete this._notifyPassedAgeTable[t],this.agePassedTrigger.fire(t),!0)},e.prototype.getIsSkipAware=function(){return this._isSkipAware},e.prototype.setIsSkipAware=function(t){this._isSkipAware=t},e.prototype._destroy=function(){this.agePassedTrigger.destroy(),this.agePassedTrigger=null,this.targetTimeReachedTrigger.destroy(),this.targetTimeReachedTrigger=null,this.skippingChangedTrigger.destroy(),this.skippingChangedTrigger=null,this.abortTrigger.destroy(),this.abortTrigger=null,this.player=null,this.rawHandlerSet=null,this._notifyPassedAgeTable=null,this._gameArgs=null,this._globalGameArgs=null,o.prototype._destroy.call(this)},e.prototype._restartWithSnapshot=function(t){var e=t.data;null!=e.seed?(this._reset({age:t.frame,randSeed:e.seed}),this._loadAndStart({args:this._gameArgs,globalArgs:this._globalGameArgs})):(this._reset({age:t.frame,nextEntityId:e.nextEntityId,randGenSer:e.randGenSer}),this._loadAndStart({args:this._gameArgs,snapshot:e.gameSnapshot}))},e.prototype._abortGame=function(){this.abortTrigger.fire()},e.prototype._onRawTargetTimeReached=function(t){this._notifiesTargetTimeReached&&(this._notifiesTargetTimeReached=!1,this.targetTimeReachedTrigger.fire(t))},e.prototype._onSkippingChanged=function(t){this._isSkipAware&&this.onSkipChange.fire(t)},qn.Game=e),qn;function e(t){var e=o.call(this,t)||this;return e.agePassedTrigger=new i.Trigger,e.targetTimeReachedTrigger=new i.Trigger,e.skippingChangedTrigger=new i.Trigger,e.abortTrigger=new i.Trigger,e._notifyPassedAgeTable=Object.create(null),e._notifiesTargetTimeReached=!1,e._isSkipAware=!1,e.player=t.player,e.rawHandlerSet=t.handlerSet,e._gameArgs=t.gameArgs,e._globalGameArgs=t.globalGameArgs,e.skippingChangedTrigger.add(e._onSkippingChanged,e),e}}var Kn,$n,Jn,Zn={},Qn={},ts={},r={};function es(){var i,h;return $n||($n=1,i=r&&r.__assign||function(){return(i=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Object.defineProperty(r,"__esModule",{value:!0}),r._mergeObject=r.toAssetArray=r.makeLoadConfigurationFunc=void 0,h=ui(),r.makeLoadConfigurationFunc=function(t){function n(r,o,n,s){t(r,function(t,e){if(t)s(t);else if("definitions"in e){var i=e.definitions.map(function(t){return"string"==typeof t?a(n?h.PathUtil.resolvePath(n,t):t,void 0,n):a(n?h.PathUtil.resolvePath(n,t.url):t.url,t.basePath,n)});Promise.all(i).then(function(t){return s(null,t.reduce(u))}).catch(function(t){return s(t)})}else{i=void 0;try{i=((t,r)=>{var e,i,o={};function n(t,e){if(o.hasOwnProperty(t))throw new Error("_normalizeAssets: asset ID already exists: "+t);o[t]=e}if(Array.isArray(t.assets))t.assets.forEach(function(t){var e,i=t.path;i&&(t.virtualPath=null!=(e=t.virtualPath)?e:t.path,t.path=h.PathUtil.resolvePath(r,i)),n(i,t)});else if("object"===dt(t.assets))for(var s in t.assets)t.assets.hasOwnProperty(s)&&((i=t.assets[s]).path&&(i.virtualPath=null!=(e=i.virtualPath)?e:i.path,i.path=h.PathUtil.resolvePath(r,i.path)),n(s,i));return t.globalScripts&&(t.globalScripts.forEach(function(t){n(t,{type:/\.json$/i.test(t)?"text":"script",virtualPath:t,path:h.PathUtil.resolvePath(r,t),global:!0})}),delete t.globalScripts),t.assets=o,t})(e,null!=o?o:h.PathUtil.resolveDirname(r))}catch(t){return void s(t)}s(null,i)}})}function a(t,e,o){return new Promise(function(i,r){n(t,e,o,function(t,e){return t?r(t):i(e)})})}return n},r.toAssetArray=function(e){return Object.keys(e).map(function(t){return i({id:t},e[t])})},r._mergeObject=u),r;function u(t,e){for(var i=Object.keys(e),r=0,o=i.length;r<o;++r){var n=i[r],s=e[n],a=dt(s);if(a===dt(t[n]))if("string"===a||"number"===a||"boolean"===a)t[n]=s;else{if("object"!==a)throw new Error("_mergeObject(): unknown type");null==s?t[n]=s:Array.isArray(s)?t[n]=t[n].concat(s):u(t[n],s)}else t[n]=s}return t}}var is,rs,os,ns={},ss={},as={},hs={};function us(){var e;return os||(os=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.Clock=void 0,e=S(),i.prototype.start=function(){this.running||(this._totalDeltaTime=0,this._updateWaitTimes(this.fps,this.scaleFactor),this._looper.start(),this.running=!0)},i.prototype.stop=function(){this.running&&(this._looper.stop(),this.running=!1)},i.prototype.changeScaleFactor=function(t){this.running?(this.stop(),this.scaleFactor=t,this.start()):this.scaleFactor=t},i.prototype.setDeltaTimeBrokenThreshold=function(t){this.deltaTimeBrokenThreshold=t},i.prototype._onLooperCall=function(t){var e=t=isNaN(t)?this._waitTime-this._totalDeltaTime:t;if(t<=0)return this._waitTime-this._totalDeltaTime;t>this.deltaTimeBrokenThreshold&&(t=this._waitTime);var i=this._totalDeltaTime;if(!((i+=t)<=this._skipFrameWaitTime)){for(var t,r=t=i<this._waitTimeDoubled?1:i>this._waitTimeMax?this._realMaxFramePerOnce:i/this._waitTime|0,o={deltaTime:e,interrupt:!1};0<r&&this.running&&!o.interrupt;)--r,this.frameTrigger.fire(o),o.deltaTime=0;i-=(t-r)*this._waitTime,this.rawFrameTrigger.fire()}return this._totalDeltaTime=i,this._waitTime-i},i.prototype._updateWaitTimes=function(t,e){t*=e;this._waitTime=1e3/t,this._waitTimeDoubled=Math.max(2e3/t|0,1),this._waitTimeMax=Math.max(e*(1e3*this._maxFramePerOnce/t)|0,1),this._skipFrameWaitTime=this._waitTime*i.ANTICIPATE_RATE|0,this._realMaxFramePerOnce=this._maxFramePerOnce*e},i.ANTICIPATE_RATE=.8,i.DEFAULT_DELTA_TIME_BROKEN_THRESHOLD=150,hs.Clock=i),hs;function i(t){this.fps=t.fps,this.scaleFactor=t.scaleFactor||1,this.frameTrigger=new e.Trigger,this.rawFrameTrigger=new e.Trigger,this.deltaTimeBrokenThreshold=t.deltaTimeBrokenThreshold||i.DEFAULT_DELTA_TIME_BROKEN_THRESHOLD,this._platform=t.platform,this._maxFramePerOnce=t.maxFramePerOnce,t.frameHandler&&this.frameTrigger.add(t.frameHandler,t.frameHandlerOwner),this.running=!1,this._totalDeltaTime=0,this._onLooperCall_bound=this._onLooperCall.bind(this),this._looper=this._platform.createLooper(this._onLooperCall_bound),this._waitTime=0,this._waitTimeDoubled=0,this._waitTimeMax=0,this._skipFrameWaitTime=0,this._realMaxFramePerOnce=0}}var cs,ls={};function ds(){return cs||(cs=1,Object.defineProperty(ls,"__esModule",{value:!0}),(t=e=e||{})[t.Realtime=0]="Realtime",t[t.Replay=1]="Replay",t[t.FrameByFrame=2]="FrameByFrame",ls.default=e),ls;var t,e}var ps,fs={};function _s(){return ps||(ps=1,Object.defineProperty(fs,"__esModule",{value:!0}),(t=e=e||{})[t.AfterRawFrame=0]="AfterRawFrame",t[t.None=1]="None",fs.default=e),fs;var t,e}var ys,gs,ms,vs,Ts,As,ws,Ss={},bs={},Ps={},xs={};function Es(){var r,o,n,i,d,s,a,h,e,u,c,l,p,f,_,y,t,g;return Ts||(Ts=1,Object.defineProperty(as,"__esModule",{value:!0}),as.GameLoop=void 0,r=S(),o=us(),n=E(),i=Xn(),d=ds(),s=_s(),ys||(ys=1,t=Ss&&Ss.__extends||(y=function(t,e){return(y=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.ProfilerClock=void 0,g=us().Clock,t(A,g),A.prototype._onLooperCall=function(t){var e=t;if(t<=0)return this._waitTime-this._totalDeltaTime;t>this.deltaTimeBrokenThreshold&&(t=this._waitTime);var i=this._totalDeltaTime;if((i+=t)<=this._skipFrameWaitTime)this._totalDeltaTime=i;else{this._profiler.timeEnd(1),this._profiler.time(1);var t=i<this._waitTimeDoubled?1:i>this._waitTimeMax?this._realMaxFramePerOnce:i/this._waitTime|0,r=t,o={deltaTime:e,interrupt:!1};for(this._profiler.setValue(0,r-1);0<r&&this.running&&!o.interrupt;)--r,this._profiler.time(2),this.frameTrigger.fire(o),this._profiler.timeEnd(2),o.deltaTime=0;i-=(t-r)*this._waitTime,this._profiler.time(3),this.rawFrameTrigger.fire(),this._profiler.timeEnd(3),this._totalDeltaTime=i,this._profiler.flush()}return this._waitTime-i},Ss.ProfilerClock=A),a=Ss,vs||(vs=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.TickController=void 0,e=S(),u=Xn(),gs||(gs=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.TickBuffer=void 0,f=S(),_=Xn(),f.EventIndex,T.prototype.start=function(){this._receiving=!0,this._updateAmflowReceiveState()},T.prototype.stop=function(){this._receiving=!1,this._updateAmflowReceiveState()},T.prototype.setExecutionMode=function(t){this._executionMode!==t&&(this._dropUntil(this.knownLatestAge+1),this.knownLatestAge=this.currentAge,this._nextTickTimeCache=null,this._nearestAbsentAge=this.currentAge,this._executionMode=t,this._updateAmflowReceiveState())},T.prototype.setCurrentAge=function(t){this._dropUntil(t),this._nextTickTimeCache=null,this.currentAge=t,this.knownLatestAge<t-1&&(this.knownLatestAge=t-1),this._nearestAbsentAge=this._findNearestAbscentAge(t)},T.prototype.startSkipping=function(){this._skipping=!0},T.prototype.endSkipping=function(){this._skipping=!1},T.prototype.hasNextTick=function(){return this.currentAge!==this._nearestAbsentAge},T.prototype.consume=function(){var t,e;return this.currentAge===this._nearestAbsentAge?null:(t=this.currentAge)===(e=this._tickRanges[0]).start?(this._nextTickTimeCache=null,++this.currentAge,++e.start,t+this._prefetchThreshold===this._nearestAbsentAge&&this.requestTicks(this._nearestAbsentAge,this._sizeRequestOnce),e.start===e.end&&this._tickRanges.shift(),0<e.ticks.length&&e.ticks[0][0]===t?e.ticks.shift():t):(this._dropUntil(this.currentAge),this.consume())},T.prototype.readNextTickTime=function(){if(null!=this._nextTickTimeCache)return this._nextTickTimeCache;if(this.currentAge!==this._nearestAbsentAge){var t=this.currentAge,e=this._tickRanges[0];if(t!==e.start)return this._dropUntil(this.currentAge),this.readNextTickTime();if(0!==e.ticks.length){e=e.ticks[0];if(e[0]===t){var i=e[1];if(i)for(var r,o=0;o<i.length;++o)if(2===i[o][0])return(r=i[o][3])<this._oldTimestampThreshold&&(r+=this._startedAt),this._nextTickTimeCache=r}}}return null},T.prototype.isKnownLatestTickTimeNear=function(t,e,i){return this._calcKnownLatestTickTimeDelta(t,e,i)<t},T.prototype.requestTicks=function(t,e){void 0===t&&(t=this.currentAge),void 0===e&&(e=this._sizeRequestOnce),this._skipping?this.requestNonIgnorableTicks(t,e):this.requestAllTicks(t,e)},T.prototype.requestAllTicks=function(t,e){void 0===t&&(t=this.currentAge),void 0===e&&(e=this._sizeRequestOnce),this._executionMode===_.default.Passive&&("undefined"==typeof window||window.prompt!==window.confirm?this._amflow.getTickList({begin:t,end:t+e},this._onTicks_bound):this._amflow.getTickList(t,t+e,this._onTicks_bound))},T.prototype.requestNonIgnorableTicks=function(t,e){void 0===t&&(t=this.currentAge),void 0===e&&(e=this._sizeRequestOnce),this._executionMode===_.default.Passive&&("undefined"==typeof window||window.prompt!==window.confirm?this._amflow.getTickList({begin:t,end:t+e,excludeEventFlags:{ignorable:!0}},this._onTicks_bound):this._amflow.getTickList(t,t+e,this._onTicks_bound))},T.prototype.addTick=function(t){var e=t[0],i=this.currentAge===e&&this._nearestAbsentAge===e;this.knownLatestAge<e&&(this.knownLatestAge=e);for(var r=this._tickRanges.length-1;0<=r&&!(e>=(o=this._tickRanges[r]).start);--r);var o,n=this._tickRanges[r+1];r<0?this._tickRanges.unshift(this._createTickRangeFromTick(t)):e===(o=this._tickRanges[r]).end?(++o.end,t[1]&&o.ticks.push(t)):e>o.end&&this._tickRanges.splice(r+1,0,this._createTickRangeFromTick(t)),this._nearestAbsentAge===e&&(++this._nearestAbsentAge,n)&&this._nearestAbsentAge===n.start&&(this._nearestAbsentAge=this._findNearestAbscentAge(this._nearestAbsentAge)),i&&this.gotNextTickTrigger.fire()},T.prototype.addTickList=function(t){for(var e=t[0],i=t[1]+1,t=t[2],r=e,o=i,n=(this.knownLatestAge<i-1&&(this.knownLatestAge=i-1),0),s=this._tickRanges.length,n=0;n<s;++n){var a=this._tickRanges[n];if(e<a.start)break}var h=n;for(0<n&&(u=this._tickRanges[--n].end,e<u)&&(e=u);n<s&&(a=this._tickRanges[n],!(i<=a.end));++n);if((i=n<s&&(u=this._tickRanges[n].start)<i?u:i)<=e)return{start:e,end:e,ticks:[]};t=t||[],r===e&&o===i||(t=t.filter(function(t){t=t[0];return e<=t&&t<i}));var u={start:e,end:i,ticks:t},r=Math.max(0,n-h);return this._tickRanges.splice(h,r,u),e<=this._nearestAbsentAge&&this._nearestAbsentAge<i&&(this._nearestAbsentAge=this._findNearestAbscentAge(this._nearestAbsentAge)),u},T.prototype.dropAll=function(){this._tickRanges=[],this._nearestAbsentAge=this.currentAge,this._nextTickTimeCache=null},T.prototype._updateAmflowReceiveState=function(){this._receiving&&this._executionMode===_.default.Passive?this._amflow.onTick(this._addTick_bound):this._amflow.offTick(this._addTick_bound)},T.prototype._onTicks=function(t,e){if(t)throw t;e&&(t=this.currentAge===this._nearestAbsentAge,e=this.addTickList(e),t&&e.start<=this.currentAge&&this.currentAge<e.end&&this.gotNextTickTrigger.fire(),e.start!==e.end)||this.gotNoTickTrigger.fire()},T.prototype._findNearestAbscentAge=function(t){for(var e=0,i=this._tickRanges.length;e<i&&!(t<=this._tickRanges[e].end);++e);for(;e<i;++e){var r=this._tickRanges[e];if(t<r.start)break;t=r.end}return t},T.prototype._dropUntil=function(t){for(var e=0;e<this._tickRanges.length&&!(t<this._tickRanges[e].end);++e);if(this._tickRanges=this._tickRanges.slice(e),0!==this._tickRanges.length){var i=this._tickRanges[0];if(!(t<i.start)){for(i.start=t,e=0;e<i.ticks.length&&!(t<=i.ticks[e][0]);++e);i.ticks=i.ticks.slice(e)}}},T.prototype._calcKnownLatestTickTimeDelta=function(t,e,i){var r=this._tickRanges;if(0===r.length)return 0;for(var o=0,n=h=r[r.length-1].end,s=r.length-1;0<=s;--s){var a=r[s];if(a.end!==h)return 1/0;for(var h=a.start,u=a.ticks,c=u.length-1;0<=c;--c){var l=u[c],d=l[1];if(d){l=l[0];if((o+=(n-l)*i)>t)return t;for(var p,n=l,f=0;f<d.length;++f)if(2===d[f][0])return p=d[f][3]-e+o,Math.min(p,t)}}}return o+=(n-r[0].start)*i,Math.min(o,t)},T.prototype._createTickRangeFromTick=function(t){var e=t[0],e={start:e,end:e+1,ticks:[]};return t[1]&&e.ticks.push(t),e},T.DEFAULT_PREFETCH_THRESHOLD=1800,T.DEFAULT_SIZE_REQUEST_ONCE=9e3,Ps.TickBuffer=T),c=Ps,ms||(ms=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.TickGenerator=void 0,p=S(),v.prototype.next=function(){var t,e;this._generatingTick&&(e=this._eventBuffer.readEvents(),t=this._eventBuffer.readJoinLeaves(),e=e&&t?e.concat(t):null!=e?e:t,this.tickTrigger.fire([this._nextAge++,e]))},v.prototype.forceNext=function(){var t=this._generatingTick;this._generatingTick=!0,this.next(),this._generatingTick=t},v.prototype.startStopGenerate=function(t){this._generatingTick=t},v.prototype.startTick=function(){this._generatingTick=!0},v.prototype.stopTick=function(){this._generatingTick=!1},v.prototype.setNextAge=function(t){this._nextAge=t},xs.TickGenerator=v),l=xs,m.prototype.startTick=function(){this._started=!0,this._updateGeneratorState()},m.prototype.stopTick=function(){this._started=!1,this._updateGeneratorState()},m.prototype.startTickOnce=function(){this._started=!0,this._generator.tickTrigger.addOnce(this._stopTriggerOnTick,this),this._updateGeneratorState()},m.prototype.setNextAge=function(t){this._generator.setNextAge(t)},m.prototype.forceGenerateTick=function(){this._generator.forceNext()},m.prototype.getBuffer=function(){return this._buffer},m.prototype.setExecutionMode=function(t){this._executionMode!==t&&(this._executionMode=t,this._updateGeneratorState(),this._buffer.setExecutionMode(t))},m.prototype._stopTriggerOnTick=function(){this.stopTick()},m.prototype._updateGeneratorState=function(){var t=this._started&&this._executionMode===u.default.Active;this._generator.startStopGenerate(t)},m.prototype._onTickGenerated=function(t){this._amflow.sendTick(t),this._buffer.addTick(t)},bs.TickController=m),h=bs,r.EventIndex,w.prototype.reset=function(t){this._clock.frameTrigger.remove(this._onEventsProcessed,this),this._skipping&&this._stopSkipping(),this._tickBuffer.setCurrentAge(t.frame),this._currentTime=t.timestamp||t.data.timestamp||0,this._currentTickTime=this._currentTime,this._waitingNextTick=!1,this._foundLatestTick=!1,this._lastRequestedStartPointAge=-1,this._lastRequestedStartPointTime=-1,this._omittedTickDuration=0,this._game._restartWithSnapshot(t)},w.prototype.start=function(){this.running=!0,this._clock.start()},w.prototype.stop=function(){this._clock.stop(),this.running=!1},w.prototype.setNextAge=function(t){this._tickController.setNextAge(t)},w.prototype.getExecutionMode=function(){return this._executionMode},w.prototype.setExecutionMode=function(t){this._executionMode=t,this._tickController.setExecutionMode(t)},w.prototype.getLoopConfiguration=function(){var t;return{loopMode:this._loopMode,delayIgnoreThreshold:this._delayIgnoreThreshold,skipTicksAtOnce:this._skipTicksAtOnce,skipThreshold:this._skipThreshold,skipAwareGame:this._game.getIsSkipAware(),jumpTryThreshold:this._jumpTryThreshold,jumpIgnoreThreshold:this._jumpIgnoreThreshold,playbackRate:this._playbackRate,loopRenderMode:null!=(t=this._loopRenderMode)?t:void 0,targetTimeFunc:null!=(t=this._targetTimeFunc)?t:void 0,targetTimeOffset:null!=(t=this._targetTimeOffset)?t:void 0,originDate:null!=(t=this._originDate)?t:void 0,omitInterpolatedTickOnReplay:this._omitInterpolatedTickOnReplay,targetAge:null!=(t=this._targetAge)?t:void 0,deltaTimeBrokenThreshold:this._clock.deltaTimeBrokenThreshold}},w.prototype.setLoopConfiguration=function(t){null!=t.loopMode&&(this._loopMode=t.loopMode),null!=t.delayIgnoreThreshold&&(this._delayIgnoreThreshold=t.delayIgnoreThreshold),null!=t.skipTicksAtOnce&&(this._skipTicksAtOnce=t.skipTicksAtOnce),null!=t.skipThreshold&&(this._skipThreshold=t.skipThreshold,this._skipThresholdTime=this._skipThreshold*this._frameTime),null!=t.skipAwareGame&&this._game.setIsSkipAware(t.skipAwareGame),null!=t.jumpTryThreshold&&(this._jumpTryThreshold=t.jumpTryThreshold),null!=t.jumpIgnoreThreshold&&(this._jumpIgnoreThreshold=t.jumpIgnoreThreshold),null!=t.playbackRate&&(this._playbackRate=t.playbackRate,this._clock.changeScaleFactor(this._playbackRate),this._updateGameAudioSuppression()),null!=t.loopRenderMode&&this._setLoopRenderMode(t.loopRenderMode),null!=t.targetTimeFunc&&(this._targetTimeFunc=t.targetTimeFunc),null!=t.targetTimeOffset&&(this._targetTimeOffset=t.targetTimeOffset),null!=t.originDate&&(this._originDate=t.originDate),this._realTargetTimeOffset=null!=this._originDate?this._originDate:(this._targetTimeOffset||0)+this._startedAt,null!=t.omitInterpolatedTickOnReplay&&(this._omitInterpolatedTickOnReplay=t.omitInterpolatedTickOnReplay),null!=t.targetAge&&(this._targetAge!==t.targetAge&&(this._waitingNextTick=!1),this._targetAge=t.targetAge),null!=t.deltaTimeBrokenThreshold&&this._clock.setDeltaTimeBrokenThreshold(t.deltaTimeBrokenThreshold)},w.prototype.addTickList=function(t){this._tickBuffer.addTickList(t)},w.prototype.getCurrentTime=function(){return this._currentTime},w.prototype._startSkipping=function(t){this._skipping=!0,t||this._updateGameAudioSuppression(),this._tickBuffer.startSkipping(),this._eventBuffer.startSkipping(),this._game.skippingChangedTrigger.fire(!0)},w.prototype._stopSkipping=function(){this._skipping=!1,this._updateGameAudioSuppression(),this._tickBuffer.endSkipping(),this._eventBuffer.endSkipping(),this._game.skippingChangedTrigger.fire(!1)},w.prototype._updateGameAudioSuppression=function(){1!==(this._skipping?this._playbackRate*this._skipTicksAtOnce:this._playbackRate)?this._game._startSuppressAudio():this._game._endSuppressAudio()},w.prototype._handleSceneChange=function(t){var e=t.local,i=t.tickGenerationMode;if(this._sceneLocalMode!==e||this._sceneTickMode!==i)switch(this._sceneLocalMode=e,this._sceneTickMode=i,this._clock.frameTrigger.remove(this._onFrame,this),this._clock.frameTrigger.remove(this._onLocalFrame,this),e){case"full-local":this._tickController.stopTick(),this._clock.frameTrigger.add(this._onLocalFrame,this);break;case"non-local":case"interpolate-local":"by-clock"===i?this._tickController.startTick():this._tickController.startTickOnce(),this._clock.frameTrigger.add(this._onFrame,this);break;default:return void this.errorTrigger.fire(new Error("Unknown LocalTickMode: "+e))}},w.prototype._onLocalFrame=function(){this._doLocalTick()},w.prototype._doLocalTick=function(){var t=this._game,e=this._eventBuffer.readLocalEvents();this._currentTime+=this._frameTime,e?t.tick(!1,Math.floor(this._omittedTickDuration/this._frameTime),e):t.tick(!1,Math.floor(this._omittedTickDuration/this._frameTime)),this._omittedTickDuration=0},w.prototype._onFrame=function(t){var e,i,r;this._loopMode===d.default.Replay&&this._targetTimeFunc?(i=(e=this._targetTimeFunc())+this._realTargetTimeOffset,r=this._currentTickTime,this._onFrameForTimedReplay(i,t),r===this._currentTickTime&&r<=i&&this._isImmediateBeforeOf(i)&&this.rawTargetTimeReachedTrigger.fire(e)):this._onFrameNormal(t)},w.prototype._onFrameForTimedReplay=function(t,e){var i=!1,r=this._game,o=(t-this._currentTickTime)/this._frameTime;if((o>this._jumpTryThreshold||o<0)&&!this._waitingStartPoint&&this._lastRequestedStartPointTime<this._currentTickTime&&(this._waitingStartPoint=!0,this._lastRequestedStartPointTime=t,this._amflow.getStartPoint({timestamp:t},this._onGotStartPoint_bound)),o<=0)this._skipping&&this._stopSkipping();else{!this._skipping&&(o>this._skipThreshold||0===this._tickBuffer.currentAge)&&(this._tickBuffer.hasNextTick()||this._omitInterpolatedTickOnReplay&&this._foundLatestTick)&&(o=o<=this._skipThreshold,this._startSkipping(o));for(var n=0;n<this._skipTicksAtOnce;++n){var s=this._currentTime+this._frameTime;if(!this._tickBuffer.hasNextTick()){this._waitingNextTick||(this._startWaitingNextTick(),this._foundLatestTick)||this._tickBuffer.requestNonIgnorableTicks(),this._omitInterpolatedTickOnReplay&&"interpolate-local"===this._sceneLocalMode&&(this._foundLatestTick&&(this._currentTime=t-this._frameTime),s<t)&&this._doLocalTick();break}var a=null!=(a=this._tickBuffer.readNextTickTime())?a:this._currentTickTime+this._frameTime;if(t<=a&&t<=s)break;if(s<a){if(!this._omitInterpolatedTickOnReplay||!this._skipping){"interpolate-local"===this._sceneLocalMode&&this._doLocalTick();continue}if(t<=a){this._omittedTickDuration+=t-this._currentTickTime,this._currentTime=Math.floor(t/this._frameTime)*this._frameTime;break}this._omittedTickDuration+=(s=a)-this._currentTickTime}this._currentTime=s,this._currentTickTime=a;var h,u,s=this._tickBuffer.consume(),a=-1;if(this._events.length=0,null!=s&&((h=this._eventBuffer.readLocalEvents())&&(u=this._events).push.apply(u,h),i=("number"==typeof s?a=s:(a=s[0],(u=s[1])&&(h=this._events).push.apply(h,u)),r.tick(!0,Math.floor(this._omittedTickDuration/this._frameTime),this._events))),this._omittedTickDuration=0,r._notifyPassedAgeTable[a]&&r.fireAgePassedIfNeeded()){e.interrupt=!0;break}if(i)break}this._skipping&&t-this._currentTime<this._frameTime&&this._isImmediateBeforeOf(t)&&(this._stopSkipping(),this._tickBuffer.dropAll(),this._tickBuffer.requestTicks())}},w.prototype._onFrameNormal=function(t){var e=!1,i=this._game;if(!this._skipping&&t.deltaTime>this._skipThresholdTime&&(this._startSkipping(!1),this._waitingNextTick)&&this._stopSkipping(),this._waitingNextTick)"interpolate-local"===this._sceneLocalMode&&this._doLocalTick();else{var r,o=this._tickBuffer.currentAge,n=this._loopMode===d.default.Realtime?(r=this._tickBuffer.knownLatestAge+1)-o:null===this._targetAge?(r=null,1):this._targetAge===o?(r=this._targetAge=null,1):(r=this._targetAge)-o;if((n>this._jumpTryThreshold||n<0)&&!this._waitingStartPoint&&this._lastRequestedStartPointAge<o&&(this._waitingStartPoint=!0,this._lastRequestedStartPointAge=r,this._amflow.getStartPoint({frame:r},this._onGotStartPoint_bound)),n<=0)0===n&&(this._foundLatestTick||this._tickBuffer.requestNonIgnorableTicks(),this._startWaitingNextTick()),"interpolate-local"===this._sceneLocalMode&&this._doLocalTick(),this._skipping&&this._stopSkipping();else{!this._skipping&&(n>this._skipThreshold||0===o)&&this._tickBuffer.hasNextTick()&&(o=0===o&&this._tickBuffer.isKnownLatestTickTimeNear(this._skipThresholdTime,this._currentTickTime,this._frameTime),this._startSkipping(o));for(var s=!this._skipping&&n<=this._delayIgnoreThreshold?1:Math.min(n,this._skipTicksAtOnce),a=0;a<s;++a){var h=this._currentTime+this._frameTime,u=this._tickBuffer.readNextTickTime();if(null!=u&&h<u){if(!(this._loopMode===d.default.Realtime||this._omitInterpolatedTickOnReplay&&this._skipping)){if("interpolate-local"!==this._sceneLocalMode)break;this._doLocalTick();continue}h=Math.ceil(u/this._frameTime)*this._frameTime,this._omittedTickDuration+=h-this._currentTickTime}this._currentTime=h,this._currentTickTime=null!=u?u:this._currentTickTime+this._frameTime;h=this._tickBuffer.consume(),u=-1;if(this._events.length=0,null==h){this._tickBuffer.requestTicks(),this._startWaitingNextTick();break}var c,l=this._eventBuffer.readLocalEvents();if(l&&(c=this._events).push.apply(c,l),e=("number"==typeof h?u=h:(u=h[0],(c=h[1])&&(l=this._events).push.apply(l,c)),i.tick(!0,Math.floor(this._omittedTickDuration/this._frameTime),this._events)),this._omittedTickDuration=0,i._notifyPassedAgeTable[u]&&i.fireAgePassedIfNeeded()){t.interrupt=!0;break}if(e)break}this._skipping&&r-this._tickBuffer.currentAge<1&&this._stopSkipping()}}},w.prototype._onGotNextFrameTick=function(){this._waitingNextTick&&this._loopMode!==d.default.FrameByFrame&&this._stopWaitingNextTick()},w.prototype._onGotNoTick=function(){this._waitingNextTick&&(this._foundLatestTick=!0)},w.prototype._onGotStartPoint=function(t,e){if(this._waitingStartPoint=!1,t)this.errorTrigger.fire(t);else if(e){if(this._targetTimeFunc&&this._loopMode!==d.default.Realtime){t=this._targetTimeFunc()+this._realTargetTimeOffset;if(t<e.timestamp)return;var i=this._currentTickTime;if(i<=t&&e.timestamp<i+this._jumpIgnoreThreshold*this._frameTime)return}else{t=this._loopMode===d.default.Realtime?this._tickBuffer.knownLatestAge+1:this._targetAge;if(null===t||t<e.frame)return;i=this._tickBuffer.currentAge;if(i<=t&&e.frame<i+this._jumpIgnoreThreshold)return}this.reset(e)}},w.prototype._onGameStarted=function(){this._clock.frameTrigger.add({index:0,owner:this,func:this._onEventsProcessed})},w.prototype._onEventsProcessed=function(){this._eventBuffer.processEvents("full-local"===this._sceneLocalMode)},w.prototype._setLoopRenderMode=function(t){if(t!==this._loopRenderMode)switch(this._loopRenderMode=t,t){case s.default.AfterRawFrame:this._clock.rawFrameTrigger.add(this._renderOnRawFrame,this);break;case s.default.None:this._clock.rawFrameTrigger.remove(this._renderOnRawFrame,this);break;default:this.errorTrigger.fire(new Error("GameLoop#_setLoopRenderMode: unknown mode: "+t))}},w.prototype._renderOnRawFrame=function(){this._game.render()},w.prototype._onGameRaiseEvent=function(t){this._eventBuffer.onEvent(t)},w.prototype._onGameRaiseTick=function(t){if(this._executionMode===i.default.Active){if(t)for(var e=0;e<t.length;++e)this._eventBuffer.addEventDirect(t[e]);this._tickController.forceGenerateTick()}},w.prototype._onPollingTick=function(){var t=Date.now();t-this._lastPollingTickTime>this._pollingTickThreshold&&(this._lastPollingTickTime=t,this._tickBuffer.requestTicks())},w.prototype._startWaitingNextTick=function(){this._waitingNextTick=!0,this._clock.rawFrameTrigger.add(this._onPollingTick,this),this._lastPollingTickTime=Date.now(),this._skipping&&this._stopSkipping()},w.prototype._stopWaitingNextTick=function(){this._waitingNextTick=!1,this._clock.rawFrameTrigger.remove(this._onPollingTick,this)},w.prototype._isImmediateBeforeOf=function(t){return this._tickBuffer.hasNextTick()?t<(null!=(t=this._tickBuffer.readNextTickTime())?t:this._currentTickTime+this._frameTime):this._foundLatestTick},as.GameLoop=w),as;function m(t){this.errorTrigger=new e.Trigger,t.errorHandler&&this.errorTrigger.add(t.errorHandler,t.errorHandlerOwner),this._amflow=t.amflow,this._clock=t.clock,this._started=!1,this._executionMode=t.executionMode,this._generator=new l.TickGenerator({amflow:t.amflow,eventBuffer:t.eventBuffer,errorHandler:this.errorTrigger.fire,errorHandlerOwner:this.errorTrigger}),this._buffer=new c.TickBuffer({amflow:t.amflow,executionMode:t.executionMode,startedAt:t.startedAt}),this._generator.tickTrigger.add(this._onTickGenerated,this),this._clock.frameTrigger.add(this._generator.next,this._generator)}function v(t){this.tickTrigger=new p.Trigger,this.errorTrigger=new p.Trigger,this._nextAge=0,this._generatingTick=!1,t.errorHandler&&this.errorTrigger.add(t.errorHandler,t.errorHandlerOwner),this._amflow=t.amflow,this._eventBuffer=t.eventBuffer}function T(t){this.currentAge=0,this.knownLatestAge=-1,this.gotNextTickTrigger=new f.Trigger,this.gotNoTickTrigger=new f.Trigger,this._receiving=!1,this._skipping=!1,this._tickRanges=[],this._nextTickTimeCache=null,this._amflow=t.amflow,this._prefetchThreshold=t.prefetchThreshold||T.DEFAULT_PREFETCH_THRESHOLD,this._sizeRequestOnce=t.sizeRequestOnce||T.DEFAULT_SIZE_REQUEST_ONCE,this._executionMode=t.executionMode,this._startedAt=t.startedAt||0,this._oldTimestampThreshold=null!=t.startedAt?t.startedAt-864e6:0,this._nearestAbsentAge=this.currentAge,this._addTick_bound=this.addTick.bind(this),this._onTicks_bound=this._onTicks.bind(this)}function A(t){var e=g.call(this,t)||this;return e._profiler=t.profiler,e}function w(t){this.errorTrigger=new r.Trigger,this.rawTargetTimeReachedTrigger=new r.Trigger,this.running=!1,this._omittedTickDuration=0,this._sceneTickMode=null,this._sceneLocalMode=null,this._waitingStartPoint=!1,this._lastRequestedStartPointAge=-1,this._lastRequestedStartPointTime=-1,this._waitingNextTick=!1,this._foundLatestTick=!1,this._skipping=!1,this._lastPollingTickTime=0,this._events=[],this._currentTime=t.startedAt,this._currentTickTime=this._currentTime,this._frameTime=1e3/t.game.fps,t.errorHandler&&this.errorTrigger.add(t.errorHandler,t.errorHandlerOwner);var e=t.configuration,i=(this._startedAt=t.startedAt,this._targetTimeFunc=e.targetTimeFunc||null,this._targetTimeOffset=e.targetTimeOffset||null,this._originDate=e.originDate||null,this._realTargetTimeOffset=null!=this._originDate?this._originDate:(this._targetTimeOffset||0)+this._startedAt,this._delayIgnoreThreshold=e.delayIgnoreThreshold||n.DEFAULT_DELAY_IGNORE_THRESHOLD,this._skipTicksAtOnce=e.skipTicksAtOnce||n.DEFAULT_SKIP_TICKS_AT_ONCE,this._skipThreshold=e.skipThreshold||n.DEFAULT_SKIP_THRESHOLD,this._skipThresholdTime=this._skipThreshold*this._frameTime,this._jumpTryThreshold=e.jumpTryThreshold||n.DEFAULT_JUMP_TRY_THRESHOLD,this._jumpIgnoreThreshold=e.jumpIgnoreThreshold||n.DEFAULT_JUMP_IGNORE_THRESHOLD,this._pollingTickThreshold=e._pollingTickThreshold||n.DEFAULT_POLLING_TICK_THRESHOLD,this._playbackRate=e.playbackRate||1,null!=e.loopRenderMode?e.loopRenderMode:s.default.AfterRawFrame);this._loopRenderMode=null,this._omitInterpolatedTickOnReplay=null==e.omitInterpolatedTickOnReplay||e.omitInterpolatedTickOnReplay,this._loopMode=e.loopMode,this._amflow=t.amflow,this._game=t.game,this._eventBuffer=t.eventBuffer,this._executionMode=t.executionMode,this._targetAge=null!=e.targetAge?e.targetAge:null,this._clock=t.profiler?new a.ProfilerClock({fps:t.game.fps,scaleFactor:this._playbackRate,platform:t.platform,maxFramePerOnce:5,profiler:t.profiler,deltaTimeBrokenThreshold:e.deltaTimeBrokenThreshold}):new o.Clock({fps:t.game.fps,scaleFactor:this._playbackRate,platform:t.platform,maxFramePerOnce:5,deltaTimeBrokenThreshold:e.deltaTimeBrokenThreshold}),this._tickController=new h.TickController({amflow:t.amflow,clock:this._clock,eventBuffer:t.eventBuffer,executionMode:t.executionMode,startedAt:t.startedAt,errorHandler:this.errorTrigger.fire,errorHandlerOwner:this.errorTrigger}),this._tickBuffer=this._tickController.getBuffer(),this._onGotStartPoint_bound=this._onGotStartPoint.bind(this),this._setLoopRenderMode(i),this._game.setIsSkipAware(null==e.skipAwareGame||e.skipAwareGame),this._game.rawHandlerSet.raiseEventTrigger.add(this._onGameRaiseEvent,this),this._game.rawHandlerSet.raiseTickTrigger.add(this._onGameRaiseTick,this),this._game.rawHandlerSet.changeSceneModeTrigger.add(this._handleSceneChange,this),this._game._onStart.add(this._onGameStarted,this),this._tickBuffer.gotNextTickTrigger.add(this._onGotNextFrameTick,this),this._tickBuffer.gotNoTickTrigger.add(this._onGotNoTick,this),this._tickBuffer.start(),this._updateGameAudioSuppression()}}function Os(){var y,e,r,g,m,v,T,A,o,i,n,t,s,a;return As||(As=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.GameDriver=void 0,y=S(),Jn||(Jn=1,s=(t=Qn)&&Qn.__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var o=Object.getOwnPropertyDescriptor(e,i);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,o)}:function(t,e,i,r){t[r=void 0===r?i:r]=e[i]}),a=Qn&&Qn.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||s(e,t,i)},Object.defineProperty(t,"__esModule",{value:!0}),a(ui(),t),a((Kn||(Kn=1,Object.defineProperty(ts,"__esModule",{value:!0})),ts),t),a(es(),t)),e=Qn,r=E(),is||(is=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.EventBuffer=void 0,c.isEventLocal=function(t){switch(t[0]){case 0:case 3:case 64:return t[5];case 1:return t[3];case 2:case 32:return t[4];case 33:return t[8];case 34:case 35:return t[12];default:throw new Error("EventBuffer.isEventLocal")}},c.prototype.setMode=function(t){null!=t.isLocalReceiver&&(this._isLocalReceiver=t.isLocalReceiver),null!=t.isReceiver&&this._isReceiver!==t.isReceiver&&(this._isReceiver=t.isReceiver,t.isReceiver?this._amflow.onEvent(this._onEvent_bound):this._amflow.offEvent(this._onEvent_bound)),null!=t.isSender&&(this._isSender=t.isSender),null!=t.isDiscarder&&(this._isDiscarder=t.isDiscarder),null!=t.defaultEventPriority&&(this._defaultEventPriority=3&t.defaultEventPriority)},c.prototype.getMode=function(){return{isLocalReceiver:this._isLocalReceiver,isReceiver:this._isReceiver,isSender:this._isSender,isDiscarder:this._isDiscarder,defaultEventPriority:this._defaultEventPriority}},c.prototype.onEvent=function(t){c.isEventLocal(t)?!this._isLocalReceiver||this._isDiscarder||this._skipping&&this._discardsLocalEventsDuringSkip||this._unfilteredLocalEvents.push(t):this._skipping&&this._discardsEventsDuringSkip||(this._isReceiver&&!this._isDiscarder&&this._unfilteredEvents.push(t),this._isSender&&(null==t[1]&&(t[1]=3&this._defaultEventPriority),this._amflow.sendEvent(t)))},c.prototype.onPointEvent=function(t){t=this._resolvePointEvent_bound(t);t&&this.onEvent(t)},c.prototype.addEventDirect=function(t){c.isEventLocal(t)?this._isLocalReceiver&&!this._isDiscarder&&this._localBuffer.push(t):(this._isReceiver&&!this._isDiscarder&&(0===t[0]||1===t[0]?this._joinLeaveBuffer:this._buffer).push(t),this._isSender&&(null==t[1]&&(t[1]=3&this._defaultEventPriority),this._amflow.sendEvent(t)))},c.prototype.readEvents=function(){var t=this._buffer;return 0===t.length?null:(this._buffer=[],t)},c.prototype.readJoinLeaves=function(){var t=this._joinLeaveBuffer;return 0===t.length?null:(this._joinLeaveBuffer=[],t)},c.prototype.readLocalEvents=function(){var t=this._localBuffer;return 0===t.length?null:(this._localBuffer=[],t)},c.prototype.addFilter=function(t,e){this._filters||(this._filters=[]),this._filters.push({func:t,handleEmpty:!!e})},c.prototype.removeFilter=function(t){if(this._filters)if(t)for(var e=this._filters.length-1;0<=e;--e)this._filters[e].func===t&&this._filters.splice(e,1);else this._filters=null},c.prototype.processEvents=function(t){var e=this._unfilteredLocalEvents,i=this._unfilteredEvents,r=(this._unfilteredLocalEvents=[],e);if(!t&&0<i.length&&(r=0<r.length?r.concat(i):i,this._unfilteredEvents=[]),this._filters)for(var o=0;o<this._filters.length;++o){var n=this._filters[o];(0<r.length||n.handleEmpty)&&(r=this._filters[o].func(r,this._filterController)||[])}for(o=0;o<r.length;++o){var s=r[o];(c.isEventLocal(s)?this._localBuffer:0===s[0]||1===s[0]?this._joinLeaveBuffer:this._buffer).push(s)}},c.prototype.startSkipping=function(){this._skipping=!0},c.prototype.endSkipping=function(){this._skipping=!1},ns.EventBuffer=c),g=ns,m=Xn(),v=Yn(),rs||(rs=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.GameHandlerSet=void 0,n=S(),u.prototype.setCurrentTimeFunc=function(t){this._getCurrentTimeFunc=t},u.prototype.setEventFilterFuncs=function(t){this._eventFilterFuncs=t},u.prototype.removeAllEventFilters=function(){this._eventFilterFuncs&&this._eventFilterFuncs.removeFilter()},u.prototype.changeSceneMode=function(t){this._local=t.local,this._tickGenerationMode=t.tickGenerationMode,this.changeSceneModeTrigger.fire(t)},u.prototype.getCurrentTime=function(){return Math.floor(this._getCurrentTimeFunc())},u.prototype.raiseEvent=function(t){this.raiseEventTrigger.fire(t)},u.prototype.raiseTick=function(t){this.raiseTickTrigger.fire(t)},u.prototype.addEventFilter=function(t,e){this._eventFilterFuncs&&this._eventFilterFuncs.addFilter(t,e)},u.prototype.removeEventFilter=function(t){this._eventFilterFuncs&&t&&this._eventFilterFuncs.removeFilter(t)},u.prototype.shouldSaveSnapshot=function(){return this.isSnapshotSaver},u.prototype.getInstanceType=function(){return this.shouldSaveSnapshot()?"active":"passive"},u.prototype.saveSnapshot=function(t,e,i,r,o){void 0===o&&(o=this._getCurrentTimeFunc()),this.shouldSaveSnapshot()&&this.snapshotTrigger.fire({frame:t,timestamp:o,data:{randGenSer:i,nextEntityId:r,gameSnapshot:e}})},ss.GameHandlerSet=u),T=ss,A=Es(),o=ds(),i="GAME_DESTROYED",h.prototype.initialize=function(t,e){this.doInitialize(t).then(function(){e()},e)},h.prototype.changeState=function(t,e){var i,r=this,o=this._gameLoop&&this._gameLoop.running;o&&null!=(i=this._gameLoop)&&i.stop(),this.initialize(t,function(t){t?null!=e&&e(t):(o&&null!=(t=r._gameLoop)&&t.start(),null!=e&&e())})},h.prototype.startGame=function(){this._gameLoop?this._gameLoop.start():this.errorTrigger.fire(new Error("Not initialized"))},h.prototype.stopGame=function(){this._gameLoop&&this._gameLoop.stop()},h.prototype.setNextAge=function(t){var e;null!=(e=this._gameLoop)&&e.setNextAge(t)},h.prototype.getPermission=function(){return this._permission},h.prototype.getDriverConfiguration=function(){var t;return{playId:this._playId,playToken:null!=(t=this._playToken)?t:void 0,executionMode:this._gameLoop?this._gameLoop.getExecutionMode():void 0,eventBufferMode:this._eventBuffer?this._eventBuffer.getMode():void 0}},h.prototype.getLoopConfiguration=function(){return this._gameLoop?this._gameLoop.getLoopConfiguration():null},h.prototype.getHidden=function(){return this._hidden},h.prototype.resetPrimarySurface=function(t,e,i){i=i||(this._rendererRequirement?this._rendererRequirement.rendererCandidates:void 0);var r=this._game,o=this._platform,n=o.getPrimarySurface();r.renderers=r.renderers.filter(function(t){return t!==n.renderer()}),o.setRendererRequirement({primarySurfaceWidth:t,primarySurfaceHeight:e,rendererCandidates:i}),this._rendererRequirement={primarySurfaceWidth:t,primarySurfaceHeight:e,rendererCandidates:i},r.renderers.push(o.getPrimarySurface().renderer()),r.width=t,r.height=e,r.onResized.fire({width:t,height:e}),r.modified()},h.prototype.doInitialize=function(i){var r=this,t=new Promise(function(t,e){if(r._gameLoop&&r._gameLoop.running)return e(new Error("Game is running. Must be stopped."));r._gameLoop&&i.loopConfiguration&&r._gameLoop.setLoopConfiguration(i.loopConfiguration),null!=i.hidden&&(r._hidden=i.hidden,r._game)&&r._game._setMuted(i.hidden),t()}).then(function(){return r._assertLive(),r._doSetDriverConfiguration(i.driverConfiguration)}),e=i.configurationUrl;return e?t.then(function(){return r._assertLive(),r._loadConfiguration(e,i.assetBase,i.configurationBase)}).then(function(t){return r._assertLive(),r._createGame(t,r._player,i)}):t},h.prototype.destroy=function(){var i=this;return new Promise(function(t,e){i.stopGame(),i._game&&(i._game._destroy(),i._game=null),i.errorTrigger.destroy(),i.errorTrigger=null,i.configurationLoadedTrigger.destroy(),i.configurationLoadedTrigger=null,i.gameCreatedTrigger.destroy(),i.gameCreatedTrigger=null,i._platform.destroy?i._platform.destroy():i._platform.setRendererRequirement(void 0),i._platform=null,i._loadConfigurationFunc=null,i._player=null,i._rendererRequirement=null,i._playId=void 0,i._gameLoop=null,i._eventBuffer=null,i._openedAmflow=!1,i._playToken=null,i._permission=null,i._hidden=!1,i._destroyed=!0,t()})},h.prototype._doSetDriverConfiguration=function(t){var e=this;if(null==t)return Promise.resolve();void 0===t.playId&&(t.playId=null!=(i=this._playId)?i:void 0),void 0===t.playToken&&(t.playToken=null!=(i=this._playToken)?i:void 0),void 0===t.eventBufferMode&&(t.executionMode===m.default.Active?t.eventBufferMode={isReceiver:!0,isSender:!1}:t.executionMode===m.default.Passive&&(t.eventBufferMode={isReceiver:!1,isSender:!0}));var i=Promise.resolve();return this._playId!==t.playId&&(i=i.then(function(){return e._assertLive(),e._doOpenAmflow(t.playId)})),(i=this._playToken!==t.playToken?i.then(function(){return e._assertLive(),e._doAuthenticate(t.playToken)}):i).then(function(){e._assertLive(),null!=t.eventBufferMode&&(null==t.eventBufferMode.defaultEventPriority&&(e._permission?t.eventBufferMode.defaultEventPriority=3&e._permission.maxEventPriority:t.eventBufferMode.defaultEventPriority=0),e._eventBuffer)&&e._eventBuffer.setMode(t.eventBufferMode),null!=t.executionMode&&e._gameLoop&&e._gameLoop.setExecutionMode(t.executionMode)})},h.prototype._doCloseAmflow=function(){var r=this;return new Promise(function(e,i){if(!r._openedAmflow)return e();r._platform.amflow.close(function(t){r._openedAmflow=!1;t=r._getCallbackError(t);if(t)return i(t);e()})})},h.prototype._doOpenAmflow=function(r){var o=this;return void 0===r?Promise.resolve():this._doCloseAmflow().then(function(){return o._assertLive(),new Promise(function(e,i){if(null===r)return e();o._platform.amflow.open(r,function(t){t=o._getCallbackError(t);if(t)return i(t);o._openedAmflow=!0,o._playId=r,o._game&&o._updateGamePlayId(o._game),e()})})})},h.prototype._doAuthenticate=function(o){var n=this;return null==o?Promise.resolve():new Promise(function(i,r){n._platform.amflow.authenticate(o,function(t,e){t=n._getCallbackError(t);if(t)return r(t);e?(n._playToken=o,n._permission=e,n._game&&(n._game.rawHandlerSet.isSnapshotSaver=e.writeTick),i()):r(new Error("Permission denied."))})})},h.prototype._loadConfiguration=function(t,e,o){var n=this;return new Promise(function(i,r){n._loadConfigurationFunc(t,e,o,function(t,e){t=n._getCallbackError(t);t?r(t):e?(n.configurationLoadedTrigger.fire(e),i(e)):r(new Error("GameDriver#_loadConfiguration: No configuration found."))})})},h.prototype._putZerothStartPoint=function(r){var o=this;return new Promise(function(e,i){var t={frame:0,timestamp:r.startedAt,data:r};o._platform.amflow.putStartPoint(t,function(t){t=o._getCallbackError(t);if(t)return i(t);e()})})},h.prototype._getStartPoint=function(t){var o=this;return new Promise(function(i,r){o._platform.amflow.getStartPoint({frame:t},function(t,e){t=o._getCallbackError(t);return t?r(t):e?void i(e):r(new Error("GameDriver#_getStartPoint: No startPoint found"))})})},h.prototype._createGame=function(c,l,d){var t,p,f=this,_=!(null==(t=this._permission)||!t.writeTick),i=!((null==(t=d.driverConfiguration)?void 0:t.executionMode)!==m.default.Active)&&_;if(d.loopConfiguration)return p=d.loopConfiguration,(i?this._putZerothStartPoint({seed:Date.now(),globalArgs:d.globalGameArgs,fps:c.fps,startedAt:Date.now()}):Promise.resolve()).then(function(){return f._assertLive(),f._getStartPoint(0)}).then(function(e){return i||p.loopMode!==o.default.Realtime?[e,e]:f._getStartPoint(r.PSEUDO_INFINITE_AGE).then(function(t){return[e,t]})}).then(function(t){var e=t[0],t=t[1],e=(f._assertLive(),e.data);if("number"!=typeof e.seed)throw new Error("GameDriver#_createGame: No seed found in the zeroth startpoint.");var i=f._platform,r=d.driverConfiguration||{eventBufferMode:{isReceiver:!0,isSender:!1},executionMode:m.default.Active},o=e.seed,n=d.gameArgs,s=e.globalArgs,e=e.startedAt,a={primarySurfaceWidth:c.width,primarySurfaceHeight:c.height,rendererCandidates:c.renderers},h=(i.setRendererRequirement(a),new T.GameHandlerSet({isSnapshotSaver:_})),n=new v.Game({engineModule:y,handlerSet:h,configuration:c,selfId:l.id,player:l,resourceFactory:i.getResourceFactory(),assetBase:d.assetBase,operationPluginViewInfo:i.getOperationPluginViewInfo?i.getOperationPluginViewInfo():void 0,gameArgs:n,globalGameArgs:s}),s=new g.EventBuffer({game:n,amflow:i.amflow}),u=r.eventBufferMode,r=r.executionMode,u=(s.setMode(u),i.setPlatformEventHandler(s),h.setEventFilterFuncs({addFilter:s.addFilter.bind(s),removeFilter:s.removeFilter.bind(s)}),n.renderers.push(i.getPrimarySurface().renderer()),new A.GameLoop({game:n,amflow:i.amflow,platform:i,executionMode:r,eventBuffer:s,configuration:p,startedAt:e,profiler:d.profiler}));u.rawTargetTimeReachedTrigger.add(n._onRawTargetTimeReached,n),h.setCurrentTimeFunc(u.getCurrentTime.bind(u)),n._reset({age:0,randSeed:o}),f._updateGamePlayId(n),f._hidden&&n._setMuted(!0),h.snapshotTrigger.add(function(t){0!==t.frame&&f._platform.amflow.putStartPoint(t,function(t){t=f._getCallbackError(t);t&&f.errorTrigger.fire(t)})}),f._game=n,f._eventBuffer=s,f._gameLoop=u,f._rendererRequirement=a,f.gameCreatedTrigger.fire(n),u.reset(t)});throw new Error("GameDriver#_createGame: No loopConfiguration")},h.prototype._updateGamePlayId=function(t){var e=this;t.playId=this._playId,t.external.send=function(t){e._playId&&e._platform.sendToExternal(e._playId,t)}},h.prototype._assertLive=function(){if(this._destroyed)throw new Error(i)},h.prototype._getCallbackError=function(t){return t||(this._destroyed?new Error(i):null)},Zn.GameDriver=h),Zn;function h(t){this.errorTrigger=new y.Trigger,this.configurationLoadedTrigger=new y.Trigger,this.gameCreatedTrigger=new y.Trigger,this._rendererRequirement=null,this._game=null,this._gameLoop=null,this._eventBuffer=null,this._openedAmflow=!1,this._playToken=null,this._permission=null,this._hidden=!1,this._destroyed=!1,t.errorHandler&&this.errorTrigger.add(t.errorHandler,t.errorHandlerOwner),this._platform=t.platform,this._loadConfigurationFunc=(0,e.makeLoadConfigurationFunc)(t.platform.loadGameConfiguration),this._player=t.player}function u(t){this.raiseEventTrigger=new n.Trigger,this.raiseTickTrigger=new n.Trigger,this.snapshotTrigger=new n.Trigger,this.changeSceneModeTrigger=new n.Trigger,this._getCurrentTimeFunc=null,this._eventFilterFuncs=null,this._local=null,this._tickGenerationMode=null,this.isSnapshotSaver=!!t.isSnapshotSaver}function c(t){var e=this;this._discardsEventsDuringSkip=!0,this._discardsLocalEventsDuringSkip=!0,this._filters=null,this._amflow=t.amflow,this._isLocalReceiver=!0,this._isReceiver=!1,this._isSender=!1,this._isDiscarder=!1,this._skipping=!1,this._defaultEventPriority=0,this._buffer=[],this._joinLeaveBuffer=[],this._localBuffer=[],this._filters=null,this._filterController={processNext:function(t){(c.isEventLocal(t)?e._unfilteredLocalEvents:e._unfilteredEvents).push(t)}},this._unfilteredLocalEvents=[],this._unfilteredEvents=[],this._resolvePointEvent_bound=t.game.resolvePointEvent.bind(t.game),this._onEvent_bound=this.onEvent.bind(this)}}var ks,Ms,Ls={},Rs={};function Cs(){var i;return ks||(ks=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.Asset=void 0,i=pt(),t.prototype.destroy=function(){this.onDestroyed.fire(this),this.id=void 0,this.originalPath=void 0,this.path=void 0,this.onDestroyed.destroy(),this.onDestroyed=void 0},t.prototype.destroyed=function(){return void 0===this.id},t.prototype.inUse=function(){return!1},t.prototype._assetPathFilter=function(t){return t},Rs.Asset=t),Rs;function t(t,e){this.id=t,this.originalPath=e,this.path=this._assetPathFilter(e),this.onDestroyed=new i.Trigger}}var Is,Fs,Ds,js,Gs,Us={},Bs={},Hs={};var Ns,Ws,Vs={},Xs={},zs={},qs={},Ys={};function rt(){return Ns||(Ns=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.ExceptionFactory=void 0,(t||(Ys.ExceptionFactory=t={})).createAssetLoadError=function(t,e,i){return{name:"AssetLoadError",message:t,retriable:e=void 0===e?!0:e,cause:i}}),Ys;var t}function Ks(){var o;return Ws||(Ws=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.XHRLoader=void 0,o=rt(),t.prototype.get=function(t,e){this._getRequestObject({url:t,responseType:"text"},e)},t.prototype.getArrayBuffer=function(t,e){this._getRequestObject({url:t,responseType:"arraybuffer"},e)},t.prototype._getRequestObject=function(e,i){var r=new XMLHttpRequest;r.open("GET",e.url,!0),r.responseType=e.responseType,r.timeout=this.timeout,r.addEventListener("timeout",function(){i(o.ExceptionFactory.createAssetLoadError("loading timeout"))},!1),r.addEventListener("load",function(){var t;200<=r.status&&r.status<300?(t="text"===e.responseType?r.responseText:r.response,i(null,t)):i(o.ExceptionFactory.createAssetLoadError("loading error. status: "+r.status))},!1),r.addEventListener("error",function(){i(o.ExceptionFactory.createAssetLoadError("loading error. status: "+r.status))},!1),r.send()},qs.XHRLoader=t),qs;function t(t){this.timeout=(t=void 0===t?{}:t).timeout||15e3}}var $s,Js,Zs={};function ot(){var i;return $s||($s=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.Asset=void 0,i=pt(),t.prototype.destroy=function(){this.onDestroyed.fire(this),this.id=void 0,this.originalPath=void 0,this.path=void 0,this.onDestroyed.destroy(),this.onDestroyed=void 0},t.prototype.destroyed=function(){return void 0===this.id},t.prototype.inUse=function(){return!1},t.prototype._assetPathFilter=function(t){return t},Zs.Asset=t),Zs;function t(t,e){this.onDestroyed=new i.Trigger,this.id=t,this.originalPath=e,this.path=this._assetPathFilter(e)}}function Qs(){var r,t,e,i;return Js||(Js=1,t=zs&&zs.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(zs,"__esModule",{value:!0}),zs.XHRTextAsset=void 0,e=Ks(),i=ot().Asset,t(o,i),o.prototype._load=function(i){var r=this;(new e.XHRLoader).get(this.path,function(t,e){t?i._onAssetError(r,t):e?(r.data=e,i._onAssetLoad(r)):i._onAssetError(r,{name:"AssetLoadError",message:"XHRTextAsset#_load(): no data received",retriable:!1})})},o.prototype.destroy=function(){this.data=void 0,i.prototype.destroy.call(this)},zs.XHRTextAsset=o),zs;function o(t,e){t=i.call(this,t,e)||this;return t.type="text",t.data="",t}}var ta,ea,ia,ra={},oa={},na={},sa={},aa={};function ha(){var e;return ea||(ea=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.preventEventDefault=aa.InputEventHandler=void 0,e=pt(),t.isSupported=function(){return!1},t.prototype.setScale=function(t,e){void 0===e&&(e=t),this._xScale=t,this._yScale=e},t.prototype.pointDown=function(t,e,i){e.offsetX<0||e.offsetY<0||e.offsetX>this.inputView.offsetWidth||e.offsetY>this.inputView.offsetHeight||(this.pointTrigger.fire({type:0,identifier:t,offset:this.getOffsetFromEvent(e),button:i}),this.pointerEventLock[t]=!0)},t.prototype.pointMove=function(t,e,i){this.pointerEventLock.hasOwnProperty(t+"")&&this.pointTrigger.fire({type:1,identifier:t,offset:this.getOffsetFromEvent(e),button:i})},t.prototype.pointUp=function(t,e,i){this.pointerEventLock.hasOwnProperty(t+"")&&(this.pointTrigger.fire({type:2,identifier:t,offset:this.getOffsetFromEvent(e),button:i}),delete this.pointerEventLock[t])},t.prototype.getOffsetFromEvent=function(t){return{x:t.offsetX,y:t.offsetY}},t.prototype.getScale=function(){return{x:this._xScale,y:this._yScale}},t.prototype.getOffsetPositionFromInputView=function(t){var e=this.inputView.getBoundingClientRect(),i=this.getScale();return{offsetX:(t.pageX-Math.round(window.pageXOffset+e.left))/i.x,offsetY:(t.pageY-Math.round(window.pageYOffset+e.top))/i.y}},aa.InputEventHandler=t,aa.preventEventDefault=function(t){t.preventDefault()}),aa;function t(t){this.inputView=t,this.pointerEventLock={},this._xScale=1,this._yScale=1,this.pointTrigger=new e.Trigger,t.style.touchAction="none",t.style.userSelect="none"}}var ua,ca,la,da={};function pa(){var e,i,r,o,t,n,s,a,h,u;return ca||(ca=1,Object.defineProperty(na,"__esModule",{value:!0}),na.InputHandlerLayer=void 0,e=pt(),ia||(ia=1,a=sa&&sa.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(sa,"__esModule",{value:!0}),sa.MouseTouchEventHandler=void 0,h=ha(),u=h.InputEventHandler,a(d,u),d.isSupported=function(){return!1},d.prototype.start=function(){this.inputView.addEventListener("mousedown",this.onMouseDown,!1),this.inputView.addEventListener("touchstart",this.onTouchStart),this.inputView.addEventListener("touchmove",this.onTouchMove),this.inputView.addEventListener("touchend",this.onTouchEnd),this.inputView.addEventListener("contextmenu",h.preventEventDefault)},d.prototype.stop=function(){this.inputView.removeEventListener("mousedown",this.onMouseDown,!1),this.inputView.removeEventListener("touchstart",this.onTouchStart),this.inputView.removeEventListener("touchmove",this.onTouchMove),this.inputView.removeEventListener("touchend",this.onTouchEnd),this.inputView.removeEventListener("contextmenu",h.preventEventDefault)},d.prototype.getPlatformButtonType=function(t,e){switch(t.button){case-1:return-1;case 0:return 0;case 1:return 1;case 2:return 2;default:return e}},d.MOUSE_IDENTIFIER=1,sa.MouseTouchEventHandler=d),i=sa,ua||(ua=1,a=da&&da.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(da,"__esModule",{value:!0}),da.PointerEventHandler=void 0,t=ha(),n=t.InputEventHandler,a(l,n),l.isSupported=function(){return!1},l.prototype.start=function(){this.inputView.addEventListener("pointerdown",this.onPointerDown,!1),this.inputView.addEventListener("contextmenu",t.preventEventDefault,!1)},l.prototype.stop=function(){this.inputView.removeEventListener("pointerdown",this.onPointerDown,!1),this.inputView.removeEventListener("contextmenu",t.preventEventDefault,!1)},l.prototype.getPlatformButtonType=function(t,e){switch(t.button){case-1:return-1;case 0:return 0;case 1:return 1;case 2:return 2;default:return e}},da.PointerEventHandler=l),r=da,c.prototype.enablePointerEvent=function(){var e=this,t=!!window.PointerEvent;this._inputHandler=new(t?r.PointerEventHandler:i.MouseTouchEventHandler)(this.view),this._inputHandler.pointTrigger.add(function(t){e.pointEventTrigger.fire(t)}),this._inputHandler.start()},c.prototype.disablePointerEvent=function(){var t;null!=(t=this._inputHandler)&&t.stop()},c.prototype.setOffset=function(t){t="position:relative; left:".concat(t.x,"px; top:").concat(t.y,"px");this._inputHandler.inputView.setAttribute("style",t)},c.prototype.setViewSize=function(t){var e=this.view;e.style.width=t.width+"px",e.style.height=t.height+"px"},c.prototype.setViewTabIndex=function(t){this.view.setAttribute("tabindex",t)},c.prototype._createInputView=function(t,e){var i=document.createElement("div");return i.setAttribute("style","display:inline-block; outline:none; touch-action:none"),i.style.width=t+"px",i.style.height=e+"px",i.setAttribute("tabindex","0"),i},na.InputHandlerLayer=c),na;function c(t){this.view=this._createInputView(t.width,t.height),this._inputHandler=void 0,this.pointEventTrigger=new e.Trigger}function l(t){var o=n.call(this,t)||this;return o.onPointerDown=function(r){o.pointDown(r.pointerId,o.getOffsetPositionFromInputView(r),o.getPlatformButtonType(r,0));function t(t){o.pointMove(t.pointerId,o.getOffsetPositionFromInputView(t),o.getPlatformButtonType(t,-1))}function e(t){var e,i;o.pointUp(t.pointerId,o.getOffsetPositionFromInputView(t),o.getPlatformButtonType(t,0)),r.pointerId===t.pointerId&&(i=o._eventHandlersMap[t.pointerId])&&(e=i.onPointerMove,i=i.onPointerUp,window.removeEventListener("pointermove",e,!1),window.removeEventListener("pointerup",i,!1),delete o._eventHandlersMap[t.pointerId])}window.addEventListener("pointermove",t,!1),window.addEventListener("pointerup",e,!1),o._eventHandlersMap[r.pointerId]={onPointerMove:t,onPointerUp:e}},o._eventHandlersMap=Object.create(null),o}function d(){var n=null!==u&&u.apply(this,arguments)||this;return n.pressingMouseButton=null,n.onMouseDown=function(t){null==n.pressingMouseButton&&(n.pressingMouseButton=t.button,n.pointDown(d.MOUSE_IDENTIFIER,n.getOffsetPositionFromInputView(t),n.getPlatformButtonType(t,0)),window.addEventListener("mousemove",n.onWindowMouseMove,!1),window.addEventListener("mouseup",n.onWindowMouseUp,!1))},n.onWindowMouseMove=function(t){n.pointMove(d.MOUSE_IDENTIFIER,n.getOffsetPositionFromInputView(t),-1)},n.onWindowMouseUp=function(t){n.pressingMouseButton===t.button&&(n.pressingMouseButton=null,n.pointUp(d.MOUSE_IDENTIFIER,n.getOffsetPositionFromInputView(t),n.getPlatformButtonType(t,0)),window.removeEventListener("mousemove",n.onWindowMouseMove,!1),window.removeEventListener("mouseup",n.onWindowMouseUp,!1))},n.onTouchStart=function(t){for(var e=t.changedTouches,i=0,r=e.length;i<r;i++){var o=e[i];n.pointDown(o.identifier,n.getOffsetPositionFromInputView(o),0)}t.preventDefault()},n.onTouchMove=function(t){for(var e=t.changedTouches,i=0,r=e.length;i<r;i++){var o=e[i];n.pointMove(o.identifier,n.getOffsetPositionFromInputView(o),0)}},n.onTouchEnd=function(t){for(var e=t.changedTouches,i=0,r=e.length;i<r;i++){var o=e[i];n.pointUp(o.identifier,n.getOffsetPositionFromInputView(o),0)}window.removeEventListener("touchmove",n.onTouchMove,!1),window.removeEventListener("touchend",n.onTouchEnd,!1)},n}}var fa,_a={};function ya(){return fa||(fa=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.AudioPluginManager=void 0,t.prototype.getActivePlugin=function(){return this._activePlugin},t.prototype.tryInstallPlugin=function(t){for(var e=0,i=t.length;e<i;e++){var r=t[e];if(!r.isSupported)return this._activePlugin=r,!0;if(r.isSupported())return this._activePlugin=new r,!0}return!1},_a.AudioPluginManager=t),_a;function t(){this._activePlugin=null}}var ga,ma={};function va(){var e;return ga||(ga=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.AudioPluginRegistry=void 0,e=[],ma.AudioPluginRegistry={addPlugin:function(t){-1===e.indexOf(t)&&e.push(t)},getRegisteredAudioPlugins:function(){return e},clear:function(){e=[]}}),ma}var Ta,Aa,wa,Sa,ba={},Pa={},xa={},Ea={},d={},Oa={},ka={},Ma={};function La(){return wa||(wa=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.Surface=void 0,t.prototype.destroy=function(){this._destroyed=!0},t.prototype.destroyed=function(){return!!this._destroyed},Ma.Surface=t),Ma;function t(t,e,i){this.width=Math.ceil(t),this.height=Math.ceil(e),this._drawable=i}}function Ra(){var r,t,o;return Sa||(Sa=1,t=ka&&ka.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(ka,"__esModule",{value:!0}),ka.CanvasSurface=void 0,o=La().Surface,t(e,o),e.prototype.destroy=function(){this.canvas.width=1,this.canvas.height=1,this.canvas=void 0,o.prototype.destroy.call(this)},e.prototype.getHTMLElement=function(){return this.canvas},e.prototype.changeVisualScale=function(t,e){var i=this.canvas.style;"transform"in i?(i.transformOrigin="0 0",i.transform="scale("+t+","+e+")"):"webkitTransform"in i?(i.webkitTransformOrigin="0 0",i.webkitTransform="scale("+t+","+e+")"):(i.width=Math.floor(t*this.width)+"px",i.height=Math.floor(e*this.width)+"px")},ka.CanvasSurface=e),ka;function e(t,e){var i=this,r=document.createElement("canvas"),i=o.call(this,t,e,r)||this;return r.width=t,r.height=e,i.canvas=r,i}}var Ca,Ia,Fa,Da={},ja={},Ga={};function Ua(){return Ca||(Ca=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.AffineTransformer=void 0,t.prototype.scale=function(t,e){var i=this.matrix;return i[0]*=t,i[1]*=t,i[2]*=e,i[3]*=e,this},t.prototype.translate=function(t,e){var i=this.matrix;return i[4]+=i[0]*t+i[2]*e,i[5]+=i[1]*t+i[3]*e,this},t.prototype.transform=function(t){var e=this.matrix,i=t[0]*e[0]+t[1]*e[2],r=t[0]*e[1]+t[1]*e[3],o=t[2]*e[0]+t[3]*e[2],n=t[2]*e[1]+t[3]*e[3],s=t[4]*e[0]+t[5]*e[2]+e[4],t=t[4]*e[1]+t[5]*e[3]+e[5];return e[0]=i,e[1]=r,e[2]=o,e[3]=n,e[4]=s,e[5]=t,this},t.prototype.setTransform=function(t){var e=this.matrix;e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5]},t.prototype.copyFrom=function(t){return this.matrix.set(t.matrix),this},Ga.AffineTransformer=t),Ga;function t(t){this.matrix=t?new Float32Array(t.matrix):new Float32Array([1,0,0,1,0,0])}}var Ba,Ha,Na,Wa,Va={};function Xa(){var r,t,e,i,o,n,s,a,h;return Ha||(Ha=1,t=Oa&&Oa.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.Context2DSurface=void 0,e=Ra(),Fa||(Fa=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.CanvasSurfaceContext=void 0,Ia||(Ia=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.CanvasRenderingState=void 0,h=Ua(),ja.CanvasRenderingState=function(t){t?(this.fillStyle=t.fillStyle,this.globalAlpha=t.globalAlpha,this.globalCompositeOperation=t.globalCompositeOperation,this.transformer=new h.AffineTransformer(t.transformer)):(this.fillStyle="#000000",this.globalAlpha=1,this.globalCompositeOperation="source-over",this.transformer=new h.AffineTransformer)}),a=ja,Object.defineProperty(l.prototype,"fillStyle",{get:function(){return this.currentState().fillStyle},set:function(t){this.currentState().fillStyle=t},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"globalAlpha",{get:function(){return this.currentState().globalAlpha},set:function(t){this.currentState().globalAlpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"globalCompositeOperation",{get:function(){return this.currentState().globalCompositeOperation},set:function(t){this.currentState().globalCompositeOperation=t},enumerable:!1,configurable:!0}),l.prototype.getCanvasRenderingContext2D=function(){return this._context},l.prototype.clearRect=function(t,e,i,r){this.prerender(),this._context.clearRect(t,e,i,r)},l.prototype.save=function(){var t=new a.CanvasRenderingState(this.currentState());this.pushState(t)},l.prototype.restore=function(){this.popState()},l.prototype.scale=function(t,e){this.currentState().transformer.scale(t,e),this._modifiedTransform=!0},l.prototype.drawImage=function(t,e,i,r,o,n,s,a,h){this.prerender(),this._context.drawImage(t,e,i,r,o,n,s,a,h)},l.prototype.fillRect=function(t,e,i,r){this.prerender(),this._context.fillRect(t,e,i,r)},l.prototype.fillText=function(t,e,i,r){this.prerender(),this._context.fillText(t,e,i,r)},l.prototype.strokeText=function(t,e,i,r){this.prerender(),this._context.strokeText(t,e,i,r)},l.prototype.translate=function(t,e){this.currentState().transformer.translate(t,e),this._modifiedTransform=!0},l.prototype.transform=function(t,e,i,r,o,n){this.currentState().transformer.transform([t,e,i,r,o,n]),this._modifiedTransform=!0},l.prototype.setTransform=function(t,e,i,r,o,n){this.currentState().transformer.setTransform([t,e,i,r,o,n]),this._modifiedTransform=!0},l.prototype.setGlobalAlpha=function(t){this.currentState().globalAlpha=t},l.prototype.getImageData=function(t,e,i,r){return this._context.getImageData(t,e,i,r)},l.prototype.putImageData=function(t,e,i,r,o,n,s){this._context.putImageData(t,e,i,r,o,n,s)},l.prototype.prerender=function(){var t=this.currentState();t.fillStyle!==this._contextFillStyle&&(this._context.fillStyle=t.fillStyle,this._contextFillStyle=t.fillStyle),t.globalAlpha!==this._contextGlobalAlpha&&(this._context.globalAlpha=t.globalAlpha,this._contextGlobalAlpha=t.globalAlpha),t.globalCompositeOperation!==this._contextGlobalCompositeOperation&&(this._context.globalCompositeOperation=t.globalCompositeOperation,this._contextGlobalCompositeOperation=t.globalCompositeOperation),this._modifiedTransform&&(t=t.transformer,this._context.setTransform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this._modifiedTransform=!1)},l.prototype.pushState=function(t){this._stateStack.push(t)},l.prototype.popState=function(){this._stateStack.length<=1||(this._stateStack.pop(),this._modifiedTransform=!0,this._contextFillStyle=this._context.fillStyle,this._contextGlobalAlpha=this._context.globalAlpha,this._contextGlobalCompositeOperation=this._context.globalCompositeOperation)},l.prototype.currentState=function(){return this._stateStack[this._stateStack.length-1]},Da.CanvasSurfaceContext=l),i=Da,Ba||(Ba=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.Context2DRenderer=void 0,s={"source-over":"source-over","source-atop":"source-atop",lighter:"lighter",copy:"copy","experimental-source-in":"source-in","experimental-source-out":"source-out","experimental-destination-atop":"destination-atop","experimental-destination-in":"destination-in","destination-out":"destination-out","destination-over":"destination-over",xor:"xor",difference:"difference",saturation:"saturation"},c.prototype.begin=function(){this.canvasRenderingContext2D.save(),this.context.save()},c.prototype.end=function(){this.canvasRenderingContext2D.restore(),this.context.restore()},c.prototype.clear=function(){this.context.clearRect(0,0,this.surface.width,this.surface.height)},c.prototype.drawImage=function(t,e,i,r,o,n,s){this.context.drawImage(t._drawable,e,i,r,o,n,s,r,o)},c.prototype.drawSprites=function(t,e,i,r,o,n,s,a){for(var h=0;h<a;++h)this.drawImage(t,e[h],i[h],r[h],o[h],n[h],s[h])},c.prototype.translate=function(t,e){this.context.translate(t,e)},c.prototype.transform=function(t){this.context.transform(t[0],t[1],t[2],t[3],t[4],t[5])},c.prototype.opacity=function(t){this.context.globalAlpha*=t},c.prototype.save=function(){this.context.save()},c.prototype.restore=function(){this.context.restore()},c.prototype.fillRect=function(t,e,i,r,o){this.context.fillStyle=o,this.context.fillRect(t,e,i,r)},c.prototype.setCompositeOperation=function(t){this.context.globalCompositeOperation=s[t]||"source-over"},c.prototype.setOpacity=function(t){this.context.globalAlpha=t},c.prototype.setTransform=function(t){this.context.setTransform(t[0],t[1],t[2],t[3],t[4],t[5])},c.prototype.setShaderProgram=function(t){throw new Error("Context2DRenderer#setShaderProgram() is not implemented")},c.prototype.isSupportedShaderProgram=function(){return!1},c.prototype.getContext=function(){return this.context.getCanvasRenderingContext2D()},c.prototype.flush=function(){},c.prototype._getImageData=function(t,e,i,r){return this.context.getImageData(t,e,i,r)},c.prototype._putImageData=function(t,e,i,r,o,n,s){void 0===n&&(n=t.width),void 0===s&&(s=t.height),this.context.putImageData(t,e,i,r=void 0===r?0:r,o=void 0===o?0:o,n,s)},Va.Context2DRenderer=c),o=Va,n=e.CanvasSurface,t(u,n),u.prototype.context=function(){if(!this._context){var t=this.canvas.getContext("2d");if(!t)throw new Error("Context2DSurface#context(): could not initialize CanvasRenderingContext2D");this._context=new i.CanvasSurfaceContext(t)}return this._context},u.prototype.renderer=function(){return this._renderer||(this._renderer=new o.Context2DRenderer(this)),this._renderer},u.prototype.changePhysicalScale=function(t,e){if(!this._context)throw new Error("Context2DSurface#changePhysicalScale(): context has not been initialized");this.canvas.width=this.width*t,this.canvas.height=this.height*e,this._context.scale(t,e)},u.prototype.isPlaying=function(){return!1},Oa.Context2DSurface=u),Oa;function u(){return null!==n&&n.apply(this,arguments)||this}function c(t){this.surface=t,this.context=t.context(),this.canvasRenderingContext2D=this.context.getCanvasRenderingContext2D()}function l(t){this._stateStack=[],this._modifiedTransform=!1,this._context=t;t=new a.CanvasRenderingState;this._contextFillStyle=t.fillStyle,this._contextGlobalAlpha=t.globalAlpha,this._contextGlobalCompositeOperation=t.globalCompositeOperation,this.pushState(t)}}function za(){var r,t,u,e,o,i,c,n,s;return Na||(Na=1,t=d&&d.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(d,"__esModule",{value:!0}),d.SVGImageAsset=d.SVGImageAssetSurface=void 0,u=Xa(),e=La(),o=rt(),i=ot(),n=e.Surface,t(a,n),a.prototype.renderer=function(){throw new Error("SVGImageAssetSurface cannot be rendered.")},a.prototype.isPlaying=function(){return!1},c=a,d.SVGImageAssetSurface=c,s=i.Asset,t(h,s),h.prototype.destroy=function(){this.data=null,this.hint=void 0,this._surface=null,s.prototype.destroy.call(this)},h.prototype._load=function(t){var e=this,i=new Image;this.hint&&this.hint.untainted&&(i.crossOrigin="anonymous"),i.onerror=function(){t._onAssetError(e,o.ExceptionFactory.createAssetLoadError("SVGImageAsset unknown loading error"))},i.onload=function(){e.data=i,t._onAssetLoad(e)},i.src=this.path},h.prototype.createSurface=function(t,e,i,r,o,n){void 0===i&&(i=0),void 0===r&&(r=0);var s=this.width,a=this.height,h=this.data;if(!h)throw new Error("SVGImageAsset#asSurface: not yet loaded.");this._surface||(this._surface=new c(s,a,h)),o=o||s,n=n||a;h=new u.Context2DSurface(t,e),s=h.renderer();return s.save(),s.transform([t/o,0,0,e/n,0,0]),s.drawImage(this._surface,i,r,o,n,0,0),s.restore(),h},d.SVGImageAsset=h),d;function a(){return null!==n&&n.apply(this,arguments)||this}function h(t,e,i,r,o){t=s.call(this,t,e)||this;return t.type="vector-image",t.width=i,t.height=r,t.hint=o,t.data=null,t._surface=null,t}}var qa,Ya,Ka,nt={},$a={},Ja={};var Za,Qa,th,eh={},ih={},rh={},oh={};function nh(){return th||(th=1,Object.defineProperty(oh,"__esModule",{value:!0}),oh.RenderingHelper=void 0,(t=t||(oh.RenderingHelper=t={})).toPowerOfTwo=function(t){if(0==(t&t-1))return t;for(var e=1;e<t;)e*=2;return e},t.clamp=function(t){return Math.min(Math.max(t,0),1)},t.usedWebGL=function(t){if(t&&0!==t.length){var t=t[0];if("string"==typeof t){if("webgl"===t)return{type:"webgl",options:{enableDepthBuffer:!1}}}else if("webgl"===t.type)return{type:"webgl",options:{enableDepthBuffer:!(null==(t=t.options)||!t.enableDepthBuffer)}}}return!1}),oh;var t}var sh,ah,hh,uh,ch={},lh={},dh={},ph={},fh={},_h={};function yh(){var e;return ah||(ah=1,Object.defineProperty(_h,"__esModule",{value:!0}),_h.WebGLRenderingState=void 0,e=Ua(),t.prototype.copyFrom=function(t){return this.globalAlpha=t.globalAlpha,this.globalCompositeOperation=t.globalCompositeOperation,this.transformer.copyFrom(t.transformer),this.shaderProgram=t.shaderProgram,this},_h.WebGLRenderingState=t),_h;function t(t){t?(this.globalAlpha=t.globalAlpha,this.globalCompositeOperation=t.globalCompositeOperation,this.transformer=new e.AffineTransformer(t.transformer),this.shaderProgram=t.shaderProgram):(this.globalAlpha=1,this.globalCompositeOperation="source-over",this.transformer=new e.AffineTransformer,this.shaderProgram=null)}}function gh(){var n,r,i,o;return hh||(hh=1,Object.defineProperty(ph,"__esModule",{value:!0}),ph.WebGLRenderer=void 0,sh||(sh=1,Object.defineProperty(fh,"__esModule",{value:!0}),fh.WebGLColor=void 0,i=nh(),o=fh.WebGLColor={colorMap:{ALICEBLUE:[240/255,248/255,1,1],ANTIQUEWHITE:[250/255,235/255,215/255,1],AQUA:[0,1,1,1],AQUAMARINE:[127/255,1,212/255,1],AZURE:[240/255,1,1,1],BEIGE:[245/255,245/255,220/255,1],BISQUE:[1,228/255,196/255,1],BLACK:[0,0,0,1],BLANCHEDALMOND:[1,235/255,205/255,1],BLUE:[0,0,1,1],BLUEVIOLET:[138/255,43/255,226/255,1],BROWN:[165/255,42/255,42/255,1],BURLYWOOD:[222/255,184/255,135/255,1],CADETBLUE:[95/255,158/255,160/255,1],CHARTREUSE:[127/255,1,0,1],CHOCOLATE:[210/255,105/255,30/255,1],CORAL:[1,127/255,80/255,1],CORNFLOWERBLUE:[100/255,149/255,237/255,1],CORNSILK:[1,248/255,220/255,1],CRIMSON:[220/255,20/255,60/255,1],CYAN:[0,1,1,1],DARKBLUE:[0,0,139/255,1],DARKCYAN:[0,139/255,139/255,1],DARKGOLDENROD:[184/255,134/255,11/255,1],DARKGRAY:[169/255,169/255,169/255,1],DARKGREEN:[0,100/255,0,1],DARKGREY:[169/255,169/255,169/255,1],DARKKHAKI:[189/255,183/255,107/255,1],DARKMAGENTA:[139/255,0,139/255,1],DARKOLIVEGREEN:[85/255,107/255,47/255,1],DARKORANGE:[1,140/255,0,1],DARKORCHID:[.6,50/255,.8,1],DARKRED:[139/255,0,0,1],DARKSALMON:[233/255,150/255,122/255,1],DARKSEAGREEN:[143/255,188/255,143/255,1],DARKSLATEBLUE:[72/255,61/255,139/255,1],DARKSLATEGRAY:[47/255,79/255,79/255,1],DARKSLATEGREY:[47/255,79/255,79/255,1],DARKTURQUOISE:[0,206/255,209/255,1],DARKVIOLET:[148/255,0,211/255,1],DEEPPINK:[1,20/255,147/255,1],DEEPSKYBLUE:[0,191/255,1,1],DIMGRAY:[105/255,105/255,105/255,1],DIMGREY:[105/255,105/255,105/255,1],DODGERBLUE:[30/255,144/255,1,1],FIREBRICK:[178/255,34/255,34/255,1],FLORALWHITE:[1,250/255,240/255,1],FORESTGREEN:[34/255,139/255,34/255,1],FUCHSIA:[1,0,1,1],GAINSBORO:[220/255,220/255,220/255,1],GHOSTWHITE:[248/255,248/255,1,1],GOLD:[1,215/255,0,1],GOLDENROD:[218/255,165/255,32/255,1],GRAY:[128/255,128/255,128/255,1],GREEN:[0,128/255,0,1],GREENYELLOW:[173/255,1,47/255,1],GREY:[128/255,128/255,128/255,1],HONEYDEW:[240/255,1,240/255,1],HOTPINK:[1,105/255,180/255,1],INDIANRED:[205/255,92/255,92/255,1],INDIGO:[75/255,0,130/255,1],IVORY:[1,1,240/255,1],KHAKI:[240/255,230/255,140/255,1],LAVENDER:[230/255,230/255,250/255,1],LAVENDERBLUSH:[1,240/255,245/255,1],LAWNGREEN:[124/255,252/255,0,1],LEMONCHIFFON:[1,250/255,205/255,1],LIGHTBLUE:[173/255,216/255,230/255,1],LIGHTCORAL:[240/255,128/255,128/255,1],LIGHTCYAN:[224/255,1,1,1],LIGHTGOLDENRODYELLOW:[250/255,250/255,210/255,1],LIGHTGRAY:[211/255,211/255,211/255,1],LIGHTGREEN:[144/255,238/255,144/255,1],LIGHTGREY:[211/255,211/255,211/255,1],LIGHTPINK:[1,182/255,193/255,1],LIGHTSALMON:[1,160/255,122/255,1],LIGHTSEAGREEN:[32/255,178/255,170/255,1],LIGHTSKYBLUE:[135/255,206/255,250/255,1],LIGHTSLATEGRAY:[119/255,136/255,.6,1],LIGHTSLATEGREY:[119/255,136/255,.6,1],LIGHTSTEELBLUE:[176/255,196/255,222/255,1],LIGHTYELLOW:[1,1,224/255,1],LIME:[0,1,0,1],LIMEGREEN:[50/255,205/255,50/255,1],LINEN:[250/255,240/255,230/255,1],MAGENTA:[1,0,1,1],MAROON:[128/255,0,0,1],MEDIUMAQUAMARINE:[.4,205/255,170/255,1],MEDIUMBLUE:[0,0,205/255,1],MEDIUMORCHID:[186/255,85/255,211/255,1],MEDIUMPURPLE:[147/255,112/255,219/255,1],MEDIUMSEAGREEN:[60/255,179/255,113/255,1],MEDIUMSLATEBLUE:[123/255,104/255,238/255,1],MEDIUMSPRINGGREEN:[0,250/255,154/255,1],MEDIUMTURQUOISE:[72/255,209/255,.8,1],MEDIUMVIOLETRED:[199/255,21/255,133/255,1],MIDNIGHTBLUE:[25/255,25/255,112/255,1],MINTCREAM:[245/255,1,250/255,1],MISTYROSE:[1,228/255,225/255,1],MOCCASIN:[1,228/255,181/255,1],NAVAJOWHITE:[1,222/255,173/255,1],NAVY:[0,0,128/255,1],OLDLACE:[253/255,245/255,230/255,1],OLIVE:[128/255,128/255,0,1],OLIVEDRAB:[107/255,142/255,35/255,1],ORANGE:[1,165/255,0,1],ORANGERED:[1,69/255,0,1],ORCHID:[218/255,112/255,214/255,1],PALEGOLDENROD:[238/255,232/255,170/255,1],PALEGREEN:[152/255,251/255,152/255,1],PALETURQUOISE:[175/255,238/255,238/255,1],PALEVIOLETRED:[219/255,112/255,147/255,1],PAPAYAWHIP:[1,239/255,213/255,1],PEACHPUFF:[1,218/255,185/255,1],PERU:[205/255,133/255,63/255,1],PINK:[1,192/255,203/255,1],PLUM:[221/255,160/255,221/255,1],POWDERBLUE:[176/255,224/255,230/255,1],PURPLE:[128/255,0,128/255,1],RED:[1,0,0,1],ROSYBROWN:[188/255,143/255,143/255,1],ROYALBLUE:[65/255,105/255,225/255,1],SADDLEBROWN:[139/255,69/255,19/255,1],SALMON:[250/255,128/255,114/255,1],SANDYBROWN:[244/255,164/255,96/255,1],SEAGREEN:[46/255,139/255,87/255,1],SEASHELL:[1,245/255,238/255,1],SIENNA:[160/255,82/255,45/255,1],SILVER:[192/255,192/255,192/255,1],SKYBLUE:[135/255,206/255,235/255,1],SLATEBLUE:[106/255,90/255,205/255,1],SLATEGRAY:[112/255,128/255,144/255,1],SLATEGREY:[112/255,128/255,144/255,1],SNOW:[1,250/255,250/255,1],SPRINGGREEN:[0,1,127/255,1],STEELBLUE:[70/255,130/255,180/255,1],TAN:[210/255,180/255,140/255,1],TEAL:[0,128/255,128/255,1],THISTLE:[216/255,191/255,216/255,1],TOMATO:[1,99/255,71/255,1],TURQUOISE:[64/255,224/255,208/255,1],VIOLET:[238/255,130/255,238/255,1],WHEAT:[245/255,222/255,179/255,1],WHITE:[1,1,1,1],WHITESMOKE:[245/255,245/255,245/255,1],YELLOW:[1,1,0,1],YELLOWGREEN:[154/255,205/255,50/255,1]},get:function(t){t="string"==typeof t?o._toColor(t):[t[0],t[1],t[2],t[3]];return t[3]=i.RenderingHelper.clamp(t[3]),t[0]=i.RenderingHelper.clamp(t[0])*t[3],t[1]=i.RenderingHelper.clamp(t[1])*t[3],t[2]=i.RenderingHelper.clamp(t[2])*t[3],t},_hsl2rgb:function(t){var e=t[0]%360,i=t[1],r=50<t[2]?100-t[2]:t[2],t=t[3],o=r+r*i,r=r-r*i;return e<60?[o,e/60*(o-r)+r,r,t]:e<120?[(120-e)/60*(o-r)+r,o,r,t]:e<180?[r,o,(e-120)/60*(o-r)+r,t]:e<240?[r,(240-e)/60*(o-r)+r,o,t]:e<300?[(e-240)/60*(o-r)+r,r,o,t]:[o,r,(360-e)/60*(o-r)+r,t]},_toColor:function(t){var t=t.toUpperCase().replace(/\s+/g,""),e=o.colorMap[t];if(e)return e;if(t.match(/^#([\dA-F])([\dA-F])([\dA-F])$/))return[parseInt(RegExp.$1,16)/15,parseInt(RegExp.$2,16)/15,parseInt(RegExp.$3,16)/15,1];if(t.match(/^#([\dA-F]{2})([\dA-F]{2})([\dA-F]{2})$/))return[parseInt(RegExp.$1,16)/255,parseInt(RegExp.$2,16)/255,parseInt(RegExp.$3,16)/255,1];if(t.match(/^RGB\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/))return[parseInt(RegExp.$1,10)/255,parseInt(RegExp.$2,10)/255,parseInt(RegExp.$3,10)/255,1];if(t.match(/^RGBA\((\d{1,3}),(\d{1,3}),(\d{1,3}),(\d(\.\d*)?)\)$/))return[parseInt(RegExp.$1,10)/255,parseInt(RegExp.$2,10)/255,parseInt(RegExp.$3,10)/255,parseFloat(RegExp.$4)];if(t.match(/^HSL\((\d{1,3}),(\d{1,3})%,(\d{1,3})%\)$/))return o._hsl2rgb([parseInt(RegExp.$1,10),i.RenderingHelper.clamp(parseInt(RegExp.$2,10)/100),i.RenderingHelper.clamp(parseInt(RegExp.$3,10)/100),1]);if(t.match(/^HSLA\((\d{1,3}),(\d{1,3})%,(\d{1,3})%,(\d(\.\d*)?)\)$/))return o._hsl2rgb([parseInt(RegExp.$1,10),i.RenderingHelper.clamp(parseInt(RegExp.$2,10)/100),i.RenderingHelper.clamp(parseInt(RegExp.$3,10)/100),parseFloat(RegExp.$4)]);throw Error("illigal cssColor format: "+t)}}),n=fh,r=yh(),s.prototype.clear=function(){this._shared.clear()},s.prototype.begin=function(){},s.prototype.end=function(){this._shared.end()},s.prototype.save=function(){this._pushState()},s.prototype.restore=function(){this._popState()},s.prototype.translate=function(t,e){this.currentState().transformer.translate(t,e)},s.prototype.transform=function(t){this.currentState().transformer.transform(t)},s.prototype.opacity=function(t){this.currentState().globalAlpha*=t},s.prototype.setCompositeOperation=function(t){this.currentState().globalCompositeOperation=t},s.prototype.currentState=function(){return this._stateStack[this._stateStackPointer]},s.prototype.fillRect=function(t,e,i,r,o){this._shared.draw(this.currentState(),this._shared.getFillRectSurfaceTexture(),0,0,i,r,t,e,n.WebGLColor.get(o))},s.prototype.drawSprites=function(t,e,i,r,o,n,s,a){for(var h=0;h<a;++h)this.drawImage(t,e[h],i[h],r[h],o[h],n[h],s[h])},s.prototype.drawImage=function(t,e,i,r,o,n,s){if(!t._drawable)throw new Error("WebGLRenderer#drawImage: no drawable surface.");if(t._drawable.texture instanceof WebGLTexture||this._shared.makeTextureForSurface(t),!t._drawable.texture)throw new Error("WebGLRenderer#drawImage: could not create a texture.");this._shared.draw(this.currentState(),t._drawable,e,i,r,o,n,s,this._whiteColor)},s.prototype.setTransform=function(t){this.currentState().transformer.setTransform(t)},s.prototype.setOpacity=function(t){this.currentState().globalAlpha=t},s.prototype.setShaderProgram=function(t){this.currentState().shaderProgram=this._shared.initializeShaderProgram(t)},s.prototype.isSupportedShaderProgram=function(){return!0},s.prototype.changeViewportSize=function(t,e){var i=this._renderTarget;this._renderTarget={width:i.width,height:i.height,viewportWidth:t,viewportHeight:e,texture:i.texture,framebuffer:i.framebuffer}},s.prototype.getContext=function(){return this._shared.getContext()},s.prototype.flush=function(){return this._shared.flush()},s.prototype.destroy=function(){this._shared.requestDeleteRenderTarget(this._renderTarget),this._shared=void 0,this._renderTarget=void 0,this._whiteColor=void 0},s.prototype._getImageData=function(){throw new Error("WebGLRenderer#_getImageData() is not implemented")},s.prototype._putImageData=function(t,e,i,r,o,n,s){throw new Error("WebGLRenderer#_putImageData() is not implemented")},s.prototype._pushState=function(){var t=this.currentState();++this._stateStackPointer,this._isOverCapacity()&&this._reallocation(this._stateStackPointer+1),this.currentState().copyFrom(t)},s.prototype._popState=function(){if(!(0<this._stateStackPointer))throw new Error("WebGLRenderer#restore: state stack under-flow.");this.currentState().shaderProgram=null,--this._stateStackPointer},s.prototype._isOverCapacity=function(){return this._capacity<=this._stateStackPointer},s.prototype._reallocation=function(t){var e=this._capacity;if(e<t){t<2*e?this._capacity*=2:this._capacity=t;for(var i=e;i<this._capacity;++i)this._stateStack.push(new r.WebGLRenderingState)}},s.DEFAULT_CAPACITY=16,ph.WebGLRenderer=s),ph;function s(t,e){this._stateStack=[],this._stateStackPointer=0,this._capacity=0,this._reallocation(s.DEFAULT_CAPACITY),this._whiteColor=[1,1,1,1],this._shared=t,this._renderTarget=e}}var mh,vh,Th,Ah={},wh={};function Sh(){var r,t,e,i,o,n,s,a;return vh||(vh=1,t=Ah&&Ah.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.WebGLPrimarySurface=void 0,e=Ra(),mh||(mh=1,s=wh&&wh.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(wh,"__esModule",{value:!0}),wh.WebGLPrimarySurfaceRenderer=void 0,a=gh().WebGLRenderer,s(u,a),u.prototype.begin=function(){a.prototype.begin.call(this),this._shared.begin()},wh.WebGLPrimarySurfaceRenderer=u),i=wh,o=e.CanvasSurface,t(h,o),h.prototype.renderer=function(){return this._renderer||(this._renderer=new i.WebGLPrimarySurfaceRenderer(this._shared,this._shared.getPrimaryRenderTarget(this.width,this.height))),this._renderer},h.prototype.changePhysicalScale=function(t,e){t=Math.ceil(this.width*t),e=Math.ceil(this.height*e);this.canvas.width=t,this.canvas.height=e,this.renderer().changeViewportSize(t,e)},h.prototype.isPlaying=function(){return!1},Ah.WebGLPrimarySurface=h),Ah;function h(t,e,i){e=o.call(this,e,i)||this;return e.canvas.style.position="absolute",e._shared=t,e}function u(t,e){t=a.call(this,t,e)||this;return t._shared.pushRenderTarget(t._renderTarget),t}}var bh,Ph,xh,Eh,Oh={},kh={},Mh={};function Lh(){var i,r,o,e,s,n,a,t,h,u,c,l,d,p,f;return Eh||(Eh=1,Object.defineProperty(ch,"__esModule",{value:!0}),ch.WebGLSharedObject=void 0,Th||(Th=1,t=lh&&lh.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(lh,"__esModule",{value:!0}),lh.WebGLBackSurface=void 0,uh||(uh=1,l=dh&&dh.__extends||(c=function(t,e){return(c=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(dh,"__esModule",{value:!0}),dh.WebGLBackSurfaceRenderer=void 0,d=gh(),p=yh(),f=d.WebGLRenderer,l(T,f),T.prototype.begin=function(){f.prototype.begin.call(this),this.save();var t=new p.WebGLRenderingState(this.currentState()),e=t.transformer.matrix;e[1]*=-1,e[3]*=-1,e[5]=-e[5]+this._renderTarget.height,this.currentState().copyFrom(t),this._shared.pushRenderTarget(this._renderTarget)},T.prototype.end=function(){this.restore(),this._shared.popRenderTarget(),f.prototype.end.call(this)},dh.WebGLBackSurfaceRenderer=T),h=dh,u=Sh().WebGLPrimarySurface,t(v,u),v.prototype.renderer=function(){return this._renderer||(this._renderer=new h.WebGLBackSurfaceRenderer(this,this._shared)),this._renderer},v.prototype.destroy=function(){this._renderer&&this._renderer.destroy(),this._renderer=void 0,this._drawable=void 0,u.prototype.destroy.call(this)},lh.WebGLBackSurface=v),i=lh,r=Sh(),bh||(bh=1,Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.WebGLShaderProgram=void 0,m._makeShader=function(t,e,i){e=t.createShader(e);if(!e)throw new Error("WebGLShaderProgram._makeShader(): WebGLShader could not initialize");if(t.shaderSource(e,i),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS))return e;throw i=t.getShaderInfoLog(e),t.deleteShader(e),new Error(null!=i?i:"WebGLShaderProgram._makeShader(): unknown gl error")},m._makeShaderProgram=function(t,e,i){var r=t.createProgram();if(!r)throw new Error("WebGLShaderProgram._makeShaderProgram(): WebGLProgram could not initialize");e=m._makeShader(t,t.VERTEX_SHADER,e),t.attachShader(r,e),t.deleteShader(e),e=m._makeShader(t,t.FRAGMENT_SHADER,i);if(t.attachShader(r,e),t.deleteShader(e),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS))return r;throw i=t.getProgramInfoLog(r),t.deleteProgram(r),new Error(null!=i?i:"WebGLShaderProgram._makeShaderProgram(): unknown gl error")},m.prototype.set_aVertex=function(t){this._context.bindBuffer(this._context.ARRAY_BUFFER,t),this._context.enableVertexAttribArray(this._aVertex),this._context.vertexAttribPointer(this._aVertex,4,this._context.FLOAT,!1,0,0)},m.prototype.set_uColor=function(t){this._context.uniform4f(this._uColor,t[0],t[1],t[2],t[3])},m.prototype.set_uAlpha=function(t){this._context.uniform1f(this._uAlpha,t)},m.prototype.set_uSampler=function(t){this._context.uniform1i(this._uSampler,t)},m.prototype.updateUniforms=function(){for(var t=0;t<this._uniformCaches.length;++t){var e=this._uniformCaches[t],i=this._uniforms[e.name].value;!e.isArray&&i===e.beforeValue||(e.update(e.loc,i),e.beforeValue=i)}},m.prototype.initializeUniforms=function(){var o=this,n=[],s=this._uniforms;null!=s&&Object.keys(s).forEach(function(t){var e=s[t].type,i=!("number"==typeof s[t].value),r=(!i||"int"!==e&&"float"!==e||(e+="_v"),o._uniformSetterTable[e]);if(!r)throw new Error("WebGLShaderProgram#initializeUniforms: Uniform type '".concat(e,"' is not supported."));e=o._context.getUniformLocation(o.program,t);if(!e)throw new Error("WebGLShaderProgram#initializeUniforms: could not get UniformLocation of '".concat(t,"'."));n.push({name:t,update:r,beforeValue:null,isArray:i,loc:e})}),this._uniformCaches=n},m.prototype.use=function(){this._context.useProgram(this.program)},m.prototype.unuse=function(){this._context.useProgram(null)},m.prototype.destroy=function(){this._context.deleteProgram(this.program)},m.prototype._uniform1f=function(t,e){this._context.uniform1f(t,e)},m.prototype._uniform1i=function(t,e){this._context.uniform1i(t,e)},m.prototype._uniform1fv=function(t,e){this._context.uniform1fv(t,e)},m.prototype._uniform1iv=function(t,e){this._context.uniform1iv(t,e)},m.prototype._uniform2fv=function(t,e){this._context.uniform2fv(t,e)},m.prototype._uniform3fv=function(t,e){this._context.uniform3fv(t,e)},m.prototype._uniform4fv=function(t,e){this._context.uniform4fv(t,e)},m.prototype._uniform2iv=function(t,e){this._context.uniform2iv(t,e)},m.prototype._uniform3iv=function(t,e){this._context.uniform3iv(t,e)},m.prototype._uniform4iv=function(t,e){this._context.uniform4iv(t,e)},m.prototype._uniformMatrix2fv=function(t,e){this._context.uniformMatrix2fv(t,!1,e)},m.prototype._uniformMatrix3fv=function(t,e){this._context.uniformMatrix3fv(t,!1,e)},m.prototype._uniformMatrix4fv=function(t,e){this._context.uniformMatrix4fv(t,!1,e)},m._DEFAULT_VERTEX_SHADER="#version 100\nprecision mediump float;\nattribute vec4 aVertex;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform vec4 uColor;\nuniform float uAlpha;\nvoid main() {    gl_Position = vec4(aVertex.xy, 0.0, 1.0);    vTexCoord = aVertex.zw;    vColor = uColor * uAlpha;}",m._DEFAULT_FRAGMENT_SHADER="#version 100\nprecision mediump float;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main() {    gl_FragColor = texture2D(uSampler, vTexCoord) * vColor;}",d=m,Oh.WebGLShaderProgram=d),o=Oh,xh||(xh=1,Object.defineProperty(kh,"__esModule",{value:!0}),kh.WebGLTextureAtlas=void 0,s=nh(),Ph||(Ph=1,Object.defineProperty(Mh,"__esModule",{value:!0}),Mh.WebGLTextureMap=void 0,g.prototype.dispose=function(){this._left&&(this._left.dispose(),this._left=null),this._right&&(this._right.dispose(),this._right=null),this._surface&&(this._surface._drawable&&(this._surface._drawable.texture=null),this._surface=null)},g.prototype.capacity=function(){return this._width*this._height},g.prototype.area=function(){var t;return this._surface?(t=(t=this._surface._drawable).width*t.height,this._left&&(t+=this._left.area()),this._right&&(t+=this._right.area()),t):0},g.prototype.occupancy=function(){return this.area()/this.capacity()},g.prototype.insert=function(t){var e,i=t._drawable,r=i.width+g.TEXTURE_MARGIN,i=i.height+g.TEXTURE_MARGIN;if(this._surface){if(this._left){var o=this._left.insert(t);if(o)return o}if(this._right){var o=this._right.insert(t);if(o)return o}return null}return this._width<r||this._height<i?null:((o=this._width-r)<=(e=this._height-i)?(this._left=new g(this.texture,this.offsetX+r,this.offsetY,o,i),this._right=new g(this.texture,this.offsetX,this.offsetY+i,this._width,e)):(this._left=new g(this.texture,this.offsetX,this.offsetY+i,r,e),this._right=new g(this.texture,this.offsetX+r,this.offsetY,o,this._height)),this._surface=t,this)},g.TEXTURE_MARGIN=1,Mh.WebGLTextureMap=g),n=Mh,y.prototype.clear=function(){for(var t=0;t<this._maps.length;++t)this._maps[t].dispose()},y.prototype.showOccupancy=function(){for(var t=0;t<this._maps.length;++t)console.log("occupancy["+t+"]: "+this._maps[t].occupancy())},y.prototype.makeTextureForSurface=function(t,e){var i=e._drawable;if(i&&!i.texture){var r=i.width,o=i.height;if(y.TEXTURE_SIZE<=r||y.TEXTURE_SIZE<=o){r=s.RenderingHelper.toPowerOfTwo(i.width),o=s.RenderingHelper.toPowerOfTwo(i.height);if(r!==i.width||o!==i.height){var n=document.createElement("canvas"),n=(n.width=r,n.height=o,n.getContext("2d"));if(!n)throw new Error("WebGLTextureAtlas#makeTextureForSurface(): could not initialize CanvasRenderingContext2D");n.globalCompositeOperation="copy",n.drawImage(i,0,0),i=n.getImageData(0,0,r,o)}e._drawable.texture=t.makeTexture(i),e._drawable.textureOffsetX=0,e._drawable.textureOffsetY=0,e._drawable.textureWidth=r,e._drawable.textureHeight=o}else this._assign(t,e,this._maps)}},y.prototype._assign=function(t,e,i){for(var r=null,o=0;o<i.length;++o)if(r=i[(o+this._insertPos)%i.length].insert(e))return this._register(t,r,e._drawable),void(this._insertPos=o);r=null,i.length>=y.TEXTURE_COUNT&&(r=i.shift(),t.disposeTexture(r.texture),r.dispose(),t.clearTexture(this.emptyTexturePixels,y.TEXTURE_SIZE,y.TEXTURE_SIZE,r.texture)),r=r||new n.WebGLTextureMap(t.makeTextureRaw(y.TEXTURE_SIZE,y.TEXTURE_SIZE),0,0,y.TEXTURE_SIZE,y.TEXTURE_SIZE),i.push(r),r=r.insert(e),this._register(t,r,e._drawable)},y.prototype._register=function(t,e,i){i.texture=e.texture,i.textureOffsetX=e.offsetX,i.textureOffsetY=e.offsetY,i.textureWidth=y.TEXTURE_SIZE,i.textureHeight=y.TEXTURE_SIZE,t.assignTexture(i,e.offsetX,e.offsetY,e.texture)},y.TEXTURE_SIZE=1024,y.TEXTURE_COUNT=16,kh.WebGLTextureAtlas=y),e=kh,_.prototype.getFillRectSurfaceTexture=function(){return this._fillRectSurfaceTexture},_.prototype.getPrimarySurface=function(){return this._surface},_.prototype.createBackSurface=function(t,e){return new i.WebGLBackSurface(this,t,e)},_.prototype.pushRenderTarget=function(t){this._commit(),this._renderTargetStack.push(t),this._context.bindFramebuffer(this._context.FRAMEBUFFER,t.framebuffer),this._context.viewport(0,0,t.viewportWidth,t.viewportHeight)},_.prototype.popRenderTarget=function(){this._commit(),this._renderTargetStack.pop();var t=this.getCurrentRenderTarget();this._context.bindFramebuffer(this._context.FRAMEBUFFER,t.framebuffer),this._context.viewport(0,0,t.viewportWidth,t.viewportHeight)},_.prototype.getCurrentRenderTarget=function(){return this._renderTargetStack[this._renderTargetStack.length-1]},_.prototype.begin=function(){this.clear(),this._currentShaderProgram.use(),this._currentShaderProgram.set_aVertex(this._vertices),this._currentShaderProgram.set_uColor(this._currentColor),this._currentShaderProgram.set_uAlpha(this._currentAlpha),this._currentShaderProgram.set_uSampler(0),this._currentShaderProgram.updateUniforms()},_.prototype.clear=function(){this._enableDepthBuffer?(this._context.depthMask(!0),this._context.clear(this._context.COLOR_BUFFER_BIT|this._context.DEPTH_BUFFER_BIT),this._context.depthMask(!1)):this._context.clear(this._context.COLOR_BUFFER_BIT)},_.prototype.draw=function(t,e,i,r,o,n,s,a,h){this._numSprites>=this._maxSpriteCount&&this._commit(),u=e===this._fillRectSurfaceTexture||null==t.shaderProgram||null==t.shaderProgram._program?this._defaultShaderProgram:t.shaderProgram._program,this._currentShaderProgram!==u&&(this._commit(),this._currentShaderProgram=u,this._currentShaderProgram.use(),this._currentShaderProgram.updateUniforms(),this._currentCompositeOperation=null,this._currentAlpha=null,this._currentColor=[],this._currentTexture=null),this._currentTexture!==e.texture&&(this._currentTexture=e.texture,this._commit(),this._context.bindTexture(this._context.TEXTURE_2D,e.texture)),this._currentColor[0]===h[0]&&this._currentColor[1]===h[1]&&this._currentColor[2]===h[2]&&this._currentColor[3]===h[3]||(this._currentColor=h,this._commit(),this._currentShaderProgram.set_uColor(h)),this._currentAlpha!==t.globalAlpha&&(this._currentAlpha=t.globalAlpha,this._commit(),this._currentShaderProgram.set_uAlpha(t.globalAlpha)),this._currentCompositeOperation!==t.globalCompositeOperation&&(this._currentCompositeOperation=t.globalCompositeOperation,this._commit(),u=this._compositeOps[this._currentCompositeOperation],this._context.blendFunc(u[0],u[1]));var h=1/e.textureWidth,u=1/e.textureHeight,c=e.textureOffsetX,e=e.textureOffsetY,l=h*(c+i+o),d=u*(e+r+n),h=h*(c+i),c=u*(e+r);this._register(this._transformVertex(s,a,o,n,t.transformer),[h,c,l,c,l,d,h,c,l,d,h,d])},_.prototype.end=function(){if(this._commit(),0<this._deleteRequestedTargets.length){for(var t=0;t<this._deleteRequestedTargets.length;++t)this.deleteRenderTarget(this._deleteRequestedTargets[t]);this._deleteRequestedTargets=[]}},_.prototype.makeTextureForSurface=function(t){this._textureAtlas.makeTextureForSurface(this,t)},_.prototype.disposeTexture=function(t){this._currentTexture===t&&this._commit()},_.prototype.assignTexture=function(t,e,i,r){if(this._context.bindTexture(this._context.TEXTURE_2D,r),t instanceof HTMLVideoElement)throw new Error("WebGLRenderer#assignTexture: HTMLVideoElement is not supported.");this._context.texSubImage2D(this._context.TEXTURE_2D,0,e,i,this._context.RGBA,this._context.UNSIGNED_BYTE,t),this._context.bindTexture(this._context.TEXTURE_2D,this._currentTexture)},_.prototype.clearTexture=function(t,e,i,r){this._context.bindTexture(this._context.TEXTURE_2D,r),this._context.texSubImage2D(this._context.TEXTURE_2D,0,0,0,e,i,this._context.RGBA,this._context.UNSIGNED_BYTE,t),this._context.bindTexture(this._context.TEXTURE_2D,this._currentTexture)},_.prototype.makeTextureRaw=function(t,e,i){void 0===i&&(i=null);var r=this._context.createTexture();if(r)return this._context.bindTexture(this._context.TEXTURE_2D,r),this._context.pixelStorei(this._context.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_WRAP_S,this._context.CLAMP_TO_EDGE),this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_WRAP_T,this._context.CLAMP_TO_EDGE),this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MAG_FILTER,this._context.NEAREST),this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MIN_FILTER,this._context.NEAREST),this._context.texImage2D(this._context.TEXTURE_2D,0,this._context.RGBA,t,e,0,this._context.RGBA,this._context.UNSIGNED_BYTE,i),this._context.bindTexture(this._context.TEXTURE_2D,this._currentTexture),r;throw new Error("WebGLSharedObject#makeTextureRaw(): could not create WebGLTexture")},_.prototype.makeTexture=function(t){var e=this._context.createTexture();if(e)return this._context.bindTexture(this._context.TEXTURE_2D,e),this._context.pixelStorei(this._context.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_WRAP_S,this._context.CLAMP_TO_EDGE),this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_WRAP_T,this._context.CLAMP_TO_EDGE),this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MAG_FILTER,this._context.NEAREST),this._context.texParameteri(this._context.TEXTURE_2D,this._context.TEXTURE_MIN_FILTER,this._context.NEAREST),(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageData)&&this._context.texImage2D(this._context.TEXTURE_2D,0,this._context.RGBA,this._context.RGBA,this._context.UNSIGNED_BYTE,t),this._context.bindTexture(this._context.TEXTURE_2D,this._currentTexture),e;throw new Error("WebGLSharedObject#makeTexture(): could not create WebGLTexture")},_.prototype.getPrimaryRenderTarget=function(t,e){return this._renderTarget},_.prototype.createRenderTarget=function(t,e){var i=this._context,r=i.createFramebuffer(),o=(i.bindFramebuffer(i.FRAMEBUFFER,r),i.createTexture()),n=(i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,null),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,o,0),i.bindTexture(i.TEXTURE_2D,this._currentTexture),this.getCurrentRenderTarget());return i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer),{width:t,height:e,viewportWidth:t,viewportHeight:e,framebuffer:r,texture:o}},_.prototype.requestDeleteRenderTarget=function(t){this._deleteRequestedTargets.push(t)},_.prototype.deleteRenderTarget=function(t){var e=this._context;this.getCurrentRenderTarget()===t&&this._commit(),e.deleteFramebuffer(t.framebuffer),e.deleteTexture(t.texture)},_.prototype.getContext=function(){return this._context},_.prototype.getDefaultShaderProgram=function(){return this._defaultShaderProgram},_.prototype.initializeShaderProgram=function(t){var e;return t&&!t._program&&((e=new o.WebGLShaderProgram(this._context,t.fragmentShader,t.uniforms)).initializeUniforms(),t._program=e),t},_.prototype.flush=function(){this._commit()},_.prototype._init=function(){var t=new o.WebGLShaderProgram(this._context);this._textureAtlas=new e.WebGLTextureAtlas,this._fillRectTexture=this.makeTextureRaw(1,1,new Uint8Array([255,255,255,255])),this._fillRectSurfaceTexture={texture:this._fillRectTexture,textureWidth:1,textureHeight:1,textureOffsetX:0,textureOffsetY:0},this._renderTarget={width:this._surface.width,height:this._surface.height,viewportWidth:this._surface.width,viewportHeight:this._surface.height,framebuffer:null,texture:null},this._maxSpriteCount=1024,this._vertices=this._makeBuffer(24*this._maxSpriteCount*4),this._verticesCache=new Float32Array(24*this._maxSpriteCount),this._numSprites=0,this._currentTexture=null,this._currentColor=[1,1,1,1],this._currentAlpha=1,this._currentCompositeOperation="source-over",this._currentShaderProgram=t,this._defaultShaderProgram=t,this._renderTargetStack=[],this._deleteRequestedTargets=[],this._currentShaderProgram.use();try{this._currentShaderProgram.set_aVertex(this._vertices),this._currentShaderProgram.set_uColor(this._currentColor),this._currentShaderProgram.set_uAlpha(this._currentAlpha),this._currentShaderProgram.set_uSampler(0)}finally{this._currentShaderProgram.unuse()}this._context.enable(this._context.BLEND),this._context.activeTexture(this._context.TEXTURE0),this._context.bindTexture(this._context.TEXTURE_2D,this._fillRectTexture),this._compositeOps={"source-atop":[this._context.DST_ALPHA,this._context.ONE_MINUS_SRC_ALPHA],"experimental-source-in":[this._context.DST_ALPHA,this._context.ZERO],"experimental-source-out":[this._context.ONE_MINUS_DST_ALPHA,this._context.ZERO],"source-over":[this._context.ONE,this._context.ONE_MINUS_SRC_ALPHA],"experimental-destination-atop":[this._context.ONE_MINUS_DST_ALPHA,this._context.SRC_ALPHA],"experimental-destination-in":[this._context.ZERO,this._context.SRC_ALPHA],"destination-out":[this._context.ZERO,this._context.ONE_MINUS_SRC_ALPHA],"destination-over":[this._context.ONE_MINUS_DST_ALPHA,this._context.ONE],lighter:[this._context.ONE,this._context.ONE],copy:[this._context.ONE,this._context.ZERO],xor:[this._context.ONE_MINUS_DST_ALPHA,this._context.ONE_MINUS_SRC_ALPHA],difference:[this._context.ONE,this._context.ONE_MINUS_SRC_ALPHA],saturation:[this._context.ONE,this._context.ONE_MINUS_SRC_ALPHA]};t=this._compositeOps[this._currentCompositeOperation];this._context.blendFunc(t[0],t[1])},_.prototype._makeBuffer=function(t){var e=this._context.createBuffer();if(e)return this._context.bindBuffer(this._context.ARRAY_BUFFER,e),this._context.bufferData(this._context.ARRAY_BUFFER,t,this._context.DYNAMIC_DRAW),e;throw new Error("WebGLSharedObject#_makeBuffer(): could not create WebGLBuffer")},_.prototype._transformVertex=function(t,e,i,r,o){var n=this.getCurrentRenderTarget(),s=2/n.width,n=-2/n.height,o=o.matrix,a=s*i*o[0],i=n*i*o[1],h=s*r*o[2],r=n*r*o[3],s=s*(t*o[0]+e*o[2]+o[4])-1,n=n*(t*o[1]+e*o[3]+o[5])+1;return[s,n,a+s,i+n,a+h+s,i+r+n,s,n,a+h+s,i+r+n,h+s,r+n]},_.prototype._register=function(t,e){var i=6*this._numSprites;++this._numSprites;for(var r=0;r<6;++r)this._verticesCache[4*(r+i)+0]=t[2*r+0],this._verticesCache[4*(r+i)+1]=t[2*r+1],this._verticesCache[4*(r+i)+2]=e[2*r+0],this._verticesCache[4*(r+i)+3]=e[2*r+1]},_.prototype._commit=function(){0<this._numSprites&&(this._context.bindBuffer(this._context.ARRAY_BUFFER,this._vertices),this._context.bufferSubData(this._context.ARRAY_BUFFER,0,this._verticesCache.subarray(0,24*this._numSprites)),this._context.drawArrays(this._context.TRIANGLES,0,6*this._numSprites),this._numSprites=0)},ch.WebGLSharedObject=_),ch;function _(t){this._renderTarget=void 0,this._defaultShaderProgram=void 0,this._textureAtlas=void 0,this._fillRectTexture=void 0,this._fillRectSurfaceTexture=void 0,this._maxSpriteCount=void 0,this._vertices=void 0,this._verticesCache=void 0,this._numSprites=void 0,this._renderTargetStack=void 0,this._currentTexture=void 0,this._currentColor=void 0,this._currentAlpha=void 0,this._currentCompositeOperation=void 0,this._currentShaderProgram=void 0,this._compositeOps=void 0,this._deleteRequestedTargets=void 0;var e=t.width,i=!!t.enableDepthBuffer,e=new r.WebGLPrimarySurface(this,e,t.height),t=e.canvas.getContext("webgl",{depth:i,preserveDrawingBuffer:!0});if(!t)throw new Error("WebGLSharedObject#constructor: could not initialize WebGLRenderingContext");this._enableDepthBuffer=i,this._surface=e,this._context=t,this._init()}function y(){this._maps=[],this._insertPos=0,this.emptyTexturePixels=new Uint8Array(y.TEXTURE_SIZE*y.TEXTURE_SIZE*4)}function g(t,e,i,r,o){this._left=null,this._right=null,this._surface=null,this.texture=t,this.offsetX=e,this.offsetY=i,this._width=r,this._height=o}function m(t,e,i){void 0===i&&(i=Object.create(null));var r=m._DEFAULT_VERTEX_SHADER,r=(e=e||m._DEFAULT_FRAGMENT_SHADER,m._makeShaderProgram(t,r,e)),e=(this.program=r,this._context=t,this._aVertex=t.getAttribLocation(this.program,"aVertex"),t.getUniformLocation(this.program,"uColor"));if(!e)throw new Error("WebGLShaderProgram#constructor: could not get UniformLocation of 'uColor'");r=t.getUniformLocation(this.program,"uAlpha");if(!r)throw new Error("WebGLShaderProgram#constructor: could not get UniformLocation of 'uAlpha'");t=t.getUniformLocation(this.program,"uSampler");if(!t)throw new Error("WebGLShaderProgram#constructor: could not get UniformLocation of 'uSampler'");this._uColor=e,this._uAlpha=r,this._uSampler=t,this._uniforms=i,this._uniformCaches=[],this._uniformSetterTable={float:this._uniform1f.bind(this),int:this._uniform1i.bind(this),float_v:this._uniform1fv.bind(this),int_v:this._uniform1iv.bind(this),vec2:this._uniform2fv.bind(this),vec3:this._uniform3fv.bind(this),vec4:this._uniform4fv.bind(this),ivec2:this._uniform2iv.bind(this),ivec3:this._uniform3iv.bind(this),ivec4:this._uniform4iv.bind(this),mat2:this._uniformMatrix2fv.bind(this),mat3:this._uniformMatrix3fv.bind(this),mat4:this._uniformMatrix4fv.bind(this)}}function v(){return null!==u&&u.apply(this,arguments)||this}function T(t,e){e=f.call(this,e,e.createRenderTarget(t.width,t.height))||this;return t._drawable={texture:e._renderTarget.texture,textureOffsetX:0,textureOffsetY:0,textureWidth:t.width,textureHeight:t.height},e}}var Rh,Ch,Ih,Fh,Dh={};function jh(){var i,r,D,j,G,U,B,H,N,o,n,W,V,X,z,y,s,q,Y,a,h,K,$,u,c,e,l,t,d,J,p,f,_,g,m,v,T,A,w,Z,S;return Ih||(Ih=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.ResourceFactory=void 0,Aa||(Aa=1,w=xa&&xa.__extends||(A=function(t,e){return(A=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}A(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(xa,"__esModule",{value:!0}),xa.BinaryAsset=void 0,Z=Ks(),S=ot().Asset,w(F,S),F.prototype.destroy=function(){this.data=void 0,S.prototype.destroy.call(this)},F.prototype._load=function(i){var r=this;(new Z.XHRLoader).getArrayBuffer(this.path,function(t,e){t?i._onAssetError(r,t):null!=e?(r.data=e,i._onAssetLoad(r)):i._onAssetError(r,{name:"AssetLoadError",retriable:!1,message:"BinaryAsset#_load(): no data received"})})},xa.BinaryAsset=F),i=xa,Wa||(Wa=1,w=Ea&&Ea.__extends||(m=function(t,e){return(m=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.GeneratedSVGImageAsset=void 0,v=rt(),T=za().SVGImageAsset,w(I,T),I.prototype.destroy=function(){this._svgString=null,T.prototype.destroy.call(this)},I.prototype._load=function(e){var t,i=this,r=this._svgString,o=new DOMParser;try{var n=o.parseFromString(r,"text/xml").getElementsByTagName("svg")[0],s=n.getAttribute("width"),a=n.getAttribute("height");if(null==s)throw new Error("must give width in the root element.");if(null==a)throw new Error("must give height in the root element.");if(!it(s))throw new Error('the width in the root element must be given in "px" units');if(!it(a))throw new Error('the height in the root element must be given in "px" units');t=window.btoa(r),this.width=parseFloat(s),this.height=parseFloat(a)}catch(t){return void e._onAssetError(this,v.ExceptionFactory.createAssetLoadError(t.message,!1,t))}var h=new Image;h.onerror=function(t){e._onAssetError(i,v.ExceptionFactory.createAssetLoadError("GeneratedSVGImageAsset: unknown loading error",void 0,t))},h.onload=function(){i.data=h,e._onAssetLoad(i)},h.src="data:image/svg+xml;base64,"+t},Ea.GeneratedSVGImageAsset=I),r=Ea,qa||(qa=1,t=nt&&nt.__extends||(l=function(t,e){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(nt,"__esModule",{value:!0}),nt.HTMLImageAsset=nt.ImageAssetSurface=void 0,d=La(),J=rt(),p=ot(),_=d.Surface,t(R,_),R.prototype.renderer=function(){throw new Error("ImageAssetSurface cannot be rendered.")},R.prototype.isPlaying=function(){return!1},f=R,nt.ImageAssetSurface=f,g=p.Asset,t(C,g),C.prototype.initialize=function(t){this.hint=t},C.prototype.destroy=function(){this._surface&&!this._surface.destroyed()&&this._surface.destroy(),this.data=void 0,this._surface=void 0,g.prototype.destroy.call(this)},C.prototype._load=function(t){var e=this,i=new Image;this.hint&&this.hint.untainted&&(i.crossOrigin="anonymous"),i.onerror=function(){t._onAssetError(e,J.ExceptionFactory.createAssetLoadError("HTMLImageAsset unknown loading error"))},i.onload=function(){e.data=i,t._onAssetLoad(e)},i.src=this.path},C.prototype.asSurface=function(){if(this.data)return this._surface||(this._surface=new f(this.width,this.height,this.data)),this._surface;throw new Error("ImageAssetImpl#asSurface: not yet loaded.")},nt.HTMLImageAsset=C),D=nt,Ka||(Ka=1,d=$a&&$a.__extends||(h=function(t,e){return(h=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty($a,"__esModule",{value:!0}),$a.HTMLVideoAsset=void 0,p=La(),t=ot(),Ya||(Ya=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.HTMLVideoPlayer=void 0,e=pt(),L.prototype.play=function(t){},L.prototype.stop=function(){},L.prototype.changeVolume=function(t){},Ja.HTMLVideoPlayer=L),K=Ja,c=p.Surface,d(M,c),M.prototype.renderer=function(){throw new Error("VideoAssetSurface cannot be rendered.")},M.prototype.isPlaying=function(){return!1},$=M,u=t.Asset,d(k,u),k.prototype.play=function(t){return this.getPlayer().play(this),this.getPlayer()},k.prototype.stop=function(){this.getPlayer().stop()},k.prototype.inUse=function(){return!1},k.prototype._load=function(t){var e=this;setTimeout(function(){t._onAssetLoad(e)},0)},k.prototype.getPlayer=function(){return this._player},k.prototype.asSurface=function(){return this._surface},$a.HTMLVideoAsset=k),j=$a,G=za(),Za||(Za=1,q=eh&&eh.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(eh,"__esModule",{value:!0}),eh.XHRScriptAsset=void 0,Y=Ks(),a=ot().Asset,q(O,a),O.prototype._load=function(i){var r=this;(new Y.XHRLoader).get(this.path,function(t,e){t?i._onAssetError(r,t):(r.script=e+"\n",i._onAssetLoad(r))})},O.prototype.execute=function(t){return this._wrap()(t),t.module.exports},O.prototype.destroy=function(){this.script=void 0,a.prototype.destroy.call(this)},O.prototype._wrap=function(){for(var t="",e=0,i=this.exports;e<i.length;e++){var r=i[e];t+='exports["'.concat(r,'"] = typeof ').concat(r,' !== "undefined" ? ').concat(r," : undefined;\n")}return new Function("g","(function(exports, require, module, __filename, __dirname) {\n"+this.script+"\n"+t+"\n})(g.module.exports, g.module.require, g.module, g.filename, g.dirname);")},eh.XHRScriptAsset=O),U=eh,B=Qs(),Qa||(Qa=1,Object.defineProperty(ih,"__esModule",{value:!0}),ih.GlyphFactory=void 0,X=Xa(),z=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],E.prototype.create=function(t){var e,i=null,r=this._glyphAreas[t];return r||((r=(t=>{for(var e=t.width,i=t.height,r=0,o=0,n=0,s=0,a=t.height;s<a;s=s+1|0)for(var h=0,u=t.width;h<u;h=h+1|0)0!==t.data[n+3]&&(h<e&&(e=h),r<h&&(r=h),s<i&&(i=s),o<s)&&(o=s),n+=4;return e===t.width?{x:0,y:0,width:0,height:0}:{x:e,y:i,width:r-e+1,height:o-i+1}})((i=Q(t,this.fontSize,this._cssFontFamily,this.baselineHeight,this._marginW,this._marginH,!0,this.fontColor,this.strokeWidth,this.strokeColor,this.strokeOnly,this.fontWeight)).imageData)).advanceWidth=i.advanceWidth,this._glyphAreas[t]=r),0===(e=r).width||0===e.height?(i&&i.surface.destroy(),et(t,0,0,0,0,0,0,r.advanceWidth,void 0,!0)):(i=i||Q(t,this.fontSize,this._cssFontFamily,this.baselineHeight,this._marginW,this._marginH,!1,this.fontColor,this.strokeWidth,this.strokeColor,this.strokeOnly,this.fontWeight),et(t,r.x,r.y,r.width,r.height,r.x-this._marginW,r.y-this._marginH,r.advanceWidth,i.surface,!0))},E.prototype.measureMinimumFontSize=function(){var t,e=1,i=document.createElement("canvas").getContext("2d");if(!i)throw new Error("GlyphFactory#measureMinimumFontSize(): could not initialize CanvasRenderingContext2D");i.textAlign="left",i.textBaseline="alphabetic",i.lineJoin="bevel",i.font=e+"px sans-serif";for(var r=i.measureText("M").width;t=r,i.font=(e+=1)+"px sans-serif",t===(r=i.measureText("M").width)||50<e;);return e},y=E,ih.GlyphFactory=y),H=ih,Ch||(Ch=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.SurfaceFactory=void 0,o=Xa(),n=nh(),W=Lh(),Rh||(Rh=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.CanvasDisposer=void 0,x.prototype.register=function(t,e){var i;this._registry&&(i="".concat(this._idCounter++),this._canvasMap[i]=e,this._registry.register(t,i))},x.prototype._dispose=function(t){var e=this._canvasMap[t];e&&(e.width=1,e.height=1,delete this._canvasMap[t])},Dh.CanvasDisposer=x),V=Dh,P.prototype.createPrimarySurface=function(t,e,i){i=n.RenderingHelper.usedWebGL(i);return i?(this._shared||(this._shared=new W.WebGLSharedObject({width:t,height:e,enableDepthBuffer:i.options.enableDepthBuffer})),this._shared.getPrimarySurface()):new o.Context2DSurface(t,e)},P.prototype.createBackSurface=function(t,e,i){i=n.RenderingHelper.usedWebGL(i)?this._shared.createBackSurface(t,e):new o.Context2DSurface(t,e);return this._disposer.register(i,i.getHTMLElement()),i},rh.SurfaceFactory=P),N=rh,b.prototype.createAudioAsset=function(t,e,i,r,o,n,s){var a=this._audioPluginManager.getActivePlugin();if(a)return a=a.createAsset(t,e,i,r,o,n,s),this._audioManager.registerAudioAsset(a),a.onDestroyed.addOnce(this._onAudioAssetDestroyed,this),a;throw new Error("ResourceFactory#createAudioAsset(): could not initialize ActivePlugin")},b.prototype.createAudioPlayer=function(t){var e=this._audioPluginManager.getActivePlugin();if(e)return e.createPlayer(t,this._audioManager);throw new Error("ResourceFactory#createAudioAsset(): could not initialize ActivePlugin")},b.prototype.createImageAsset=function(t,e,i,r){return new D.HTMLImageAsset(t,e,i,r)},b.prototype.createVideoAsset=function(t,e,i,r,o,n,s){return new j.HTMLVideoAsset(t,e,i,r,o,n,s)},b.prototype.createTextAsset=function(t,e){return new B.XHRTextAsset(t,e)},b.prototype.createScriptAsset=function(t,e,i){return new U.XHRScriptAsset(t,e,i)},b.prototype.createPrimarySurface=function(t,e){return this._surfaceFactory.createPrimarySurface(t,e,this._rendererCandidates)},b.prototype.createSurface=function(t,e){return this._surfaceFactory.createBackSurface(t,e,this._rendererCandidates)},b.prototype.createGlyphFactory=function(t,e,i,r,o,n,s,a){return new H.GlyphFactory(t,e,i,r,o,n,s,a)},b.prototype.createVectorImageAsset=function(t,e,i,r,o){return new G.SVGImageAsset(t,e,i,r,o)},b.prototype.createVectorImageAssetFromString=function(t,e,i){return new r.GeneratedSVGImageAsset(t,e,i)},b.prototype.createBinaryAsset=function(t,e){return new i.BinaryAsset(t,e)},b.prototype._onAudioAssetDestroyed=function(t){this._audioManager.removeAudioAsset(t)},Pa.ResourceFactory=b),Pa;function b(t){this._audioPluginManager=t.audioPluginManager,this._audioManager=t.audioManager,this._platform=t.platform,this._surfaceFactory=new N.SurfaceFactory}function P(){this._disposer=new V.CanvasDisposer}function x(){this._idCounter=0,this._canvasMap={},this._registry="undefined"!=typeof FinalizationRegistry?new FinalizationRegistry(this._dispose.bind(this)):null}function Q(t,e,i,r,o,n,s,a,h,u,c,l){var d=e<y._environmentMinimumFontSize?e/y._environmentMinimumFontSize:1,p=Math.ceil((e+2*o)*d),f=Math.ceil((e+2*n)*d),p=new X.Context2DSurface(p,f),f=p.canvas,_=f.getContext("2d");if(_)return t=4294901760&t?String.fromCharCode((4294901760&t)>>>16,65535&t):String.fromCharCode(t),_.save(),_.font=l+" "+e+"px "+i,_.textAlign="left",_.textBaseline="alphabetic",_.lineJoin="bevel",1!=d&&_.scale(d,d),0<h&&(_.lineWidth=h,_.strokeStyle=u,_.strokeText(t,o,n+r)),c||(_.fillStyle=a,_.fillText(t,o,n+r)),l=_.measureText(t).width,_.restore(),{surface:p,advanceWidth:l,imageData:s?_.getImageData(0,0,f.width,f.height):void 0};throw new Error("createGlyphRenderedSurface(): could not initialize CanvasRenderingContext2D")}function tt(t){return-1!==z.indexOf(t)?t:'"'+t+'"'}function et(t,e,i,r,o,n,s,a,h,u){return{code:t,x:e,y:i,width:r,height:o,surface:h,offsetX:n,offsetY:s,advanceWidth:a,isSurfaceValid:u,_atlas:null}}function E(t,e,i,r,o,n,s,a){void 0===i&&(i=e),void 0===r&&(r="black"),void 0===o&&(o=0),void 0===n&&(n="black"),void 0===s&&(s=!1),void 0===a&&(a="normal"),this._glyphAreas=Object.create(null),this.fontFamily=t,this.fontSize=e,this.baselineHeight=i,this.fontColor=r,this.strokeWidth=o,this.strokeColor=n,this.strokeOnly=s,this.fontWeight=a,this._cssFontFamily="string"==typeof t?tt(t):t.map(tt).join(","),-1===this._cssFontFamily.indexOf("sans-serif")&&(this._cssFontFamily+=",sans-serif"),this._marginW=Math.ceil(.3*this.fontSize+this.strokeWidth/2),this._marginH=Math.ceil(.3*this.fontSize+this.strokeWidth/2),void 0===E._environmentMinimumFontSize&&(E._environmentMinimumFontSize=this.measureMinimumFontSize())}function O(t,e,i){void 0===i&&(i=[]);t=a.call(this,t,e)||this;return t.type="script",t.script="",t.exports=i,t}function k(t,e,i,r,o,n,s){t=u.call(this,t,e)||this;return t.type="video",t.width=i,t.height=r,t.realWidth=0,t.realHeight=0,t._system=o,t._loop=n,t._useRealSize=s,t._player=new K.HTMLVideoPlayer,t._surface=new $(i,r),t}function M(t,e,i){return c.call(this,t,e,i)||this}function L(t){this._loop=!!t,this.onPlay=new e.Trigger,this.onStop=new e.Trigger,this.played=this.onPlay,this.stopped=this.onStop,this.currentVideo=void 0,this.volume=1,this.isDummy=!0}function R(){return null!==_&&_.apply(this,arguments)||this}function C(t,e,i,r){t=g.call(this,t,e)||this;return t.type="image",t.width=i,t.height=r,t.data=void 0,t._surface=void 0,t}function I(t,e,i){t=T.call(this,t,e,0,0)||this;return t._svgString=i,t}function it(t){return/^[+-]?(?:(?:[0-9]+(?:\.[0-9]*)?)|(?:\.[0-9]+))(?:[eE][+-]?[0-9]+)?(?:px)?$/.test(t)}function F(t,e){t=S.call(this,t,e)||this;return t.type="binary",t.data=void 0,t}}function Gh(){var r,e,i,o,n,s,a,h,u;return Fh||(Fh=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.Platform=void 0,r=Qs(),ta||(ta=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.AudioManager=void 0,d.prototype.registerAudioAsset=function(t){-1===this.audioAssets.indexOf(t)&&this.audioAssets.push(t)},d.prototype.removeAudioAsset=function(t){t=this.audioAssets.indexOf(t);-1===t&&this.audioAssets.splice(t,1)},d.prototype.setMasterVolume=function(t){this._masterVolume=t;for(var e=0;e<this.audioAssets.length;e++)this.audioAssets[e]._lastPlayedPlayer&&this.audioAssets[e]._lastPlayedPlayer.notifyMasterVolumeChanged()},d.prototype.getMasterVolume=function(){return this._masterVolume},ra.AudioManager=d),e=ra,la||(la=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.ContainerController=void 0,h=pt(),u=pa(),l.prototype.initialize=function(t){this._rendererReq=t.rendererRequirement,this._loadView()},l.prototype.setRootView=function(t){t!==this.rootView&&(this.rootView&&(this.unloadView(),this._loadView()),this.rootView=t,this._appendToRootView(t))},l.prototype.resetView=function(t){this.unloadView(),this._rendererReq=t,this._loadView(),this._appendToRootView(this.rootView)},l.prototype.getRenderer=function(){if(this.surface)return this.surface.renderer();throw new Error("this container has no surface")},l.prototype.changeScale=function(t,e){this.useResizeForScaling?this.surface.changePhysicalScale(t,e):this.surface.changeVisualScale(t,e),this.inputHandlerLayer._inputHandler.setScale(t,e)},l.prototype.unloadView=function(){if(this.inputHandlerLayer.disablePointerEvent(),this.rootView)for(;this.rootView.firstChild;)this.rootView.removeChild(this.rootView.firstChild)},l.prototype.setTabIndex=function(t){this.inputHandlerLayer.setViewTabIndex(t)},l.prototype._loadView=function(){var t=this,e=this._rendererReq,i=e.primarySurfaceWidth,e=e.primarySurfaceHeight,r=(this.container=document.createDocumentFragment(),this.inputHandlerLayer?(this.inputHandlerLayer.setViewSize({width:i,height:e}),this.inputHandlerLayer.pointEventTrigger.removeAll(),this.surface&&!this.surface.destroyed()&&(this.inputHandlerLayer.view.removeChild(this.surface.canvas),this.surface.destroy(),this.observer.disconnect())):this.inputHandlerLayer=new u.InputHandlerLayer({width:i,height:e}),this.surface=this.resourceFactory.createPrimarySurface(i,e),this.surface.getHTMLElement());this.observer=new MutationObserver(function(){t.inputHandlerLayer.view.style.width=r.offsetWidth+"px",t.inputHandlerLayer.view.style.height=r.offsetHeight+"px"}),this.observer.observe(r,{attributeFilter:["width","height","style"]}),this.inputHandlerLayer.view.appendChild(r),this.container.appendChild(this.inputHandlerLayer.view)},l.prototype._appendToRootView=function(t){t.appendChild(this.container),this.inputHandlerLayer.enablePointerEvent(),this.inputHandlerLayer.pointEventTrigger.add(this.pointEventTrigger.fire,this.pointEventTrigger)},oa.ContainerController=l),i=oa,o=ya(),n=va(),Ta||(Ta=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.RafLooper=void 0,c.prototype.start=function(){function e(t){null!=i._timerId&&(i._timerId=requestAnimationFrame(e),i._fun(t-i._prev),i._prev=t)}var i=this;this._timerId=requestAnimationFrame(function(t){i._timerId=requestAnimationFrame(e),i._fun(0),i._prev=t})},c.prototype.stop=function(){null!=this._timerId&&cancelAnimationFrame(this._timerId),this._timerId=null,this._prev=0},ba.RafLooper=c),s=ba,a=jh(),t.prototype.setPlatformEventHandler=function(t){this.containerController&&(this.containerController.pointEventTrigger.removeAll({owner:this._platformEventHandler}),this.containerController.pointEventTrigger.add(t.onPointEvent,t)),this._platformEventHandler=t},t.prototype.loadGameConfiguration=function(t,i){var e=new r.XHRTextAsset("(game.json)",t);e._load({_onAssetLoad:function(t){i(null,JSON.parse(e.data))},_onAssetError:function(t,e){i(e,null)}})},t.prototype.getResourceFactory=function(){return this._resourceFactory},t.prototype.setRendererRequirement=function(t){var e;t?(this._rendererReq=t,this._resourceFactory._rendererCandidates=null!=(e=this._rendererReq.rendererCandidates)?e:[],this.containerController&&!this.containerController.inputHandlerLayer?(this.containerController.initialize({rendererRequirement:t,disablePreventDefault:this._disablePreventDefault}),this.containerController.setRootView(this.containerView),this._platformEventHandler&&this.containerController.pointEventTrigger.add(this._platformEventHandler.onPointEvent,this._platformEventHandler)):this.containerController.resetView(t)):this.containerController&&this.containerController.unloadView()},t.prototype.getPrimarySurface=function(){return this.containerController.surface},t.prototype.getOperationPluginViewInfo=function(){var t=this;return{type:"pdi-browser",view:this.containerController.inputHandlerLayer.view,getScale:function(){return t.containerController.inputHandlerLayer._inputHandler.getScale()}}},t.prototype.createLooper=function(t){return new s.RafLooper(t)},t.prototype.sendToExternal=function(t,e){},t.prototype.registerAudioPlugins=function(t){return this.audioPluginManager.tryInstallPlugin(t)},t.prototype.setScale=function(t,e){this.containerController.changeScale(t,e)},t.prototype.notifyViewMoved=function(){},t.prototype.setMasterVolume=function(t){this._audioManager.setMasterVolume(t)},t.prototype.getMasterVolume=function(){return this._audioManager.getMasterVolume()},t.prototype.setTabIndex=function(t){this.containerController.setTabIndex(t)},t.prototype.destroy=function(){this.setRendererRequirement(void 0),this.setMasterVolume(0)},Xs.Platform=t),Xs;function t(t){this.usingPointerEvents=!0,this.containerView=t.containerView,this.audioPluginManager=new o.AudioPluginManager,t.audioPlugins&&this.audioPluginManager.tryInstallPlugin(t.audioPlugins),this.audioPluginManager.tryInstallPlugin(n.AudioPluginRegistry.getRegisteredAudioPlugins()),this._audioManager=new e.AudioManager,this.amflow=t.amflow,this._platformEventHandler=null,this._resourceFactory=t.resourceFactory||new a.ResourceFactory({audioPluginManager:this.audioPluginManager,platform:this,audioManager:this._audioManager}),this.containerController=new i.ContainerController(this._resourceFactory),this._rendererReq=null,this._disablePreventDefault=!!t.disablePreventDefault}function c(t){this._timerId=null,this._fun=t,this._prev=0}function l(t){this.container=void 0,this.surface=void 0,this.inputHandlerLayer=void 0,this.rootView=void 0,this.observer=void 0,this.useResizeForScaling=!1,this.pointEventTrigger=new h.Trigger,this._rendererReq=void 0,this.resourceFactory=t}function d(){this.audioAssets=[],this._masterVolume=1}}var Uh,Bh={},u={};function Hh(){return Uh||(Uh=1,Object.defineProperty(u,"__esModule",{value:!0}),u.addExtname=u.resolveExtname=u.detectSupportedFormats=void 0,u.detectSupportedFormats=function(){var t;if(-1!==navigator.userAgent.indexOf("Edge/"))return["aac"];for(var e=document.createElement("audio"),i=["ogg","m4a","aac","mp4"],r={m4a:"audio/x-m4a"},o=[],n=0,s=i.length;n<s;n++){var a=i[n],h=null!=(t=r[a])?t:"audio/"+a;try{var u=e.canPlayType(h);"no"!==u&&""!==u&&o.push(a)}catch(t){}}return o},u.resolveExtname=function(t,e){if(t&&t.length)for(var i=0,r=e;i<r.length;i++){var o="."+r[i];if(-1!==t.indexOf(o))return o}return null},u.addExtname=function(t,e){var i=t.indexOf("?");return-1===i?t+e:t.substring(0,i)+e+t.substring(i,t.length)}),u}var Nh,Wh,Vh={},Xh={};function zh(){var r,t,a;return Nh||(Nh=1,t=Xh&&Xh.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Xh,"__esModule",{value:!0}),Xh.AudioAsset=void 0,a=ot().Asset,t(e,a),e.prototype.play=function(){var t=this._system.createPlayer();return t.play(this),this._lastPlayedPlayer=t},e.prototype.stop=function(){for(var t=this._system.findPlayers(this),e=0;e<t.length;++e)t[e].stop()},e.prototype.inUse=function(){return 0<this._system.findPlayers(this).length},e.prototype.destroy=function(){this._system&&this.stop(),this.data=void 0,this._system=void 0,this._lastPlayedPlayer=void 0,a.prototype.destroy.call(this)},Xh.AudioAsset=e),Xh;function e(t,e,i,r,o,n,s){t=a.call(this,t,e)||this;return t.type="audio",t.data=void 0,t.duration=i,t.loop=o,t.hint=n,t._system=r,t.offset=s,t.path=t._modifyPath(t.path),t}}var qh,Yh={},Kh={};function $h(){var e;return qh||(qh=1,Object.defineProperty(Kh,"__esModule",{value:!0}),Kh.AudioPlayer=void 0,e=pt(),t.prototype.play=function(t){this.currentAudio=t,this.onPlay.fire({player:this,audio:t})},t.prototype.stop=function(){var t=this.currentAudio;t&&(this.currentAudio=void 0,this.onStop.fire({player:this,audio:t}))},t.prototype.canHandleStopped=function(){return!0},t.prototype.changeVolume=function(t){this.volume=t},t.prototype._changeMuted=function(t){},t.prototype._notifyVolumeChanged=function(){this.changeVolume(this.volume)},Kh.AudioPlayer=t),Kh;function t(t){this.onPlay=new e.Trigger,this.onStop=new e.Trigger,this.played=this.onPlay,this.stopped=this.onStop,this.volume=1,this._muted=!1,this._system=t}}var Jh,Zh,Qh,tu={};function eu(){var t,a,i,r,n,s,o,h,u,e,c,l,d,p;return Qh||(Qh=1,Object.defineProperty(Bh,"__esModule",{value:!0}),Bh.HTMLAudioPlugin=void 0,t=Hh(),Wh||(Wh=1,e=Vh&&Vh.__extends||(u=function(t,e){return(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.HTMLAudioAsset=void 0,c=zh(),l=rt(),d=Hh(),p=c.AudioAsset,e(m,p),m.prototype._load=function(t){var i,e,r,o,n,s,a=this;null==this.path?(this.data=null,setTimeout(function(){return t._onAssetLoad(a)},0)):(i=this.createAudioElement(),e=function(t,e){i.autoplay=!1,i.preload="none",i.src=t,a._attachAll(i,e),i.preload="auto",o(i,e),i.load()},r={success:function(){a._detachAll(i,r),a.data=i,t._onAssetLoad(a),window.clearInterval(a._intervalId)},error:function(){a._detachAll(i,r),a.data=i,t._onAssetError(a,l.ExceptionFactory.createAssetLoadError("HTMLAudioAsset loading error")),window.clearInterval(a._intervalId)}},o=function(t,e){a._intervalCount=0,a._intervalId=window.setInterval(function(){4===t.readyState?e.success():(++a._intervalCount,600===a._intervalCount&&e.error())},100)},".aac"!==(0<=(n=this.path.indexOf("?"))?this.path.substring(0,n):this.path).slice(-4)||-1===m.supportedFormats.indexOf("mp4")?e(this.path,r):(s={success:r.success,error:function(){a._detachAll(i,s),window.clearInterval(a._intervalId),a.path=(0,d.addExtname)(a.originalPath,".mp4"),e(a.path,r)}},e(this.path,s)))},m.prototype.cloneElement=function(){return this.data?this.createAudioElement(this.data.src):null},m.prototype._assetPathFilter=function(t){return-1!==m.supportedFormats.indexOf("ogg")?(0,d.addExtname)(t,".ogg"):-1!==m.supportedFormats.indexOf("aac")?(0,d.addExtname)(t,".aac"):null},m.prototype._modifyPath=function(t){var e=(0,d.resolveExtname)(null==(e=this.hint)?void 0:e.extensions,m.supportedFormats);return e?(0,d.addExtname)(this.originalPath,e):t},m.prototype.createAudioElement=function(t){return new Audio(t)},m.prototype._attachAll=function(t,e){e.success&&t.addEventListener("canplaythrough",e.success,!1),e.error&&(t.addEventListener("stalled",e.error,!1),t.addEventListener("error",e.error,!1),t.addEventListener("abort",e.error,!1))},m.prototype._detachAll=function(t,e){e.success&&t.removeEventListener("canplaythrough",e.success,!1),e.error&&(t.removeEventListener("stalled",e.error,!1),t.removeEventListener("error",e.error,!1),t.removeEventListener("abort",e.error,!1))},Vh.HTMLAudioAsset=m),a=Vh,Zh||(Zh=1,c=Yh&&Yh.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.HTMLAudioPlayer=void 0,e=$h(),Jh||(Jh=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.setupChromeMEIWorkaround=void 0,o=0,h=[],tu.setupChromeMEIWorkaround=function(t){var e=null;function i(){switch(o){case 0:case 1:g()}o=2,clearTimeout(e)}switch(o){case 0:t.addEventListener("play",i,!0),e=window.setTimeout(function(){switch(t.removeEventListener("play",i),o){case 0:h.push(t),o=1,document.addEventListener("keydown",y,!0),document.addEventListener("mousedown",y,!0),document.addEventListener("touchend",y,!0);break;case 1:h.push(t);break;case 2:t.play()}},100);break;case 1:h.push(t)}}),n=tu,s=e.AudioPlayer,c(_,s),_.prototype.play=function(t){var e;if(this.currentAudio){if(t.id===this.currentAudio.id)return s.prototype.stop.call(this),this._audioInstance.currentTime=(null!=(e=t.offset)?e:0)/1e3,void s.prototype.play.call(this,t);this.stop()}var i,r,o=t.cloneElement();this._assetLoop=t.loop,o?(t.offset?(i=(null!=(e=t.offset)?e:0)/1e3,r=t.duration/1e3+i,o.currentTime=i,o.ontimeupdate=function(){r<=o.currentTime&&(t.loop?o.currentTime=i:o.pause())},o.onended=function(){t.loop&&(o.currentTime=i,o.play())}):o.loop=t.loop,(0,n.setupChromeMEIWorkaround)(o),o.volume=this._calculateVolume(),o.play().catch(function(t){}),o.addEventListener("ended",this._endedEventHandler,!1),o.addEventListener("play",this._onPlayEventHandler,!1),this._isWaitingPlayEvent=!0,this._audioInstance=o):this._dummyDurationWaitTimer=setTimeout(this._endedEventHandler,t.duration),s.prototype.play.call(this,t)},_.prototype.stop=function(){this.currentAudio&&(this._clearEndedEventHandler(),this._audioInstance)&&(this._isWaitingPlayEvent?this._isStopRequested=!0:(this._audioInstance.pause(),this._audioInstance=null)),s.prototype.stop.call(this)},_.prototype.changeVolume=function(t){s.prototype.changeVolume.call(this,t),this._audioInstance&&(this._audioInstance.volume=this._calculateVolume())},_.prototype._changeMuted=function(t){s.prototype._changeMuted.call(this,t),this._audioInstance&&(this._audioInstance.volume=this._calculateVolume())},_.prototype.notifyMasterVolumeChanged=function(){this._audioInstance&&(this._audioInstance.volume=this._calculateVolume())},_.prototype._onAudioEnded=function(){this._assetLoop||(this._clearEndedEventHandler(),s.prototype.stop.call(this))},_.prototype._clearEndedEventHandler=function(){this._audioInstance&&this._audioInstance.removeEventListener("ended",this._endedEventHandler,!1),null!=this._dummyDurationWaitTimer&&(clearTimeout(this._dummyDurationWaitTimer),this._dummyDurationWaitTimer=null)},_.prototype._onPlayEvent=function(){var t;this._isWaitingPlayEvent&&(this._isWaitingPlayEvent=!1,this._isStopRequested)&&(this._isStopRequested=!1,null!=(t=this._audioInstance)&&t.pause(),this._audioInstance=null)},_.prototype._calculateVolume=function(){return this._system._muted?0:this.volume*this._system.volume*this._manager.getMasterVolume()},Yh.HTMLAudioPlayer=_),i=Yh,f.isSupported=function(){var t=document.createElement("audio"),e=!1;try{e=void 0!==t.canPlayType}catch(t){}return e},Object.defineProperty(f.prototype,"supportedFormats",{get:function(){return this._supportedFormats},set:function(t){this._supportedFormats=t,a.HTMLAudioAsset.supportedFormats=t},enumerable:!1,configurable:!0}),f.prototype.createAsset=function(t,e,i,r,o,n,s){return new a.HTMLAudioAsset(t,e,i,r,o,n,s)},f.prototype.createPlayer=function(t,e){return new i.HTMLAudioPlayer(t,e)},Bh.HTMLAudioPlugin=f),Bh;function f(){this._supportedFormats=[],this.supportedFormats=(0,t.detectSupportedFormats)()}function _(t,e){var i=s.call(this,t)||this;return i._audioInstance=null,i._isWaitingPlayEvent=!1,i._isStopRequested=!1,i._assetLoop=!1,i._manager=e,i._endedEventHandler=function(){i._onAudioEnded()},i._onPlayEventHandler=function(){i._onPlayEvent()},i._dummyDurationWaitTimer=null,i}function y(){g(),document.removeEventListener("keydown",y),document.removeEventListener("mousedown",y),document.removeEventListener("touchend",y)}function g(){o=2,h.forEach(function(t){return t.play()}),h=[]}function m(){var t=null!==p&&p.apply(this,arguments)||this;return t._intervalId=-1,t._intervalCount=0,t}}var iu,ru,ou,nu={},su={},au={};var hu,uu,cu,lu,du,pu={},fu={};function _u(){if(uu)return hu;uu=1;var t,e,i=window.AudioContext||window.webkitAudioContext;return(e=t=t||{}).getAudioContext=function(){window.__akashic__||Object.defineProperty(window,"__akashic__",{value:{},enumerable:!1,configurable:!1,writable:!1});var t=window.__akashic__.audioContext;return t instanceof i||(t=window.__akashic__.audioContext=new i,e._workAroundSafari()),t},e.createGainNode=function(t){return t.createGain?t.createGain():t.createGainNode()},e.createBufferNode=function(t){t=t.createBufferSource();return t.start||(t.start=t.noteOn,t.stop=t.noteOff),t},e._workAroundSafari=function(){document.addEventListener("touchstart",function t(){document.removeEventListener("touchstart",t),e.getAudioContext().createBufferSource().start(0)},!0)},hu=t}var yu,gu,mu,vu,Tu,c,p,Au,wu,Su,f,bu,Pu,xu,Eu,Ou,ku,Mu,Lu,Ru,Cu,Iu,_,Fu,Du,ju,Gu,Uu,Bu,Hu,g,Nu={};function Wu(){var t,a,e,i,r,o,n,s,h,u,c,l,d,p,f;return gu||(gu=1,Object.defineProperty(pu,"__esModule",{value:!0}),pu.WebAudioPlugin=void 0,t=Hh(),cu||(cu=1,h=fu&&fu.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(fu,"__esModule",{value:!0}),fu.WebAudioAsset=void 0,u=zh(),c=rt(),l=Ks(),d=Hh(),p=_u(),f=u.AudioAsset,h(g,f),g.prototype._load=function(e){var i,r,o,n,s,t,a=this;null==this.path?(this.data=null,setTimeout(function(){return e._onAssetLoad(a)},0)):(i=function(t){a.data=t,e._onAssetLoad(a)},r=function(){e._onAssetError(a,c.ExceptionFactory.createAssetLoadError("WebAudioAsset unknown loading error"))},o=function(t){p.getAudioContext().decodeAudioData(t,i,r)},n=new l.XHRLoader,s=function(t,i,r){n.getArrayBuffer(t,function(t,e){t?r(t):i(e)})},".aac"!==(0<=(t=this.path.indexOf("?"))?this.path.substring(0,t):this.path).slice(-4)?s(this.path,o,r):s(this.path,o,function(t){var e=(0,d.addExtname)(a.originalPath,".mp4");s(e,function(t){a.path=e,o(t)},r)}))},g.prototype._assetPathFilter=function(t){return-1!==g.supportedFormats.indexOf("ogg")?(0,d.addExtname)(t,".ogg"):-1!==g.supportedFormats.indexOf("aac")?(0,d.addExtname)(t,".aac"):null},g.prototype._modifyPath=function(t){var e=(0,d.resolveExtname)(null==(e=this.hint)?void 0:e.extensions,g.supportedFormats);return e?(0,d.addExtname)(this.originalPath,e):t},g.supportedFormats=[],fu.WebAudioAsset=g),a=fu,e=(()=>{if(du)return lu;du=1;var t,r=_u();function o(){r.getAudioContext().resume(),document.removeEventListener("keydown",o),document.removeEventListener("mousedown",o),document.removeEventListener("touchend",o)}return(t||(t={})).setupChromeMEIWorkaround=function(){var t,e,i=r.getAudioContext();i&&"function"!=typeof i.resume||(e=r.createGainNode(i),(t=i.createOscillator()).type="sawtooth",t.frequency.value=440,t.connect(e),t.start(0),e=i.state,t.disconnect(),"running"!==e&&(document.addEventListener("keydown",o,!0),document.addEventListener("mousedown",o,!0),document.addEventListener("touchend",o,!0)))},lu=t})(),yu||(yu=1,u=Nu&&Nu.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.WebAudioPlayer=void 0,h=$h(),o=_u(),n=h.AudioPlayer,u(y,n),y.prototype.changeVolume=function(t){n.prototype.changeVolume.call(this,t),this._gainNode.gain.value=this._calculateVolume()},y.prototype._changeMuted=function(t){n.prototype._changeMuted.call(this,t),this._gainNode.gain.value=this._calculateVolume()},y.prototype.play=function(t){var e;this.currentAudio&&this.stop(),t.data?((e=o.createBufferNode(this._audioContext)).buffer=t.data,this._gainNode.gain.value=this._calculateVolume(),e.connect(this._gainNode),this._sourceNode=e,this._sourceNode.onended=this._endedEventHandler,t.loop?(e.loop=t.loop,this._sourceNode.start(0)):(e=(null!=(e=t.offset)?e:0)/1e3,0<t.duration?this._sourceNode.start(0,e,t.duration/1e3):this._sourceNode.start(0,e))):this._dummyDurationWaitTimer=setTimeout(this._endedEventHandler,t.duration),n.prototype.play.call(this,t)},y.prototype.stop=function(){this.currentAudio&&(this._clearEndedEventHandler(),this._sourceNode)&&this._sourceNode.stop(0),n.prototype.stop.call(this)},y.prototype.notifyMasterVolumeChanged=function(){this._gainNode.gain.value=this._calculateVolume()},y.prototype._onAudioEnded=function(){this._clearEndedEventHandler(),n.prototype.stop.call(this)},y.prototype._clearEndedEventHandler=function(){this._sourceNode&&(this._sourceNode.onended=null),null!=this._dummyDurationWaitTimer&&(clearTimeout(this._dummyDurationWaitTimer),this._dummyDurationWaitTimer=null)},y.prototype._calculateVolume=function(){return this._system._muted?0:this.volume*this._system.volume*this._manager.getMasterVolume()},Nu.WebAudioPlayer=y),i=Nu,_.isSupported=function(){return"AudioContext"in window||"webkitAudioContext"in window},Object.defineProperty(_.prototype,"supportedFormats",{get:function(){return this._supportedFormats},set:function(t){this._supportedFormats=t,a.WebAudioAsset.supportedFormats=t},enumerable:!1,configurable:!0}),_.prototype.createAsset=function(t,e,i,r,o,n,s){return new a.WebAudioAsset(t,e,i,r,o,n,s)},_.prototype.createPlayer=function(t,e){return new i.WebAudioPlayer(t,e)},pu.WebAudioPlugin=_),pu;function _(){this._supportedFormats=[],this.supportedFormats=(0,t.detectSupportedFormats)(),e.setupChromeMEIWorkaround()}function y(t,e){var i=n.call(this,t)||this;return i._audioContext=o.getAudioContext(),i._manager=e,i._gainNode=o.createGainNode(i._audioContext),i._gainNode.connect(i._audioContext.destination),i._dummyDurationWaitTimer=null,i._endedEventHandler=function(){i._onAudioEnded()},i}function g(){return null!==f&&f.apply(this,arguments)||this}}return(c={gameDriver:_?ws:(_=1,g||(g=1,Fu=(_=x).__createBinding||(Object.create?function(t,e,i,r){void 0===r&&(r=i);var o=Object.getOwnPropertyDescriptor(e,i);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,o)}:function(t,e,i,r){t[r=void 0===r?i:r]=e[i]}),g=x.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||Fu(e,t,i)},Object.defineProperty(_,"__esModule",{value:!0}),_.LoopRenderMode=_.LoopMode=_.GameDriver=_.Game=_.ExecutionMode=_.SimpleProfiler=_.ReplayAmflowProxy=_.MemoryAmflowClient=void 0,g(E(),_),p||(p=1,Object.defineProperty(e,"__esModule",{value:!0}),e._cloneDeep=e.MemoryAmflowClient=void 0,v.prototype.dump=function(){return{tickList:this._tickList,startPoints:this._startPoints}},v.prototype.open=function(t,e){var i=this;setTimeout(function(){e&&(t===i._playId?e(null):e(new Error("MemoryAmflowClient#open: unknown playId")))},0)},v.prototype.close=function(t){t&&setTimeout(function(){t(null)},0)},v.prototype.authenticate=function(t,e){setTimeout(function(){switch(t){case v.TOKEN_ACTIVE:e(null,{writeTick:!0,readTick:!0,subscribeTick:!1,sendEvent:!1,subscribeEvent:!0,maxEventPriority:2});break;case v.TOKEN_PASSIVE:e(null,{writeTick:!1,readTick:!0,subscribeTick:!0,sendEvent:!0,subscribeEvent:!1,maxEventPriority:2});break;default:e(null,{writeTick:!0,readTick:!0,subscribeTick:!0,sendEvent:!0,subscribeEvent:!0,maxEventPriority:2})}},0)},v.prototype.sendTick=function(e){if(e=zu(e),this._tickList){if(this._tickList[0]<=e[0]&&e[0]<=this._tickList[1])throw new Error("illegal age tick");this._tickList[1]=e[0]}else this._tickList=[e[0],e[0],[]];var t=e[1];(t||e[2])&&(t&&(e[1]=t.filter(function(t){return!(8&t[1])})),this._tickList[2].push(e)),this._tickHandlers.forEach(function(t){return t(e)})},v.prototype.onTick=function(t){this._tickHandlers.push(t)},v.prototype.offTick=function(e){this._tickHandlers=this._tickHandlers.filter(function(t){return t!==e})},v.prototype.sendEvent=function(e){e=zu(e),0!==this._eventHandlers.length?this._eventHandlers.forEach(function(t){return t(e)}):this._events.push(e)},v.prototype.onEvent=function(t){var i=this;this._eventHandlers.push(t),0<this._events.length&&(this._events.forEach(function(e){i._eventHandlers.forEach(function(t){return t(e)})}),this._events=[])},v.prototype.offEvent=function(e){this._eventHandlers=this._eventHandlers.filter(function(t){return t!==e})},v.prototype.getTickList=function(t,e,i){var r,o,n,s,a="number"==typeof t?(r={begin:t,end:e},i):(r=t,e);this._tickList?(o=Math.max(r.begin,this._tickList[0]),n=Math.min(r.end,this._tickList[1]),i=this._tickList[2].filter(function(t){t=t[0];return o<=t&&t<=n}),s=[o,n,i],setTimeout(function(){return a(null,s)},0)):a&&setTimeout(function(){return a(null)},0)},v.prototype.putStartPoint=function(t,e){var i=this;setTimeout(function(){i._startPoints.push(t),e(null)},0)},v.prototype.getStartPoint=function(s,a){var h=this;setTimeout(function(){if(h._startPoints&&0!==h._startPoints.length){var t=0;if(null!=s.frame)for(var e=h._startPoints[0].frame,i=1;i<h._startPoints.length;++i){var r=h._startPoints[i].frame;r<=s.frame&&e<r&&(e=r,t=i)}else for(var o=h._startPoints[0].timestamp,i=1;i<h._startPoints.length;++i){var n=h._startPoints[i].timestamp;n<=s.timestamp&&o<n&&(o=n,t=i)}a(null,h._startPoints[t])}else a(new Error("no startpoint"))},0)},v.prototype.putStorageData=function(t,e,i,r){var o=this;setTimeout(function(){try{o._putStorageDataSyncFunc(t,e,i),r(null)}catch(t){r(t)}},0)},v.prototype.getStorageData=function(e,i){var r=this;setTimeout(function(){try{var t=r._getStorageDataSyncFunc(e);i(null,t)}catch(t){i(t)}},0)},v.prototype.dropAfter=function(e){var i,t;this._tickList&&(i=this._tickList[0],t=this._tickList[1],e<=i?(this._tickList=null,this._startPoints=[]):e<=t&&(this._tickList[1]=e-1,this._tickList[2]=this._tickList[2].filter(function(t){t=t[0];return i<=t&&t<=e-1}),this._startPoints=this._startPoints.filter(function(t){return t.frame<e})))},v.TOKEN_ACTIVE="mamfc-token:active",v.TOKEN_PASSIVE="mamfc-token:passive",e.MemoryAmflowClient=v,e._cloneDeep=zu),Du=e,Object.defineProperty(_,"MemoryAmflowClient",{enumerable:!0,get:function(){return Du.MemoryAmflowClient}}),c||(c=1,Object.defineProperty(C,"__esModule",{value:!0}),C.ReplayAmflowProxy=void 0,T.prototype.dropAfter=function(e){var t,i,r;this._tickList&&(t=this._tickList[0],i=this._tickList[1],r=this._tickList[2]||[],e<=t?(this._tickList=null,this._startPoints=[]):e<=i&&(this._tickList[1]=e-1,this._tickList[2]=this._sliceTicks(r,i,e-1),this._startPoints=this._startPoints.filter(function(t){return t.frame<e})))},T.prototype.open=function(t,e){this._amflow.open(t,e)},T.prototype.close=function(t){this._amflow.close(t)},T.prototype.authenticate=function(t,e){this._amflow.authenticate(t,e)},T.prototype.sendTick=function(t){this._amflow.sendTick(t)},T.prototype.onTick=function(t){this._amflow.onTick(t)},T.prototype.offTick=function(t){this._amflow.offTick(t)},T.prototype.sendEvent=function(t){this._amflow.sendEvent(t)},T.prototype.onEvent=function(t){this._amflow.onEvent(t)},T.prototype.offEvent=function(t){this._amflow.offEvent(t)},T.prototype.getTickList=function(t,e,i){var r,o,n,s,a,h,u,c,l=this,d="number"==typeof t?(r={begin:t,end:e},i):(r=t,e);this._tickList?(o=r.begin,n=r.end,s=this._tickList[0],a=this._tickList[1],h=this._tickList[2]||[],c=s<=n&&n<=a,(u=s<=o&&o<=a)&&c?setTimeout(function(){d(null,[o,n,l._sliceTicks(h,o,n)])},0):this._amflow.getTickList({begin:o,end:n},function(t,e){var i,r;t?d(t):e?u||c?u?(r=l._sliceTicks(h,o,n).concat(e[2]||[]),d(null,[o,e[1],r])):(r=(e[2]||[]).concat(l._sliceTicks(h,o,n)),d(null,[e[0],n,r])):n<s||a<o?d(null,e):(r=(r=e[2])?(t=l._sliceTicks(r,o,s-1),i=l._sliceTicks(r,a+1,n),t.concat(h,i)):h,d(null,[o,n,r])):d(null,u||c?u?[o,a,l._sliceTicks(h,o,n)]:[s,n,l._sliceTicks(h,o,n)]:n<s||a<o?e:[s,a,l._sliceTicks(h,o,n)])})):this._amflow.getTickList(r,d)},T.prototype.putStartPoint=function(t,e){this._amflow.putStartPoint(t,e)},T.prototype.getStartPoint=function(t,i){var r=this,o=0;if(0<this._startPoints.length)if(null!=t.frame)for(var e=this._startPoints[0].frame,n=1;n<this._startPoints.length;++n){var s=this._startPoints[n].frame;s<=t.frame&&e<s&&(e=s,o=n)}else for(var a=this._startPoints[0].timestamp,n=1;n<this._startPoints.length;++n){var h=this._startPoints[n].timestamp;h<=t.timestamp&&a<h&&(a=h,o=n)}var u=this._tickList?this._tickList[1]:-1;"number"==typeof t.frame&&t.frame>u?this._amflow.getStartPoint(t,function(t,e){t?i(t):e&&u<e.frame?i(null,e):i(null,r._startPoints[o])}):setTimeout(function(){i(null,r._startPoints[o])},0)},T.prototype.putStorageData=function(t,e,i,r){this._amflow.putStorageData(t,e,i,r)},T.prototype.getStorageData=function(t,e){this._amflow.getStorageData(t,e)},T.prototype._sliceTicks=function(t,e,i){return t.filter(function(t){t=t[0];return e<=t&&t<=i})},C.ReplayAmflowProxy=T),ju=C,Object.defineProperty(_,"ReplayAmflowProxy",{enumerable:!0,get:function(){return ju.ReplayAmflowProxy}}),Hn||(Hn=1,Object.defineProperty(I,"__esModule",{value:!0}),I.SimpleProfiler=void 0,Gu=S(),b.prototype.time=function(t){this._beforeTimes[t]=this._getCurrentTime()},b.prototype.timeEnd=function(t){var e=this._getCurrentTime(),i=null!=this._beforeTimes[t]?e-this._beforeTimes[t]:0;this._values[t].push({time:e,value:i})},b.prototype.flush=function(){var t=this._getCurrentTime();if(0===this._beforeFlushTime&&(this._beforeFlushTime=t),this._beforeFlushTime+this._interval<t&&(this._calculateProfilerValueTrigger.fire(this.getProfilerValue(this._interval)),this._beforeFlushTime=t),this._values[1].length>this._limit)for(var e in this._values)this._values.hasOwnProperty(e)&&(this._values[e]=this._values[e].slice(-b.BACKUP_MARGIN))},b.prototype.setValue=function(t,e){this._values[t].push({time:this._getCurrentTime(),value:e})},b.prototype.getProfilerValue=function(t){var e=this._calculateProfilerValue(1,t);return{skippedFrameCount:this._calculateProfilerValue(0,t),rawFrameInterval:e,framePerSecond:{ave:1e3/e.ave,max:1e3/e.min,min:1e3/e.max},frameTime:this._calculateProfilerValue(2,t),renderingTime:this._calculateProfilerValue(3,t)}},b.prototype._reset=function(){this._startTime=this._getCurrentTime(),this._beforeFlushTime=0,this._beforeTimes=[],this._beforeTimes[1]=0,this._beforeTimes[2]=0,this._beforeTimes[3]=0,this._beforeTimes[0]=0,this._values=[],this._values[1]=[],this._values[2]=[],this._values[3]=[],this._values[0]=[]},b.prototype._calculateProfilerValue=function(t,e){for(var i=this._getCurrentTime()-e,r=0,o=0,n=0,s=Number.MAX_VALUE,a=this._values[t].length-1;0<=a&&!(0<o&&this._values[t][a].time<i);--a){var h=this._values[t][a].value;n<h&&(n=h),h<s&&(s=h),r+=h,++o}return{ave:r/o,max:n,min:s}},b.prototype._getCurrentTime=function(){return+new Date},b.DEFAULT_INTERVAL=1e3,b.DEFAULT_LIMIT=1e3,b.BACKUP_MARGIN=100,I.SimpleProfiler=b),Uu=I,Object.defineProperty(_,"SimpleProfiler",{enumerable:!0,get:function(){return Uu.SimpleProfiler}}),g=Xn(),_.ExecutionMode=g.default,Bu=Yn(),Object.defineProperty(_,"Game",{enumerable:!0,get:function(){return Bu.Game}}),Hu=Os(),Object.defineProperty(_,"GameDriver",{enumerable:!0,get:function(){return Hu.GameDriver}}),g=ds(),_.LoopMode=g.default,g=_s(),_.LoopRenderMode=g.default),ws=x),akashicEngine:(()=>{if(Gs)return js;Gs=1;var r,t,i,o,n,e,s,a,h,u=S();return u.AudioAsset=(Ms||(Ms=1,a=Ls&&Ls.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.AudioAsset=void 0,h=Cs().Asset,a(p,h),p.prototype.play=function(){var t=this._system.createPlayer();return t.play(this),this._lastPlayedPlayer=t},p.prototype.stop=function(){for(var t=this._system.findPlayers(this),e=0;e<t.length;++e)t[e].stop()},p.prototype.inUse=function(){return 0<this._system.findPlayers(this).length},p.prototype.destroy=function(){this._system&&this.stop(),this.data=void 0,this._system=void 0,this._lastPlayedPlayer=void 0,h.prototype.destroy.call(this)},Ls.AudioAsset=p),Ls.AudioAsset),u.AudioPlayer=(Is||(Is=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.AudioPlayer=void 0,e=pt(),d.prototype.play=function(t){this.currentAudio=t,this.onPlay.fire({player:this,audio:t})},d.prototype.stop=function(){var t=this.currentAudio;t&&(this.currentAudio=void 0,this.onStop.fire({player:this,audio:t}))},d.prototype.canHandleStopped=function(){return!0},d.prototype.changeVolume=function(t){this.volume=t},d.prototype._changeMuted=function(t){this._muted=t},d.prototype._notifyVolumeChanged=function(){this.changeVolume(this.volume)},Us.AudioPlayer=d),Us.AudioPlayer),u.ScriptAsset=(Fs||(Fs=1,a=Bs&&Bs.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.ScriptAsset=void 0,n=Cs().Asset,a(l,n),l.prototype.destroy=function(){this.script=void 0,n.prototype.destroy.call(this)},Bs.ScriptAsset=l),Bs.ScriptAsset),u.TextAsset=(Ds||(Ds=1,t=Hs&&Hs.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.TextAsset=void 0,i=Cs().Asset,t(c,i),c.prototype.destroy=function(){this.data=void 0,i.prototype.destroy.call(this)},Hs.TextAsset=c),Hs.TextAsset),js=u;function c(t,e){t=i.call(this,t,e)||this;return t.type="text",t.data=void 0,t}function l(t,e,i){void 0===i&&(i=[]);t=n.call(this,t,e)||this;return t.type="script",t.exports=i,t.script=void 0,t}function d(t){this.onPlay=new e.Trigger,this.onStop=new e.Trigger,this.played=this.onPlay,this.stopped=this.onStop,this.currentAudio=void 0,this.volume=t.volume,this._muted=t._muted,this._system=t}function p(t,e,i,r,o,n,s){t=h.call(this,t,e)||this;return t.type="audio",t.duration=i,t.loop=o,t.hint=n,t._system=r,t.data=void 0,t.offset=s,t}})(),pdiBrowser:"undefined"!=typeof window?Tu?vu:(Tu=1,mu||(mu=1,p=Vs,Object.defineProperty(p,"__esModule",{value:!0}),p.ProxyAudioPlugin=p.WebAudioPlugin=p.HTMLAudioPlugin=p.AudioPluginManager=p.AudioPluginRegistry=p.ResourceFactory=p.Platform=void 0,Ou=Gh(),Object.defineProperty(p,"Platform",{enumerable:!0,get:function(){return Ou.Platform}}),ku=va(),Object.defineProperty(p,"AudioPluginRegistry",{enumerable:!0,get:function(){return ku.AudioPluginRegistry}}),Mu=ya(),Object.defineProperty(p,"AudioPluginManager",{enumerable:!0,get:function(){return Mu.AudioPluginManager}}),Lu=eu(),Object.defineProperty(p,"HTMLAudioPlugin",{enumerable:!0,get:function(){return Lu.HTMLAudioPlugin}}),ou||(ou=1,Object.defineProperty(nu,"__esModule",{value:!0}),nu.ProxyAudioPlugin=void 0,iu||(iu=1,e=su&&su.__extends||(bu=function(t,e){return(bu=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}bu(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(su,"__esModule",{value:!0}),su.ProxyAudioAsset=void 0,Pu=zh(),xu=rt(),Eu=Pu.AudioAsset,e(Xu,Eu),Xu.prototype.destroy=function(){this._handlerSet.unloadAudioAsset(this.id),Eu.prototype.destroy.call(this)},Xu.prototype._load=function(e){var i=this;this._handlerSet.loadAudioAsset({id:this.id,assetPath:this.path,duration:this.duration,loop:this.loop,hint:this.hint,offset:this.offset},function(t){t?e._onAssetError(i,xu.ExceptionFactory.createAssetLoadError(t)):e._onAssetLoad(i)})},Xu.prototype._assetPathFilter=function(t){return t},Xu.prototype._modifyPath=function(t){return t},su.ProxyAudioAsset=Xu),Au=su,ru||(ru=1,Pu=au&&au.__extends||(Su=function(t,e){return(Su=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}Su(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Object.defineProperty(au,"__esModule",{value:!0}),au.ProxyAudioPlayer=void 0,f=$h().AudioPlayer,Pu(m,f),m.prototype.changeVolume=function(t){f.prototype.changeVolume.call(this,t),this._notifyVolumeToHandler()},m.prototype._changeMuted=function(t){f.prototype._changeMuted.call(this,t),this._notifyVolumeToHandler()},m.prototype.play=function(t){null!=this._audioPlayerId&&this.stop(),this._audioPlayerId="ap".concat(m._audioPlayerIdCounter++),this._handlerSet.createAudioPlayer({assetId:t.id,audioPlayerId:this._audioPlayerId,isPlaying:!0,volume:this._calculateVolume(),playbackRate:1}),f.prototype.play.call(this,t)},m.prototype.stop=function(){null!=this._audioPlayerId&&(this._handlerSet.stopAudioPlayer(this._audioPlayerId),this._handlerSet.destroyAudioPlayer(this._audioPlayerId),this._audioPlayerId=null),f.prototype.stop.call(this)},m.prototype.notifyMasterVolumeChanged=function(){this._notifyVolumeToHandler()},m.prototype._notifyVolumeToHandler=function(){null!=this._audioPlayerId&&this._handlerSet.changeAudioVolume(this._audioPlayerId,this._calculateVolume())},m.prototype._calculateVolume=function(){return this._system._muted?0:this.volume*this._system.volume*this._manager.getMasterVolume()},m._audioPlayerIdCounter=0,au.ProxyAudioPlayer=m),wu=au,Vu.isSupported=function(){return!0},Vu.prototype.createAsset=function(t,e,i,r,o,n,s){return new Au.ProxyAudioAsset(this._handlerSet,t,e,i,r,o,n,s)},Vu.prototype.createPlayer=function(t,e){return new wu.ProxyAudioPlayer(this._handlerSet,t,e)},nu.ProxyAudioPlugin=Vu),Ru=nu,Object.defineProperty(p,"ProxyAudioPlugin",{enumerable:!0,get:function(){return Ru.ProxyAudioPlugin}}),Cu=Wu(),Object.defineProperty(p,"WebAudioPlugin",{enumerable:!0,get:function(){return Cu.WebAudioPlugin}}),Iu=jh(),Object.defineProperty(p,"ResourceFactory",{enumerable:!0,get:function(){return Iu.ResourceFactory}})),vu=Vs):null})&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c;function Vu(t){this.supportedFormats=[],this._handlerSet=t}function m(t,e,i){e=f.call(this,e)||this;return e._audioPlayerId=null,e._handlerSet=t,e._manager=i,e}function Xu(t,e,i,r,o,n,s,a){e=Eu.call(this,e,i,r,o,n,s,a)||this;return e._handlerSet=t,e}function v(t){this._tickHandlers=[],this._eventHandlers=[],this._events=[],this._tickList=null,this._playId=t.playId,this._putStorageDataSyncFunc=t.putStorageDataSyncFunc||function(){throw new Error("Implementation not given")},this._getStorageDataSyncFunc=t.getStorageDataSyncFunc||function(){throw new Error("Implementation not given")},t.startPoints?(t.tickList&&(this._tickList=t.tickList),this._startPoints=t.startPoints):this._startPoints=[]}function zu(i){return i&&"object"===dt(i)?Array.isArray(i)?i.map(zu):Object.keys(i).reduce(function(t,e){return t[e]=zu(i[e]),t},{}):i}function T(t){this._amflow=t.amflow,this._tickList=t.tickList,this._startPoints=t.startPoints}function b(t){var e;this._startTime=0,this._beforeFlushTime=0,this._beforeTimes=[],this._values=[],this._calculateProfilerValueTrigger=new Gu.Trigger,this._interval=null!=(e=t.interval)?e:b.DEFAULT_INTERVAL,this._limit=null!=t.limit&&t.limit>=b.DEFAULT_LIMIT?t.limit:b.DEFAULT_LIMIT,t.getValueHandler&&this._calculateProfilerValueTrigger.add(t.getValueHandler,t.getValueHandlerOwner),this._reset()}});

	window.engineFiles=engineFilesV3_10_1,window.g=engineFiles.akashicEngine,window.require=function(i){return"@akashic/akashic-engine"!==i?this.call(this,i):engineFiles.akashicEngine};

</script>

<script>
if (! ("optionProps" in window)) {
	window.optionProps = {};
}
window.optionProps.magnify = true

window.g = require("@akashic/akashic-engine");
</script>
<script>
if (! ("gLocalAssetContainer" in window)) {
	window.gLocalAssetContainer = {};
}

if (! ("__akashic__" in window)) {
	window.__akashic__ = {};
}



		window.gLocalAssetContainer["game.json"] = "{%0A%09%22width%22: 1280,%0A%09%22height%22: 720,%0A%09%22fps%22: 30,%0A%09%22main%22: %22./script/main.js%22,%0A%09%22assets%22: {%0A%09%09%22main%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/0d75bfc2cf044a49e7a9.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/main.js%22%0A%09%09},%0A%09%09%22parameterObject%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/f69efd9b51d31d911da0.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/parameterObject.js%22%0A%09%09},%0A%09%09%22error_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/710cd81f9f159c2e0899.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/error_event.js%22%0A%09%09},%0A%09%09%22join_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/5d1e21d0ca871ade7398.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/join_event.js%22%0A%09%09},%0A%09%09%22leave_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/c02718cc6fc5edee80a7.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/leave_event.js%22%0A%09%09},%0A%09%09%22player_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/e8ebbe9ae15856ee7aec.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/player_model.js%22%0A%09%09},%0A%09%09%22title_scene%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/fa768d05ce158dbc927d.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/scenes/title_scene.js%22%0A%09%09},%0A%09%09%22error%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/70082124b0d2aca149ac.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/utils/error.js%22%0A%09%09},%0A%09%09%22button%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/43a5fba7bda33b3f9327.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/button.js%22%0A%09%09},%0A%09%09%22player_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/6e204266789e2fefbdac.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/player_view.js%22%0A%09%09},%0A%09%09%22title_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/02779afeecb7fe8a7ff2.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/title_view.js%22%0A%09%09},%0A%09%09%22start_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/040fbcb3d2c4df28ba02.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/start_event.js%22%0A%09%09},%0A%09%09%22game_scene%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/37bb44f3ddeec42ba58c.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/scenes/game_scene.js%22%0A%09%09},%0A%09%09%22rail_builder_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/16bb9b0d80cbf252555d.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/rail_builder_model.js%22%0A%09%09},%0A%09%09%22railway_builder_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/511882139abcd437c371.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/railway_builder_view.js%22%0A%09%09},%0A%09%09%22timer%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/053795091a92fbdd026f.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/timer.js%22%0A%09%09},%0A%09%09%22station_builder_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/99e5e43c4a84413d002b.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/station_builder_model.js%22%0A%09%09},%0A%09%09%22effect%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/406b7e77a1ce7a2a9e23.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/effect.js%22%0A%09%09},%0A%09%09%22station_builder_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/af250037b436916967b1.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/station_builder_view.js%22%0A%09%09},%0A%09%09%22train_deployer_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/fc2f7504b791aca2502d.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/train_deployer_model.js%22%0A%09%09},%0A%09%09%22train_deployer_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/bebf54bddbdfb538b6db.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/train_deployer_view.js%22%0A%09%09},%0A%09%09%22dialogue%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/84509afa51262b6be5da.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/dialogue.js%22%0A%09%09},%0A%09%09%22number_selector%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/be249c5904f31d764127.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/number_selector.js%22%0A%09%09},%0A%09%09%22railway_built_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/3ef3ed91611d9ce8f35b.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/railway_built_event.js%22%0A%09%09},%0A%09%09%22gamemap_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/4b57624bd0134286f166.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/gamemap_handler.js%22%0A%09%09},%0A%09%09%22gamemap_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/080440a6ac52a27c2160.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/gamemap_model.js%22%0A%09%09},%0A%09%09%22gamemap_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/c40be710e3c53c829b89.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/gamemap_view.js%22%0A%09%09},%0A%09%09%22line_task_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/c805f1bd31629fb8e4b8.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/line_task_model.js%22%0A%09%09},%0A%09%09%22train_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/406acbd14f2b7a774fe7.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/train_model.js%22%0A%09%09},%0A%09%09%22train_task_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/1146b493b46155a91d4b.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/train_task_model.js%22%0A%09%09},%0A%09%09%22rail_line_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/dd159f6316bd8321b22f.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/rail_line_model.js%22%0A%09%09},%0A%09%09%22territory_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/db3b8913a0b938db22b8.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/territory_view.js%22%0A%09%09},%0A%09%09%22company_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/001e7d05ef6f43da0647.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/company_model.js%22%0A%09%09},%0A%09%09%22human_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/62a7742e697e533c0d38.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/human_model.js%22%0A%09%09},%0A%09%09%22route_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/aad5d8220171949d9c1b.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/route_model.js%22%0A%09%09},%0A%09%09%22residence_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/fc24e9c0f32ee5cae09e.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/residence_model.js%22%0A%09%09},%0A%09%09%22path_finder_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/2e546ce9eea0b1194a9c.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/path_finder_model.js%22%0A%09%09},%0A%09%09%22station_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/bbe2787cdeb571c351f7.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/station_model.js%22%0A%09%09},%0A%09%09%22transport_finder_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/5c294295f856815bb67b.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/transport_finder_model.js%22%0A%09%09},%0A%09%09%22route_finder_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/3f35191531acb08debf8.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/route_finder_model.js%22%0A%09%09},%0A%09%09%22commons_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/5cddb241227b8aee242d.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/commons_view.js%22%0A%09%09},%0A%09%09%22game_branch_scene%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/267fc77b45c5498f04ca.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/scenes/game_branch_scene.js%22%0A%09%09},%0A%09%09%22game_init_scene%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/e6380482d4dd450ab88e.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/scenes/game_init_scene.js%22%0A%09%09},%0A%09%09%22game_tooltip_scene%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/f37bd95eb2360883425f.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/scenes/game_tooltip_scene.js%22%0A%09%09},%0A%09%09%22scorer_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/1440ff11db568f22bca2.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/scorer_handler.js%22%0A%09%09},%0A%09%09%22scorer_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/32e19591bab1394addad.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/scorer_model.js%22%0A%09%09},%0A%09%09%22game_header_scene%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/f9556c68e929fa615d17.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/scenes/game_header_scene.js%22%0A%09%09},%0A%09%09%22scorer_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/a5edb6b684f50be0b7ec.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/scorer_view.js%22%0A%09%09},%0A%09%09%22slider_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/f290e52ba2331ffc1491.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/slider_view.js%22%0A%09%09},%0A%09%09%22station_upgrade_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/5fb569f1fe0ada7115cb.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/station_upgrade_event.js%22%0A%09%09},%0A%09%09%22station_upgrader_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/33d3c9a4e2c43a10511c.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/station_upgrader_view.js%22%0A%09%09},%0A%09%09%22station_booster_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/f8f85350437bbf8348ab.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/station_booster_event.js%22%0A%09%09},%0A%09%09%22station_booster_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/344039f6b850302e6ede.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/station_booster_view.js%22%0A%09%09},%0A%09%09%22station_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/519540a9c86811caf036.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/station_view.js%22%0A%09%09},%0A%09%09%22tooltips_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/a6ef7c93fadf53e0898f.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/tooltips_view.js%22%0A%09%09},%0A%09%09%22parameters%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/e31c6cb08a38ea00a2f0.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/parameters.js%22%0A%09%09},%0A%09%09%22game_single_scene%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/3ac6d617aadc8a51e057.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/scenes/game_single_scene.js%22%0A%09%09},%0A%09%09%22reset_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/049d752a800c22b3484b.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/reset_event.js%22%0A%09%09},%0A%09%09%22path_finding_progress%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/7693cbb61fb2ad074ece.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/path_finding_progress.js%22%0A%09%09},%0A%09%09%22trriger_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/7b333253399ba95ff5ce.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/trriger_model.js%22%0A%09%09},%0A%09%09%22human_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/34859eafb97490cfbe97.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/human_view.js%22%0A%09%09},%0A%09%09%22train_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/970164808bd3f81e19b4.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/train_view.js%22%0A%09%09},%0A%09%09%22station_booster_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/ef46d314c26fd5cee4d6.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/station_booster_handler.js%22%0A%09%09},%0A%09%09%22station_upgrade_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/fc889ad4cf40b8ad4507.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/station_upgrade_handler.js%22%0A%09%09},%0A%09%09%22railway_wizard_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/7e2d9b03ba15cf30f99e.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/railway_wizard_handler.js%22%0A%09%09},%0A%09%09%22residence_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/ad1a2f5d8a8fe50ac72f.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/residence_view.js%22%0A%09%09},%0A%09%09%22color_utils%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/976df3a997c2aa817d89.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/color_utils.js%22%0A%09%09},%0A%09%09%22commons_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/3055a087b3ad99b3a736.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/commons_model.js%22%0A%09%09},%0A%09%09%22ticker_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/24ff3a11d6d034e5c8fa.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/ticker_handler.js%22%0A%09%09},%0A%09%09%22ending_scene%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/c9d6c14530e036709b21.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/scenes/ending_scene.js%22%0A%09%09},%0A%09%09%22ticker_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/aafd28897297b3debc1d.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/ticker_view.js%22%0A%09%09},%0A%09%09%22ranking_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/e246ec5652ee902cf76a.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/ranking_view.js%22%0A%09%09},%0A%09%09%22penalty_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/b79e9a149904a6c389f7.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/penalty_handler.js%22%0A%09%09},%0A%09%09%22penalty_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/cb1fcec06792a4d3269e.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/penalty_model.js%22%0A%09%09},%0A%09%09%22penalty_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/bc2e3ef2e8164078fcb8.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/penalty_view.js%22%0A%09%09},%0A%09%09%22station_inserter_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/d294827f25400dbc54c0.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/station_inserter_event.js%22%0A%09%09},%0A%09%09%22station_inserter_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/88fabbe5b40c9c985f12.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/station_inserter_handler.js%22%0A%09%09},%0A%09%09%22station_inserter_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/b9ae811c4cb52bc60e71.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/station_inserter_model.js%22%0A%09%09},%0A%09%09%22station_inserter_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/9651ed2253e8e7d8ca94.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/station_inserter_view.js%22%0A%09%09},%0A%09%09%22train_inserter_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/1696305a7c12c655ea13.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/train_inserter_event.js%22%0A%09%09},%0A%09%09%22train_inserter_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/f540cb4cda5ddf16948d.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/train_inserter_model.js%22%0A%09%09},%0A%09%09%22train_inserter_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/28655586fdb96cf1200f.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/train_inserter_view.js%22%0A%09%09},%0A%09%09%22train_inserter_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/c7b2c2674902bf39be4a.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/train_inserter_handler.js%22%0A%09%09},%0A%09%09%22nc198393%22: {%0A%09%09%09%22type%22: %22audio%22,%0A%09%09%09%22path%22: %22files/582dcefc393fe5bdda6d%22,%0A%09%09%09%22systemId%22: %22music%22,%0A%09%09%09%22duration%22: 182858,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22audio/nc198393%22%0A%09%09},%0A%09%09%22effect_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 3600,%0A%09%09%09%22height%22: 480,%0A%09%09%09%22path%22: %22files/cd5dca81c92183963a69.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/effect_img.png%22%0A%09%09},%0A%09%09%22human_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 175,%0A%09%09%09%22height%22: 175,%0A%09%09%09%22path%22: %22files/9f5d1cbc5271bc4f6221.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/human_img.png%22%0A%09%09},%0A%09%09%22residence_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 35,%0A%09%09%09%22height%22: 175,%0A%09%09%09%22path%22: %22files/0acb7dc8d31d5a51acc6.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/residence_img.png%22%0A%09%09},%0A%09%09%22station_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 360,%0A%09%09%09%22height%22: 260,%0A%09%09%09%22path%22: %22files/560fbbd5d855f1a1f503.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/station_img.png%22%0A%09%09},%0A%09%09%22train_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 96,%0A%09%09%09%22height%22: 192,%0A%09%09%09%22path%22: %22files/4e695e52485ee6f4764c.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/train_img.png%22%0A%09%09},%0A%09%09%22cursor_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 1770,%0A%09%09%09%22height%22: 472,%0A%09%09%09%22path%22: %22files/ddf9aefe33037af83716.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/cursor_img.png%22%0A%09%09},%0A%09%09%22territory_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 600,%0A%09%09%09%22height%22: 1400,%0A%09%09%09%22path%22: %22files/2c55fba8a5bab090d148.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/territory_img.png%22%0A%09%09},%0A%09%09%22complete_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 84,%0A%09%09%09%22height%22: 54,%0A%09%09%09%22path%22: %22files/c5aeac4f312ee46892c4.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/complete_img.png%22%0A%09%09},%0A%09%09%22next_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 84,%0A%09%09%09%22height%22: 54,%0A%09%09%09%22path%22: %22files/e850bcd88ec4a7d9a927.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/next_img.png%22%0A%09%09},%0A%09%09%22prev_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 84,%0A%09%09%09%22height%22: 54,%0A%09%09%09%22path%22: %22files/6b23c87fb7bf327ea3f4.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/prev_img.png%22%0A%09%09},%0A%09%09%22pusher_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 35,%0A%09%09%09%22height%22: 140,%0A%09%09%09%22path%22: %22files/eb63acb83ca0244f9149.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/pusher_img.png%22%0A%09%09},%0A%09%09%22pushing_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 100,%0A%09%09%09%22height%22: 400,%0A%09%09%09%22path%22: %22files/4f071f682a3b9775bc62.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/pushing_img.png%22%0A%09%09},%0A%09%09%22submit_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 354,%0A%09%09%09%22height%22: 350,%0A%09%09%09%22path%22: %22files/2cf8504d012769b7cd4f.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/submit_img.png%22%0A%09%09},%0A%09%09%22tooltip_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 525,%0A%09%09%09%22height%22: 400,%0A%09%09%09%22path%22: %22files/537bca80efd598f7cc45.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tooltip_img.png%22%0A%09%09},%0A%09%09%22staff_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 35,%0A%09%09%09%22height%22: 140,%0A%09%09%09%22path%22: %22files/2a20937d2feba6f70e60.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/staff_img.png%22%0A%09%09},%0A%09%09%22gating_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 3000,%0A%09%09%09%22height%22: 400,%0A%09%09%09%22path%22: %22files/48e472110a1cbb17da35.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/gating_img.png%22%0A%09%09},%0A%09%09%22title_background_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 1280,%0A%09%09%09%22height%22: 720,%0A%09%09%09%22path%22: %22files/e0381fec06cf926933c6.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/title_background_img.png%22%0A%09%09},%0A%09%09%22action_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/3e2429989cf34f2f7a99.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/action_event.js%22%0A%09%09},%0A%09%09%22display_name_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/0f4d84e266d09dc3c514.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/display_name_event.js%22%0A%09%09},%0A%09%09%22title_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/e04ad1a86b46709555a6.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/title_handler.js%22%0A%09%09},%0A%09%09%22play_guide_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/df7f6f3f0e46312e5185.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/play_guide_view.js%22%0A%09%09},%0A%09%09%22sandbox_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/786736e55a36dc3651f5.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/sandbox_view.js%22%0A%09%09},%0A%09%09%22company_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 35,%0A%09%09%09%22height%22: 35,%0A%09%09%09%22path%22: %22files/ff62517c6dbe95d1d0d2.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/company_img.png%22%0A%09%09},%0A%09%09%22icon_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 48,%0A%09%09%09%22height%22: 192,%0A%09%09%09%22path%22: %22files/ee7d6822346104265e4b.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/icon_img.png%22%0A%09%09},%0A%09%09%22frame_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 980,%0A%09%09%09%22height%22: 580,%0A%09%09%09%22path%22: %22files/86289847bb96bc38d117.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/frame_img.png%22%0A%09%09},%0A%09%09%22display_name_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/7b32a153cbcffd08e1c8.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/display_name_model.js%22%0A%09%09},%0A%09%09%22display_name_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/748417024ceceec55a18.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/display_name_view.js%22%0A%09%09},%0A%09%09%22number_field_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 140,%0A%09%09%09%22height%22: 160,%0A%09%09%09%22path%22: %22files/d5329029473a96d5a6da.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/number_field_img.png%22%0A%09%09},%0A%09%09%22number_input_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 420,%0A%09%09%09%22height%22: 350,%0A%09%09%09%22path%22: %22files/41652d623a02746ee743.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/number_input_img.png%22%0A%09%09},%0A%09%09%22sprite_button%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/d7747919c453af0aa991.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/sprite_button.js%22%0A%09%09},%0A%09%09%22penalty_crowded_detail_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 414,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/ffa0b6b3839a76d96d65.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/penalty_crowded_detail_img.png%22%0A%09%09},%0A%09%09%22penalty_crowded_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 364,%0A%09%09%09%22height%22: 49,%0A%09%09%09%22path%22: %22files/c10e73e867c06093604e.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/penalty_crowded_img.png%22%0A%09%09},%0A%09%09%22penalty_notice_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 506,%0A%09%09%09%22height%22: 36,%0A%09%09%09%22path%22: %22files/0c8504ab36e76367d942.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/penalty_notice_img.png%22%0A%09%09},%0A%09%09%22penalty_waitGate_detail_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 414,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/3346fbf90182baa1e7ac.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/penalty_waitGate_detail_img.png%22%0A%09%09},%0A%09%09%22penalty_waitGate_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 400,%0A%09%09%09%22height%22: 49,%0A%09%09%09%22path%22: %22files/b62ef4954d80d46ca449.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/penalty_waitGate_img.png%22%0A%09%09},%0A%09%09%22penalty_waitTrain_detail_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 414,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/6cb9f9cd56570e52e5aa.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/penalty_waitTrain_detail_img.png%22%0A%09%09},%0A%09%09%22penalty_waitTrain_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 292,%0A%09%09%09%22height%22: 49,%0A%09%09%09%22path%22: %22files/f40c54cab8b20d1597fe.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/penalty_waitTrain_img.png%22%0A%09%09},%0A%09%09%22penalty_modal_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 960,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/0b7bc25bcd758137d614.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/penalty_modal_img.png%22%0A%09%09},%0A%09%09%22end_game_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 284,%0A%09%09%09%22height%22: 54,%0A%09%09%09%22path%22: %22files/1e6174e646337ec7be02.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/end_game_img.png%22%0A%09%09},%0A%09%09%22bonus_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 92,%0A%09%09%09%22height%22: 124,%0A%09%09%09%22path%22: %22files/1536a79c1fe06dca2702.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/bonus_img.png%22%0A%09%09},%0A%09%09%22penalty_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 114,%0A%09%09%09%22height%22: 124,%0A%09%09%09%22path%22: %22files/415987cabc68df40b220.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/penalty_img.png%22%0A%09%09},%0A%09%09%22percent_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 27,%0A%09%09%09%22height%22: 124,%0A%09%09%09%22path%22: %22files/8c9d560c05a3eec1b61a.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/percent_img.png%22%0A%09%09},%0A%09%09%22rank_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 26,%0A%09%09%09%22height%22: 124,%0A%09%09%09%22path%22: %22files/c14b2f9dcac601a412db.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/rank_img.png%22%0A%09%09},%0A%09%09%22estimation_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/04c2e7b6273a420b32d5.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/estimation_view.js%22%0A%09%09},%0A%09%09%22branch_builder_error_no_branch_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 356,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/8c83cf92c8df9b22b08c.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/branch_builder_error_no_branch_img.png%22%0A%09%09},%0A%09%09%22branch_builder_guide_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 530,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/744cfea91db12f5e4e5e.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/branch_builder_guide_img.png%22%0A%09%09},%0A%09%09%22estimation_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 168,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/4a3807ce2065aad3703c.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/estimation_img.png%22%0A%09%09},%0A%09%09%22gate_booster_error_too_expensive_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 400,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/2a1764ccb642956d67c0.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/gate_booster_error_too_expensive_img.png%22%0A%09%09},%0A%09%09%22gate_booster_guide_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 488,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/3c5fabef7e5eaefd9e09.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/gate_booster_guide_img.png%22%0A%09%09},%0A%09%09%22gate_booster_wait_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 314,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/08d5732b74985bc57acf.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/gate_booster_wait_img.png%22%0A%09%09},%0A%09%09%22number0_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 462,%0A%09%09%09%22height%22: 27,%0A%09%09%09%22path%22: %22files/6983d7deb6d7d3e86085.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/number0_img.png%22%0A%09%09},%0A%09%09%22number1_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 462,%0A%09%09%09%22height%22: 27,%0A%09%09%09%22path%22: %22files/aa3cd5685c998c495083.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/number1_img.png%22%0A%09%09},%0A%09%09%22number2_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 462,%0A%09%09%09%22height%22: 27,%0A%09%09%09%22path%22: %22files/44edc924fa5ebdce60d1.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/number2_img.png%22%0A%09%09},%0A%09%09%22number3_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 462,%0A%09%09%09%22height%22: 27,%0A%09%09%09%22path%22: %22files/86a7fc4ea3684a43bcc6.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/number3_img.png%22%0A%09%09},%0A%09%09%22number_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 440,%0A%09%09%09%22height%22: 27,%0A%09%09%09%22path%22: %22files/d75b6126bf5d32c9bad9.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/number_img.png%22%0A%09%09},%0A%09%09%22platform_booster_error_too_expensive_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 312,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/3f3f9e5ab78155f47e60.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/platform_booster_error_too_expensive_img.png%22%0A%09%09},%0A%09%09%22platform_booster_guide_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 400,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/1ed3f6b68cd7c0251223.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/platform_booster_guide_img.png%22%0A%09%09},%0A%09%09%22platform_booster_wait_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 226,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/654793a11b5a0ba30f26.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/platform_booster_wait_img.png%22%0A%09%09},%0A%09%09%22railway_builder_error_move_out_bound_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 422,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/c0d1fb8269fa25fe3e71.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_builder_error_move_out_bound_img.png%22%0A%09%09},%0A%09%09%22railway_builder_error_start_out_bound_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 378,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/46ff6f2af2b77f7ec05b.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_builder_error_start_out_bound_img.png%22%0A%09%09},%0A%09%09%22railway_builder_error_too_expensive_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 356,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/4a7022623d3ed0988617.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_builder_error_too_expensive_img.png%22%0A%09%09},%0A%09%09%22railway_builder_guide_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 464,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/52f71c7f07a7910b38f0.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_builder_guide_img.png%22%0A%09%09},%0A%09%09%22railway_wizard_wait_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 138,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/06be43b138513b865f26.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_wizard_wait_img.png%22%0A%09%09},%0A%09%09%22station_builder_error_no_node_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 398,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/3521bb32dcf70dfaf35b.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/station_builder_error_no_node_img.png%22%0A%09%09},%0A%09%09%22station_builder_error_too_expensive_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 290,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/8c1b3c4098a19dff8e46.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/station_builder_error_too_expensive_img.png%22%0A%09%09},%0A%09%09%22station_builder_guide_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 486,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/ac9e5aad744949b8ff94.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/station_builder_guide_img.png%22%0A%09%09},%0A%09%09%22station_inserter_error_no_node_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 398,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/b4026871417490e50536.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/station_inserter_error_no_node_img.png%22%0A%09%09},%0A%09%09%22station_inserter_error_too_expensive_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 290,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/07604a2c3ed01d290b9a.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/station_inserter_error_too_expensive_img.png%22%0A%09%09},%0A%09%09%22station_inserter_guide_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 464,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/e0bff41cb76e85b25520.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/station_inserter_guide_img.png%22%0A%09%09},%0A%09%09%22station_inserter_wait_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 182,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/3ef866f9b6d8c18acb72.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/station_inserter_wait_img.png%22%0A%09%09},%0A%09%09%22station_upgrade_error_too_expensive_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 224,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/de00db7e6bdee1531901.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/station_upgrade_error_too_expensive_img.png%22%0A%09%09},%0A%09%09%22station_upgrade_guide_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 334,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/f61241ceab4e4932a241.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/station_upgrade_guide_img.png%22%0A%09%09},%0A%09%09%22station_upgrade_wait_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 138,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/3e6af26fc573abb803cc.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/station_upgrade_wait_img.png%22%0A%09%09},%0A%09%09%22title_error_admin_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 598,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/85cc8d7d8745e27fb7a4.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/title_error_admin_img.png%22%0A%09%09},%0A%09%09%22title_error_join_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 312,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/18f2409b8e2e71ea7f81.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/title_error_join_img.png%22%0A%09%09},%0A%09%09%22train_deployer_error_too_expensive_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 312,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/df11a2a6bd3c2fd107d5.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/train_deployer_error_too_expensive_img.png%22%0A%09%09},%0A%09%09%22train_deployer_guide_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 356,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/25269b84288be0dba7e5.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/train_deployer_guide_img.png%22%0A%09%09},%0A%09%09%22train_inserter_error_no_node_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 398,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/42ef9a158ecf9d60eff1.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/train_inserter_error_no_node_img.png%22%0A%09%09},%0A%09%09%22train_inserter_error_too_expensive_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 290,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/374b68ad98891d910e86.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/train_inserter_error_too_expensive_img.png%22%0A%09%09},%0A%09%09%22train_inserter_guide_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 508,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/3e4eef1a18f9b8cdfc93.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/train_inserter_guide_img.png%22%0A%09%09},%0A%09%09%22train_inserter_wait_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 204,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/a3ebba0aaf43c24834b6.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/train_inserter_wait_img.png%22%0A%09%09},%0A%09%09%22number0_glyphs%22: {%0A%09%09%09%22type%22: %22text%22,%0A%09%09%09%22path%22: %22files/8ad15e22a62fd2c95787.json%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22text/number0_glyphs.json%22%0A%09%09},%0A%09%09%22number1_glyphs%22: {%0A%09%09%09%22type%22: %22text%22,%0A%09%09%09%22path%22: %22files/26f9943ebe85d43da4b3.json%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22text/number1_glyphs.json%22%0A%09%09},%0A%09%09%22number2_glyphs%22: {%0A%09%09%09%22type%22: %22text%22,%0A%09%09%09%22path%22: %22files/6cebc1390982aa7da08b.json%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22text/number2_glyphs.json%22%0A%09%09},%0A%09%09%22number3_glyphs%22: {%0A%09%09%09%22type%22: %22text%22,%0A%09%09%09%22path%22: %22files/bf4ac419a47cbfba1f41.json%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22text/number3_glyphs.json%22%0A%09%09},%0A%09%09%22number_glyphs%22: {%0A%09%09%09%22type%22: %22text%22,%0A%09%09%09%22path%22: %22files/b52ecb18ee91d9b602b3.json%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22text/number_glyphs.json%22%0A%09%09},%0A%09%09%22capacity_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 120,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/1efde29108da14373633.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/capacity_img.png%22%0A%09%09},%0A%09%09%22title_name_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 900,%0A%09%09%09%22height%22: 85,%0A%09%09%09%22path%22: %22files/4538fa44594b2c90526f.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/title_name_img.png%22%0A%09%09},%0A%09%09%22railway_builder_error_no_edge_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 420,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/e009cc74f9e9a8a1f16c.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_builder_error_no_edge_img.png%22%0A%09%09},%0A%09%09%22sandbox_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/e0fd57842284d400a55e.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/sandbox_handler.js%22%0A%09%09},%0A%09%09%22full_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 84,%0A%09%09%09%22height%22: 54,%0A%09%09%09%22path%22: %22files/f28f877ae2a35f5618ca.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/full_img.png%22%0A%09%09},%0A%09%09%22input_name_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 560,%0A%09%09%09%22height%22: 82,%0A%09%09%09%22path%22: %22files/532f333047c257a446ef.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/input_name_img.png%22%0A%09%09},%0A%09%09%22join_game_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 84,%0A%09%09%09%22height%22: 54,%0A%09%09%09%22path%22: %22files/1a5ded43d186acdc5645.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/join_game_img.png%22%0A%09%09},%0A%09%09%22join_game_wait_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 102,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/b7d327a290b4df2cba47.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/join_game_wait_img.png%22%0A%09%09},%0A%09%09%22leave_game_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 124,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/402ed3c3102bf584048c.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/leave_game_img.png%22%0A%09%09},%0A%09%09%22leave_game_wait_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 131,%0A%09%09%09%22height%22: 27,%0A%09%09%09%22path%22: %22files/415e678e0dbf5d2774d7.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/leave_game_wait_img.png%22%0A%09%09},%0A%09%09%22modify_name_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 64,%0A%09%09%09%22height%22: 42,%0A%09%09%09%22path%22: %22files/407b0e3851ca55c53585.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/modify_name_img.png%22%0A%09%09},%0A%09%09%22players_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 386,%0A%09%09%09%22height%22: 164,%0A%09%09%09%22path%22: %22files/a9d33a6bfe5ee4f1f282.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/players_img.png%22%0A%09%09},%0A%09%09%22play_guide_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 560,%0A%09%09%09%22height%22: 330,%0A%09%09%09%22path%22: %22files/3723cdd17ccbc421e1e3.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/play_guide_img.png%22%0A%09%09},%0A%09%09%22ready_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 126,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/8efbcf8b804b1c5093fb.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/ready_img.png%22%0A%09%09},%0A%09%09%22retry_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 79,%0A%09%09%09%22height%22: 36,%0A%09%09%09%22path%22: %22files/218ec4f94592444dcadc.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/retry_img.png%22%0A%09%09},%0A%09%09%22sandbox_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 560,%0A%09%09%09%22height%22: 400,%0A%09%09%09%22path%22: %22files/0e60b288e6f50c9337c3.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/sandbox_img.png%22%0A%09%09},%0A%09%09%22start_game_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 84,%0A%09%09%09%22height%22: 54,%0A%09%09%09%22path%22: %22files/df1389ec28bcacfdb9c6.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/start_game_img.png%22%0A%09%09},%0A%09%09%22start_game_wait_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 102,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/4221ad6e1dfee8af7552.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/start_game_wait_img.png%22%0A%09%09},%0A%09%09%22sandbox_guide1_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 466,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/3ed04b3932a41ea52d7b.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/sandbox_guide1_img.png%22%0A%09%09},%0A%09%09%22sandbox_guide2_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 501,%0A%09%09%09%22height%22: 27,%0A%09%09%09%22path%22: %22files/2f4b748dc14b48255046.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/sandbox_guide2_img.png%22%0A%09%09},%0A%09%09%22backSpaceKey%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/adabced617d65d9dd727.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/lib/backSpaceKey.png%22%0A%09%09},%0A%09%09%22close%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 256,%0A%09%09%09%22height%22: 88,%0A%09%09%09%22path%22: %22files/833f5526f97106b7a149.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/lib/close.png%22%0A%09%09},%0A%09%09%22img_key_alpha%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 616,%0A%09%09%09%22height%22: 533,%0A%09%09%09%22path%22: %22files/6056ab8e0f7743b2a8b8.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/lib/img_key_alpha.png%22%0A%09%09},%0A%09%09%22img_key_kana%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 586,%0A%09%09%09%22height%22: 590,%0A%09%09%09%22path%22: %22files/d885dbf09e91ea1f083e.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/lib/img_key_kana.png%22%0A%09%09},%0A%09%09%22img_key_sym%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 558,%0A%09%09%09%22height%22: 516,%0A%09%09%09%22path%22: %22files/6653811e3c3b8c885d9e.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/lib/img_key_sym.png%22%0A%09%09},%0A%09%09%22inputtingLabelBack%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 1264,%0A%09%09%09%22height%22: 112,%0A%09%09%09%22path%22: %22files/2d33b5116cff1a0eb7b3.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/lib/inputtingLabelBack.png%22%0A%09%09},%0A%09%09%22notosansFont%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 720,%0A%09%09%09%22height%22: 1008,%0A%09%09%09%22path%22: %22files/b156aacbf913456b0bee.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/lib/notosansFont.png%22%0A%09%09},%0A%09%09%22open%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 256,%0A%09%09%09%22height%22: 88,%0A%09%09%09%22path%22: %22files/6f1555fcd064131db0ac.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/lib/open.png%22%0A%09%09},%0A%09%09%22a_a%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/4d0f8e26d0f6ae1daf77.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_a.png%22%0A%09%09},%0A%09%09%22a_b%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/85703ea7ec036c51149c.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_b.png%22%0A%09%09},%0A%09%09%22a_c%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/df790f51731024f37913.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_c.png%22%0A%09%09},%0A%09%09%22a_d%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 153,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/42311093da8b62d92d8a.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_d.png%22%0A%09%09},%0A%09%09%22a_e%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/952f0eb842b70490da6e.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_e.png%22%0A%09%09},%0A%09%09%22a_f%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/8d1c7983146e3403ea49.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_f.png%22%0A%09%09},%0A%09%09%22a_g%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/6f156b1b75528c4c4ffc.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_g.png%22%0A%09%09},%0A%09%09%22a_h%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 153,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/14f7f909b5f4a9181a87.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_h.png%22%0A%09%09},%0A%09%09%22a_i%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 75,%0A%09%09%09%22path%22: %22files/13784ca6c0143563a8db.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_i.png%22%0A%09%09},%0A%09%09%22a_j%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 75,%0A%09%09%09%22path%22: %22files/fcbaad503dd0d2563925.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_j.png%22%0A%09%09},%0A%09%09%22a_k%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 75,%0A%09%09%09%22path%22: %22files/4df0e7f06f2ebf6fdca6.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_k.png%22%0A%09%09},%0A%09%09%22a_l%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 153,%0A%09%09%09%22height%22: 75,%0A%09%09%09%22path%22: %22files/b1d62e1c8cb7893c2949.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_l.png%22%0A%09%09},%0A%09%09%22a_m%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 75,%0A%09%09%09%22path%22: %22files/6aa71538bedc34444df1.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_m.png%22%0A%09%09},%0A%09%09%22a_n%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 75,%0A%09%09%09%22path%22: %22files/e4020177526818c0de53.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_n.png%22%0A%09%09},%0A%09%09%22a_o%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 75,%0A%09%09%09%22path%22: %22files/7895e98051ab83668d42.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_o.png%22%0A%09%09},%0A%09%09%22a_p%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 153,%0A%09%09%09%22height%22: 75,%0A%09%09%09%22path%22: %22files/9982769ed9a33db1097b.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_p.png%22%0A%09%09},%0A%09%09%22a_q%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/bed6980c9c153e35e513.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_q.png%22%0A%09%09},%0A%09%09%22a_r%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/3652b5ae03143be91b0f.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_r.png%22%0A%09%09},%0A%09%09%22a_s%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/85c45ff0f9fd358b3fe9.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_s.png%22%0A%09%09},%0A%09%09%22a_t%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 153,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/4175660eb008de86a193.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_t.png%22%0A%09%09},%0A%09%09%22a_u%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/e70ac6e1034122ef3f1b.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_u.png%22%0A%09%09},%0A%09%09%22a_v%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/5e1a9bdb4a5f820656f5.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_v.png%22%0A%09%09},%0A%09%09%22a_w%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/c0730df667e274051b4d.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_w.png%22%0A%09%09},%0A%09%09%22a_x%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 153,%0A%09%09%09%22height%22: 74,%0A%09%09%09%22path%22: %22files/5a8527aa60736e4fc295.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_x.png%22%0A%09%09},%0A%09%09%22a_y%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 75,%0A%09%09%09%22path%22: %22files/aac1ad143256a7a2741e.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_y.png%22%0A%09%09},%0A%09%09%22a_z%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 152,%0A%09%09%09%22height%22: 75,%0A%09%09%09%22path%22: %22files/8946f6e927cf61185177.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_alpha/a_z.png%22%0A%09%09},%0A%09%09%22a%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/ab3c818cdad19f0aff4f.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/a.png%22%0A%09%09},%0A%09%09%22e%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/e736ecf631498ef5d27a.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/e.png%22%0A%09%09},%0A%09%09%22ha%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/1039748e6952408fcb90.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ha.png%22%0A%09%09},%0A%09%09%22he%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/b4be9ca7bbe776110149.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/he.png%22%0A%09%09},%0A%09%09%22hi%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/0ba112086e75acd5460b.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/hi.png%22%0A%09%09},%0A%09%09%22ho%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/970fa917a1854cf1eb3a.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ho.png%22%0A%09%09},%0A%09%09%22hu%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/40a5b377cfb553a628af.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/hu.png%22%0A%09%09},%0A%09%09%22i%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/764a26f35a2c0c146e5c.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/i.png%22%0A%09%09},%0A%09%09%22ka%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/a76e40f83d97166e44a7.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ka.png%22%0A%09%09},%0A%09%09%22ke%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/521d81d9f4029ef87f3e.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ke.png%22%0A%09%09},%0A%09%09%22ki%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/afe1e7ddb99e00140fa0.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ki.png%22%0A%09%09},%0A%09%09%22ko%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/3e1c4b34a47adb44687b.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ko.png%22%0A%09%09},%0A%09%09%22ku%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/656a6e52875011d09617.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ku.png%22%0A%09%09},%0A%09%09%22ma%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/3383586e6772f87e7072.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ma.png%22%0A%09%09},%0A%09%09%22me%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/ccc95d811a8d389b2e09.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/me.png%22%0A%09%09},%0A%09%09%22mi%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/ca724a9cd7b5c18bb397.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/mi.png%22%0A%09%09},%0A%09%09%22mo%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/269527e0c09106aa9fa8.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/mo.png%22%0A%09%09},%0A%09%09%22mu%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/549056fa0291b35ae0a8.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/mu.png%22%0A%09%09},%0A%09%09%22na%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/98cb034ca0f4a2610cef.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/na.png%22%0A%09%09},%0A%09%09%22ne%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/c3cc02e760ddc254fea1.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ne.png%22%0A%09%09},%0A%09%09%22ni%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/f2f12a414408b4388ebe.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ni.png%22%0A%09%09},%0A%09%09%22nn%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 120,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/8f431d6885c7ff4e6b42.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/nn.png%22%0A%09%09},%0A%09%09%22no%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/f3b2d2ae2f0474df93bb.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/no.png%22%0A%09%09},%0A%09%09%22nu%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/d6a3c9d7835c359435ed.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/nu.png%22%0A%09%09},%0A%09%09%22o%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/0403e7616fff8e5a8429.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/o.png%22%0A%09%09},%0A%09%09%22ra%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/da4b9798781ed4320b47.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ra.png%22%0A%09%09},%0A%09%09%22re%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/0257d94a3941e5967b2e.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/re.png%22%0A%09%09},%0A%09%09%22ri%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/b4143932eca9a5436808.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ri.png%22%0A%09%09},%0A%09%09%22ro%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/22810124a8a4c0797383.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ro.png%22%0A%09%09},%0A%09%09%22ru%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/35c824684d8225d95dbc.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ru.png%22%0A%09%09},%0A%09%09%22sa%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/d30a19655aaf1aaa7b79.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/sa.png%22%0A%09%09},%0A%09%09%22se%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/a96a9de9960e8d376e40.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/se.png%22%0A%09%09},%0A%09%09%22semiVoiced%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 120,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/85d5c5223fdc3ecd94f9.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/semiVoiced.png%22%0A%09%09},%0A%09%09%22si%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/6ff664a7b549ddac8f19.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/si.png%22%0A%09%09},%0A%09%09%22small%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 120,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/f3946f4446e53c42f820.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/small.png%22%0A%09%09},%0A%09%09%22so%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/2fd2ae79e8c294422924.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/so.png%22%0A%09%09},%0A%09%09%22su%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/f1bc964e1bd95c3f915b.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/su.png%22%0A%09%09},%0A%09%09%22ta%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/f85aa8c13129b42bd413.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ta.png%22%0A%09%09},%0A%09%09%22te%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/2475fe1edd52229a6a47.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/te.png%22%0A%09%09},%0A%09%09%22ti%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/d804e35d7390147aad5e.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ti.png%22%0A%09%09},%0A%09%09%22to%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/6c82c24456b0d4e0b068.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/to.png%22%0A%09%09},%0A%09%09%22tu%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/67745c45201f7d8719bd.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/tu.png%22%0A%09%09},%0A%09%09%22u%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 72,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/67aa60d7bd0d2003fbc8.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/u.png%22%0A%09%09},%0A%09%09%22voiced%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 120,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/20fa44d9434f1af239bc.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/voiced.png%22%0A%09%09},%0A%09%09%22wa%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 120,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/8599160cd84655e3eb48.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/wa.png%22%0A%09%09},%0A%09%09%22wo%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 120,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/9cd6ac5af0b1c0891b43.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/wo.png%22%0A%09%09},%0A%09%09%22ya%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 120,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/0bffdc42b8b5c694f777.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/ya.png%22%0A%09%09},%0A%09%09%22yo%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 120,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/e533092bae8b60d5cc58.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/yo.png%22%0A%09%09},%0A%09%09%22yu%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 120,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/11c3f4cc82337672a660.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_kana/yu.png%22%0A%09%09},%0A%09%09%22d_0%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/94550c02f1cbc818683e.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/d_0.png%22%0A%09%09},%0A%09%09%22d_1%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/26dc66009d127cbc6c7b.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/d_1.png%22%0A%09%09},%0A%09%09%22d_2%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/e8ce80dd296f0914448f.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/d_2.png%22%0A%09%09},%0A%09%09%22d_3%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/6237486901cec01970af.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/d_3.png%22%0A%09%09},%0A%09%09%22d_4%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/9f11650bc64ee09fb3a5.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/d_4.png%22%0A%09%09},%0A%09%09%22d_5%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/0d9df7adcf3e2b19b627.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/d_5.png%22%0A%09%09},%0A%09%09%22d_6%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/77d6ba09885b4a71df13.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/d_6.png%22%0A%09%09},%0A%09%09%22d_7%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/233453ae5b36b51c8a9c.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/d_7.png%22%0A%09%09},%0A%09%09%22d_8%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/a3e0ea58c00ef142ad1f.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/d_8.png%22%0A%09%09},%0A%09%09%22d_9%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/7c9ce4fd5b40d77ad22e.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/d_9.png%22%0A%09%09},%0A%09%09%22sym_0%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/85a657e07ce6817ed9a0.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_0.png%22%0A%09%09},%0A%09%09%22sym_1%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/7ec3ddcac2ba90f6f5ca.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_1.png%22%0A%09%09},%0A%09%09%22sym_10%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/ca475d2ee1278251f997.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_10.png%22%0A%09%09},%0A%09%09%22sym_11%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/944cb0ada0f3da4f511e.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_11.png%22%0A%09%09},%0A%09%09%22sym_12%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/5a8f57e16d26de80562f.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_12.png%22%0A%09%09},%0A%09%09%22sym_13%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/47b7b7e4145f1846d8fe.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_13.png%22%0A%09%09},%0A%09%09%22sym_14%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/554793ff18c51b6e87d2.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_14.png%22%0A%09%09},%0A%09%09%22sym_15%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/299fa223dffa351c28da.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_15.png%22%0A%09%09},%0A%09%09%22sym_16%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/9a17322263909cd5cbfa.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_16.png%22%0A%09%09},%0A%09%09%22sym_17%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/fe933ed8e6bc6122ecc1.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_17.png%22%0A%09%09},%0A%09%09%22sym_18%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/e19caeb0728c96ff7482.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_18.png%22%0A%09%09},%0A%09%09%22sym_19%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/dea4ebd3a58d08b0e15b.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_19.png%22%0A%09%09},%0A%09%09%22sym_2%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/bdc47b0d09fe0fff1aaa.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_2.png%22%0A%09%09},%0A%09%09%22sym_3%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/30ddf43ece7be48fa606.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_3.png%22%0A%09%09},%0A%09%09%22sym_4%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/15a729ba844f266d0722.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_4.png%22%0A%09%09},%0A%09%09%22sym_5%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/95d88b0c93bdb54c5ff8.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_5.png%22%0A%09%09},%0A%09%09%22sym_6%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/15399d9b6fa0e8b0bfa6.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_6.png%22%0A%09%09},%0A%09%09%22sym_7%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/8c4c3ac23ab6d98f83e1.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_7.png%22%0A%09%09},%0A%09%09%22sym_8%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/eecd8e6c9ae35f948ebf.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_8.png%22%0A%09%09},%0A%09%09%22sym_9%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 110,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/a8527ed1bb511103b9ad.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/res/key_sym/sym_9.png%22%0A%09%09},%0A%09%09%22toAlphaLetters%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 180,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/5a8d62a8aadedcb667fa.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/toAlphaLetters.png%22%0A%09%09},%0A%09%09%22toKanaLetters%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 180,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/dac055044f1a17d2f4f9.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/toKanaLetters.png%22%0A%09%09},%0A%09%09%22toSymLetters%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 180,%0A%09%09%09%22height%22: 72,%0A%09%09%09%22path%22: %22files/1018faae6f425480fbcc.png%22,%0A%09%09%09%22virtualPath%22: %22image/lib/toSymLetters.png%22%0A%09%09},%0A%09%09%22hint_key_alpha%22: {%0A%09%09%09%22type%22: %22text%22,%0A%09%09%09%22path%22: %22files/e65f36cc6c10db3bdf74.json%22,%0A%09%09%09%22virtualPath%22: %22text/lib/hint_key_alpha.json%22%0A%09%09},%0A%09%09%22hint_key_kana%22: {%0A%09%09%09%22type%22: %22text%22,%0A%09%09%09%22path%22: %22files/e896bf628e148429fc85.json%22,%0A%09%09%09%22virtualPath%22: %22text/lib/hint_key_kana.json%22%0A%09%09},%0A%09%09%22hint_key_sym%22: {%0A%09%09%09%22type%22: %22text%22,%0A%09%09%09%22path%22: %22files/47b2acc08ac870be9468.json%22,%0A%09%09%09%22virtualPath%22: %22text/lib/hint_key_sym.json%22%0A%09%09},%0A%09%09%22notosansGlyph%22: {%0A%09%09%09%22type%22: %22text%22,%0A%09%09%09%22path%22: %22files/6660fb2bb58a24f3799a.json%22,%0A%09%09%09%22virtualPath%22: %22text/lib/notosansGlyph.json%22%0A%09%09},%0A%09%09%22keyboard_define%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/2a8af08795265b9934cf.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/lib/keyboard/keyboard_define.js%22%0A%09%09},%0A%09%09%22keyboard_Keyboard%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/608dd807f35f689ed816.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/lib/keyboard/keyboard_Keyboard.js%22%0A%09%09},%0A%09%09%22keyboard_KeyboardParameterObject%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/d2e1cbacbce31e3b5980.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/lib/keyboard/keyboard_KeyboardParameterObject.js%22%0A%09%09},%0A%09%09%22keyboard_MultiKeyboard%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/30ae02735bd1793e21ec.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/lib/keyboard/keyboard_MultiKeyboard.js%22%0A%09%09},%0A%09%09%22keyboard_SpriteReader%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/c61dc37cba474ea8baf3.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/lib/keyboard/keyboard_SpriteReader.js%22%0A%09%09},%0A%09%09%22hover_plugin%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/4c08e5c8d37ce2ee6c7f.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22node_modules/@akashic-extension/akashic-hover-plugin/lib/HoverPlugin.js%22%0A%09%09},%0A%09%09%22upgrade_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 3540,%0A%09%09%09%22height%22: 472,%0A%09%09%09%22path%22: %22files/24a93d67a2d8e95c7708.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/upgrade_img.png%22%0A%09%09},%0A%09%09%22tooltip_upgrade_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 175,%0A%09%09%09%22height%22: 80,%0A%09%09%09%22path%22: %22files/ea775387077b625fc341.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tooltip_upgrade_img.png%22%0A%09%09},%0A%09%09%22tooltip_branch_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 175,%0A%09%09%09%22height%22: 80,%0A%09%09%09%22path%22: %22files/91ac92c95b311066c17a.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tooltip_branch_img.png%22%0A%09%09},%0A%09%09%22tooltip_gating_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 175,%0A%09%09%09%22height%22: 80,%0A%09%09%09%22path%22: %22files/2e96cb65a040cb3e259f.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tooltip_gating_img.png%22%0A%09%09},%0A%09%09%22tooltip_pusher_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 175,%0A%09%09%09%22height%22: 80,%0A%09%09%09%22path%22: %22files/af83f47514dcbf56fafa.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tooltip_pusher_img.png%22%0A%09%09},%0A%09%09%22tooltip_station_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 175,%0A%09%09%09%22height%22: 80,%0A%09%09%09%22path%22: %22files/6f631906e60513c0d968.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tooltip_station_img.png%22%0A%09%09},%0A%09%09%22tooltip_train_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 175,%0A%09%09%09%22height%22: 80,%0A%09%09%09%22path%22: %22files/6cebd59dda9f7c8d90f0.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tooltip_train_img.png%22%0A%09%09},%0A%09%09%22nc34915%22: {%0A%09%09%09%22type%22: %22audio%22,%0A%09%09%09%22path%22: %22files/fc659e3cfe1f3d75e8ce%22,%0A%09%09%09%22systemId%22: %22sound%22,%0A%09%09%09%22duration%22: 3059,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22audio/nc34915%22%0A%09%09},%0A%09%09%22nc51754%22: {%0A%09%09%09%22type%22: %22audio%22,%0A%09%09%09%22path%22: %22files/158d5f1f012bffa19897%22,%0A%09%09%09%22systemId%22: %22music%22,%0A%09%09%09%22duration%22: 37674,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22audio/nc51754%22%0A%09%09},%0A%09%09%22play_guide_1_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 312,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/1d48fdebc2dc218e940c.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/play_guide_1_img.png%22%0A%09%09},%0A%09%09%22play_guide_2_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 356,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/60be35530d23ae75b0a5.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/play_guide_2_img.png%22%0A%09%09},%0A%09%09%22play_guide_3_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 334,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/1f8bb6f36360a75ff5fa.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/play_guide_3_img.png%22%0A%09%09},%0A%09%09%22play_guide_4_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 378,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/ffd61d98e6c65c145700.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/play_guide_4_img.png%22%0A%09%09},%0A%09%09%22play_guide_5_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 312,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/8dbc2e751a2bb77fa872.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/play_guide_5_img.png%22%0A%09%09},%0A%09%09%22play_guide_6_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 290,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/a0ca818690e507f4e2de.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/play_guide_6_img.png%22%0A%09%09},%0A%09%09%22play_guide_7_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 364,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/a4547796303bab5d523d.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/play_guide_7_img.png%22%0A%09%09},%0A%09%09%22progress_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 200,%0A%09%09%09%22height%22: 600,%0A%09%09%09%22path%22: %22files/a18a3500b0dfa61f48f2.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/progress_img.png%22%0A%09%09},%0A%09%09%22station_booster_error_already_boosted_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 334,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/d4f37ebd2d883bb47b61.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/station_booster_error_already_boosted_img.png%22%0A%09%09},%0A%09%09%22train_inserter_error_too_jammed_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 224,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/061ca526d2977b681fae.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/train_inserter_error_too_jammed_img.png%22%0A%09%09},%0A%09%09%22graph_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/60b89603924012d451ad.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/graph_view.js%22%0A%09%09},%0A%09%09%22graph_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 124,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/319b456efc46537df3d4.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/graph_img.png%22%0A%09%09},%0A%09%09%22nc177318%22: {%0A%09%09%09%22type%22: %22audio%22,%0A%09%09%09%22path%22: %22files/82cf06eba9a55e5c516a%22,%0A%09%09%09%22systemId%22: %22sound%22,%0A%09%09%09%22duration%22: 7001,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22audio/nc177318%22%0A%09%09},%0A%09%09%22countdown_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/53b65244647288f323e2.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/countdown_handler.js%22%0A%09%09},%0A%09%09%22countdown_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/c40ed50c5a38c6be4741.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/countdown_view.js%22%0A%09%09},%0A%09%09%22countdown_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 1520,%0A%09%09%09%22height%22: 101,%0A%09%09%09%22path%22: %22files/2419cbab183ffe9008ba.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/countdown_img.png%22%0A%09%09},%0A%09%09%22countdown_glyphs%22: {%0A%09%09%09%22type%22: %22text%22,%0A%09%09%09%22path%22: %22files/a851ea5089b44a975122.json%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22text/countdown_glyphs.json%22%0A%09%09},%0A%09%09%22rollback_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/bb858e35a811e738b574.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/rollback_view.js%22%0A%09%09},%0A%09%09%22rollback_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 144,%0A%09%09%09%22height%22: 48,%0A%09%09%09%22path%22: %22files/b8da73ba33d366e894f8.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/rollback_img.png%22%0A%09%09},%0A%09%09%22territoy_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/e5651fb6313ee623a70e.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/territoy_handler.js%22%0A%09%09},%0A%09%09%22rollback_detail_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 356,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/390c2b7c457549e69324.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/rollback_detail_img.png%22%0A%09%09},%0A%09%09%22rollback_ok_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 84,%0A%09%09%09%22height%22: 54,%0A%09%09%09%22path%22: %22files/82089376d0e51d1021a3.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/rollback_ok_img.png%22%0A%09%09},%0A%09%09%22rollback_title_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 389,%0A%09%09%09%22height%22: 48,%0A%09%09%09%22path%22: %22files/543dae11f151a29a0859.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/rollback_title_img.png%22%0A%09%09},%0A%09%09%22cost_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 36,%0A%09%09%09%22height%22: 24,%0A%09%09%09%22path%22: %22files/b8f519d5092ce7edb611.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/cost_img.png%22%0A%09%09},%0A%09%09%22my_number0_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 735,%0A%09%09%09%22height%22: 44,%0A%09%09%09%22path%22: %22files/22592a803a941c363d06.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/my_number0_img.png%22%0A%09%09},%0A%09%09%22my_number1_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 735,%0A%09%09%09%22height%22: 44,%0A%09%09%09%22path%22: %22files/ba0065aa025886c74aa6.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/my_number1_img.png%22%0A%09%09},%0A%09%09%22my_number2_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 735,%0A%09%09%09%22height%22: 44,%0A%09%09%09%22path%22: %22files/059c74b02eba3261b36f.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/my_number2_img.png%22%0A%09%09},%0A%09%09%22my_number3_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 735,%0A%09%09%09%22height%22: 44,%0A%09%09%09%22path%22: %22files/1c41b8b71168af08bc82.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/my_number3_img.png%22%0A%09%09},%0A%09%09%22my_number0_glyphs%22: {%0A%09%09%09%22type%22: %22text%22,%0A%09%09%09%22path%22: %22files/305d26d86f35559bb3cd.json%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22text/my_number0_glyphs.json%22%0A%09%09},%0A%09%09%22my_number1_glyphs%22: {%0A%09%09%09%22type%22: %22text%22,%0A%09%09%09%22path%22: %22files/62dbea88df3b09263dc3.json%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22text/my_number1_glyphs.json%22%0A%09%09},%0A%09%09%22my_number2_glyphs%22: {%0A%09%09%09%22type%22: %22text%22,%0A%09%09%09%22path%22: %22files/10e8584543f6e5e3a935.json%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22text/my_number2_glyphs.json%22%0A%09%09},%0A%09%09%22my_number3_glyphs%22: {%0A%09%09%09%22type%22: %22text%22,%0A%09%09%09%22path%22: %22files/dd7146a2f655a38d4e6e.json%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22text/my_number3_glyphs.json%22%0A%09%09},%0A%09%09%22unlimit_wait_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 180,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/03532c6f6ea68d175e4f.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/unlimit_wait_img.png%22%0A%09%09},%0A%09%09%22nc152926%22: {%0A%09%09%09%22type%22: %22audio%22,%0A%09%09%09%22path%22: %22files/69ee371bdfbcb313fb3f%22,%0A%09%09%09%22systemId%22: %22sound%22,%0A%09%09%09%22duration%22: 2164,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22audio/nc152926%22%0A%09%09},%0A%09%09%22nc194712%22: {%0A%09%09%09%22type%22: %22audio%22,%0A%09%09%09%22path%22: %22files/5fc9b8842ff308d66309%22,%0A%09%09%09%22systemId%22: %22sound%22,%0A%09%09%09%22duration%22: 2000,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22audio/nc194712%22%0A%09%09},%0A%09%09%22confirm_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/39ca72a4b6dc30d6c574.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/confirm_event.js%22%0A%09%09},%0A%09%09%22confirmed_mark_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 53,%0A%09%09%09%22height%22: 80,%0A%09%09%09%22path%22: %22files/133435c7ed1ebeb3d4f5.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/confirmed_mark_img.png%22%0A%09%09},%0A%09%09%22confirm_score_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 304,%0A%09%09%09%22height%22: 42,%0A%09%09%09%22path%22: %22files/7a2e165c56576b2afe7b.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/confirm_score_img.png%22%0A%09%09},%0A%09%09%22submit_large_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 1680,%0A%09%09%09%22height%22: 590,%0A%09%09%09%22path%22: %22files/209052763d819a668c52.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/submit_large_img.png%22%0A%09%09},%0A%09%09%22first_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 30,%0A%09%09%09%22height%22: 30,%0A%09%09%09%22path%22: %22files/04e3dba603808bb2f1ab.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/first_img.png%22%0A%09%09},%0A%09%09%22too_expensive_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 158,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/82287119025757564d0d.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/too_expensive_img.png%22%0A%09%09},%0A%09%09%22nc63801%22: {%0A%09%09%09%22type%22: %22audio%22,%0A%09%09%09%22path%22: %22files/7a17f81887c2110a7634%22,%0A%09%09%09%22systemId%22: %22sound%22,%0A%09%09%09%22duration%22: 2000,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22audio/nc63801%22%0A%09%09},%0A%09%09%22end_game_confirm_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 290,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/957335f7ff52f5b53c1a.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/end_game_confirm_img.png%22%0A%09%09},%0A%09%09%22start_game_confirm_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 356,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/c05553d34949c287cbfa.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/start_game_confirm_img.png%22%0A%09%09},%0A%09%09%22rollback_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/e8382120c1566c91df35.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/rollback_handler.js%22%0A%09%09},%0A%09%09%22admin_confirm_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/913b85e74d1f38a9d254.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/admin_confirm_view.js%22%0A%09%09},%0A%09%09%22full_joined_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 502,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/142d711ff414067c04d2.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/full_joined_img.png%22%0A%09%09},%0A%09%09%22construction_sign_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 30,%0A%09%09%09%22height%22: 30,%0A%09%09%09%22path%22: %22files/dde219540ec273a59dd7.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/construction_sign_img.png%22%0A%09%09},%0A%09%09%22construction_mark_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 30,%0A%09%09%09%22height%22: 30,%0A%09%09%09%22path%22: %22files/1bb1c3eeeb728950a5f8.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/construction_mark_img.png%22%0A%09%09},%0A%09%09%22boundary_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 600,%0A%09%09%09%22height%22: 1400,%0A%09%09%09%22path%22: %22files/b9837bf9d5b9bddd138f.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/boundary_img.png%22%0A%09%09},%0A%09%09%22unlimit_territory_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 454,%0A%09%09%09%22height%22: 36,%0A%09%09%09%22path%22: %22files/bdffb9ab4b4c4cd3ca8c.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/unlimit_territory_img.png%22%0A%09%09},%0A%09%09%22train_deployer_cost_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 124,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/3a69c08b0ea297ef7142.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/train_deployer_cost_img.png%22%0A%09%09},%0A%09%09%22train_cost_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/ac4c65be24140f8580e4.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/train_cost_view.js%22%0A%09%09},%0A%09%09%22circle_progress_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 4000,%0A%09%09%09%22height%22: 40,%0A%09%09%09%22path%22: %22files/dad1a4bf5d648c18dbd3.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/circle_progress_img.png%22%0A%09%09},%0A%09%09%22notice_modal_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 650,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/6fa764f2029a3c4073ae.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/notice_modal_img.png%22%0A%09%09},%0A%09%09%22railway_destroy_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/e6caf2189b58a90d0281.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/railway_destroy_event.js%22%0A%09%09},%0A%09%09%22railway_rollback_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/e9ca31803a64ad82909a.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/railway_rollback_event.js%22%0A%09%09},%0A%09%09%22railway_destroyer_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/46d5eff7b35f29a8ba70.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/railway_destroyer_handler.js%22%0A%09%09},%0A%09%09%22railway_destroyer_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/293e0c29380bfe8318fe.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/railway_destroyer_model.js%22%0A%09%09},%0A%09%09%22railway_destroyer_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/754b7b75e037d7f9a0c2.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/railway_destroyer_view.js%22%0A%09%09},%0A%09%09%22destroyer_circle_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 750,%0A%09%09%09%22height%22: 200,%0A%09%09%09%22path%22: %22files/686c6ec61cb354cbeeef.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/destroyer_circle_img.png%22%0A%09%09},%0A%09%09%22destroyer_rect_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 750,%0A%09%09%09%22height%22: 200,%0A%09%09%09%22path%22: %22files/eaed4bf34c6b6a9dcbd4.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/destroyer_rect_img.png%22%0A%09%09},%0A%09%09%22tooltip_destroyer_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 175,%0A%09%09%09%22height%22: 80,%0A%09%09%09%22path%22: %22files/97d0625c387f7e78df4c.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tooltip_destroyer_img.png%22%0A%09%09},%0A%09%09%22coupon_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 286,%0A%09%09%09%22height%22: 27,%0A%09%09%09%22path%22: %22files/2698fe73a98cf862c7db.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/coupon_img.png%22%0A%09%09},%0A%09%09%22railway_destroyer_detail1_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 400,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/d018c5759efca3793802.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_destroyer_detail1_img.png%22%0A%09%09},%0A%09%09%22railway_destroyer_detail2_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 334,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/c4c8499427fdf29e7b90.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_destroyer_detail2_img.png%22%0A%09%09},%0A%09%09%22railway_destroyer_detail3_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 312,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/84c00b63cb0b5a4fcc5b.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_destroyer_detail3_img.png%22%0A%09%09},%0A%09%09%22railway_destroyer_error_extinction_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 400,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/ce383b83c30d0f045975.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_destroyer_error_extinction_img.png%22%0A%09%09},%0A%09%09%22railway_destroyer_error_no_edge_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 398,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/c4d2aff113a22199cd2b.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_destroyer_error_no_edge_img.png%22%0A%09%09},%0A%09%09%22railway_destroyer_error_no_terminal_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 400,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/bbe3e4187aff4860d031.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_destroyer_error_no_terminal_img.png%22%0A%09%09},%0A%09%09%22railway_destroyer_guide_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 750,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/767b0ceef575cd9da43b.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_destroyer_guide_img.png%22%0A%09%09},%0A%09%09%22railway_destroyer_ok_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 84,%0A%09%09%09%22height%22: 54,%0A%09%09%09%22path%22: %22files/41de1bab0bc95add6d4a.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_destroyer_ok_img.png%22%0A%09%09},%0A%09%09%22railway_destroyer_title_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 354,%0A%09%09%09%22height%22: 48,%0A%09%09%09%22path%22: %22files/a92157380628113d3d00.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_destroyer_title_img.png%22%0A%09%09},%0A%09%09%22coupon_glyphs%22: {%0A%09%09%09%22type%22: %22text%22,%0A%09%09%09%22path%22: %22files/724a122f4255be2ee580.json%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22text/coupon_glyphs.json%22%0A%09%09},%0A%09%09%22railway_destroyer_wait_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 138,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/b922732751c2848e5274.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/railway_destroyer_wait_img.png%22%0A%09%09},%0A%09%09%22rollback_wait_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 182,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/40a7f0087dd910ef5732.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/rollback_wait_img.png%22%0A%09%09},%0A%09%09%22coupon_estimation_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 190,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/b407f6061a9cd4ac0bb2.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/coupon_estimation_img.png%22%0A%09%09},%0A%09%09%22station_booster_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/415ef4be95ac25046d48.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/station_booster_model.js%22%0A%09%09},%0A%09%09%22station_upgrader_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/0e795ac0a99d5209f610.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/station_upgrader_model.js%22%0A%09%09},%0A%09%09%22station_booster_error_no_station_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 332,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/ccdfeec1d36cef62d6a7.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/station_booster_error_no_station_img.png%22%0A%09%09},%0A%09%09%22station_upgrade_error_no_station_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 332,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/3fc9d21688c1b0119755.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/station_upgrade_error_no_station_img.png%22%0A%09%09},%0A%09%09%22mult_iplay_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/dc6a157aa8ebb546cd02.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/mult_iplay_event.js%22%0A%09%09},%0A%09%09%22alert_full_platform_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 100,%0A%09%09%09%22height%22: 500,%0A%09%09%09%22path%22: %22files/4726cd7d5ea8bcebc97d.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/alert_full_platform_img.png%22%0A%09%09},%0A%09%09%22alert_no_train_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 100,%0A%09%09%09%22height%22: 500,%0A%09%09%09%22path%22: %22files/04dbf09de8f53da5ee99.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/alert_no_train_img.png%22%0A%09%09},%0A%09%09%22tips_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/58c9442888eba156ec46.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/tips_view.js%22%0A%09%09},%0A%09%09%22submit_square_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 492,%0A%09%09%09%22height%22: 820,%0A%09%09%09%22path%22: %22files/10c0e744f8545e4faae8.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/submit_square_img.png%22%0A%09%09},%0A%09%09%22tips_active_suspension_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/2e44e8c1a169032f2a4f.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_active_suspension_img.png%22%0A%09%09},%0A%09%09%22tips_charge_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/b00c8a39264128bd0cc1.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_charge_img.png%22%0A%09%09},%0A%09%09%22tips_effect_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/33caefb5996101553273.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_effect_img.png%22%0A%09%09},%0A%09%09%22tips_full_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/6b499a162721b2f2c620.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_full_img.png%22%0A%09%09},%0A%09%09%22tips_full_platform_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/6afbc1ce088c67120833.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_full_platform_img.png%22%0A%09%09},%0A%09%09%22tips_gate_crowded_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/920d238084e9b0e17e67.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_gate_crowded_img.png%22%0A%09%09},%0A%09%09%22tips_gating_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/619fdc7d26bb1ed2dca3.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_gating_img.png%22%0A%09%09},%0A%09%09%22tips_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 560,%0A%09%09%09%22height%22: 140,%0A%09%09%09%22path%22: %22files/e49325517482b07f6ab9.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_img.png%22%0A%09%09},%0A%09%09%22tips_no_train_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/aee47b3bc3b5560467bc.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_no_train_img.png%22%0A%09%09},%0A%09%09%22tips_passive_suspension_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/ff8aa0e41e887bc369f9.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_passive_suspension_img.png%22%0A%09%09},%0A%09%09%22tips_pusher_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/3c35959e8e0c8b75984d.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_pusher_img.png%22%0A%09%09},%0A%09%09%22tips_ride_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/d2c30aded6c37eecaa62.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_ride_img.png%22%0A%09%09},%0A%09%09%22tips_train_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/bf0288f987b3935bc7bb.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_train_img.png%22%0A%09%09},%0A%09%09%22tips_upgrade_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/d916723198e5ffdf814b.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_upgrade_img.png%22%0A%09%09},%0A%09%09%22graph_fader_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 50,%0A%09%09%09%22height%22: 215,%0A%09%09%09%22path%22: %22files/2228d6754cf4ca32ab2a.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/graph_fader_img.png%22%0A%09%09},%0A%09%09%22ranking_fader_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 50,%0A%09%09%09%22path%22: %22files/d690453d61484b8f40a8.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/ranking_fader_img.png%22%0A%09%09},%0A%09%09%22advisor_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/878b40a8f97d48757572.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/advisor_handler.js%22%0A%09%09},%0A%09%09%22advisor_model%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/7bf659c2840ae0204118.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/models/advisor_model.js%22%0A%09%09},%0A%09%09%22advisor_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/9292fff3f19ce68c7330.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/advisor_view.js%22%0A%09%09},%0A%09%09%22pointer_circle_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 750,%0A%09%09%09%22height%22: 50,%0A%09%09%09%22path%22: %22files/be184f50f70047cdb02b.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/pointer_circle_img.png%22%0A%09%09},%0A%09%09%22pointer_rect_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 750,%0A%09%09%09%22height%22: 50,%0A%09%09%09%22path%22: %22files/b08fd51edb667a424f63.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/pointer_rect_img.png%22%0A%09%09},%0A%09%09%22advise_train_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 246,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/57615192226784084b73.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/advise_train_img.png%22%0A%09%09},%0A%09%09%22reject_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 3000,%0A%09%09%09%22height%22: 400,%0A%09%09%09%22path%22: %22files/feff1c13104280c6782f.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/reject_img.png%22%0A%09%09},%0A%09%09%22advise_station_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 202,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/30909d07735f0d367dc9.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/advise_station_img.png%22%0A%09%09},%0A%09%09%22advise_upgrade_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 532,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/0d57196d75458077138c.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/advise_upgrade_img.png%22%0A%09%09},%0A%09%09%22recommend_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 114,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/f380f942dfb17f3912ec.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/recommend_img.png%22%0A%09%09},%0A%09%09%22tips_train_reject_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/ffbbedfa59acca824db5.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_train_reject_img.png%22%0A%09%09},%0A%09%09%22tips_gate_upgrade_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/1357fe062ee15ba8c5e8.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_gate_upgrade_img.png%22%0A%09%09},%0A%09%09%22tips_staff_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/eb085e7b776403aa4fbc.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_staff_img.png%22%0A%09%09},%0A%09%09%22pointer_large_circle_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 1500,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/13177aa2b896518ec16e.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/pointer_large_circle_img.png%22%0A%09%09},%0A%09%09%22balloon_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 1500,%0A%09%09%09%22height%22: 75,%0A%09%09%09%22path%22: %22files/ad2c2a9cda7fe443d171.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/balloon_img.png%22%0A%09%09},%0A%09%09%22balloon_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/89980e930e750eb9a1ab.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/balloon_view.js%22%0A%09%09},%0A%09%09%22penalty_rate_modal_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 300,%0A%09%09%09%22height%22: 70,%0A%09%09%09%22path%22: %22files/d8e210462c922c0d3564.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/penalty_rate_modal_img.png%22%0A%09%09},%0A%09%09%22tutorial_company_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 52,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/bf7fbbb73a8aa0cc1f3a.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tutorial_company_img.png%22%0A%09%09},%0A%09%09%22tutorial_residence_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 52,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/34fb60e2fa8b4c51fd64.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tutorial_residence_img.png%22%0A%09%09},%0A%09%09%22tutorial_step1_1_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 205,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/8fb879135b0c71840de4.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tutorial_step1_1_img.png%22%0A%09%09},%0A%09%09%22tutorial_step1_rail_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 300,%0A%09%09%09%22height%22: 75,%0A%09%09%09%22path%22: %22files/6779f40e1c102c0cb181.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tutorial_step1_rail_img.png%22%0A%09%09},%0A%09%09%22tutorial_step2_2_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 181,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/3dd87bf10e7c235fe020.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tutorial_step2_2_img.png%22%0A%09%09},%0A%09%09%22tutorial_step2_action_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 138,%0A%09%09%09%22height%22: 228,%0A%09%09%09%22path%22: %22files/95b040f51d6d5d93db9e.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tutorial_step2_action_img.png%22%0A%09%09},%0A%09%09%22tutorial_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/8b4658d6940aba2dca19.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/tutorial_handler.js%22%0A%09%09},%0A%09%09%22tutorial_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/60697977400a7f8e21b3.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/tutorial_view.js%22%0A%09%09},%0A%09%09%22tutorial_step1_arrow_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 300,%0A%09%09%09%22height%22: 50,%0A%09%09%09%22path%22: %22files/4f8ae707899d58a76c13.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tutorial_step1_arrow_img.png%22%0A%09%09},%0A%09%09%22tutorial_step1_2_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 157,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/4effc7539aa7d30b84db.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tutorial_step1_2_img.png%22%0A%09%09},%0A%09%09%22tutorial_step2_1_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 229,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/c81fdd09adaf3a41f43d.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tutorial_step2_1_img.png%22%0A%09%09},%0A%09%09%22tutorial_step1_3_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 205,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/c3b1a4d663d08544677c.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tutorial_step1_3_img.png%22%0A%09%09},%0A%09%09%22tutorial_step2_3_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 226,%0A%09%09%09%22height%22: 34,%0A%09%09%09%22path%22: %22files/ce7052be14ec497c8d59.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tutorial_step2_3_img.png%22%0A%09%09},%0A%09%09%22advise_gate_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 598,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/86b6ecb151dfd832e654.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/advise_gate_img.png%22%0A%09%09},%0A%09%09%22alert_full_gate_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 100,%0A%09%09%09%22height%22: 500,%0A%09%09%09%22path%22: %22files/38f078d72788c478c400.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/alert_full_gate_img.png%22%0A%09%09},%0A%09%09%22tips_full_gate_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 520,%0A%09%09%09%22height%22: 100,%0A%09%09%09%22path%22: %22files/c57d24c81d8407bc666d.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tips_full_gate_img.png%22%0A%09%09},%0A%09%09%22station_upgrade_error_top_level_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 290,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/efc38709af8f0297d6e8.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/station_upgrade_error_top_level_img.png%22%0A%09%09},%0A%09%09%22chat_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/fd81c527037769ef284c.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/chat_event.js%22%0A%09%09},%0A%09%09%22chat_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/256d04faa21b61a29d80.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/chat_handler.js%22%0A%09%09},%0A%09%09%22chat_inserter_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/fa51b214a62203388188.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/chat_inserter_handler.js%22%0A%09%09},%0A%09%09%22game_observer_tooltip_scene%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/fdf6590c1585bb4ca805.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/scenes/game_observer_tooltip_scene.js%22%0A%09%09},%0A%09%09%22chat_inserter_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/0a5aaff71dd07ecea6d1.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/chat_inserter_view.js%22%0A%09%09},%0A%09%09%22chat_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/c0694dcdf485d5d8b875.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/chat_view.js%22%0A%09%09},%0A%09%09%22tooltips_observer_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/e3988bf2aceea6317c7b.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/tooltips_observer_view.js%22%0A%09%09},%0A%09%09%22chat_description_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 246,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/696a01ac89cea0eda481.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/chat_description_img.png%22%0A%09%09},%0A%09%09%22chat_discovery_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 300,%0A%09%09%09%22height%22: 60,%0A%09%09%09%22path%22: %22files/442d092dd17c6f2a7c9e.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/chat_discovery_img.png%22%0A%09%09},%0A%09%09%22chat_error_cooldown_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 268,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/6814674df24e8bd331e7.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/chat_error_cooldown_img.png%22%0A%09%09},%0A%09%09%22chat_fedup_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 300,%0A%09%09%09%22height%22: 60,%0A%09%09%09%22path%22: %22files/c8188d7d60b0f60e2334.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/chat_fedup_img.png%22%0A%09%09},%0A%09%09%22chat_good_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 300,%0A%09%09%09%22height%22: 60,%0A%09%09%09%22path%22: %22files/05e2e288f868817fcefe.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/chat_good_img.png%22%0A%09%09},%0A%09%09%22chat_guide_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 618,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/5c7299a9c553f2d9ef56.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/chat_guide_img.png%22%0A%09%09},%0A%09%09%22chat_wait_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 270,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/f2358e561e134e7652d0.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/chat_wait_img.png%22%0A%09%09},%0A%09%09%22chat_whatsthis_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 130,%0A%09%09%09%22height%22: 27,%0A%09%09%09%22path%22: %22files/90a6cd9fe1d4936d558f.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/chat_whatsthis_img.png%22%0A%09%09},%0A%09%09%22tooltip_chat_discovery_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 175,%0A%09%09%09%22height%22: 80,%0A%09%09%09%22path%22: %22files/a3018d4ec0df4c890499.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tooltip_chat_discovery_img.png%22%0A%09%09},%0A%09%09%22tooltip_chat_fedup_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 175,%0A%09%09%09%22height%22: 80,%0A%09%09%09%22path%22: %22files/46027349222c4c3cc2cb.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tooltip_chat_fedup_img.png%22%0A%09%09},%0A%09%09%22tooltip_chat_good_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 175,%0A%09%09%09%22height%22: 80,%0A%09%09%09%22path%22: %22files/793950367ffef2719934.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/tooltip_chat_good_img.png%22%0A%09%09},%0A%09%09%22fast_forward_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 800,%0A%09%09%09%22height%22: 200,%0A%09%09%09%22path%22: %22files/1f578f8da999d218de81.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/fast_forward_img.png%22%0A%09%09},%0A%09%09%22fast_forward_handler%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/4a1b93c1ae602b85c568.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/handlers/fast_forward_handler.js%22%0A%09%09},%0A%09%09%22fast_forward_view%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/0d1a97480b45be8725cc.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/view/fast_forward_view.js%22%0A%09%09},%0A%09%09%22nc151497%22: {%0A%09%09%09%22type%22: %22audio%22,%0A%09%09%09%22path%22: %22files/653468ae60fea47d2076%22,%0A%09%09%09%22systemId%22: %22sound%22,%0A%09%09%09%22duration%22: 1557,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22audio/nc151497%22%0A%09%09},%0A%09%09%22alert_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 50,%0A%09%09%09%22height%22: 50,%0A%09%09%09%22path%22: %22files/3092689bed9c92d76970.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/alert_img.png%22%0A%09%09},%0A%09%09%22resolve_name_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 94,%0A%09%09%09%22height%22: 42,%0A%09%09%09%22path%22: %22files/4a91e04d81244e926e64.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/resolve_name_img.png%22%0A%09%09},%0A%09%09%22start_game_error_user_name_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 312,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/af62698addc32189e63f.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/start_game_error_user_name_img.png%22%0A%09%09},%0A%09%09%22resolve_name_error_img%22: {%0A%09%09%09%22type%22: %22image%22,%0A%09%09%09%22width%22: 312,%0A%09%09%09%22height%22: 31,%0A%09%09%09%22path%22: %22files/42e239f7d32985902739.png%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22image/resolve_name_error_img.png%22%0A%09%09},%0A%09%09%22resolve_name_event%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22path%22: %22files/191c5c2ffce00b5aba99.js%22,%0A%09%09%09%22global%22: true,%0A%09%09%09%22virtualPath%22: %22script/events/resolve_name_event.js%22%0A%09%09},%0A%09%09%22a_e_z_0%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22virtualPath%22: %22node_modules/@akashic-extension/akashic-hover-plugin/lib/Converter.js%22,%0A%09%09%09%22path%22: %22files/02b086419153ca8815d3.js%22,%0A%09%09%09%22global%22: true%0A%09%09},%0A%09%09%22a_e_z_2%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22virtualPath%22: %22node_modules/@akashic-extension/akashic-hover-plugin/lib/index.js%22,%0A%09%09%09%22path%22: %22files/e495008e90fbf9907b7d.js%22,%0A%09%09%09%22global%22: true%0A%09%09},%0A%09%09%22a_e_z_3%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22virtualPath%22: %22node_modules/@akashic-extension/akashic-label/lib/DefaultRubyParser.js%22,%0A%09%09%09%22path%22: %22files/5ca3e0f76f4c8d5a4c2d.js%22,%0A%09%09%09%22global%22: true%0A%09%09},%0A%09%09%22a_e_z_4%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22virtualPath%22: %22node_modules/@akashic-extension/akashic-label/lib/FragmentDrawInfo.js%22,%0A%09%09%09%22path%22: %22files/b3d7e16f3880a06f8cba.js%22,%0A%09%09%09%22global%22: true%0A%09%09},%0A%09%09%22a_e_z_5%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22virtualPath%22: %22node_modules/@akashic-extension/akashic-label/lib/Label.js%22,%0A%09%09%09%22path%22: %22files/a9e42080a473e9994132.js%22,%0A%09%09%09%22global%22: true%0A%09%09},%0A%09%09%22a_e_z_6%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22virtualPath%22: %22node_modules/@akashic-extension/akashic-label/lib/RubyParser.js%22,%0A%09%09%09%22path%22: %22files/ef280c38139b1cd8ade0.js%22,%0A%09%09%09%22global%22: true%0A%09%09},%0A%09%09%22a_e_z_7%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22virtualPath%22: %22node_modules/@akashic-extension/akashic-label/lib/index.js%22,%0A%09%09%09%22path%22: %22files/62b1bd9a4502ffc92903.js%22,%0A%09%09%09%22global%22: true%0A%09%09},%0A%09%09%22a_e_z_8%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22virtualPath%22: %22node_modules/@akashic-extension/coe-messages/lib/application.js%22,%0A%09%09%09%22path%22: %22files/23ee7e9944031370a0e6.js%22,%0A%09%09%09%22global%22: true%0A%09%09},%0A%09%09%22a_e_z_9%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22virtualPath%22: %22node_modules/@akashic-extension/coe-messages/lib/index.js%22,%0A%09%09%09%22path%22: %22files/b72152a0ab920125b7b3.js%22,%0A%09%09%09%22global%22: true%0A%09%09},%0A%09%09%22a_e_z_10%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22virtualPath%22: %22node_modules/@akashic-extension/coe-messages/lib/messages.js%22,%0A%09%09%09%22path%22: %22files/bc784ecb0bcfd0321356.js%22,%0A%09%09%09%22global%22: true%0A%09%09},%0A%09%09%22a_e_z_11%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22virtualPath%22: %22node_modules/@akashic-extension/coe-messages/lib/session.js%22,%0A%09%09%09%22path%22: %22files/8d8cbf657c76efca2378.js%22,%0A%09%09%09%22global%22: true%0A%09%09},%0A%09%09%22a_e_z_12%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22virtualPath%22: %22node_modules/@akashic-extension/resolve-player-info/lib/FallbackDialog.js%22,%0A%09%09%09%22path%22: %22files/0bf49f6f44a9acbbb08a.js%22,%0A%09%09%09%22global%22: true%0A%09%09},%0A%09%09%22a_e_z_13%22: {%0A%09%09%09%22type%22: %22script%22,%0A%09%09%09%22virtualPath%22: %22node_modules/@akashic-extension/resolve-player-info/lib/index.js%22,%0A%09%09%09%22path%22: %22files/1766cc962084c479743e.js%22,%0A%09%09%09%22global%22: true%0A%09%09}%0A%09},%0A%09%22moduleMainScripts%22: {%0A%09%09%22@akashic-extension/akashic-label%22: %22node_modules/@akashic-extension/akashic-label/lib/index.js%22,%0A%09%09%22@akashic-extension/akashic-hover-plugin%22: %22node_modules/@akashic-extension/akashic-hover-plugin/lib/index.js%22,%0A%09%09%22@akashic-extension/coe-messages%22: %22node_modules/@akashic-extension/coe-messages/lib/index.js%22,%0A%09%09%22@akashic-extension/resolve-player-info%22: %22node_modules/@akashic-extension/resolve-player-info/lib/index.js%22%0A%09},%0A%09%22environment%22: {%0A%09%09%22sandbox-runtime%22: %223%22,%0A%09%09%22niconico%22: {%0A%09%09%09%22supportedModes%22: [%0A%09%09%09%09%22multi_admission%22%0A%09%09%09]%0A%09%09},%0A%09%09%22external%22: {%0A%09%09%09%22coeLimited%22: %220%22,%0A%09%09%09%22atsumaru%22: %220%22%0A%09%09},%0A%09%09%22atsumaru%22: {%0A%09%09%09%22supportedModes%22: [%0A%09%09%09%09%22multi%22%0A%09%09%09]%0A%09%09}%0A%09},%0A%09%22globalScripts%22: [],%0A%09%22operationPlugins%22: [%0A%09%09{%0A%09%09%09%22code%22: 5,%0A%09%09%09%22script%22: %22./node_modules/@akashic-extension/akashic-hover-plugin/lib/HoverPlugin.js%22%0A%09%09}%0A%09]%0A}";



		window.gLocalAssetContainer["main"] = function(g) {
			((e,a)=>{var o=e("./events/mult_iplay_event"),d=e("./models/display_name_model"),r=e("./models/parameters"),t=e("./models/player_model"),u=e("./models/trriger_model"),c=e("./scenes/title_scene");a.exports=function(e){g.game.isActiveInstance()&&null==g.game.selfId&&g.game.raiseEvent(new o.MultiPlayEvent);function a(e){o.isMultiPlayEvent(e)&&(s.fire("multi"),m.onMessage.remove(a),n)&&m.clearTimeout(n)}var n,l=new t.PlayerContainer(g.game.random),i=new d.DisplayNameModel,m=(g.game.onJoin.addOnce(function(e){l.add({id:e.player.id,name:i.name,admin:!0,cpu:!1,self:e.player.id===g.game.selfId}),l.modifyName(0,i.name)}),c.createTitleScene()),s=new u.Trigger;m.onMessage.add(a),n=m.setTimeout(function(){n=null,m.onMessage.remove(a),s.fire("single")},1e3*r.params.interval.modeDefine),c.onLoadTitleScene({scene:m,players:l,displayName:i,onModeDefined:s,isFirstGame:!0}),g.game.pushScene(m)}})((g.module.exports,g.module.require),g.module);
		};



		window.gLocalAssetContainer["parameterObject"] = function(g) {
			(e=>{Object.defineProperty(e,"__esModule",{value:!0})})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["error_event"] = function(g) {
			!function(e){var o,n,t=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.isErrorEvent=e.ErrorEvent=void 0,"ERROR"),t=(n=g.MessageEvent,t(r,n),r.parse=function(t){return e.isErrorEvent(t)?new r(t.data.data,t.player,t.local):null},Object.defineProperty(r.prototype,"message",{get:function(){return this.data.data},enumerable:!1,configurable:!0}),r);function r(t,e,r){return n.call(this,{code:a,data:t},e,r)||this}e.ErrorEvent=t;e.isErrorEvent=function(t){return t.data.code===a}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["join_event"] = function(g) {
			!function(e){var o,n,t=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.isJoinEvent=e.JoinEvent=void 0,"JOIN"),t=(n=g.MessageEvent,t(i,n),i.parse=function(t){return e.isJoinEvent(t)?new i(t.data.data):null},Object.defineProperty(i.prototype,"id",{get:function(){return this.data.data.id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this.data.data.name},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"admin",{get:function(){return this.data.data.admin},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"self",{get:function(){return this.data.data.id===g.game.selfId},enumerable:!1,configurable:!0}),i);function i(t){return n.call(this,{code:r,data:t})||this}e.JoinEvent=t;e.isJoinEvent=function(t){return t.data.code===r}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["leave_event"] = function(g) {
			!function(t){var o,n,e=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.isLeaveEvent=t.LeaveEvent=void 0,"LEAVE"),e=(n=g.MessageEvent,e(a,n),a.parse=function(e){return t.isLeaveEvent(e)?new a(e.data.data):null},Object.defineProperty(a.prototype,"id",{get:function(){return this.data.data},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"self",{get:function(){return this.data.data===g.game.selfId},enumerable:!1,configurable:!0}),a);function a(e){return n.call(this,{code:r,data:e})||this}t.LeaveEvent=e;t.isLeaveEvent=function(e){return e.data.code===r}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["player_model"] = function(g) {
			((e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PlayerContainer=void 0;var t=r("../utils/error"),i=r("./trriger_model");function n(e){this.onJoined=new i.Trigger,this.onLeft=new i.Trigger,this.onFailedAdminAdded=new i.Trigger,this.onFull=new i.Trigger,this.onNameModified=new i.Trigger,this._members=[],this._random=e}n.prototype.add=function(e){this.admin&&e.admin?this.onFailedAdminAdded.fire():this._full?this.onFull.fire():(e={id:e.id,oid:this._members.length,name:e.name,admin:e.admin,cpu:e.cpu,self:e.self},this.onJoined.fire(e),this._members.push(e))},n.prototype.remove=function(e){var r=this._find(e);r?r.admin?t.reportError("PlayerContainer can't remove admin("+e+")."):(this._members.splice(this._members.indexOf(r),1),this._members.forEach(function(e,r){return e.oid=r}),this.onLeft.fire(r)):t.reportError("player("+e+") is already removed.")},n.prototype.name=function(e){return this._members[e].name},n.prototype.modifyName=function(e,r){this._members[e].name=r,this.onNameModified.fire({oid:e,name:r})},n.prototype.shuffle=function(){for(var e=0;e<this._members.length;e++){var r=Math.floor(this._random.generate()*this._members.length),t=Math.floor(this._random.generate()*this._members.length),i=this._members[t];this._members[t]=this._members[r],this._members[r]=i,this._members[r].oid=r,this._members[t].oid=t}},n.prototype._find=function(e){for(var r=0,t=this._members;r<t.length;r++){var i=t[r];if(i.id===e)return i}return null},Object.defineProperty(n.prototype,"admin",{get:function(){for(var e=0;e<this._members.length;e++)if(this._members[e].admin)return this._members[e];return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"num",{get:function(){return this._members.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"self",{get:function(){for(var e=0;e<this._members.length;e++)if(this._members[e].self)return this._members[e];return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_full",{get:function(){return 4<=this._members.length},enumerable:!1,configurable:!0}),e.PlayerContainer=n})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["title_scene"] = function(g) {
			((s,e)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createTitleScene=s.stopTitleScene=s.playTitleScene=s.onLoadTitleScene=void 0;var o=e("../events/error_event"),i=e("../handlers/fast_forward_handler"),r=e("../handlers/title_handler"),c=e("../view/commons_view"),l=e("../view/title_view"),d=e("./game_scene");s.onLoadTitleScene=function(t){t.scene.onLoad.add(function(){var a,e,n;a=t,e=l.createTitleLayer(a.scene),a.scene.append(e),n=new r.TitleHandler({scene:a.scene,layer:e,displayName:a.displayName,model:a.players,numberFont:c.createNumberFont(a.scene)}),a.onModeDefined?a.onModeDefined.add(function(e){"single"===e&&n.singleMode()}):a.singleMode&&n.singleMode(),n.onStarted.add(function(e){s.stopTitleScene(a.scene);var n=d.createGameScene();d.onLoadGameScene({scene:n,singleMode:e.singleMode,displayName:a.displayName,players:a.players}),g.game.replaceScene(n)}),new i.FastForwardHandler({scene:a.scene,ignoreFirstTick:a.isFirstGame}),s.playTitleScene(t.scene),t.scene.onMessage.add(function(e){o.isErrorEvent(e)&&c.onError(t.scene,o.ErrorEvent.parse(e))})})},s.playTitleScene=function(e){e.asset.getAudioById("nc51754").play()},s.stopTitleScene=function(e){e.asset.getAudioById("nc51754").stop()},s.createTitleScene=function(){return new g.Scene({game:g.game,name:"title",assetIds:["hint_key_alpha","hint_key_kana","hint_key_sym","img_key_alpha","img_key_kana","img_key_sym","toKanaLetters","toAlphaLetters","toSymLetters","inputtingLabelBack","backSpaceKey","open","close","notosansFont","notosansGlyph"]})}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["error"] = function(g) {
			((e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reportError=void 0;var o=r("../events/error_event");e.reportError=function(e){g.game.raiseEvent(new o.ErrorEvent(e,{id:g.game.selfId},!0))}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["button"] = function(g) {
			((e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RectangleButton=void 0;var s=i("../models/trriger_model");function d(e){this.onDragged=new s.Trigger,this.onPushed=new s.Trigger,this.onDisabledPushed=new s.Trigger,this._sensor=e.sensor,this._view=e.view,this._pushedView=e.pushed,this._disabledView=e.disabled,this._draggable=e.draggable,this._setup()}d.prototype.show=function(){var e;this._hidden=!1,this._sensor.show(),this._disabled?null!=(e=this._disabledView)&&e.show():(null!=(e=this._disabledView)&&e.hide(),(this._overed?this._pushedView:this._view).show())},d.prototype.hide=function(){var e;this._hidden=!0,this._sensor.hide(),this._view.hide(),this._pushedView.hide(),null!=(e=this._disabledView)&&e.hide()},d.prototype.disable=function(){var e;this._disabled=!0,this._hidden||(this._view.hide(),this._pushedView.hide(),null!=(e=this._disabledView)&&e.show())},d.prototype.enable=function(){var e;this._disabled=!1,this._hidden||((this._overed?this._pushedView:this._view).show(),null!=(e=this._disabledView)&&e.hide())},d.prototype.destroy=function(){var e;this._sensor.destroyed()||this._sensor.destroy(),this._view.destroyed()||this._view.destroy(),this._pushedView.destroyed()||this._pushedView.destroy(),null!=(e=this._disabledView)&&e.destroyed()||null!=(e=this._disabledView)&&e.destroy()},d.prototype.moveBy=function(e,i){var s;this._sensor.moveBy(e,i),this._view.moveBy(e,i),this._pushedView.moveBy(e,i),null!=(s=this._disabledView)&&s.moveBy(e,i),this._sensor.modified(),this._view.modified(),this._pushedView.modified(),null!=(s=this._disabledView)&&s.modified()},d.prototype.moveTo=function(e,i){var s;this._sensor.moveTo(e,i),this._view.moveTo(e,i),this._pushedView.moveTo(e,i),null!=(s=this._disabledView)&&s.moveTo(e,i),this._sensor.modified(),this._view.modified(),this._pushedView.modified(),null!=(s=this._disabledView)&&s.modified()},Object.defineProperty(d.prototype,"enabled",{get:function(){return!this._hidden&&!this._disabled},enumerable:!1,configurable:!0}),d.prototype._setup=function(){var s=this,d=null,t=null,o=!0,h=!1;this._sensor.onPointDown.add(function(e){null===d&&(s._disabled?s.onDisabledPushed.fire():s.enabled&&(s._overed=!0,s._view.hide(),s._pushedView.show(),d=e.pointerId,t={x:s._sensor.x,y:s._sensor.y},o=!0))}),this._sensor.onPointMove.add(function(e){var i;s.enabled&&d===e.pointerId&&(o&&((h||s._draggable&&20<g.Util.distance(0,0,e.startDelta.x,e.startDelta.y))&&(s.moveBy(e.prevDelta.x,e.prevDelta.y),h=!0),s.onDragged.fire({dx:e.prevDelta.x,dy:e.prevDelta.y})),i=e.point.x+e.startDelta.x+t.x-s._sensor.x,e=e.point.y+e.startDelta.y+t.y-s._sensor.y,o=s._overed=0<=i&&i<=s._sensor.width&&0<=e&&e<=s._sensor.height,s._overed?(s._view.hide(),s._pushedView.show()):(s._view.show(),s._pushedView.hide()))}),this._sensor.onPointUp.add(function(e){s.enabled&&d===e.pointerId&&(s._overed&&(s._overed=!1,s._view.show(),s._pushedView.hide(),h||s.onPushed.fire()),d=t=null,h=o=!1)})},e.RectangleButton=d})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["player_view"] = function(g) {
			((t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createStartButton=t.createLeaveButton=t.createJoinButton=t.PlayerTableViewer=t.createBackground=void 0;var i=e("../models/parameters"),n=e("../utils/error"),s=e("./sprite_button"),a=(t.createBackground=function(e){return new g.Sprite({scene:e,width:i.params.view.players[0],height:i.params.view.players[1],src:e.asset.getImageById("players_img")})},r.prototype.destroy=function(){this._nameLabel.destroyed()||this._nameLabel.destroy()},r.prototype.modifyName=function(e){this._name=e,this._nameLabel.text=this._toName(),this._nameLabel.invalidate()},r.prototype._setup=function(){this._nameLabel=new g.Label({scene:this._scene,x:15,y:10,font:this._font,fontSize:this._font.size,text:this._toName()}),this._layer.append(this._nameLabel)},r.prototype._toName=function(){var e=this._name;return this._admin&&(e+=" ()"),this._self&&(e+=" ()"),this._cpu&&(e+=" (CPU)"),e},r);function r(e){this._scene=e.scene,this._layer=e.layer,this._font=e.font,this.id=e.id,this._admin=e.admin,this._self=e.self,this._cpu=e.cpu,this._name=e.name,this._setup()}function o(e){this._children=[],this._views=[],this._scene=e.scene,this._layer=e.layer,this._font=e.font,this._setup()}o.prototype.add=function(e){var t=new g.E({scene:this._scene,x:10,y:24+28*this._views.length});this._layer.append(t),this._children.push(t),this._views.push(new a({scene:this._scene,layer:t,font:this._font,id:e.id,name:e.name,admin:e.admin,self:e.self,cpu:e.cpu}))},o.prototype.modifyName=function(e,t){this._views[e].modifyName(t)},o.prototype.remove=function(e){e>=this._views.length?n.reportError("invalid user index: "+e):(this._views[e].destroy(),this._children[e].destroy(),this._views.splice(e,1),this._children.splice(e,1),this._children.forEach(function(e,t){e.y=24+28*t,e.modified()}))},Object.defineProperty(o.prototype,"full",{get:function(){return 4<=this._views.length},enumerable:!1,configurable:!0}),o.prototype._setup=function(){var e=t.createBackground(this._scene);this._layer.append(e),e.append(new g.FilledRect({scene:this._scene,x:10,y:30,width:e.width-20,height:e.height-40,opacity:.5,cssColor:"#000000"}))},t.PlayerTableViewer=o,t.createJoinButton=function(e){var t=new g.FrameSprite({scene:e.scene,src:e.scene.asset.getImageById("submit_square_img"),width:i.params.view.join[0],height:i.params.view.join[1],frames:[6,7,8]});return e.layer.append(t),new s.SpriteButton({scene:e.scene,layer:e.layer,sprite:t,label:"join_game_img",downRate:.1})},t.createLeaveButton=function(e){var t=new g.FrameSprite({scene:e.scene,src:e.scene.asset.getImageById("submit_square_img"),width:i.params.view.join[0],height:i.params.view.join[1],frames:[0,1,2]});return e.layer.append(t),new s.SpriteButton({scene:e.scene,layer:e.layer,sprite:t,label:"leave_game_img",downRate:.1})},t.createStartButton=function(e){var t=new g.FrameSprite({scene:e.scene,src:e.scene.asset.getImageById("submit_square_img"),width:i.params.view.join[0],height:i.params.view.join[1],frames:[3,4,5]});return e.layer.append(t),new s.SpriteButton({scene:e.scene,layer:e.layer,sprite:t,label:"start_game_img",downRate:.1})}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["title_view"] = function(g) {
			((n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TitleView=n.createReady=n.createTips=n.createName=n.createBackground=n.createTitleLayer=void 0;var s=e("../events/join_event"),a=e("../events/leave_event"),r=e("../models/parameters"),i=e("../models/trriger_model"),t=e("../scenes/game_scene"),h=e("./admin_confirm_view"),o=e("./commons_view"),_=e("./display_name_view"),d=e("./effect"),l=e("./play_guide_view"),c=e("./player_view"),p=e("./sandbox_view"),m=e("./tips_view"),e=(n.createTitleLayer=function(e){return new g.E({scene:e,width:g.game.width,height:g.game.height})},n.createBackground=function(e,i){return new g.Sprite({scene:e,src:e.asset.getImageById("title_background_img"),width:i.width,height:i.height,opacity:.5})},n.createName=function(e){return new g.Sprite({scene:e,x:g.game.width/2,y:10,anchorX:.5,src:e.asset.getImageById("title_name_img")})},n.createTips=function(e){return new g.Sprite({scene:e,src:e.asset.getImageById("tips_img")})},n.createReady=function(e,i){return new g.Sprite({scene:e,src:e.asset.getImageById("ready_img"),x:i.width/2,y:i.height/2,anchorX:.5,anchorY:.5})},y.prototype.join=function(e){var i;this._players.add(e),e.admin?this._joinAdmin(e.self):(e.self&&(this._join.hide(),this._leave.show(),this._joined=!0),this._players.full&&(this._joined||(null!=(i=this._join)&&i.hide(),null!=(i=this._full)&&i.show()),this._admin)&&!e.cpu&&(d.flashLabel({scene:this._scene,layer:this._layer,asset:"full_joined_img",x:58,y:90}),t.playEffect(this._scene)))},y.prototype.leave=function(e){this._players.remove(e.oid),e.self&&(this._leave.hide(),this._joined=!1),null!=(e=this._join)&&e.show(),null!=(e=this._full)&&e.hide()},y.prototype.singleMode=function(){var e=this;this._nameInput.enable(),this._start.onPushed.add(function(){e._confirm.hide(),e.onStarted.fire()})},y.prototype.enableDisplayName=function(){this._nameInput.enable()},y.prototype.modifyDisplayName=function(e){this._nameInput.modify(e)},y.prototype.modifyEntry=function(e,i){this._players.modifyName(e,i)},y.prototype.warnFailedAdminAdded=function(){d.flashLabel({scene:this._scene,layer:this._layer,asset:"title_error_admin_img",x:58,y:90})},y.prototype.warnFull=function(){d.flashLabel({scene:this._scene,layer:this._layer,asset:"title_error_join_img",x:58,y:90})},y.prototype.warnResolveError=function(){d.flashLabel({scene:this._scene,layer:this._layer,asset:"resolve_name_error_img"})},y.prototype._setup=function(e){var i=this,t=n.createBackground(this._scene,this._layer),t=(this._layer.append(t),this._layer.append(n.createName(this._scene)),new g.E({scene:this._scene,x:58,y:118,width:r.params.view.name[0],height:r.params.view.name[1]})),t=(this._layer.append(t),this._nameInput=new _.DisplayNameView({scene:this._scene,layer:t,initialName:e}),this._nameInput.onResolved.add(function(){return i.onDisplayNameResolved.fire(i._nameInput.displayName)}),this._nameInput.onModified.add(function(){return i.onDisplayNameModified.fire(i._nameInput.displayName)}),new g.E({scene:this._scene,x:58,y:210,width:r.params.view.playguide[0],height:r.params.view.playguide[1]})),e=(this._layer.append(t),t.append(l.createPlayGuide({scene:this._scene,layer:t})),new g.E({scene:this._scene,x:662,y:292,width:r.params.view.sandbox[0],height:r.params.view.sandbox[1]})),t=(this._layer.append(e),new p.SandboxView({scene:this._scene,layer:e,numberFont:this._numberFont}),new g.E({scene:this._scene,x:662,y:118,width:r.params.view.players[0],height:r.params.view.players[1]})),e=(this._layer.append(t),this._players=new c.PlayerTableViewer({scene:this._scene,layer:t,font:o.createFont(24,"#ffffff")}),this._wait=new g.E({scene:this._scene,x:1058,y:118,width:r.params.view.join[0],height:r.params.view.join[1]}),this._layer.append(this._wait),this._wait.append(n.createReady(this._scene,this._wait)),new g.E({scene:this._scene,x:58,y:550,width:r.params.view.tips[0],height:r.params.view.tips[1]})),t=(this._layer.append(e),e.append(n.createTips(this._scene)),new g.E({scene:this._scene,x:20,y:20,width:e.width-40,height:e.height-40}));e.append(t),new m.TipsView({scene:this._scene,layer:t})},y.prototype._setupButton=function(){var e,i=this,t=new g.E({scene:this._scene,x:1058,y:118,width:r.params.view.join[0],height:r.params.view.join[1]});this._layer.append(t),this._admin?(e=new g.E({scene:this._scene,width:g.game.width,height:g.game.height}),this._layer.append(e),this._confirm=new h.AdminConfirmView({scene:this._scene,layer:e,oid:0,text:"start_game_confirm_img"}),this._confirm.hide(),this._confirm.onSubmit.add(function(){i._confirm.disable(),i.onStarted.fire()}),this._confirm.onCanceled.add(function(){i._confirm.hide(),i._start.enable()}),this._start=c.createStartButton({scene:this._scene,layer:t}),this._start.onPushed.add(function(){i._start.disable(),i._confirm.show()})):(this._join=c.createJoinButton({scene:this._scene,layer:t}),this._join.onPushed.add(function(){i._join.disable(),i.onJoined.fire(i._nameInput.displayName)}),this._leave=c.createLeaveButton({scene:this._scene,layer:t}),this._leave.hide(),this._leave.onPushed.add(function(){i._leave.disable(),i.onLeft.fire()}),this._full=new g.E({scene:this._scene,x:1058,y:118,width:r.params.view.join[0],height:r.params.view.join[1],hidden:!0}),this._layer.append(this._full),this._full.append(new g.Sprite({scene:this._scene,src:this._scene.asset.getImageById("full_img"),x:this._full.width/2,y:this._full.height/2,anchorX:.5,anchorY:.5}))),this._scene.onMessage.add(function(e){s.isJoinEvent(e)&&s.JoinEvent.parse(e).self&&i._join.enable(),a.isLeaveEvent(e)&&a.LeaveEvent.parse(e).self&&i._leave.enable()})},y.prototype._joinAdmin=function(e){this._admin=e,this._wait.hide(),this._setupButton()},y);function y(e){this.onStarted=new i.Trigger,this.onJoined=new i.Trigger,this.onLeft=new i.Trigger,this.onDisplayNameModified=new i.Trigger,this.onDisplayNameResolved=new i.Trigger,this._scene=e.scene,this._layer=e.layer,this._numberFont=e.numberFont,this._setup(e.initialName)}n.TitleView=e})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["start_event"] = function(g) {
			!function(e){var o,t,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.isStartEvent=e.StartEvent=void 0,"START_GAME"),n=(t=g.MessageEvent,n(u,t),u.parse=function(t){return e.isStartEvent(t)?new u:null},u);function u(){return t.call(this,{code:r,data:null})||this}e.StartEvent=n;e.isStartEvent=function(t){return t.data.code===r}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["game_scene"] = function(g) {
			((w,e)=>{Object.defineProperty(w,"__esModule",{value:!0}),w.createGameScene=w.onLoadGameScene=w.playTooExpensive=w.playUnlimit=w.playEffect=w.stopCountDown=w.playCountDown=w.createGameSceneHandlers=void 0;var F=e("../events/error_event"),_=e("../handlers/countdown_handler"),v=e("../handlers/fast_forward_handler"),L=e("../handlers/gamemap_handler"),s=e("../models/gamemap_model"),G=e("../models/parameters"),c=e("../models/penalty_model"),l=e("../models/route_finder_model"),d=e("../models/scorer_model"),p=e("../models/transport_finder_model"),M=e("../models/trriger_model"),D=e("../view/commons_view"),S=e("../view/gamemap_view"),h=e("./game_header_scene"),C=e("./game_init_scene"),m=e("./game_single_scene"),E=e("./game_tooltip_scene");w.createGameSceneHandlers=function(n){n.scene.onMessage.add(function(e){F.isErrorEvent(e)&&D.onError(n.scene,F.ErrorEvent.parse(e))});for(var a=D.createGameLayer(n.scene),o=(n.scene.append(a),D.createGameLayer(n.scene)),e=(n.scene.append(o),D.createGameLayer(n.scene)),r=(n.scene.append(e),e.append(S.createFrame(n.scene,e)),D.createGameLayer(n.scene)),t=(n.scene.append(r),D.createGameLayer(n.scene)),s=(n.scene.append(t),D.createNoticeLayer(n.scene)),c=(n.scene.append(s),D.createGameLayer(n.scene)),l=(n.scene.append(c),E.createRightLayer(n.scene)),d=(n.scene.append(l),new S.GameMapView({scene:n.scene,layer:e,oid:null==(d=n.players.self)?void 0:d.oid,random:g.game.random})),p=new L.GameMapHandler({model:n.gm,view:d,scene:n.scene,layer:e,scorer:n.scorer,rf:n.rf,tf:n.tf}),m=(n.scene.onMessage.add(function(e){p.onMessage(e)}),[]),i=0;i<n.players.num;i++)m.push(D.createPlayerFont(n.scene,i));var y,d=D.createMyFont(n.scene,null==(d=n.players.self)?void 0:d.oid),u=new _.CountDownHandler({scene:n.scene,layer:e,countDownFont:n.countDownFont,last:"START!",opacity:1,count:G.params.interval.start}),f=new M.Trigger;u.onCompleted.add(function(){var e;w.stopCountDown(n.scene),p.start(),f.fire(),C.onGameStarted({scene:n.scene,territoryLayer:a,backgroundLayer:o,chatLayer:r,penaltyLayer:t,noticeLayer:s,tutorialLayer:c,tutorialGuideLayer:l,inputFont:n.inputFont,numberFont:n.numberFont,couponFont:n.couponFont,countDownFont:n.countDownFont,playerFonts:m,oid:null==(e=n.players.self)?void 0:e.oid,scorer:n.scorer,penalty:n.penalty,gm:n.gm,rf:n.rf,tf:n.tf}),y.forgrand()}),n.scene.append(h.createHeader({scene:n.scene,gameLayer:e,numberFont:n.numberFont,playerFonts:m,myFont:d,couponFont:n.couponFont,self:n.players.self,num:n.players.num,singleMode:n.singleMode,rf:n.rf,tf:n.tf,scorer:n.scorer,gm:n.gm,players:n.players,displayName:n.displayName,onStarted:f})),n.scene.append(C.createDisplayName({scene:n.scene,layer:e,players:n.players})),y=new v.FastForwardHandler({scene:n.scene,ignoreFirstTick:!1}),w.playCountDown(n.scene)},w.playCountDown=function(e){e.asset.getAudioById("nc177318").play()},w.stopCountDown=function(e){e.asset.getAudioById("nc177318").stop()},w.playEffect=function(e){e.asset.getAudioById("nc152926").play()},w.playUnlimit=function(e){e.asset.getAudioById("nc194712").play()},w.playTooExpensive=function(e){e.asset.getAudioById("nc63801").play()},w.onLoadGameScene=function(t){t.scene.onLoad.add(function(){t.singleMode||t.players.shuffle();var e=new d.ScorerModel(t.players.num),n=new c.PenaltyModel(t.players.num),a=new l.RouteFinder,o=new p.TransportFinder(n),r=new s.GameMapModel(a,o,n,t.players.num,g.game.random);t.singleMode&&m.runAsSingleMode(t.scene,r,t.players.self.oid),w.createGameSceneHandlers({scene:t.scene,singleMode:t.singleMode,scorer:e,penalty:n,rf:a,tf:o,gm:r,displayName:t.displayName,players:t.players,numberFont:D.createNumberFont(t.scene),inputFont:D.createInputFont(),couponFont:D.createCouponFont(t.scene),countDownFont:D.createCountDownFont(t.scene)})})},w.createGameScene=function(){return new g.Scene({game:g.game,name:"game"})}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["rail_builder_model"] = function(g) {
			!function(t,r){var e,i=this&&this.__extends||(e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,r){t.__proto__=r}:function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}))(t,r)},function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.BranchRailwayBuilderModel=t.RailwayBuilderModel=t.RailwayBuilderBase=void 0,r("../utils/error")),a=r("./parameters"),o=r("./trriger_model"),r=(s.prototype.extend=function(t,r){var i,e;this._drawing?this._isOutBoundTerritory(t,r)?this.onOutBound.fire():(i=this._tail(),(i=g.Util.distance(i.x,i.y,t,r))<a.params.ui.distance.rail||(e=((t,r,i)=>{for(var e=0,n=Math.ceil(2*t/(a.params.speed.train/3*a.params.threshold.ride)),o=0;o<n;o++)e+=o*a.params.cost.train.increment+i.getTrainCost(r);return{recommend:n,cost:e}})(this._railwayLength+i,this._oid,this._scorer),(this._railwayLength+i)*a.params.cost.rail+this._stationNum*a.params.cost.station+e.cost>this._scorer.get(this._oid)?this.onExpensive.fire():(this._nodes.push({x:t,y:r}),this._railwayLength+=i,t=this._trainCost,this._trainCost=e.cost,this._trainNum=e.recommend,this._fireExtended(this._trainCost-t)))):n.reportError("RailBuilderModel.extend is not started.")},s.prototype.end=function(){this._drawing?this._nodes.length<=1?(this._drawing=!1,this.clear(),this.onNoEdge.fire()):(this._drawing=!1,this._fireEnded()):n.reportError("RailBuilderModel.end is not started.")},s.prototype.clear=function(){this._nodes.splice(0,this._nodes.length)},s.prototype._isOutBoundTerritory=function(t,r){return!(this._territory.x<=t&&t<=this._territory.x+this._territory.width&&this._territory.y<=r&&r<=this._territory.y+this._territory.height)},s.prototype._tail=function(){return this._nodes[this._nodes.length-1]},s.prototype._pretail=function(){return this._nodes[this._nodes.length-2]},s.prototype._bounds=function(){var r={x:Number.MAX_VALUE,y:Number.MAX_VALUE},i={x:Number.MIN_VALUE,y:Number.MIN_VALUE};return this._nodes.forEach(function(t){t.x<r.x&&(r.x=t.x),t.y<r.y&&(r.y=t.y),i.x<t.x&&(i.x=t.x),i.y<t.y&&(i.y=t.y)}),{x:r.x,y:r.y,width:i.x-r.x,height:i.y-r.y}},s.prototype._construction=function(){var t,r;return 2===this._nodes.length?"mark":(t=this._pretail(),r=this._tail(),t=this._railwayLength-g.Util.distance(t.x,t.y,r.x,r.y),Math.floor(t/a.params.distance.construction)!==(r=Math.floor(this._railwayLength/a.params.distance.construction))?r%2?"sign":"mark":"none")},s.prototype._fireExtended=function(t){var r=this._pretail(),i=this._tail();this.onExtended.fire({from:r,to:i,cost:g.Util.distance(r.x,r.y,i.x,i.y)*a.params.cost.rail+t,construction:this._construction()})},s.prototype._fireEnded=function(){this.onEnded.fire({nodes:this._nodes,bounds:this._bounds(),estimated:this._railwayLength*a.params.cost.rail+this._stationNum*a.params.cost.station+this._trainCost,railLength:this._railwayLength,trainNum:this._trainNum})},s);function s(t){this._nodes=[],this.onNoEdge=new o.Trigger,this.onOutBound=new o.Trigger,this.onExpensive=new o.Trigger,this.onExtended=new o.Trigger,this.onEnded=new o.Trigger,this._stationNum=1,this._railwayLength=0,this._trainCost=a.params.cost.train.initial,this._trainNum=1,this._oid=t.oid,this._territory=t.territory,this._scorer=t.scorer}t.RailwayBuilderBase=r;i(_,h=r),_.prototype.start=function(t,r){this._drawing?n.reportError("RailBuilderModel was already started."):(this._isOutBoundTerritory(t,r)?this.onOutStarted:(this._nodes.push({x:t,y:r}),this._stationNum=2,this._railwayLength=0,this._drawing=!0,this._trainCost=this._scorer.getTrainCost(this._oid),this.onStarted)).fire()};var h,d=_;function _(){var t=null!==h&&h.apply(this,arguments)||this;return t.onOutStarted=new o.Trigger,t.onStarted=new o.Trigger,t}t.RailwayBuilderModel=d;i(u,c=r),u.prototype.import=function(t){this._base=t},u.prototype.branch=function(t,r){this._base?this._drawing?n.reportError("RailBuilderModel was already started."):(t=this._findBranch(t,r))?(this._railwayLength=0,this._drawing=!0,this._branched=t,this._trainCost=this._scorer.getTrainCost(this._oid),this.onBranched.fire(t)):this.onNoStation.fire():n.reportError("No data for branch is loaded.")},u.prototype.clear=function(){c.prototype.clear.call(this),this._branched=null},Object.defineProperty(u.prototype,"branched",{get:function(){return this._branched},enumerable:!1,configurable:!0}),u.prototype._tail=function(){return 0===this._nodes.length?this._branched:this._nodes[this._nodes.length-1]},u.prototype._pretail=function(){return 1===this._nodes.length?this._branched:this._nodes[this._nodes.length-2]},u.prototype._bounds=function(){var t=c.prototype._bounds.call(this);return this._branched.x<t.x&&(t.x=this._branched.x),this._branched.y<t.y&&(t.y=this._branched.y),this._branched.x>t.x+t.width&&(t.width=this._branched.x-t.x),this._branched.y>t.y+t.height&&(t.height=this._branched.y-t.y),t},u.prototype._findBranch=function(i,e){var n=this,o=null,s=Number.MAX_VALUE;return Object.keys(this._base).forEach(function(t){var r,t=n._base[t];t.st&&(r=g.Util.distance(i,e,t.x,t.y))<s&&(s=r,o=t)}),s<a.params.ui.distance.branch?o:null};var c,d=u;function u(t){t=c.call(this,t)||this;return t.onNoStation=new o.Trigger,t.onBranched=new o.Trigger,t}t.BranchRailwayBuilderModel=d}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["railway_builder_view"] = function(g) {
			!function(s,e){var i,t=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=(Object.defineProperty(s,"__esModule",{value:!0}),s.BranchRailwayBuilderView=s.createCursor=s.SandboxRailwayBuilderView=s.RailwayBuilderView=s.RailwayBuilderViewBase=s.createRailEdgeView=void 0,e("../models/parameters")),r=e("../models/trriger_model"),n=e("../utils/error"),a=e("./commons_view"),c=e("./effect"),h=e("./estimation_view"),e=(s.createRailEdgeView=function(e){var t=new g.E({scene:e.scene,x:(e.from.x+e.to.x)/2,y:(e.from.y+e.to.y)/2}),r=e.to.x-e.from.x,s=e.to.y-e.from.y,s=Math.atan2(s,r);return"none"!==e.construction&&(t.append(new g.Sprite({scene:e.scene,x:.75*o.params.view.construction*Math.cos(s+Math.PI/2),y:.75*o.params.view.construction*Math.sin(s+Math.PI/2),src:e.scene.asset.getImageById("construction_"+e.construction+"_img"),anchorX:.5,anchorY:.5})),t.append(new g.Sprite({scene:e.scene,x:.75*o.params.view.construction*Math.cos(s-Math.PI/2),y:.75*o.params.view.construction*Math.sin(s-Math.PI/2),src:e.scene.asset.getImageById("construction_"+("mark"===e.construction?"sign":"mark")+"_img"),anchorX:.5,anchorY:.5}))),t.append(new g.FilledRect({scene:e.scene,cssColor:a.colors[e.oid].edge,width:g.Util.distance(e.from.x,e.from.y,e.to.x,e.to.y)+o.params.view.railway/4,height:o.params.view.railway,anchorX:.5,anchorY:.5,angle:s/Math.PI*180})),t},_.prototype.start=function(){this._drawing=!0,this._estimated=o.params.cost.station+this._scorer.getTrainCost(this._oid)},_.prototype.reset=function(){this._drawing=!1,this._pointerID=null,this._guideLabel.show(),this._estimated=0,this._estimatedLabel.hide()},_.prototype.append=function(e){var t=s.createRailEdgeView({scene:this._scene,oid:this._oid,from:e.from,to:e.to,construction:e.construction});this._layer.append(t),this._edges.push(t),this._estimated+=e.cost,this._estimatedLabel.cost=this._estimated},_.prototype.clear=function(){this._edges.forEach(function(e){e.destroyed()||e.destroy()}),this._edges.splice(0,this._edges.length),this.reset()},_.prototype.graceDestroy=function(){var t=this;this._sensor.destroyed()||this._sensor.destroy(),c.fadeOut({scene:this._scene,view:this._guideLabel,fade:o.params.interval.graceDestroy,destroy:!0}),this._estimatedLabel.graceDestroy(),this._edges.forEach(function(e){return c.fadeOut({scene:t._scene,view:e,fade:o.params.interval.graceDestroy,destroy:!0})})},_.prototype.enable=function(){this._sensor.show()},_.prototype.disable=function(){this._sensor.hide(),this._estimatedLabel.hide()},_.prototype.show=function(){this._sensor.show(),this._guideLabel.show()},_.prototype.hide=function(){this._sensor.hide(),this._guideLabel.hide(),this._estimatedLabel.hide()},_.prototype.warnMoveOutBoundTerritory=function(){c.flashLabel({scene:this._scene,layer:this._layer,asset:"railway_builder_error_move_out_bound_img",x:20,y:105})},_.prototype.warnTooLongRailway=function(){c.flashLabel({scene:this._scene,layer:this._layer,asset:"railway_builder_error_too_expensive_img",x:20,y:105})},_.prototype.warnNoEdge=function(){c.flashLabel({scene:this._scene,layer:this._layer,asset:"railway_builder_error_no_edge_img",x:20,y:70})},_.prototype._setup=function(){var e,t,r=this;this._sensor=(e=this._scene,t=this._layer,new g.E({scene:e,width:t.width,height:t.height,touchable:!0,local:!0})),this._layer.append(this._sensor),this._guideLabel=this._createGuideLabel(),this._layer.append(this._guideLabel),this._estimatedLabel=new h.EstimationView({scene:this._scene,layer:this._layer,numberFont:this._numberFont,asset:"estimation_img",x:20,y:70,cost:0}),this._sensor.onPointDown.add(function(e){return r._onPointDown(e)}),this._sensor.onPointMove.add(function(e){return r._onPointMove(e)}),this._sensor.onPointUp.add(function(e){return r._onPointUp(e)})},_.prototype._onPointDown=function(e){this._drawing||null===this._pointerID&&(this._pointerID=e.pointerId,this.onInputStarted.fire({x:e.point.x,y:e.point.y}))},_.prototype._onPointMove=function(e){var t;this._drawing&&this._pointerID===e.pointerId&&(t=e.point.x+e.startDelta.x,e=e.point.y+e.startDelta.y,this.onInputMoved.fire({x:t,y:e}))},_.prototype._onPointUp=function(e){this._drawing&&this._pointerID===e.pointerId&&this.onInputEnded.fire()},_);function _(e){this._edges=[],this._estimated=0,this.onInputStarted=new r.Trigger,this.onInputMoved=new r.Trigger,this.onInputEnded=new r.Trigger,this._pointerID=null,this._scene=e.scene,this._layer=e.layer,this._numberFont=e.numberFont,this._oid=e.oid,this._scorer=e.scorer,this._setup()}t(u,d=s.RailwayBuilderViewBase=e),u.prototype.start=function(){d.prototype.start.call(this),this._estimated+=o.params.cost.station},u.prototype.warnStartOutBoundTerritory=function(){c.flashLabel({scene:this._scene,layer:this._layer,asset:"railway_builder_error_start_out_bound_img",x:20,y:70})},u.prototype._createGuideLabel=function(){return a.createGuideLabel(this._scene,"railway_builder_guide_img")};var d,p=u;function u(){return null!==d&&d.apply(this,arguments)||this}s.RailwayBuilderView=p;t(y,l=p),y.prototype.warnTooLongRailway=function(){c.flashLabel({scene:this._scene,layer:this._layer,asset:"railway_builder_error_too_expensive_img",x:20,y:105,fade:1})},y.prototype._createGuideLabel=function(){var e=new g.E({scene:this._scene,x:20,y:20,width:this._layer.width-20});return e.append(new g.Sprite({scene:this._scene,src:this._scene.asset.getImageById("sandbox_guide1_img")})),e.append(new g.Sprite({scene:this._scene,y:30,src:this._scene.asset.getImageById("sandbox_guide2_img")})),e};var l,p=y;function y(){return null!==l&&l.apply(this,arguments)||this}s.SandboxRailwayBuilderView=p;s.createCursor=function(e,t,r){for(var s=[],i=0;i<o.params.animation.cursor;i++)s.push(i+r.ownerID*o.params.animation.cursor);t=new g.FrameSprite({scene:e,parent:t,x:r.node.x-o.params.view.cursor/2,y:r.node.y-o.params.view.cursor/2,src:e.asset.getImageById("cursor_img"),width:o.params.view.cursor,height:o.params.view.cursor,frames:s});return t.start(),t},t(m,f=e),m.prototype.import=function(e){this._nodes=e,this._mark(e)},m.prototype.branch=function(t){var r=this;this._nodes?Object.keys(this._markers).forEach(function(e){e!==t.uid&&r._markers[e].hide()}):n.reportError("no edge data was loaded.")},m.prototype.reset=function(){var t=this;f.prototype.reset.call(this),Object.keys(this._markers).forEach(function(e){t._markers[e].show()}),this._edges.forEach(function(e){e.destroyed()||e.destroy()}),this._edges.splice(0,this._edges.length)},m.prototype.clear=function(){f.prototype.clear.call(this),f.prototype.reset.call(this)},m.prototype.cancel=function(){var t=this;this.clear(),Object.keys(this._markers).forEach(function(e){t._markers[e].destroyed()||t._markers[e].destroy()}),this._markers={}},m.prototype.graceHide=function(){var t=this;f.prototype.reset.call(this),f.prototype.hide.call(this),this._edges.forEach(function(e){return c.fadeOut({scene:t._scene,view:e,fade:o.params.interval.graceDestroy,destroy:!0})}),this._edges.splice(0,this._edges.length),Object.keys(this._markers).forEach(function(e){c.fadeOut({scene:t._scene,view:t._markers[e],fade:o.params.interval.graceDestroy,destroy:!0})}),this._markers={}},m.prototype.warnNoBranch=function(){c.flashLabel({scene:this._scene,layer:this._layer,asset:"branch_builder_error_no_branch_img",x:20,y:70})},m.prototype._createGuideLabel=function(){return a.createGuideLabel(this._scene,"branch_builder_guide_img")},m.prototype._mark=function(t){var r=this;Object.keys(t).forEach(function(e){e=t[e].st;e&&(r._markers[e.uid]=s.createCursor(r._scene,r._layer,e))})};var f,p=m;function m(){var e=null!==f&&f.apply(this,arguments)||this;return e._markers={},e}s.BranchRailwayBuilderView=p}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["timer"] = function(g) {
			(n=>{Object.defineProperty(n,"__esModule",{value:!0}),n.setCountDown=void 0,n.setCountDown=function(n){function e(){o||(t<=0?(n.onEnd&&n.onEnd(),n.scene.onUpdate.remove(e)):(n.onCount&&n.onCount(t),t--))}var o,t=n.expire*g.game.fps;n.onStart&&n.onStart();return n.scene.onUpdate.add(e),function(){o=!0,n.onEnd&&n.onEnd(),n.scene.onUpdate.remove(e)}}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_builder_model"] = function(g) {
			((t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StationBuilderModel=t.StationModel=void 0;var o=e("../utils/error"),a=e("./parameters"),i=e("./trriger_model"),s=function(t){this.onDeleted=new i.Trigger,this.node=t},e=(t.StationModel=s,n.prototype.import=function(o,t,i){var s=this;o.forEach(function(t,e){t={x:t.x,y:t.y,st:!1};0!==e||i||(t.st=!0),e===o.length-1&&(t.st=!0),s._nodes.push(t)}),this._prevCost=t},n.prototype.add=function(t,e){this._prevCost+(this._stations.length+1)*a.params.cost.station>this._scorer.get(this._oid)?this.onExpensive.fire():(t=this._findNearest(t,e))?t.st||(t.st=!0,e=new s(t),this._stations.push(e),this.onAdded.fire({st:e,cost:a.params.cost.station})):this.onNoRailway.fire()},n.prototype.pop=function(){var t;this.empty?o.reportError("try to pop from empty stations array"):((t=this._stations.pop()).node.st=!1,t.onDeleted.fire(-a.params.cost.station))},n.prototype.clear=function(){this._nodes.splice(0,this._nodes.length),this._stations.splice(0,this._stations.length)},Object.defineProperty(n.prototype,"empty",{get:function(){return 0===this._stations.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"all",{get:function(){return this._nodes},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"length",{get:function(){return this._stations.length},enumerable:!1,configurable:!0}),n.prototype._findNearest=function(o,i){var s=this,n=null,r=Number.MAX_VALUE;return this._nodes.forEach(function(t,e){0!==e&&e!==s._nodes.length-1&&(e=g.Util.distance(o,i,t.x,t.y))<r&&(r=e,n=t)}),r<a.params.ui.distance.station?n:null},n);function n(t){this.onAdded=new i.Trigger,this.onExpensive=new i.Trigger,this.onNoRailway=new i.Trigger,this._stations=[],this._nodes=[],this._oid=t.oid,this._scorer=t.scorer}t.StationBuilderModel=e})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["effect"] = function(g) {
			((e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.effectUpgrade=e.effectPositive=e.fadeOut=e.fadeIn=e.blink=e.flash=e.flashLabel=void 0;var s=n("../models/parameters"),i=n("./commons_view"),t=n("./timer");e.flashLabel=function(n){var e,a=i.createSpriteById({scene:n.scene,asset:n.asset,x:n.x,y:n.y});return(n.layer||n.scene).append(a),t.setCountDown({scene:n.scene,onCount:function(e){a.opacity=e/(null!=(e=n.fade)?e:5)/g.game.fps,a.modified()},onEnd:function(){a.destroyed()||a.destroy(),n.onEnd&&n.onEnd()},expire:null!=(e=n.fade)?e:5})},e.flash=function(n){var a=new g.E({scene:n.scene,width:n.layer.width,height:n.layer.height}),e=(n.layer.append(a),i.createSpriteById({scene:n.scene,width:n.layer.width,height:n.layer.height,opacity:n.opacity,asset:n.asset}));return a.append(e),n.onStart&&n.onStart(a),t.setCountDown({scene:n.scene,onCount:function(e){e=1-e/(null!=(e=n.fade)?e:5)/g.game.fps;a.opacity=1-e*e*e*e,a.modified()},onEnd:function(){a.destroyed()||a.destroy(),n.onEnd&&n.onEnd()},expire:null!=(e=n.fade)?e:5})},e.blink=function(n){function e(){var e;o||(n.view.opacity=Math.cos(t*Math.PI*2)*i+(1-i),n.view.modified(),t+=1/(null!=(e=n.interval)?e:1)/g.game.fps)}var a,i=(null!=(a=n.band)?a:.5)/2,t=0,o=!1;return n.scene.onUpdate.add(e),function(){n.view.opacity=1,n.view.modified(),o=!0,n.scene.onUpdate.remove(e)}},e.fadeIn=function(n){function a(){var e;i||(n.view.opacity=null!==(e=t/n.fade)?e:5,n.view.modified(),(null===(e=(t+=1/g.game.fps)>n.fade)||e)&&(n.view.opacity=1,n.view.modified(),n.scene.onUpdate.remove(a),n.onEnd)&&n.onEnd())}var i,t=0;return n.scene.onUpdate.add(a),function(){i=!0,n.scene.onUpdate.remove(a),n.view.opacity=1,n.view.modified(),n.onEnd&&n.onEnd()}},e.fadeOut=function(n){function a(){var e;i||(n.view.opacity=o*(null!==(e=1-t/n.fade)?e:5),t+=1/g.game.fps,null!==(e=n.fade<t)&&!e||(n.view.opacity=o,n.view.modified(),n.view.hide(),n.destroy&&!n.view.destroyed()&&n.view.destroy(),n.scene.onUpdate.remove(a)),n.view.modified())}var i,t=0,o=n.view.opacity;return n.scene.onUpdate.add(a),function(){i=!0,n.scene.onUpdate.remove(a),n.view.opacity=o,n.view.modified(),n.view.hide(),n.destroy&&!n.view.destroyed()&&n.view.destroy()}},e.effectPositive=function(e){for(var n,a=[],i=0;i<s.params.animation.positive;i++)a.push(i+e.oid*s.params.animation.positive);function t(){o.opacity=1-o.frameNumber/o.frames.length,o.modified(),o.frameNumber===o.frames.length-1&&d<=++r&&(o.destroyed()||o.destroy(),e.scene.onUpdate.remove(t))}var o=new g.FrameSprite({scene:e.scene,x:-s.params.view.positive/2,y:.85*-s.params.view.positive,width:s.params.view.positive,height:s.params.view.positive,src:e.scene.asset.getImageById("effect_img"),frames:a}),d=(e.view.append(o),o.start(),null!=(n=e.repeat)?n:3),r=0;return e.scene.onUpdate.add(t),function(){return e.scene.onUpdate.remove(t)}},e.effectUpgrade=function(e){for(var n=[],a=0;a<s.params.animation.upgrade;a++)n.push(a+e.oid*s.params.animation.upgrade);function i(){t.frameNumber===t.frames.length-1&&(t.destroyed()||t.destroy(),e.scene.onUpdate.remove(i))}var t=new g.FrameSprite({scene:e.scene,width:s.params.view.upgrade,height:s.params.view.upgrade,src:e.scene.asset.getImageById("upgrade_img"),x:-s.params.view.upgrade/4,y:-s.params.view.upgrade/4,frames:n});e.view.append(t),t.start();return e.scene.onUpdate.add(i),function(){return e.scene.onUpdate.remove(i)}}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_builder_view"] = function(g) {
			((h,e)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.StationBuilderView=h.createStation=void 0;var c=e("../models/parameters"),t=e("../models/trriger_model"),s=e("../scenes/game_scene"),i=e("../utils/error"),d=e("./commons_view"),a=e("./effect"),n=e("./estimation_view");function o(e){this._estimated=0,this._defaultStations=[],this._stations=[],this.onPointed=new t.Trigger,this.onNext=new t.Trigger,this.onUndo=new t.Trigger,this._nodes=[],this._edges=[],this._scene=e.scene,this._backgroundLayer=e.backgroundLayer,this._layer=e.layer,this._numberFont=e.numberFont,this._oid=e.oid,this._setup()}h.createStation=function(e,t,s,i){return new g.FrameSprite({scene:e,x:s,y:i,width:c.params.view.station[0],height:c.params.view.station[1],anchorX:.5,anchorY:.5,src:e.asset.getImageById("station_img"),frames:[6*t]})},o.prototype.import=function(e,t,s,i,a){this._estimated=e,this._estimatedLabel.cost=this._estimated;e=d.createPointerNode(this._scene,i[0]);this._nodes.push(e),this._backgroundLayer.append(e);for(var n=0;n<i.length-1;n++){var o=d.createPointerNode(this._scene,i[n+1]),o=(this._nodes.push(o),this._backgroundLayer.append(o),d.createPointerEdge(this._scene,i[n],i[n+1]));this._backgroundLayer.append(o),this._edges.push(o)}t&&(e=h.createStation(this._scene,this._oid,t.x,t.y),this._layer.append(e),this._defaultStations.push(e));var r,t=h.createStation(this._scene,this._oid,s.x,s.y),e=(this._layer.append(t),this._defaultStations.push(t),c.params.view.submit_margin),t=s.x+e>=a.x+a.width?(r=s.x+e,s.y):s.y+e>=a.y+a.height?(r=s.x,s.y+e):s.y-e<=a.y?(r=s.x,s.y-e-c.params.view.submit[1]):s.x-e<=a.x?(r=s.x-e-c.params.view.submit[0],s.y):(r=s.x+e,s.y+e);(r=r<0?0:r)>c.params.view.game[0]-2*c.params.view.submit[0]&&(r=c.params.view.game[0]-2*c.params.view.submit[0]),(t=t<0?0:t)>c.params.view.game[1]-c.params.view.submit[1]&&(t=c.params.view.game[1]-c.params.view.submit[1]),this._completeArea.x=r+c.params.view.submit[0],this._completeArea.y=t,this._cancelArea.x=r,this._cancelArea.y=t,this._completeButton.moveTo(0,0),this._cancelButton.moveTo(0,0)},o.prototype.build=function(e,t,s){e=h.createStation(this._scene,this._oid,e,t);return this._layer.append(e),this._stations.push(e),this._estimated+=s,this._estimatedLabel.cost=this._estimated,e},o.prototype.tooExpensive=function(){a.flashLabel({scene:this._scene,layer:this._layer,asset:"station_builder_error_too_expensive_img",x:20,y:105}),s.playTooExpensive(this._scene)},o.prototype.notFound=function(){a.flashLabel({scene:this._scene,layer:this._layer,asset:"station_builder_error_no_node_img",x:20,y:105})},o.prototype.enable=function(){this._sensor.show(),this._cancelButton.show(),this._completeButton.show(),this._guideLabel.show(),this._estimatedLabel.show()},o.prototype.disable=function(){this._sensor.hide(),this._cancelButton.hide(),this._completeButton.hide(),this._guideLabel.hide(),this._estimatedLabel.hide()},o.prototype.remove=function(e,t){for(var s=0;s<this._stations.length;s++)if(this._stations[s]===e)return this._stations.splice(s,1),e.destroy(),this._estimated+=t,void(this._estimatedLabel.cost=this._estimated);i.reportError("station is already removed")},o.prototype.show=function(){this._stations.forEach(function(e){return e.show()}),this._defaultStations.forEach(function(e){return e.show()}),this._sensor.show(),this._completeButton.show(),this._cancelButton.show(),this._guideLabel.show(),this._estimatedLabel.show()},o.prototype.hide=function(){this._stations.forEach(function(e){return e.hide()}),this._defaultStations.forEach(function(e){return e.hide()}),this._sensor.hide(),this._completeButton.hide(),this._cancelButton.hide(),this._guideLabel.hide(),this._estimatedLabel.hide()},o.prototype.clear=function(){this._nodes.forEach(function(e){e.destroyed()||e.destroy()}),this._edges.forEach(function(e){e.destroyed()||e.destroy()}),this._stations.forEach(function(e){e.destroyed()||e.destroy()}),this._stations.splice(0,this._stations.length),this._defaultStations.forEach(function(e){e.destroyed()||e.destroy()}),this._defaultStations.splice(0,this._defaultStations.length)},o.prototype.graceDestroy=function(){var t=this;this._nodes.forEach(function(e){return a.fadeOut({scene:t._scene,view:e,destroy:!0,fade:c.params.interval.graceDestroy})}),this._edges.forEach(function(e){return a.fadeOut({scene:t._scene,view:e,destroy:!0,fade:c.params.interval.graceDestroy})}),this._stations.forEach(function(e){return a.fadeOut({scene:t._scene,view:e,destroy:!0,fade:c.params.interval.graceDestroy})}),this._stations.splice(0,this._stations.length),this._defaultStations.forEach(function(e){return a.fadeOut({scene:t._scene,view:e,destroy:!0,fade:c.params.interval.graceDestroy})}),this._defaultStations.splice(0,this._defaultStations.length),this._sensor.destroyed()||this._sensor.destroy(),a.fadeOut({scene:this._scene,view:this._guideLabel,destroy:!0,fade:c.params.interval.graceDestroy}),this._estimatedLabel.graceDestroy(),this._completeButton.destroy(),this._cancelButton.destroy(),this._completeArea.destroyed()||this._completeArea.destroy(),this._cancelArea.destroyed()||this._cancelArea.destroy(),this._buttonArea.destroyed()||this._buttonArea.destroy()},o.prototype.graceHide=function(){var t=this;this._nodes.forEach(function(e){return a.fadeOut({scene:t._scene,view:e,destroy:!0,fade:c.params.interval.graceDestroy})}),this._edges.forEach(function(e){return a.fadeOut({scene:t._scene,view:e,destroy:!0,fade:c.params.interval.graceDestroy})}),this._stations.forEach(function(e){return a.fadeOut({scene:t._scene,view:e,destroy:!0,fade:c.params.interval.graceDestroy})}),this._stations.splice(0,this._stations.length),this._defaultStations.forEach(function(e){return a.fadeOut({scene:t._scene,view:e,destroy:!0,fade:c.params.interval.graceDestroy})}),this._defaultStations.splice(0,this._defaultStations.length),this._sensor.hide(),this._completeButton.hide(),this._cancelButton.hide(),this._guideLabel.hide(),this._estimatedLabel.hide()},o.prototype._setup=function(){var e,t,s=this;this._sensor=(e=this._scene,t=this._layer,new g.E({scene:e,width:t.width,height:t.height,touchable:!0,local:!0})),this._layer.append(this._sensor),this._guideLabel=d.createGuideLabel(this._scene,"station_builder_guide_img"),this._layer.append(this._guideLabel),this._estimatedLabel=new n.EstimationView({scene:this._scene,numberFont:this._numberFont,cost:this._estimated,layer:this._layer,asset:"estimation_img",x:20,y:70}),this._sensor.onPointUp.add(function(e){return s.onPointed.fire({x:e.point.x+e.startDelta.x,y:e.point.y+e.startDelta.y})}),this._buttonArea=d.createGameLayer(this._scene),this._scene.append(this._buttonArea),this._completeArea=new g.E({scene:this._scene,width:c.params.view.submit[0],height:c.params.view.submit[1]}),this._buttonArea.append(this._completeArea),this._completeButton=d.createCompleteButton(this._scene,this._completeArea,"next_img",this._oid,!0),this._completeButton.onPushed.add(function(){return s.onNext.fire()}),this._cancelArea=new g.E({scene:this._scene,width:c.params.view.submit[0],height:c.params.view.submit[1]}),this._buttonArea.append(this._cancelArea),this._cancelButton=d.createCancelButton(this._scene,this._cancelArea,"prev_img",!0),this._cancelButton.onPushed.add(function(){return s.onUndo.fire()})},h.StationBuilderView=o})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["train_deployer_model"] = function(g) {
			((t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TrainDeployerModel=void 0;var i=e("../utils/error"),r=e("./parameters"),n=e("./trriger_model");function o(t){this.onUpdated=new n.Trigger,this.onExpensive=new n.Trigger,this._initial=1,this._num=1,this._oid=t.oid,this._scorer=t.scorer}o.prototype.import=function(t,e,i){this._prevCost=t,this._trainCost=e,this._initial=i,this._num=i},o.prototype.reserve=function(){this._canPurchase()?(this._num++,this._fireUpdated()):this.onExpensive.fire()},o.prototype.unreserve=function(){this._num<=1?i.reportError("could not unreserve"):(this._num--,this._fireUpdated())},o.prototype.clear=function(){this._num=1},Object.defineProperty(o.prototype,"reserved",{get:function(){return this._num},enumerable:!1,configurable:!0}),o.prototype._canPurchase=function(){for(var t=this._prevCost,e=this._initial;e<this._num+1;e++)t+=this._trainCost+e*r.params.cost.train.increment;return t<this._scorer.get(this._oid)},o.prototype._fireUpdated=function(){for(var t=0,e=this._initial;e<this._num;e++)t+=this._trainCost+e*r.params.cost.train.increment;for(e=this._initial;e>this._num;e--)t-=this._trainCost+(e-1)*r.params.cost.train.increment;this.onUpdated.fire(t)},t.TrainDeployerModel=o})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["train_deployer_view"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TrainDeployerView=void 0;var r=t("../models/parameters"),i=t("../models/trriger_model"),s=t("../scenes/game_scene"),n=t("./commons_view"),a=t("./dialogue"),o=t("./effect"),h=t("./estimation_view"),_=t("./number_selector"),d=t("./train_cost_view");function c(e){this.onInputReserved=new i.Trigger,this.onInputUnReserved=new i.Trigger,this.onSubmit=new i.Trigger,this.onUndo=new i.Trigger,this._prevCost=0,this._prevTrains=0,this._recommend=0,this._scene=e.scene,this._layer=e.layer,this._inputFont=e.inputFont,this._numberFont=e.numberFont,this._oid=e.oid,this._hideCanceler=function(){},this._setup()}c.prototype.import=function(e,t,i,s){this._prevCost=e,this._prevTrains=i,this._estimatedLabel.cost=e,this._reservedNumberSelector.max=Math.max(1,Math.ceil(2*t/r.params.distance.train)-3),this._trainCostLabel.trains=this._prevTrains+s,this._reservedNumberSelector.value=s,this._recommend=s},c.prototype.update=function(e,t){(this._reservedNumberSelector.value=e)<=1?this._disableUnReserve():this._enableUnReserve(),e===this._recommend?this._recommendLabel.show():this._recommendLabel.hide(),this._estimatedLabel.cost=this._prevCost+t,this._trainCostLabel.trains=this._prevTrains+e},c.prototype.show=function(){this._hideCanceler(),this._area.show()},c.prototype.enable=function(){this._reservedNumberSelector.enable(),this._dialogue.enable()},c.prototype.disable=function(){this._reservedNumberSelector.disable(),this._dialogue.disable()},c.prototype.clear=function(){this._reservedNumberSelector.value=this._recommend,this._recommendLabel.show()},c.prototype.graceDestroy=function(){o.fadeOut({scene:this._scene,view:this._area,fade:r.params.interval.graceDestroy,destroy:!0})},c.prototype.graceHide=function(){this._area.visible()&&(this._hideCanceler(),this._area.show(),this._hideCanceler=o.fadeOut({scene:this._scene,view:this._area,fade:r.params.interval.graceDestroy}))},c.prototype.warnNotEnoughMoney=function(){o.flashLabel({scene:this._scene,layer:this._area,asset:"train_deployer_error_too_expensive_img",x:20,y:85}),s.playTooExpensive(this._scene)},c.prototype._setup=function(){var e=this;this._area=n.createModalArea(this._scene,this._layer),this._area.hide(),this._layer.append(this._area),this._dialogue=new a.Dialogue({scene:this._scene,layer:this._area,oid:this._oid,primary:"complete_img",secondary:"prev_img"}),this._guideLabel=n.createGuideLabel(this._scene,"train_deployer_guide_img",20,10),this._area.append(this._guideLabel),this._estimatedLabel=new h.EstimationView({scene:this._scene,numberFont:this._numberFont,cost:this._prevCost,layer:this._area,asset:"estimation_img",x:20,y:48}),this._recommendLabel=n.createGuideLabel(this._scene,"recommend_img",20,120),this._area.append(this._recommendLabel),this._input=new g.E({scene:this._scene,x:7*this._area.width/16,y:this._area.height/2,anchorX:.5,anchorY:.5,parent:this._area}),this._reservedNumberSelector=new _.NumberSelector({scene:this._scene,layer:this._input,font:this._inputFont,oid:this._oid,value:1,min:1,max:1}),this._reservedNumberSelector.onIncrement.add(function(){return e.onInputReserved.fire()}),this._reservedNumberSelector.onDecrement.add(function(){return e.onInputUnReserved.fire()}),this._trainCostLabel=new d.TrainCostView({scene:this._scene,layer:this._area,offsetX:5*this._area.width/8,offsetY:this._area.height/2,numberFont:this._numberFont,trains:this._prevTrains,multiLine:!0}),this.submitting=n.createGuideLabel(this._scene,"railway_wizard_wait_img",20,86),this.submitting.hide(),this._area.append(this.submitting),this._dialogue.onCompleted.add(function(){return e.onSubmit.fire()}),this._dialogue.onCanceled.add(function(){return e.onUndo.fire()})},c.prototype._disableUnReserve=function(){this._reservedNumberSelector.disableDecrement=!0},c.prototype._enableUnReserve=function(){this._reservedNumberSelector.disableDecrement=!1},e.TrainDeployerView=c})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["dialogue"] = function(g) {
			((e,t)=>{function i(e,t,i){return new g.E({scene:e,x:t.width-s.params.view.submit[0]*i-10,y:t.height-s.params.view.submit[1]-10,width:s.params.view.submit[0],height:s.params.view.submit[1]})}Object.defineProperty(e,"__esModule",{value:!0}),e.Dialogue=void 0;var s=t("../models/parameters"),o=t("../models/trriger_model"),r=t("./commons_view");function a(e){this.onCompleted=new o.Trigger,this.onCanceled=new o.Trigger,this._scene=e.scene,this._layer=e.layer,this._oid=e.oid,this._primary=e.primary,this._secondary=e.secondary,this._setup()}a.prototype.show=function(){this._modal.show(),this._complete.show(),this._cancel.show()},a.prototype.hide=function(){this._modal.hide(),this._complete.hide(),this._cancel.hide()},a.prototype.enable=function(){this._complete.enable(),this._cancel.enable()},a.prototype.disable=function(){this._complete.disable(),this._cancel.disable()},a.prototype.destroy=function(){this._completeArea.destroyed()||this._completeArea.destroy(),this._cancelArea.destroyed()||this._cancelArea.destroy(),this._modal.destroyed()||this._modal.destroy(),this._cancel.destroy(),this._complete.destroy()},Object.defineProperty(a.prototype,"modal",{get:function(){return this._modal},enumerable:!1,configurable:!0}),a.prototype._setup=function(){var e=this;this._modal=r.createModal({scene:this._scene,layer:this._layer,oid:this._oid}),this._layer.append(this._modal),this._cancelArea=i(this._scene,this._layer,2),this._layer.append(this._cancelArea),this._cancel=r.createCancelButton(this._scene,this._cancelArea,this._secondary),this._cancel.onPushed.add(function(){return e.onCanceled.fire()}),this._completeArea=i(this._scene,this._layer,1),this._layer.append(this._completeArea),this._complete=r.createCompleteButton(this._scene,this._completeArea,this._primary,this._oid),this._complete.onPushed.add(function(){return e.onCompleted.fire()})},e.Dialogue=a})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["number_selector"] = function(g) {
			((i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NumberSelector=i.createInput=i.createField=void 0;var s=e("../models/parameters"),t=e("../models/trriger_model"),h=e("./sprite_button"),e=(i.createField=function(e){return new g.Sprite({scene:e,anchorX:.5,anchorY:.5,width:s.params.view.number.field[0],height:s.params.view.number.field[1],src:e.asset.getImageById("number_field_img")})},i.createInput=function(e,t,i,n){var r=new g.E({scene:e,x:t.width/2-5,y:s.params.view.number.field[1]/2+s.params.view.number.input/2*(i?1:-1),width:s.params.view.number.input,height:s.params.view.number.input,anchorX:0,anchorY:.5}),t=(t.append(r),new g.FrameSprite({scene:e,width:r.width,height:r.height,src:e.asset.getImageById("number_input_img"),frames:i?[6*(n+1)+3,6*(n+1)+4,6*(n+1)+5]:[6*(n+1)+0,6*(n+1)+1,6*(n+1)+2]}));return r.append(t),new h.SpriteButton({scene:e,layer:r,sprite:t,downRate:.1})},n.prototype.show=function(){this._increment.show(),this._decrement.show(),this._number.show()},n.prototype.hide=function(){this._increment.hide(),this._decrement.hide(),this._number.hide()},n.prototype.enable=function(){(void 0===this._max||this._value<this._max)&&this._increment.enable(),(void 0===this._min||this._value>this._min)&&this._decrement.enable()},n.prototype.disable=function(){this._increment.disable(),this._decrement.disable()},n.prototype.destroy=function(){this._number.destroyed()||this._number.destroy(),this._field.destroyed()||this._field.destroy(),this._increment.destroy(),this._decrement.destroy()},Object.defineProperty(n.prototype,"max",{set:function(e){this._max=e,this.disableIncrement=e<=this._value},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this._number.text=""+this._value,this._number.invalidate(),this.disableIncrement=void 0!==this._max&&e>=this._max,this.disableDecrement=void 0!==this._min&&e<=this._min},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disableIncrement",{set:function(e){e?this._increment.disable():this._increment.enable()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disableDecrement",{set:function(e){e?this._decrement.disable():this._decrement.enable()},enumerable:!1,configurable:!0}),n.prototype._setup=function(){var e,t=this;this._field=i.createField(this._scene),this._layer.append(this._field),this._number=new g.Label({scene:this._scene,font:this._font,fontSize:this._font.size,text:""+this._value,textAlign:"right",x:this._field.width/2-30,y:this._field.height/2,width:this._field.width/2-30,anchorX:.5,anchorY:.5,widthAutoAdjust:!1}),this._field.append(this._number),this._increment=i.createInput(this._scene,this._field,!1,this._oid),this._increment.onPushed.add(function(){return t.onIncrement.fire()}),this._decrement=i.createInput(this._scene,this._field,!0,this._oid),this._decrement.onPushed.add(function(){return t.onDecrement.fire()}),this.value=null!=(e=this._value)?e:0},n);function n(e){this.onIncrement=new t.Trigger,this.onDecrement=new t.Trigger,this._scene=e.scene,this._layer=e.layer,this._font=e.font,this._oid=e.oid,this._max=e.max,this._min=e.min,this._value=e.value,this._setup()}i.NumberSelector=e})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["railway_built_event"] = function(g) {
			!function(e,t){var r,n,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),t=(Object.defineProperty(e,"__esModule",{value:!0}),e.isBranchRailwayBuiltEvent=e.BranchRailwayBuiltEvent=e.isRailwayBuiltEvent=e.RailwayBuiltEvent=void 0,t("./action_event")),i="RAILWAY_BUILT",o=(n=t.ActionEvent,a(u,n),u.parse=function(t){return e.isRailwayBuiltEvent(t)?new u(t.data.data):null},Object.defineProperty(u.prototype,"nodes",{get:function(){return this.data.data.nodes},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"trains",{get:function(){return this.data.data.ts},enumerable:!1,configurable:!0}),u);function u(t){return n.call(this,i,t)||this}e.RailwayBuiltEvent=o;e.isRailwayBuiltEvent=function(t){return t.data.code===i};var c,l="BRANCH_RAILWAY_BUILT",o=(c=t.ActionEvent,a(s,c),s.parse=function(t){return e.isBranchRailwayBuiltEvent(t)?new s(t.data.data):null},Object.defineProperty(s.prototype,"branch",{get:function(){return this.data.data.branch},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"nodes",{get:function(){return this.data.data.nodes},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"trains",{get:function(){return this.data.data.ts},enumerable:!1,configurable:!0}),s);function s(t){return c.call(this,l,t)||this}e.BranchRailwayBuiltEvent=o;e.isBranchRailwayBuiltEvent=function(t){return t.data.code===l}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["gamemap_handler"] = function(g) {
			((n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.GameMapHandler=void 0;var t=e("../events/railway_built_event"),o=e("../events/railway_destroy_event"),r=e("../events/railway_rollback_event"),a=e("../events/station_booster_event"),d=e("../events/station_inserter_event"),i=e("../events/station_upgrade_event"),u=e("../events/train_inserter_event"),s=e("../models/parameters"),c=e("../view/effect");function l(n){this._model=n.model,this._view=n.view,this._scene=n.scene,this._layer=n.layer,this._rf=n.rf,this._tf=n.tf,this._scorer=n.scorer,this._setup()}l.prototype.start=function(){var n=this;this._scene.onUpdate.add(function(){n._model.onTick(1/g.game.fps)}),this._scene.setTimeout(function(){n._model.immigrate(n._layer.width,n._layer.height),n._scene.setInterval(function(){n._model.immigrate(n._layer.width,n._layer.height)},1e3*s.params.interval.immigration)},1e3*s.params.interval.immigration*3/4)},l.prototype._setup=function(){var t=this;this._model.onCompanyAdded.add(function(n){t._view.addCompany(n),t._company=n}),this._model.onResidenceAdded.add(function(n){return t._registerResidence(n)}),this._model.onHumanAdded.add(function(n){return t._registerHuman(n)}),this._model.onRailEdgeAdded.add(function(n){var e=t._view.addRailEdge(n.oid,n.from,n.to);n.onDestroyed.add(function(){c.fadeOut({scene:t._scene,view:e,fade:s.params.interval.graceDestroy,destroy:!0})})}),this._model.onStationAdded.add(function(n){return t._registerStation(n)}),this._model.onTrainAdded.add(function(n){return t._registerTrain(n)}),this._model.buildCity(this._layer.width,this._layer.height)},l.prototype.onMessage=function(n){var e;t.isRailwayBuiltEvent(n)?(e=t.RailwayBuiltEvent.parse(n),this._model.import(e.oid(),e.nodes,e.trains)):t.isBranchRailwayBuiltEvent(n)?(e=t.BranchRailwayBuiltEvent.parse(n),this._model.importBranch(e.oid(),e.branch,e.nodes,e.trains)):d.isStationInsertionEvent(n)?(e=d.StationInsertionEvent.parse(n),this._model.insertStation(e.oid(),e.inserted)):u.isTrainInsertionEvent(n)?(e=u.TrainInsertionEvent.parse(n),this._model.insertTrain(e.oid(),e.inserted)):i.isStationUpgradedEvent(n)?(e=i.StationUpgradedEvent.parse(n),this._model.upgradeStation(e.oid(),e.changed.nid,e.changed.lv)):a.isPlatformBoostEvent(n)?(e=a.PlatformBoostEvent.parse(n),this._model.boostPlatform(e.oid(),e.changed.nid)):a.isGateBoostEvent(n)?(e=a.GateBoostEvent.parse(n),this._model.boostGate(e.oid(),e.changed.nid)):r.isRailwayedRollbackEvent(n)?(e=r.RailwayRollbackedEvent.parse(n),this._model.rollbackPrimaryLine(e.oid(),e.nodes,e.edges,e.luid,e.trains)):o.isRailwayDestroyedEvent(n)&&(e=o.RailwayDestroyedEvent.parse(n),this._model.destroyRailway(e.oid(),e.nodes,e.edges,e.luid,e.lts,e.outer,e.branch))},l.prototype._registerResidence=function(n){var e=this._view.addResidence(n.x(),n.y(),n.nextOwner);n.onImmigrated.add(function(){return e.immigrate()}),n.onSuspension.add(function(){return e.suspend()}),this._rf.onCompleted.add(function(){return e.changeOwner(n.nextOwner)})},l.prototype._registerStation=function(n){var e=this,t=this._view.addStation(n);this._rf.onCompleted.add(function(){return t.update(n.gate.cost(e._company))}),n.onUpgraded.add(function(){return t.upgrade(n.lv,n.rate)}),n.onAccepted.add(function(){return t.accept(n.rate)}),n.onReleased.add(function(){return t.release(n.rate)}),n.onDestroyed.add(function(){return t.graceDestroy()}),n.platform.onFull.add(function(){return t.full()}),n.platform.onVacant.add(function(){return t.vacant()}),n.platform.onRejected.add(function(){return t.reject()}),n.platform.onBoost.add(function(){return t.boostPlatform()}),n.platform.onBoosting.add(function(n){return t.boostingPlatform(n)}),n.platform.onUnBoost.add(function(){return t.unboostPlatform()}),n.platform.onPushing.add(function(){return t.pushing()}),n.platform.onNoTrain.add(function(){return t.noTrain()}),n.platform.onTrainArrived.add(function(){return t.arrive()}),n.gate.onBoost.add(function(){return t.boostGate()}),n.gate.onBoosting.add(function(n){return t.boostingGate(n)}),n.gate.onUnBoost.add(function(){return t.unboostGate()}),n.gate.onGating.add(function(){return t.gating()}),n.gate.onFull.add(function(){return t.fullGate()}),n.gate.onVacant.add(function(){return t.vacantGate()})},l.prototype._registerHuman=function(n){var e=this,t=this._view.addHuman(n.initialOwner,n.x(),n.y());n.onMoved.add(function(){return t.move(n.x(),n.y(),n.heading)}),n.onGateIn.add(function(n){return t.gateIn(n.x,n.y)}),n.onPlatformIndexed.add(function(n){return t.stand(n)}),n.onRidden.add(function(){return t.ride()}),n.onTrainIndexed.add(function(n){return t.travel(n)}),n.onGotOff.add(function(){return t.getOff(n.x(),n.y())}),n.onGateOut.add(function(){return t.gateOut()}),n.onDetouched.add(function(){return t.detouch()}),n.onUnready.add(function(){return t.unready()}),n.onDequeued.add(function(){return t.dequeue()}),n.onTooWaitGateIn.add(function(){return t.waitGateIn()}),n.onTooWaitTrain.add(function(){return t.waitTrain()}),n.onTooWaitGateOut.add(function(){return t.waitGateOut()}),n.onOwnerShifted.add(function(n){return t.shiftOwner(n)}),n.onScored.add(function(n){return e._scorer.add(n.oid,n.num)}),n.onGoal.add(function(){return t.destroy(!1)}),n.onKilled.add(function(){return t.destroy(!0)}),n.onThrownAway.add(function(){return t.throwAway()})},l.prototype._registerTrain=function(n){var e=this._view.addTrain(n.ownerID,n.x(),n.y());n.onMoved.add(function(n){return e.move(n.x,n.y,n.heading)}),n.onAccepted.add(function(){return e.accept(n.rate)}),n.onReleased.add(function(){return e.release(n.rate)}),n.onOverCapacity.add(function(){return e.overCapacity()}),n.onFull.add(function(){return e.full()}),n.onVacant.add(function(){return e.vacant()}),n.onUnderCapacity.add(function(){return e.underCapacity()}),n.onReleaseFailed.add(function(){return e.releaseFailed()}),n.onRejected.add(function(){return e.reject()}),n.onSuspension.add(function(){return e.suspend()}),n.onJammed.add(function(){return e.jammed()}),n.onDestroyed.add(function(){return e.graceDestroy()})},n.GameMapHandler=l})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["gamemap_model"] = function(g) {
			((e,t)=>{function r(e,t,i){return{x:e%2?t/2:0,y:Math.floor(e/2)?i/2:0,width:t/2,height:i/2}}Object.defineProperty(e,"__esModule",{value:!0}),e.GameMapModel=void 0;var d=t("../models/rail_line_model"),o=t("./company_model"),h=t("./human_model"),_=t("./line_task_model"),a=t("./residence_model"),f=t("./station_model"),u=t("./train_model"),c=t("./trriger_model");function i(e,t,i,n,s){this.onCompanyAdded=new c.Trigger,this.onResidenceAdded=new c.Trigger,this.onHumanAdded=new c.Trigger,this.onStationAdded=new c.Trigger,this.onTrainAdded=new c.Trigger,this.onRailEdgeAdded=new c.Trigger,this.onStationUpgraded=new c.Trigger,this.onPlatformBoosted=new c.Trigger,this.onGateBoosted=new c.Trigger,this.onRollbacked=new c.Trigger,this.onRailLineAdded=new c.Trigger,this._rs={},this._hs={},this._node_next_id=[],this._edge_next_id=[],this._nodes=[],this._edges=[],this._lines=[],this._primaryLines=[],this._trains=[],this._rf=e,this._tf=t,this._penalty=i,this._num=n,this._random=s;for(var r=0;r<n;r++)this._node_next_id.push(1),this._edge_next_id.push(1),this._nodes.push({}),this._edges.push({}),this._lines.push({}),this._primaryLines.push(void 0),this._trains.push({});o.Company.NEXT_ID=1,a.Residence.NEXT_ID=1,f.Gate.NEXT_ID=1,f.Platform.NEXT_ID=1,f.Station.NEXT_ID=1,d.RailLine.NEXT_ID=1,u.Train.NEXT_ID=1,h.Human.NEXT_ID=1,_.resetLineTaskNextID()}i.prototype.buildCity=function(e,t){this.c=new o.Company(e/2,t/2,this._rf),this.onCompanyAdded.fire(this.c);for(var i=0;i<this._num;i++){var n=r(i,e,t),s=r(i,n.width,n.height);this._createResidence(n.x+s.x+s.width/2,n.y+s.y+s.height/2),this._createResidence(n.x+s.width/2+this._random.generate()*s.width/2,n.y+s.height/2+this._random.generate()*s.height/2)}},i.prototype.buildSandbox=function(e,t){this.c=new o.Company(7*e/8,7*t/8,this._rf),this.onCompanyAdded.fire(this.c),this._createResidence(e/8,100)},i.prototype.immigrate=function(e,t){for(var i=0;i<2;i++)for(var n=0;n<2;n++){for(var s=void 0,r=void 0;s=n*e/2+this._random.generate()*e/2,r=i*t/2+this._random.generate()*t/2,g.Util.distance(s,r,this.c.x(),this.c.y())<Math.min(e,t)/3.5;);this._createResidence(s,r).onImmigrated.fire()}this._rf.request(),this._tf.request()},i.prototype.import=function(e,t,i){this._importNodes(e,t),this._importEdges(e);t=this._importRailLines(e);this._primaryLines[e]=t,this._importTrains(e,i,t),this.onRailLineAdded.fire(t)},i.prototype.insertStation=function(t,e){var i=this,n=this._nodes[t]["n"+e.nid];n.st=new f.Station(t,n,this._rf,this._tf),this.onStationAdded.fire(n.st),Object.keys(this._lines[t]).forEach(function(e){i._lines[t][e].insert(n.st)}),this._rf.request(),this._tf.request()},i.prototype.insertTrain=function(e,t){for(var i=this._nodes[e]["n"+t.nid],n=Object.keys(this._lines[e]),s=0;s<n.length;s++){var r=this._lines[e][n[s]].tasks.filter(function(e){return e.departure===i&&e instanceof _.EdgeTask});0<r.length&&(r=new u.Train(e,r[0],this._rf,this._tf,this._penalty),this._trains[e][r.uid]=r,this.onTrainAdded.fire(r))}},i.prototype.importBranch=function(e,t,i,n){var s=this._node_next_id[e],r=this._edge_next_id[e],i=(this._importNodes(e,i),this._appendEdges(e,t,s),this._importRailLines(e,r));this._importTrains(e,n,i),this.onRailLineAdded.fire(i)},i.prototype.upgradeStation=function(e,t,i){e=this._nodes[e]["n"+t];e.st.upgrade(),this._rf.request(),this._tf.request(),this.onStationUpgraded.fire({st:e.st,lv:i})},i.prototype.boostPlatform=function(e,t){e=this._nodes[e]["n"+t];e.st.platform.boost(),this.onPlatformBoosted.fire(e.st.platform)},i.prototype.boostGate=function(e,t){e=this._nodes[e]["n"+t];e.st.gate.boost(),this.onGateBoosted.fire(e.st.gate)},i.prototype.rollbackPrimaryLine=function(i,e,t,n,s){var r=this;s.forEach(function(e){r._trains[i][e].destroy(),delete r._trains[i][e]}),this._primaryLines[i].destroy(),this._primaryLines[i]=void 0,delete this._lines[i][n],t.forEach(function(e){r._edges[i][e].onDestroyed.fire(),delete r._edges[i][e]}),this._edge_next_id[i]=1,e.forEach(function(e){var t;null!=(t=r._nodes[i][e].st)&&t.destroy(),r._nodes[i][e].onDestroyed.fire(),delete r._nodes[i][e]}),this._node_next_id[i]=1,this._rf.request(),this._tf.request(),this.onRollbacked.fire(i)},i.prototype.destroyRailway=function(n,e,t,i,s,r,o){var d=this,h=this._lines[n][i];r?(h.remove(s,r).forEach(function(e){e.destroy(),delete d._trains[n][e.uid]}),o&&(s=this._lines[n][o.luid],h.connect(h.findById(r.prev),s.findById(o.next)),s.destroy(),delete this._lines[n][s.uid],this._primaryLines[n]===s&&(this._primaryLines[n]=h),(r=this._edges[n][o.eid]).from.branches.splice(r.from.branches.indexOf(r),1))):(h.trains.forEach(function(e){e.destroy(),delete d._trains[n][e.uid]}),h.destroy(),delete this._lines[n][i],this._primaryLines[n]===h&&(this._primaryLines[n]=this._lines[n][Object.keys(this._lines[n])[0]])),t.forEach(function(e){var t=d._edges[n][e],i=(t.from.out.splice(t.from.out.indexOf(t),1),t.to.in.splice(t.to.in.indexOf(t),1),t.from.branches.indexOf(t));-1!==i&&t.from.branches.splice(i,1),d._edges[n][e].onDestroyed.fire(),delete d._edges[n][e]}),e.forEach(function(e){var t;null!=(t=d._nodes[n][e].st)&&t.destroy(),d._nodes[n][e].onDestroyed.fire(),delete d._nodes[n][e]}),this._rf.request(),this._tf.request()},i.prototype.onTick=function(i){for(var t=this,e=0;e<100;e++)this._tf.onTick();this._tf.completed&&(this._rf.onTick(),this._rf.completed)&&(Object.keys(this._rs).forEach(function(e){return t._rs[e].onTick(i)}),this._nodes.forEach(function(t){return Object.keys(t).forEach(function(e){return null==(e=t[e].st)?void 0:e.onTick(i)})}),this._trains.forEach(function(t){return Object.keys(t).forEach(function(e){return t[e].onTick(i)})}),Object.keys(this._hs).forEach(function(e){return t._hs[e].onTick(i)}))},i.prototype.nodes=function(e){return this._nodes[e]},i.prototype.edges=function(e){return this._edges[e]},i.prototype.trains=function(e){return Object.keys(this._trains[e]).length},i.prototype.primaryLine=function(e){var t={nodes:[],edges:[],luid:this._primaryLines[e].uid,ts:[]};return Object.keys(this._nodes[e]).forEach(function(e){return t.nodes.push(e)}),Object.keys(this._edges[e]).forEach(function(e){return t.edges.push(e)}),Object.keys(this._trains[e]).forEach(function(e){return t.ts.push(e)}),t},i.prototype.isSingleLine=function(e){return 1===Object.keys(this._lines[e]).length},i.prototype._find=function(e,t,i){for(var n=Object.keys(this._nodes[e]),s=0;s<n.length;s++){var r=this._nodes[e][n[s]];if(r.x===t&&r.y===i)return r}return null},i.prototype._createResidence=function(e,t){var i=this,e=new a.Residence(e,t,this.c,function(e){e.onGoal.add(function(){return delete i._hs[e.uid]}),e.onKilled.add(function(){return delete i._hs[e.uid]}),i.onHumanAdded.fire(e),i._hs[e.uid]=e},this._rf,this._penalty,this._random);return this.onResidenceAdded.fire(e),this._rs[e.uid]=e},i.prototype._importNodes=function(i,e){var n=this;e.forEach(function(e){var t={id:n._node_next_id[i],x:e.x,y:e.y,st:null,depts:[],in:[],out:[],branches:[],onDestroyed:new c.Trigger};e.st&&(t.st=new f.Station(i,t,n._rf,n._tf),n.onStationAdded.fire(t.st)),n._nodes[i]["n"+t.id]=t,n._node_next_id[i]++})},i.prototype._importEdges=function(e){for(var t=1;t<this._node_next_id[e]-1;t++){var i=this._nodes[e]["n"+t],n=this._nodes[e]["n"+(t+1)],s=new c.Trigger,s={oid:e,id:this._edge_next_id[e],from:i,to:n,onDestroyed:s};i.out.push(s),n.in.push(s),this.onRailEdgeAdded.fire(s),this._edges[e]["e"+s.id]=s,this._edge_next_id[e]++}},i.prototype._appendEdges=function(e,t,i){var t=this._nodes[e]["n"+t.id],n=this._nodes[e]["n"+i],s=new c.Trigger,s={oid:e,id:this._edge_next_id[e],from:t,to:n,onDestroyed:s};1<t.out.length+t.in.length&&t.branches.push(s),t.out.push(s),n.in.push(s),this.onRailEdgeAdded.fire(s),this._edges[e]["e"+s.id]=s,this._edge_next_id[e]++;for(var r=i;r<this._node_next_id[e]-1;r++){var o=this._nodes[e]["n"+r],d=this._nodes[e]["n"+(r+1)],h=new c.Trigger,h={oid:e,id:this._edge_next_id[e],from:o,to:d,onDestroyed:h};o.out.push(h),d.in.push(h),this.onRailEdgeAdded.fire(h),this._edges[e]["e"+h.id]=h,this._edge_next_id[e]++}},i.prototype._importRailLines=function(e,t){var i,n,s=this._edges[e]["e"+(t=void 0===t?1:t)];s.from.st&&2===s.from.depts.length?((n=(i=s.from.depts[0]instanceof _.DeptTask?s.from.depts[0]:s.from.depts[1]).line).open(i),n.add(s.from,s.to)):(n=new d.RailLine(e,s.from,s.to,this._rf,this._tf),this._lines[e][n.uid]=n);for(var r=t+1;r<this._edge_next_id[e];r++){var o=this._edges[e]["e"+r];n.add(o.from,o.to)}return n.close(),n},i.prototype._importTrains=function(e,t,i){for(var n=i.lastAppends,s=0,r=0;r<n.length&&s<t;r+=Math.ceil(n.length/t)){var o=new u.Train(e,n[r],this._rf,this._tf,this._penalty);this._trains[e][o.uid]=o,this.onTrainAdded.fire(o),s++}},e.GameMapModel=i})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["gamemap_view"] = function(g) {
			((i,e)=>{function t(e,i){return new g.E({scene:e,parent:i,width:i.width,height:i.height})}Object.defineProperty(i,"__esModule",{value:!0}),i.GameMapView=i.createFrame=i.createCompany=void 0;var o=e("../models/parameters"),h=e("./commons_view"),a=e("./human_view"),n=e("./residence_view"),r=e("./station_view"),s=e("./train_view"),e=(i.createCompany=function(e,i,t){return new g.Sprite({scene:e,x:i,y:t,width:o.params.view.company,height:o.params.view.company,anchorX:.5,anchorY:.5,src:e.asset.getImageById("company_img")})},i.createFrame=function(e,i){return new g.Sprite({scene:e,anchorX:.5,anchorY:.5,x:i.width/2,y:i.height/2,src:e.asset.getImageById("frame_img")})},y.prototype.addCompany=function(e){this._layer.append(i.createCompany(this._scene,e.x(),e.y()))},y.prototype.addResidence=function(e,i,t){return new n.ResidenceView({scene:this._scene,layer:this._residenceLayer,x:e,y:i,oid:t})},y.prototype.addHuman=function(e,i,t){return new a.HumanView({scene:this._scene,layer:this._humanLayer,oid:e,x:i,y:t,random:this._random})},y.prototype.addRailEdge=function(e,i,t){s=this._scene,i=i,t=t,a=h.colors[e].edge,n=e===this._oid,r=t.x-i.x,r=Math.atan2(t.y-i.y,r)/Math.PI*180;var a,n,r,s=new g.FilledRect({scene:s,cssColor:a,width:g.Util.distance(i.x,i.y,t.x,t.y)+(n?o.params.view.railway/4:0),height:n?o.params.view.railway:2,x:(i.x+t.x)/2,y:(i.y+t.y)/2,anchorX:.5,anchorY:.5,angle:r});return(this._oid===e?this._myRailwayLayer:this._railwayLayer).append(s),s},y.prototype.addStation=function(e){return new r.StationView({scene:this._scene,layer:this._oid===e.ownerID?this._myStationLayer:this._stationLayer,oid:e.ownerID,x:e.node.x,y:e.node.y,self:e.ownerID===this._oid,lv:e.lv})},y.prototype.addTrain=function(e,i,t){return new s.TrainView({scene:this._scene,layer:this._oid===e?this._myTrainLayer:this._trainLayer,x:i,y:t,oid:e,self:e===this._oid})},y.prototype._setup=function(){this._humanLayer=t(this._scene,this._layer),this._residenceLayer=t(this._scene,this._layer),this._railwayLayer=t(this._scene,this._layer),this._stationLayer=t(this._scene,this._layer),this._trainLayer=t(this._scene,this._layer),this._myRailwayLayer=t(this._scene,this._layer),this._myStationLayer=t(this._scene,this._layer),this._myTrainLayer=t(this._scene,this._layer)},y);function y(e){this._scene=e.scene,this._layer=e.layer,this._oid=e.oid,this._random=e.random,this._setup()}i.GameMapView=e})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["line_task_model"] = function(g) {
			!function(t,e){var r,o,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.EdgeTask=t.DeptTask=t.resetLineTaskNextID=void 0,e("../utils/error")),s=e("./route_model"),p=e("./trriger_model"),a=1,e=(t.resetLineTaskNextID=function(){a=1},o=s.WayPoint,n(h,o),h.prototype.act=function(t,e){return t.waiting?(t.waiting!==this&&i.reportError(t.description+" waits for invalid "+this.name+", not for "+t.waiting.name),t.waitRide(this,e)):t.ready(this),{time:0,completed:!1}},h.prototype.cancel=function(t){t.waiting&&t.unready(this)},h.prototype.accept=function(t){this._queue.push(t)},h.prototype.release=function(t){this._queue.splice(this._queue.indexOf(t),1)},h.prototype.top=function(){return this._queue[0]},h.prototype.enter=function(t){this.trains.push(t),this.onTrainChanged.fire(1)},h.prototype.leave=function(t){this.trains.splice(this.trains.indexOf(t),1),this.onTrainChanged.fire(-1)},h.prototype.grace=function(){return 0},h.prototype.blocked=function(t,e){return t?0<=(t=e?this.trains.indexOf(e)-1:this.trains.length-1)?this.trains[t]:null:(t=e?this.trains.indexOf(e)+1:0)<this.trains.length?this.trains[t]:null},h.prototype.destroy=function(){this.stay.node.depts.splice(this.stay.node.depts.indexOf(this),1),this._rf.removeDeptTask(this),this._tf.removeDeptTask(this)},Object.defineProperty(h.prototype,"prev",{get:function(){return this._prev},set:function(t){(this._prev=t)&&t.next!==this&&(t.next=this)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"next",{get:function(){return this._next},set:function(t){(this._next=t)&&t.prev!==this&&(t.prev=this)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"departure",{get:function(){return this.stay.node},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"destination",{get:function(){return this.stay.node},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"empty",{get:function(){return 0===this._queue.length},enumerable:!1,configurable:!0}),h);function h(t,e,n,r,i){var s=o.call(this,t.ownerID,a,"dt"+a,"DeptTask("+a+")",e.st.platform.x(),e.st.platform.y())||this;return s.onTrainChanged=new p.Trigger,s.length=0,s.trains=[],s._queue=[],s.ownerID=t.ownerID,a++,s.line=t,s.stay=e.st.platform,i&&(i.next=s),e.depts.push(s),s._rf=n,s._tf=r,s._rf.addDeptTask(s),s._tf.addDeptTask(s),s}function u(t,e,n,r){this.onTrainChanged=new p.Trigger,this.trains=[],this.ownerID=t.ownerID,this.id=a,this.uid="et"+this.id,this.name="EdgeTask("+this.id+")",a++,this.line=t,this._from=e,this._to=n,this.length=g.Util.distance(e.x,e.y,n.x,n.y),this.line.length+=this.length,e.depts.push(this),r&&(r.next=this)}t.DeptTask=e,u.prototype.enter=function(t){this.trains.push(t),this.onTrainChanged.fire(1)},u.prototype.leave=function(t){this.trains.splice(this.trains.indexOf(t),1),this.onTrainChanged.fire(-1)},u.prototype.grace=function(t,e){var n;return t?((e?e.progress:1)-((n=this.blocked(t,e))?n.progress:0))*this.length:(n=e?e.progress:0,(((t=this.blocked(t,e))?t.progress:1)-n)*this.length)},u.prototype.blocked=function(t,e){if(!t){for(var n=e?e.progress:-1e-6,r=Number.MAX_VALUE,i=null,s=0;s<this.trains.length;s++)e!==this.trains[s]&&n<this.trains[s].progress&&this.trains[s].progress<r&&(i=this.trains[s],r=this.trains[s].progress);return i}for(var o=e?e.progress:1.000001,p=Number.MIN_VALUE,a=null,s=0;s<this.trains.length;s++)e!==this.trains[s]&&o>this.trains[s].progress&&this.trains[s].progress>p&&(a=this.trains[s],p=this.trains[s].progress);return a},u.prototype.destroy=function(){this._from.depts.splice(this._from.depts.indexOf(this),1),this.line.length-=this.length},Object.defineProperty(u.prototype,"vacant",{get:function(){return 0===this.trains.length},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"prev",{get:function(){return this._prev},set:function(t){(this._prev=t)&&t.next!==this&&(t.next=this)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"next",{get:function(){return this._next},set:function(t){(this._next=t)&&t.prev!==this&&(t.prev=this)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"departure",{get:function(){return this._from},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"destination",{get:function(){return this._to},enumerable:!1,configurable:!0}),t.EdgeTask=u}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["train_model"] = function(g) {
			!function(e,t){var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.Train=e.TrainExecutor=void 0,t("../utils/error")),o=t("./line_task_model"),s=t("./parameters"),a=t("./route_model"),c=t("./train_task_model"),p=t("./trriger_model"),u=(f.prototype.step=function(e){for(;0<e;){var t=e;if(e=this._current.execute(e),this._passengers.length>=this.train.capacity&&this.train.penalty.crowd(this.train.ownerID,t-e),!this._current.completed){1<=this._current.progress&&this.train.onSuspension.fire();break}this._currentLineTask.leave(this.train),this._current.complete(),this._current=this._createTrainTask(this._currentLineTask.next),this._currentLineTask=this._currentLineTask.next}},f.prototype.accept=function(e){var t;this.stay?(t=this._passengers.push(e),e.onTrainIndexed.fire(t),this.train.onAccepted.fire()):i.reportError("running "+this.train.name+" rejects to ride "+e.description)},f.prototype.shift=function(){if(this.stay)for(var e=0;e<this._passengers.length;e++){var t=this._passengers[e];if(t.isGettingOut(this.train)){this._passengers.splice(e,1),this.train.onReleased.fire();for(var r=e;r<this._passengers.length;r++)this._passengers[r].onTrainIndexed.fire(r);return t}}else i.reportError("running "+this.train.name+" can't shift passengers to platform")},f.prototype.giveup=function(e){var t=this.full,r=this.overCapacity,e=this._passengers.indexOf(e);this._passengers.splice(e,1),this.train.onReleased.fire();for(var n=e;n<this._passengers.length;n++)this._passengers[n].onTrainIndexed.fire(n);t&&this.train.onVacant.fire(),r&&!this.overCapacity&&this.train.onUnderCapacity.fire()},f.prototype.charge=function(t){this._passengers.forEach(function(e){return e.charge(t)})},f.prototype.destroy=function(){this._passengers.forEach(function(e){return e.throwAway()})},f.prototype.brake=function(e){this._speed=Math.max(this._speed-s.params.acceleration.train*e,0)},f.prototype.accelerate=function(e){this._speed=Math.min(this._speed+s.params.acceleration.train*e,s.params.speed.train)},Object.defineProperty(f.prototype,"x",{get:function(){return this._current.x},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"y",{get:function(){return this._current.y},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"task",{get:function(){return this._currentLineTask},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"stay",{get:function(){return this._current.stay},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"passengers",{get:function(){return this._passengers.length},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"rate",{get:function(){return this._passengers.length/this.train.capacity},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"full",{get:function(){var e;return null!=(e=this.stay)&&e.stay.boosted?this._passengers.length>=this.train.capacity*s.params.boost.platform:this._passengers.length>=this.train.capacity},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"overCapacity",{get:function(){return this._passengers.length>this.train.capacity},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"gettingOff",{get:function(){for(var e=0,t=0;t<this._passengers.length;t++)this._passengers[t].isGettingOut(this.train)&&e++;return e},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"progress",{get:function(){return this._current.progress},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"heading",{get:function(){return this._current.heading},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"speed",{get:function(){return this._speed},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"nextStop",{get:function(){for(var e=this._currentLineTask;e instanceof o.EdgeTask;)e=e.next;return e},enumerable:!1,configurable:!0}),f.prototype._createTrainTask=function(e){var t;return e instanceof o.DeptTask?(t=new c.StayTask(e,this),e.stay.arrive(e),t):new c.MoveTask(e,this)},f);function f(e,t){var r=this;this._passengers=[],this._speed=0,this.train=e,this._currentLineTask=t,this.train.onMoved.add(function(){return r._passengers.forEach(function(e){return e.travel()})}),this._current=this._createTrainTask(t)}e.TrainExecutor=u;h=a.WayPoint,r(g,h),g.prototype.onTick=function(e){this._exec.step(e)},g.prototype.act=function(e,t){return{time:t,completed:!0}},g.prototype.cancel=function(e){i.reportError(e.description+" tries to cancel invalid "+this.name)},g.prototype.accept=function(e){this._exec.accept(e)},g.prototype.giveup=function(e){this._exec.giveup(e)},g.prototype.destroy=function(){this._rf.removeTrain(this),this._tf.removeTrain(this),this._exec.destroy(),this.onDestroyed.fire()},Object.defineProperty(g.prototype,"task",{get:function(){return this._exec.task},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"stay",{get:function(){return this._exec.stay},enumerable:!1,configurable:!0}),g.prototype.x=function(){return this._exec.x},g.prototype.y=function(){return this._exec.y},Object.defineProperty(g.prototype,"heading",{get:function(){return this._exec.heading},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"progress",{get:function(){return this._exec.progress},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"rate",{get:function(){return this._exec.rate},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"nextStop",{get:function(){return this._exec.nextStop},enumerable:!1,configurable:!0}),g.NEXT_ID=1;var h,t=g;function g(e,t,r,n,i){var o=h.call(this,e,g.NEXT_ID,"t"+g.NEXT_ID,"Train("+g.NEXT_ID+")",t.departure.x,t.departure.y)||this;return o.capacity=s.params.capacity.train,o.onMoved=new p.Trigger,o.onAccepted=new p.Trigger,o.onReleased=new p.Trigger,o.onOverCapacity=new p.Trigger,o.onFull=new p.Trigger,o.onVacant=new p.Trigger,o.onUnderCapacity=new p.Trigger,o.onReleaseFailed=new p.Trigger,o.onRejected=new p.Trigger,o.onSuspension=new p.Trigger,o.onJammed=new p.Trigger,o.onDestroyed=new p.Trigger,g.NEXT_ID++,o.ownerID=e,o.penalty=i,o._exec=new u(o,t),t.line.trains.push(o),o._rf=r,o._tf=n,o._rf.addTrain(o),o._tf.addTrain(o),o}e.Train=t}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["train_task_model"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StayTask=e.MoveTask=void 0;var i=t("../utils/error"),s=t("./line_task_model"),a=t("./parameters"),n=1e-4;function r(e,t){this.progress=0,this._task=e,this._exec=t,this._task.enter(this._exec.train),this._exec.charge(e.length*a.params.weight.charge)}function o(e,t){this.heading=0,this.progress=0,this._penalty=0,this._task=e,this._exec=t,e.enter(this._exec.train)}r.prototype.execute=function(e){var t=this._exec.speed*this._exec.speed/a.params.acceleration.train/2,i=e*this._exec.speed,s=this._nextStop(t),r=this._vacant(a.params.distance.train+t+i+n);if(r.dist-=a.params.distance.train,r.blocked&&r.dist<s&&this._exec.nextStop!==r.blocked.nextStop&&(r.dist=s),r.dist<=0)this._exec.brake(e),this._exec.train.onJammed.fire();else{t=r.dist<t||s<t,r=Math.min(r.dist,s,i,(1-this.progress)*this._task.length);if(r>=(1-this.progress)*this._task.length)return this.progress=1,this._exec.train.onMoved.fire(this),s=e-r/this._exec.speed,t?this._exec.brake(r/this._exec.speed):this._exec.accelerate(r/this._exec.speed),s;this.progress+=r/this._task.length,this._exec.train.onMoved.fire(this),t?this._exec.brake(e):this._exec.accelerate(e)}return 0},r.prototype.complete=function(){},Object.defineProperty(r.prototype,"x",{get:function(){return(1-this.progress)*this._task.departure.x+this.progress*this._task.destination.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return(1-this.progress)*this._task.departure.y+this.progress*this._task.destination.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"completed",{get:function(){return 1<=this.progress},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stay",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"heading",{get:function(){return Math.atan2(this._task.destination.y-this._task.departure.y,this._task.destination.x-this._task.departure.x)},enumerable:!1,configurable:!0}),r.prototype._vacant=function(e){var t=this._task.blocked(!1,this._exec.train);if(t)return{blocked:t,dist:this._task.grace(!1,this._exec.train)};for(var i=this._task.grace(!1,this._exec.train),s=this._task.next;i<e;){i+=s.grace(!1);var r=s.blocked(!1);if(r===this._exec.train)return{blocked:null,dist:e};if(r)return{blocked:r,dist:i};s=s.next}return{blocked:null,dist:i}},r.prototype._nextStop=function(e){for(var t=(1-this.progress)*this._task.length,i=this._task.next;i instanceof s.EdgeTask&&t<e;)t+=i.length,i=i.next;return t},e.MoveTask=r,o.prototype.execute=function(e){for(var t=(1-this.progress)*a.params.interval.train,i=(0<this._penalty&&(this._penalty-=e),!1);this._penalty<=0&&!i;){if(this._task.stay.full){this._exec.train.onReleaseFailed.fire();break}i=this._release()}for(;this._penalty<=0&&!this._task.empty&&!this._exec.full;)this._obtain();return t+n<e?(this.progress=1,e-t):(this.progress+=e/a.params.interval.train,0)},o.prototype.complete=function(){this._task.empty||(this._exec.train.onRejected.fire(),this.stay.stay.onRejected.fire())},Object.defineProperty(o.prototype,"completed",{get:function(){return!(this.progress<1||0<this._exec.gettingOff)&&(!!this._exec.full||!this._activeSuspension()&&this._task.empty)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"x",{get:function(){return this._task.departure.x},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"y",{get:function(){return this._task.departure.y},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"stay",{get:function(){return this._task},enumerable:!1,configurable:!0}),o.prototype._obtain=function(){var e,t=this._task.top();t&&(t.next!==this._task?i.reportError(t.description+" seeking ("+(null==(e=t.next)?void 0:e.name)+") tries to invalid "+this._task.name):t.waiting!==this._task?i.reportError(t.description+" waiting ("+(null==(e=t.next)?void 0:e.name)+") tries to invalid "+this._task.name):(e=this._exec.overCapacity,t.ride(this._exec.train),!e&&this._exec.overCapacity&&this._exec.train.onOverCapacity.fire(),this._exec.full&&this._exec.train.onFull.fire(),this._consume(!0)))},o.prototype._release=function(){var e=this._exec.full,t=this._exec.overCapacity,i=this._exec.shift();return!i||(i.getOff(this._exec.train),t&&!this._exec.overCapacity&&this._exec.train.onUnderCapacity.fire(),e&&!this._exec.full&&this._exec.train.onVacant.fire(),this._consume(!1),!1)},o.prototype._consume=function(e){var t=1/(e?a.params.speed.ride:a.params.speed.getOff);e&&this._task.stay.boosted&&(t/=a.params.boost.platform,this._task.stay.onPushing.fire()),this._penalty+=t},o.prototype._activeSuspension=function(){if(this.stay.line.crowed)return!1;if(this.stay.blocked(!0,this._exec.train))return!1;for(var e,t=this.stay.line.length/this.stay.line.trains.length+n,i=0,s=this._task.prev;!e;)i+=s.grace(!0),e=s.blocked(!0),s=s.prev;return t<i},e.StayTask=o})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["rail_line_model"] = function(g) {
			((t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RailLine=void 0;var r=i("../utils/error"),o=i("./line_task_model"),e=i("./parameters"),a=i("./trriger_model"),i=(h.prototype.add=function(t,i){this._tail&&this._tail.destination!==t?r.reportError("failed to append lt ("+t.x+", "+t.y+") is not connected ("+this._tail.destination.x+", "+this._tail.destination.y+")"):(this._tail=new o.EdgeTask(this,t,i,this._tail),i.st&&(this._tail=new o.DeptTask(this,i,this._rf,this._tf,this._tail)))},h.prototype.open=function(t){this._openTo=new o.DeptTask(this,t.stay.node,this._rf,this._tf),this._openTo.next=t.next,this._openFrom=t,this._tail=this._openFrom,this._openTo.prev=null,t.next=null},h.prototype.close=function(){for(var t,i=null!=(t=this._openFrom)?t:this._top,e=this._tail instanceof o.EdgeTask?this._tail:this._tail.prev;e!==i;)e instanceof o.DeptTask?this._tail=new o.DeptTask(this,e.departure,this._rf,this._tf,this._tail):e instanceof o.EdgeTask?this._tail=new o.EdgeTask(this,e.destination,e.departure,this._tail):r.reportError("unknown object "+JSON.stringify(e)),e=e.prev;e instanceof o.EdgeTask&&(this._tail=new o.EdgeTask(this,e.destination,e.departure,this._tail)),this._tail.next=null!=(t=this._openTo)?t:this._top},h.prototype.insert=function(n){var s=this;this.find(function(t){return t.destination.st===n}).forEach(function(t){var i,e;t.next instanceof o.DeptTask?r.reportError(s.name+" already has "+n.name+" in line"):(i=t.next,e=new o.DeptTask(s,n.node,s._rf,s._tf,t),(t.next=e).next=i)})},h.prototype.find=function(i){var e=[];return this.tasks.forEach(function(t){i(t)&&e.push(t)}),e},h.prototype.findById=function(t){if(this._top.uid===t)return this._top;for(var i=this._top.next;i!==this._top;){if(i.uid===t)return i;i=i.next}return null},h.prototype.remove=function(t,i){var e,n=this,s=[],r=this.findById(i.prev),i=this.findById(i.next);return t.forEach(function(t){t=n.findById(t);t===n._top&&(e=!0),t.trains.forEach(function(t){n.trains.splice(n.trains.indexOf(t),1),s.push(t)}),t.destroy()}),e&&(this._top=i),r.next=i,s},h.prototype.connect=function(t,i){var e,n,s;t.line!==this?r.reportError(this.name+" tries to connect from invalid "+t.id+" (parent = "+t.line.name+") "):i.line===this?r.reportError(this.name+" tries to connect to invalid "+i.id+" (parent = "+i.line.name+") "):(e=(t=t).next,n=i.prev,this._rf.changeLineOwner((s=i).line,this),this._tf.changeLineOwner(i.line,this),i.line.changeLineOwner(this),t.next=s,e.prev=n)},h.prototype.changeLineOwner=function(i){this.tasks.forEach(function(t){t.trains.forEach(function(t){return i.trains.push(t)}),(t.line=i).length+=t.length})},h.prototype.destroy=function(){this._rf.removeRailLine(this),this._tf.removeRailLine(this),this.onDestroyed.fire()},Object.defineProperty(h.prototype,"tasks",{get:function(){for(var t=[this._top],i=this._top.next;i&&i!==this._top;i=i.next)t.push(i);return t},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"lastAppends",{get:function(){for(var t,i=null!=(i=this._openFrom)?i:this._top,e=null!=(t=this._openTo)?t:this._top,n=[i],s=i.next;s&&s!==e;s=s.next)n.push(s);return n},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"crowed",{get:function(){return this.trains.length>=Math.max(1,Math.ceil(2*this.length/e.params.distance.train)-3)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"stations",{get:function(){var i={};return this.tasks.forEach(function(t){t instanceof o.DeptTask&&(i[t.stay.station.uid]=t.stay.station)}),i},enumerable:!1,configurable:!0}),h.NEXT_ID=1,h);function h(t,i,e,n,s){this.onDestroyed=new a.Trigger,this.trains=[],this.length=0,this.ownerID=t,this.id=h.NEXT_ID,this.uid="l"+this.id,this.name="RailLine("+this.id+")",h.NEXT_ID++,n.addRailLine(this),s.addRailLine(this),i.st?(this._top=new o.DeptTask(this,i,n,s),this._tail=new o.EdgeTask(this,i,e,this._top)):this._top=this._tail=new o.EdgeTask(this,i,e),e.st&&(this._tail=new o.DeptTask(this,e,n,s,this._tail)),this._rf=n,this._tf=s}t.RailLine=i})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["territory_view"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TerritoryView=e.createBoundary=e.createTerritory=void 0;var i=t("../models/parameters"),s=t("./effect"),t=(e.createTerritory=function(e,t,r){return new g.FrameSprite({scene:e,x:r.x,y:r.y,width:i.params.view.territory[0],height:i.params.view.territory[1],src:e.asset.getImageById("territory_img"),frames:[t],opacity:.25})},e.createBoundary=function(e,t,r){return new g.FrameSprite({scene:e,x:r.x,y:r.y,width:i.params.view.territory[0],height:i.params.view.territory[1],src:e.asset.getImageById("boundary_img"),frames:[t]})},r.prototype.destroy=function(){this._territory.destroyed()||this._territory.destroy(),this._boundary.destroyed()||this._boundary.destroy()},r.prototype.show=function(){this._territory.show()},r.prototype.hide=function(){this._territory.hide(),this._unlimited&&this.unlimit()},r.prototype.unlimit=function(){var t,r=this;this._territory.visible()||(t=new g.E({scene:this._scene,x:this._layer.width/2,width:i.params.view.notice[0],height:i.params.view.notice[1],anchorX:.5}),this._noticeLayer.append(t),s.flash({scene:this._scene,layer:t,asset:"notice_modal_img",opacity:.5,onStart:function(e){e.append(new g.Sprite({scene:r._scene,x:t.width/2,anchorX:.5,y:t.height/2,anchorY:.5,src:r._scene.asset.getImageById("unlimit_territory_img")}))},onEnd:function(){t.destroy()}}),s.fadeOut({scene:this._scene,view:this._boundary,fade:1})),this._unlimited=!0},r.prototype._setup=function(){this._territory=e.createTerritory(this._scene,this._oid,this._area),this._layer.append(this._territory),this._boundary=e.createBoundary(this._scene,this._oid,this._area),this._layer.append(this._boundary)},r);function r(e){this._scene=e.scene,this._layer=e.layer,this._noticeLayer=e.noticeLayer,this._oid=e.oid,this._area=e.area,this._setup()}e.TerritoryView=t})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["company_model"] = function(g) {
			!function(t,o){var e,r,n=this&&this.__extends||(e=function(t,o){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,o){t.__proto__=o}:function(t,o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}))(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.Company=void 0,o("./route_model")),o=(r=o.WayPoint,n(c,r),c.prototype.act=function(t,o){return t.seek(this.x(),this.y(),o)},c.prototype.cancel=function(t){},c.NEXT_ID=1,c);function c(t,o,n){t=r.call(this,null,c.NEXT_ID,"c"+c.NEXT_ID,"Company("+c.NEXT_ID+")",t,o)||this;return c.NEXT_ID++,n.addCompany(t),t}t.Company=o}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["human_model"] = function(g) {
			!function(t,e){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.Human=void 0,e("../utils/error")),h=e("./parameters"),o=e("./route_model"),s=e("./station_model"),u=e("./trriger_model"),d=(a.prototype.step=function(t){if(!this._suspended)for(;0<t&&this._subgoal;){var e=this._subgoal.act(this._human,t);t=e.time,e.completed&&this.subcomplete()}},a.prototype.travel=function(t){this._x=t.x(),this._y=t.y()},a.prototype.seek=function(t,e,i){var n=g.Util.distance(this._x,this._y,t,e),r=i*h.params.speed.human;return n+1e-4<r?(this._x=t,this._y=e,this.onMoved.fire(),{time:i-n/h.params.speed.human,completed:!0}):(i=Math.atan2(e-this._y,t-this._x),this._heading=i,this._x+=r*Math.cos(i),this._y+=r*Math.sin(i),this.onMoved.fire(),{time:0,completed:!1})},a.prototype.walkAround=function(t,e,i){g.Util.distance(this._x,this._y,t.x(),t.y())<e?(this._human.waitIn||this._human.touch(t),this.onToured.fire()):(e=this._forward(t,i)).blocked?this.detour(t,e.time):this.onToured.fire()},a.prototype.subcomplete=function(){this._human._consumed.push(this._subgoal),this._subgoal=this._subgoal.subgoal(this._destination),this._subgoal||this.onGoal.fire()},a.prototype.refresh=function(){var t=this._subgoal;this._subgoal=this._human.subgoal(this._destination),this._subgoal?(t&&this._subgoal!==t&&t.cancel(this._human),this._suspended=!1):r.reportError(this._human.description+" bounded for "+this._destination.name+" has no goal")},a.prototype.moveBy=function(t,e){this._x+=t,this._y+=e},a.prototype.suspend=function(){this._suspended=!0},Object.defineProperty(a.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"heading",{get:function(){return this._heading},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"subgoal",{get:function(){return this._subgoal},enumerable:!1,configurable:!0}),a.prototype._forward=function(t,e){var i={x:t.x()-this._x,y:t.y()-this._y},i=(this._heading=Math.atan2(i.y,i.x),g.Util.distance(this._x,this._y,t.x(),t.y())),i=Math.min(e*h.params.speed.human,i),n=t.approach(this._human,this.heading,h.params.distance.human);return n.blocked&&(this._human.waitIn||this._human.touch(t),(i=Math.min(i,n.distance-h.params.distance.human))<0)?{blocked:!0,time:e}:(this._x+=i*Math.cos(this._heading),this._y+=i*Math.sin(this._heading),this.onMoved.fire(),{blocked:n.blocked,time:e-i/h.params.speed.human})},a.prototype.detour=function(t,e){var i={x:-(t.y()-this._y),y:t.x()-this._x},i=(this._heading=Math.atan2(i.y,i.x),h.params.speed.human*e),e=t.approach(this._human,this.heading,h.params.distance.human);e.blocked&&(i=Math.min(i,e.distance-h.params.distance.detour))<0||(this._x+=i*Math.cos(this._heading),this._y+=i*Math.sin(this._heading),this.onMoved.fire(),this.onDetoured.fire())},a);function a(t,e,i,n,r){this.onDetoured=new u.Trigger,this.onToured=new u.Trigger,this.onMoved=new u.Trigger,this.onGoal=new u.Trigger,this._human=t,this._x=e,this._y=i,this._destination=r,this._subgoal=n}p=o.WayPoint,i(c,p),c.prototype.act=function(t,e){return r.reportError(this.description+" should not set subgoal "+t.description),{time:0,completed:!1}},c.prototype.cancel=function(t){r.reportError(this.description+" can't cancel "+t.description)},c.prototype.onTick=function(t){this._exec.step(t),this._life-=t,this._life<0&&this.kill()},c.prototype.travel=function(){this._travelling?(this._exec.travel(this._travelling),this.onMoved.fire()):r.reportError(this.description+" stands on ground can't travel")},c.prototype.seek=function(t,e,i){return this._exec.seek(t,e,i)},c.prototype.walkAround=function(t,e){return this._exec.walkAround(t,h.params.distance.gate,e)},c.prototype.reroute=function(){var t=this._findOwner(this.next),e=(this._exec.refresh(),this._findOwner(this.next));t!==e&&this.onOwnerShifted.fire(e)},c.prototype.touch=function(t){this.next!==t?r.reportError(this.description+" seeking "+this.next.name+" tries to touch invalid "+t.name):(this._waitIn=t,this._waitIn.accept(this),this.onTouched.fire())},c.prototype.detouch=function(t){this._waitIn!==t?r.reportError(this.description+" facing "+this._waitIn.name+" tries to detouch invalid "+t.name):(this._waitIn.release(this),this._waitIn=null,this._waitGateIn=0,this.onDetouched.fire())},c.prototype.waitGateIn=function(t,e){this._waitGateIn+=e,this._waitGateIn>h.params.threshold.gateIn&&this.onTooWaitGateIn.fire(),this._penalty.waitGate(t.ownerID,e)},c.prototype.gateIn=function(t){var e;this.next!==t?r.reportError(this.description+" seeking "+this.next.name+" tries to enter invalid "+t.name):this._waitIn?this._waitIn!==this.next?r.reportError(this.description+" touching "+this._waitIn+" seeks "+this.next.name):(e=this._waitIn.station.platform,this._subcomplete(),this.next!==e?r.reportError(this.description+" seeking "+this.next.name+" tries to enter invalid "+e.name):(this._on=e,this._on.accept(this),this._waitIn=null,this._waitGateIn=0,this.onGateIn.fire({x:t.x(),y:t.y()}))):r.reportError(this.description+" tries to enter gate without touching")},c.prototype.ready=function(t){this.next!==t?r.reportError(this.description+" seeking "+this.next.name+" tries to enter invalid "+t.name):(this._readied=t,this._readied.accept(this))},c.prototype.unready=function(t){this._readied!==t?r.reportError(this.description+" facing "+this._readied+" tries to give up invalid "+t.name):(this._readied.release(this),this._readied=null,this.onUnready.fire())},c.prototype.waitRide=function(t,e){this._waitRide+=e,this._waitRide>h.params.threshold.ride&&(this.onTooWaitTrain.fire(),0===t.trains.length)&&t.stay.tooWaitTrain(t),this._penalty.waitTrain(t.ownerID,e)},c.prototype.ride=function(t){this._readied?this._readied!==t.stay?r.reportError(this.description+" facing "+this._readied.name+"tries to ride invalind "+t.name+" facing "+t.stay.name):this.next!==t.stay?r.reportError(this.description+" seeking "+this.next.name+" tries to ride invalind "+t.name+" facing "+t.stay):(t.accept(this),this._on.release(this),this._readied.release(this),this._on=null,this._readied=null,this._waitRide=0,this._travelling=t,this.onRidden.fire(),this._subcomplete(),this.next instanceof s.Platform||r.reportError(this.description+" seeking invalid "+this.next.name)):r.reportError(this.description+" doesn't ready, but tries to ride "+t.name)},c.prototype.charge=function(t){this._fee+=t},c.prototype.isGettingOut=function(t){var e;return this.travelling!==t&&r.reportError(this.name+" on "+(null==(e=this.travelling)?void 0:e.name)+" is asked getting out from invalid "+t.name),this.next===t&&this._subcomplete(),this.next===t.stay.stay&&this.nextnext===t.task&&this._keepRiding(t),this.next===t.stay.stay},c.prototype.getOff=function(t){this._travelling?this._travelling!==t?r.reportError(this.description+" ridding "+this._travelling.name+" tries to get off invalid "+t.name):(this._on=t.stay.stay,t.stay.stay.accept(this),this.onGotOff.fire(),this._subcomplete(),this._travelling=null):r.reportError(this.description+" not travelling tries to get off "+t.name)},c.prototype.throwAway=function(){var t,e;this._waitIn=null,this._on&&(t=this._random.generate()*Math.PI*2,e=this._random.generate()*h.params.distance.residence,this._exec.moveBy(e*Math.cos(t),e*Math.sin(t))),this._on=null,this._readied=null,this._travelling&&(t=this._random.generate()*Math.PI*2,e=this._random.generate()*h.params.distance.residence,this._exec.moveBy(e*Math.cos(t),e*Math.sin(t))),this._travelling=null,this._waitOut=null,this._fee=0,this._waitGateIn=0,this._waitGateOut=0,this._exec.suspend(),this.onThrownAway.fire()},c.prototype.queue=function(t){this.next!==t?r.reportError(this.description+" seeking "+this.next.name+" tries to get out invalid "+t.name):(this._waitOut=t,this._waitOut.queue(this))},c.prototype.dequeue=function(t){this._waitOut!==t?r.reportError(this.description+" facing "+this._waitOut.name+" tries to detouch invalid "+t.name):(this._waitOut.dequeue(this),this._waitOut=null,this._waitGateOut=0,this.onDequeued.fire())},c.prototype.waitGateOut=function(t,e){this._waitGateOut+=e,this._waitGateOut>h.params.threshold.gateOut&&this.onTooWaitGateOut.fire(),this._penalty.waitGate(t.ownerID,e)},c.prototype.gateOut=function(t){var e;this.next!==t?r.reportError(this.description+" seeking "+this.next.name+" tries to get out invalid "+t.name):this._waitOut?this._waitOut!==this.next?r.reportError(this.description+" seeking "+this.next.name+" tries to get out invalid "+this._waitOut.name):this._waitOut!==this._on.station.gate?r.reportError(this.description+" getting out "+this._waitOut.id+" "+this._on.station.gate.name):(this._on.release(this),this.onScored.fire({oid:t.ownerID,num:Math.sqrt(this._fee)*h.params.weight.fee}),this._fee=0,this._subcomplete(),this._on=null,this._waitOut=null,this._waitGateOut=0,t=this._random.generate()*Math.PI*2,e=this._random.generate()*h.params.distance.residence,this._exec.moveBy(e*Math.cos(t),e*Math.sin(t)),this.onGateOut.fire()):r.reportError(this.description+" tries to get out gate without waiting")},c.prototype.kill=function(){this._waitIn&&this._waitIn.release(this),this._on&&this._on.release(this),this._readied&&this._readied.release(this),this._travelling&&this._travelling.giveup(this),this._waitOut&&this._waitOut.dequeue(this),this._rf.removeHuman(this),this.onKilled.fire()},c.prototype.x=function(){return this._exec.x},c.prototype.y=function(){return this._exec.y},Object.defineProperty(c.prototype,"heading",{get:function(){return this._exec.heading},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"next",{get:function(){return this._exec.subgoal},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"nextnext",{get:function(){return this.next.subgoal(this._destination)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"waitIn",{get:function(){return this._waitIn},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"stand",{get:function(){return this._on},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"waiting",{get:function(){return this._readied},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"travelling",{get:function(){return this._travelling},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"waitOut",{get:function(){return this._waitOut},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"description",{get:function(){var t;return this.name+"(wi="+(null==(t=this._waitIn)?void 0:t.uid)+",on="+(null==(t=this._on)?void 0:t.uid)+",dp="+(null==(t=this._readied)?void 0:t.uid)+",t="+(null==(t=this._travelling)?void 0:t.id)+"),wo="+(null==(t=this._waitOut)?void 0:t.uid)+")"},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"route",{get:function(){for(var t=[],e=this.next,i=0;e&&i<20;)t.push(e.name),t.push(""+e.cost(this._destination)),e=e.subgoal(this._destination),i++;return this.name+": "+this._consumed.map(function(t){return t.name}).join("=>")+"=>=>"+t.join("=>")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"initialOwner",{get:function(){return this._initialOwner},enumerable:!1,configurable:!0}),c.prototype._subcomplete=function(){this._exec.subcomplete()},c.prototype._findOwner=function(t){for(var e=t;e;){if(null!==e.owner)return e.owner;e=e.subgoal(this._destination)}return null},c.prototype._keepRiding=function(t){var e;this.next!==(null==(e=t.stay)?void 0:e.stay)?r.reportError(this.description+" seeking "+this.next.name+" tries to keep riding invalid "+t.name+" on "+t.stay.name):this.nextnext!==t.stay?r.reportError(this.description+" seeking "+this.next.name+" to "+this.nextnext.name+" tries to keep riding invalid "+t.name+" on "+t.stay.name):this._travelling!==t?r.reportError(this.description+" on "+(null==(e=this._travelling)?void 0:e.name)+" tries to keep riding invalid "+t.name):(this._subcomplete(),this._subcomplete())},c.NEXT_ID=1;var p,e=c;function c(t,e,i,n,r,o,s){var a=p.call(this,null,c.NEXT_ID,"h"+c.NEXT_ID,"Human("+c.NEXT_ID+")",t,e)||this;return a._consumed=[],a.onMoved=new u.Trigger,a.onDetoured=new u.Trigger,a.onToured=new u.Trigger,a.onTouched=new u.Trigger,a.onGateIn=new u.Trigger,a.onPlatformIndexed=new u.Trigger,a.onRidden=new u.Trigger,a.onTrainIndexed=new u.Trigger,a.onGotOff=new u.Trigger,a.onGateOut=new u.Trigger,a.onTooWaitGateIn=new u.Trigger,a.onTooWaitTrain=new u.Trigger,a.onTooWaitGateOut=new u.Trigger,a.onDetouched=new u.Trigger,a.onUnready=new u.Trigger,a.onDequeued=new u.Trigger,a.onOwnerShifted=new u.Trigger,a.onScored=new u.Trigger,a.onGoal=new u.Trigger,a.onKilled=new u.Trigger,a.onThrownAway=new u.Trigger,a._fee=0,a._waitGateIn=0,a._waitRide=0,a._waitGateOut=0,c.NEXT_ID++,a._random=s,a._life=h.params.interval.human,a._destination=n,a._penalty=o,a._initialOwner=a._findOwner(i),a._exec=new d(a,t,e,i.subgoal(n),n),a._exec.onMoved.add(function(){return a.onMoved.fire()}),a._exec.onGoal.add(function(){a._rf.removeHuman(a),a.onGoal.fire()}),a._exec.onDetoured.add(function(){return a.onDetoured.fire()}),a._exec.onToured.add(function(){return a.onToured.fire()}),a._rf=r,a._rf.addHuman(a),a}t.Human=e}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["route_model"] = function(g) {
			(t=>{function o(t,o,i,n,e,s){this._goals={},this.owner=t,this.id=o,this.uid=i,this._x=e,this._y=s,this.name=n+"("+t+") ("+Math.floor(e)+", "+Math.floor(s)+")"}Object.defineProperty(t,"__esModule",{value:!0}),t.WayPoint=void 0,o.prototype.cost=function(t){return null==(t=this._goals[t.uid])?void 0:t.cost},o.prototype.subgoal=function(t){return null==(t=this._goals[t.uid])?void 0:t.next},o.prototype.addWayPoint=function(t,o,i){var n=this._goals[o.uid];n?(n.next=t,n.cost=i):this._goals[o.uid]={goal:o,next:t,cost:i}},o.prototype.x=function(){return this._x},o.prototype.y=function(){return this._y},t.WayPoint=o})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["residence_model"] = function(g) {
			!function(t,e){var r,a,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.Residence=void 0,e("../utils/error")),o=e("./human_model"),p=e("./parameters"),s=e("./route_model"),c=e("./station_model"),l=e("./trriger_model"),e=(a=s.WayPoint,n(u,a),u.prototype.onTick=function(t){for(this._penalty-=t;this._penalty<0;)this._spawn(),this._penalty+=p.params.interval.residence},u.prototype.act=function(t,e){return i.reportError(t.description+" set invalid goal "+this.name+" "),{time:0,completed:!1}},u.prototype.cancel=function(t){i.reportError(t.description+" tries to cancel invalid "+this.name+" ")},Object.defineProperty(u.prototype,"nextOwner",{get:function(){for(var t=this;t;){if(null!==t.owner)return t.owner;t=t.subgoal(this._destination)}return null},enumerable:!1,configurable:!0}),u.prototype._spawn=function(){var t=this.subgoal(this._destination);if(t instanceof c.Gate){var e=Math.atan2(t.y()-this.y(),t.x()-this.x());if(t.approach(this,e,p.params.distance.residence).blocked)return void this.onSuspension.fire()}t=this._random.generate()*Math.PI*2,e=this._random.generate()*p.params.distance.residence;this._spawnHandler(new o.Human(this.x()+e*Math.cos(t),this.y()+e*Math.sin(t),this,this._destination,this._rf,this._pm,this._random))},u.NEXT_ID=1,u);function u(t,e,n,r,i,o,s){t=a.call(this,null,u.NEXT_ID,"r"+u.NEXT_ID,"Residence("+u.NEXT_ID+")",t,e)||this;return t.onImmigrated=new l.Trigger,t.onSuspension=new l.Trigger,t._penalty=p.params.interval.residence,u.NEXT_ID++,t._destination=n,t._rf=i,t._pm=o,t._random=s,t._spawnHandler=r,i.addResidence(t),t}t.Residence=e}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["path_finder_model"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PathFinder=e.PathEdge=e.PathNode=void 0;var n=t("../utils/error"),o=(i.prototype.prepare=function(){for(var e=0,t=this.in;e<t.length;e++){var o=t[e];o.from.cost=o.cost,(o.from.via=this)._queue.push(o.from)}},i.prototype.walkThrough=function(){for(var i=this,e=function(e){var o=(e=>{for(var t,o=Number.MAX_VALUE,i=0,n=e;i<n.length;i++){var r=n[i];r.cost<o&&(o=(t=r).cost)}return e.splice(e.indexOf(t),1),t})(t._queue);o.in.forEach(function(e){var t=e.from,e=o.cost+e.cost;e<t.cost&&(t.cost=e,t.via=o,i._queue.push(t))})},t=this,o=0;0<this._queue.length&&o<200;o++)e()},i.prototype.clear=function(){this._queue.splice(0,this._queue.length),this.cost=Number.MAX_VALUE,this.via=void 0},Object.defineProperty(i.prototype,"completed",{get:function(){return 0===this._queue.length},enumerable:!1,configurable:!0}),i);function i(e){this.cost=Number.MAX_VALUE,this.in=[],this.out=[],this._queue=[],this.origin=e}e.PathNode=o;var r=function(e,t,o){this.from=e,this.to=t,this.cost=o,this.from.out.push(this),this.to.in.push(this)},t=(e.PathEdge=r,s.prototype.node=function(e){var t=this._nodes[e.uid];return t||(t=new o(e),this._nodes[e.uid]=t)},s.prototype.unnode=function(e){var t=this,o=this._nodes[e.uid];o&&(o.in.forEach(function(e){e.from.out.splice(e.from.out.indexOf(e),1),delete t._edges[e.from.origin.uid+e.to.origin.uid]}),o.out.forEach(function(e){e.to.in.splice(e.to.in.indexOf(e),1),delete t._edges[e.from.origin.uid+e.to.origin.uid]}),delete this._nodes[e.uid])},s.prototype.edge=function(e,t,o){o<0&&(n.reportError(e.name+"=>"+t.name+" is negative cost: "+o),o=0);var i=this._edges[e.uid+t.uid];return i?(o<i.cost&&(i.cost=o),i):(i=new r(this.node(e),this.node(t),o),this._edges[e.uid+t.uid]=i)},s.prototype.request=function(){this._requested=!0},s.prototype.excecute=function(){var t=this;this._requested?(this._reset(),this.goal.prepare(),this._requested=!1):(this.goal.walkThrough(),this.goal.completed&&Object.keys(this._nodes).forEach(function(e){e=t._nodes[e];e.via&&e.origin.addWayPoint(e.via.origin,t.goal.origin,e.cost)}))},s.prototype.unedgeAll=function(){var t=this;this._edges={},Object.keys(this._nodes).forEach(function(e){t._nodes[e].in=[],t._nodes[e].out=[]})},Object.defineProperty(s.prototype,"completed",{get:function(){return this.goal.completed},enumerable:!1,configurable:!0}),s.prototype._reset=function(){var t=this;Object.keys(this._nodes).forEach(function(e){return t._nodes[e].clear()})},s);function s(e){this._nodes={},this._edges={},this.goal=this.node(e)}e.PathFinder=t})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_model"] = function(g) {
			!function(t,e){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.Station=t.Platform=t.Gate=void 0,e("../utils/error")),r=e("./commons_model"),s=e("./parameters"),a=e("./route_model"),u=e("./trriger_model"),p=(h.prototype.step=function(t){for(0<this._penalty&&(this._penalty-=t);this._penalty<=0&&this._releaseQueue.length;)this._release();for(;this._penalty<=0&&this._entryQueue.length;){if(this._gate.station.platform.full){this._gate.onRejected.fire();break}this._obtain()}},h.prototype.accept=function(t){this._entryQueue.push(t),this._gate.onEntried.fire(this._entryQueue.length)},h.prototype.deny=function(t){this._entryQueue.splice(this._entryQueue.indexOf(t),1),this._gate.onEntried.fire(this._entryQueue.length)},h.prototype.queue=function(t){this._releaseQueue.push(t),this.full&&this._gate.onFull.fire()},h.prototype.dequeue=function(t){var e=this.full,i=this._releaseQueue.indexOf(t);-1===i?n.reportError(this._gate.name+" tries to dequeue invalid "+t.name):(this._releaseQueue.splice(i,1),e&&this._gate.onVacant.fire())},Object.defineProperty(h.prototype,"entryQueue",{get:function(){return this._entryQueue},enumerable:!1,configurable:!0}),h.prototype._obtain=function(){var t,e=this._entryQueue.shift();if(e){if(e.waitIn!==this._gate)return void n.reportError(this._gate.name+" tries to pass invalid "+e.description+" waiting into "+(null==(t=e.waitIn)?void 0:t.name));e.gateIn(this._gate),this._consume()}this._gate.onEntried.fire(this._entryQueue.length)},h.prototype._release=function(){var t=this.full,e=this._releaseQueue.shift();if(e){if(e.waitOut!==this._gate)return void n.reportError(this._gate.name+" tries to pass invalid "+e.description+" waiting out from "+e.waitOut.name);if(e.stand!==this._gate.station.platform)return void n.reportError(this._gate.name+" tries to pass invalid "+e.description+" facing "+e.stand.station.gate.name);e.gateOut(this._gate),this._consume()}t&&this._gate.onVacant.fire()},Object.defineProperty(h.prototype,"full",{get:function(){return this._releaseQueue.length>=this._gate.station.platform.capacity},enumerable:!1,configurable:!0}),h.prototype._consume=function(){var t=1/this._gate.mobility;this._gate.boosted&&(t/=s.params.boost.gate,this._gate.onGating.fire()),this._penalty+=t},h);function h(t){this._entryQueue=[],this._releaseQueue=[],this._penalty=0,this._gate=t}c=a.WayPoint,i(f,c),f.prototype.onTick=function(t){this._exec.step(t),0<this._boost&&(this._boost-=t,this.onBoosting.fire(this._boost/s.params.interval.boost.gate),this._boost<=0)&&(this._boost=0,this.onUnBoost.fire())},f.prototype.act=function(t,e){if(t.waitOut)t.waitOut!==this&&n.reportError(t.description+" waits out invalid "+this.name+", not out "+t.waitOut.name),t.waitGateOut(this,e);else if(t.stand)t.queue(this);else{if(t.nextnext!==this.station.platform)return t.waitIn&&t.detouch(this),{time:e,completed:!0};t.walkAround(this,e),t.waitIn&&(t.waitIn!==this&&n.reportError(t.description+" waits into invalid "+this.name+", not into "+t.waitIn.name),t.waitGateIn(this,e))}return{time:0,completed:!1}},f.prototype.cancel=function(t){t.waitIn?t.detouch(this):t.waitOut&&t.dequeue(this)},f.prototype.accept=function(t){this._exec.accept(t)},f.prototype.release=function(t){this._exec.deny(t)},f.prototype.queue=function(t){this._exec.queue(t)},f.prototype.dequeue=function(t){this._exec.dequeue(t)},f.prototype.approach=function(t,e,i){return r.approachToObstacles(t,e,i,this._exec.entryQueue)},f.prototype.boost=function(){this._boost=s.params.interval.boost.gate,this.onBoost.fire()},f.prototype.upgrade=function(){this._lv++,this._mobility=s.params.speed.gate[this._lv]},f.prototype.destroy=function(){this._exec.entryQueue.forEach(function(t){return t.throwAway()})},Object.defineProperty(f.prototype,"node",{get:function(){return this.station.node},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"boosted",{get:function(){return 0<this._boost},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"mobility",{get:function(){return this._mobility},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"full",{get:function(){return this._exec.full},enumerable:!1,configurable:!0}),f.NEXT_ID=1;var c,l=f;function f(t,e){var i=c.call(this,t,f.NEXT_ID,"g"+f.NEXT_ID,"Gate("+f.NEXT_ID+")",e.node.x,e.node.y)||this;return i.onBoost=new u.Trigger,i.onBoosting=new u.Trigger,i.onUnBoost=new u.Trigger,i.onRejected=new u.Trigger,i.onGating=new u.Trigger,i.onEntried=new u.Trigger,i.onFull=new u.Trigger,i.onVacant=new u.Trigger,i._lv=0,i._mobility=s.params.speed.gate[0],i._boost=0,f.NEXT_ID++,i.ownerID=t,i.station=e,i._exec=new p(i),i}t.Gate=l;_=a.WayPoint,i(y,_),y.prototype.act=function(t,e){return t.stand?(t.stand!==this&&n.reportError(t.description+" seeking invalid "+this.name+", not "+t.stand.name),{time:e,completed:!0}):(t.travelling||n.reportError(t.description+" seeking "+this.name+", but do nothing"),{time:0,completed:!1})},y.prototype.cancel=function(t){},y.prototype.onTick=function(t){0<this._boost&&(this._boost-=t,this.onBoosting.fire(this._boost/s.params.interval.boost.platform),this._boost<=0)&&(this._boost=0,this.onUnBoost.fire())},y.prototype.accept=function(t){var e=this._stayQueue.push(t);this.full&&this.onFull.fire(),this.station.onAccepted.fire(),t.onPlatformIndexed.fire(e)},y.prototype.release=function(t){var e=this._stayQueue.indexOf(t);if(-1===e)n.reportError(this.name+" tries to release invalid "+t.name);else{t=this.full;this._stayQueue.splice(e,1),this.station.onReleased.fire();for(var i=e;i<this._stayQueue.length;i++)this._stayQueue[i].onPlatformIndexed.fire(i);t&&this.onVacant.fire()}},y.prototype.boost=function(){this._boost=s.params.interval.boost.platform,this.onBoost.fire()},y.prototype.upgrade=function(){this._lv++,this.capacity=s.params.capacity.platform[this._lv]},y.prototype.arrive=function(t){delete this._waiters[t.uid],0===Object.keys(this._waiters).length&&this.onTrainArrived.fire()},y.prototype.tooWaitTrain=function(t){this._waiters[t.uid]||(this._waiters[t.uid]=!0,this.onNoTrain.fire())},y.prototype.destroy=function(){this._stayQueue.forEach(function(t){return t.throwAway()}),this._tf.removePlatform(this)},Object.defineProperty(y.prototype,"rate",{get:function(){return this._stayQueue.length/this._capacity},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"full",{get:function(){return this._stayQueue.length>=this._capacity},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"node",{get:function(){return this.station.node},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"boosted",{get:function(){return 0<this._boost},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"capacity",{get:function(){return this._capacity},set:function(t){var e=this.full,i=this.station.gate.full;this._capacity=t,!e&&this.full&&this.onFull.fire(),e&&!this.full&&this.onVacant.fire(),i&&!this.station.gate.full&&this.station.gate.onVacant.fire()},enumerable:!1,configurable:!0}),y.NEXT_ID=1;var _,g=y;function y(t,e,i){var o=_.call(this,t,y.NEXT_ID,"p"+y.NEXT_ID,"Platform("+y.NEXT_ID+")",e.node.x,e.node.y)||this;return o.onBoost=new u.Trigger,o.onBoosting=new u.Trigger,o.onUnBoost=new u.Trigger,o.onFull=new u.Trigger,o.onVacant=new u.Trigger,o.onPushing=new u.Trigger,o.onNoTrain=new u.Trigger,o.onTrainArrived=new u.Trigger,o.onRejected=new u.Trigger,o._lv=0,o._capacity=s.params.capacity.platform[0],o._boost=0,o._waiters={},o._stayQueue=[],y.NEXT_ID++,o.ownerID=t,o.station=e,o._tf=i,o._tf.addPlatform(o),o}function d(t,e,i,o){this.onUpgraded=new u.Trigger,this.onAccepted=new u.Trigger,this.onReleased=new u.Trigger,this.onDestroyed=new u.Trigger,this._lv=0,this.ownerID=t,this.id=d.NEXT_ID,this.uid="st"+this.id,this.name="Station("+this.id+")",d.NEXT_ID++,((this.node=e).st=this).platform=new g(t,this,o),this.gate=new l(t,this),this._rf=i,this._rf.addStation(this)}t.Platform=g,d.prototype.onTick=function(t){this.platform.onTick(t),this.gate.onTick(t)},d.prototype.upgrade=function(){this._lv++,this.platform.upgrade(),this.gate.upgrade(),this.onUpgraded.fire()},d.prototype.destroy=function(){this.gate.destroy(),this.platform.destroy(),this._rf.removeStation(this),this.onDestroyed.fire()},Object.defineProperty(d.prototype,"lv",{get:function(){return this._lv},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"rate",{get:function(){return this.platform.rate},enumerable:!1,configurable:!0}),d.NEXT_ID=1,t.Station=d}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["transport_finder_model"] = function(g) {
			((e,t)=>{function h(e,t){return e=a.params.weight.upgrade[e.lv],t&&(e*=a.params.weight.upgrade[t.lv]),e}Object.defineProperty(e,"__esModule",{value:!0}),e.TransportFinder=void 0;var d=t("./line_task_model"),a=t("./parameters"),i=t("./path_finder_model"),n=t("./trriger_model");function s(e){this.onRequested=new n.Trigger,this._finders=[],this._ls={},this._ps=[],this._ts=[],this._index={finder:0,line:0},this._complete={request:!1,train:!1},this._penalty=e}s.prototype.onTick=function(){var t=this;this.completed||(this._complete.request?this._complete.train?this._index.line<Object.keys(this._ls).length?this._edgeRailLine():(this._finders[this._index.finder].excecute(),this._finders[this._index.finder].completed&&this._index.finder++,this._index.line=0):(this._finders.forEach(function(e){return t._edgeTrains(e)}),this._complete.train=!0):(this._finders.forEach(function(e){return e.unedgeAll()}),this._complete.request=!0))},s.prototype.request=function(){this._index.finder=0,this._index.line=0,this._complete.request=!1,this._complete.train=!1,this._finders.forEach(function(e){return e.request()}),this.onRequested.fire()},s.prototype.addPlatform=function(t){this._finders.forEach(function(e){return e.node(t)}),this._finders.push(new i.PathFinder(t)),this._ps.push(t),this.request()},s.prototype.removePlatform=function(e){for(var t,i=0;i<this._finders.length;i++)this._finders[i].goal.origin===e?t=i:this._finders[i].unnode(e);this._finders.splice(t,1),this.request()},s.prototype.addRailLine=function(e){this._ls[e.uid]={l:e,lts:[]}},s.prototype.removeRailLine=function(e){var i=this;this._finders.forEach(function(t){i._ls[e.uid].lts.forEach(function(e){return t.unnode(e)})}),delete this._ls[e.uid],this.request()},s.prototype.addDeptTask=function(t){this._finders.forEach(function(e){return e.node(t)}),this._ls[t.line.uid].lts.push(t),this.request()},s.prototype.removeDeptTask=function(t){this._finders.forEach(function(e){return e.unnode(t)});var e=this._ls[t.line.uid].lts;e.splice(e.indexOf(t),1),this.request()},s.prototype.changeLineOwner=function(e,t){var i=this;this._ls[e.uid].lts.forEach(function(e){i._ls[t.uid].lts.push(e)}),this.request()},s.prototype.addTrain=function(t){this._finders.forEach(function(e){return e.node(t)}),this._ts.push(t)},s.prototype.removeTrain=function(t){this._finders.forEach(function(e){return e.unnode(t)}),this._ts.splice(this._ts.indexOf(t),1)},Object.defineProperty(s.prototype,"completed",{get:function(){return this._complete.request&&this._complete.train&&this._index.finder===this._finders.length},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"progress",{get:function(){for(var e=0,t=(this._complete.request&&e++,this._complete.train&&e++,0),i=0;i<this._finders.length;i++)i<this._index.finder&&(e+=Object.keys(this._ls).length),t+=Object.keys(this._ls).length;return Math.min(e/(2+t),1)},enumerable:!1,configurable:!0}),s.prototype._edgeTrains=function(e){for(var t=0,i=this._ts;t<i.length;t++)for(var n=i[t],s=n.task,r=g.Util.distance(n.x(),n.y(),s.destination.x,s.destination.y);s instanceof d.DeptTask&&e.edge(n,s.stay,r*h(s.stay.station)*a.params.weight.train*this._penalty.transport(n.ownerID)),r+=(s=s.next).length,n.task!==s;);},s.prototype._edgeRailLine=function(){for(var e=this._finders[this._index.finder],t=Object.keys(this._ls)[this._index.line],i=0,n=this._ls[t].lts;i<n.length;i++)for(var s=n[i],r=(e.edge(s,s.stay,0),e.edge(s.stay,s,0),s),o=r.length;o+=(r=r.next).length,r instanceof d.DeptTask&&e.edge(s,r.stay,o*h(r.stay.station,s.stay.station)*a.params.weight.train*this._penalty.transport(s.ownerID)),r!==s;);this._index.line++},e.TransportFinder=s})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["route_finder_model"] = function(g) {
			((t,e)=>{function h(t,e){return g.Util.distance(t.x(),t.y(),e.x(),e.y())}Object.defineProperty(t,"__esModule",{value:!0}),t.RouteFinder=void 0;var i=e("./path_finder_model"),n=e("./trriger_model");function s(){this.onCompleted=new n.Trigger,this._finders=[],this._rs=[],this._cs=[],this._sts=[],this._ls={},this._lts=[],this._ts=[],this._hs=[],this._index={finder:0},this._complete={request:!1,transport:!1,human:!1},this._lastComputed=0,this._computed=0}s.prototype.onTick=function(){var i=this;this.completed||(this._complete.request?this._complete.transport?this._complete.human?(this._finders[this._index.finder].excecute(),this._computed++,this._finders[this._index.finder].completed&&this._index.finder++,this.completed&&(this._hs.forEach(function(t){return t.reroute()}),this.onCompleted.fire(),this._lastComputed=this._computed)):(this._finders.forEach(function(t){return i._edgeHuman(t)}),this._complete.human=!0):(this._finders.forEach(function(t){return i._edgeTransport(t)}),this._complete.transport=!0):(this._finders.forEach(function(e){i._lts.forEach(function(t){e.unnode(t),e.node(t),e.edge(t.stay,t,0)}),i._ts.forEach(function(t){e.unnode(t),e.node(t)}),i._hs.forEach(function(t){e.unnode(t),e.node(t)})}),this._complete.request=!0))},s.prototype.request=function(){this._index.finder=0,this._complete.request=!1,this._complete.transport=!1,this._complete.human=!1,this._computed=0,this._finders.forEach(function(t){return t.request()})},s.prototype.addCompany=function(t){this._finders.push(new i.PathFinder(t)),this._cs.push(t)},s.prototype.addResidence=function(i){var n=this;this._finders.forEach(function(e){e.node(i);var t=e.goal.origin;e.edge(i,t,h(i,t)),n._sts.forEach(function(t){return e.edge(i,t.gate,h(i,t.gate))})}),this._rs.push(i),this.request()},s.prototype.addStation=function(n){var s=this;this._finders.forEach(function(e){var i=n.gate,t=(e.node(i),s._rs.forEach(function(t){return e.edge(t,i,h(t,i))}),e.goal.origin),t=(e.edge(i,t,h(i,t)),s._sts.forEach(function(t){e.edge(i,t.gate,h(i,t.gate)),e.edge(t.gate,i,h(i,t.gate))}),n.platform);e.node(t),e.edge(i,t,0),e.edge(t,i,0)}),this._sts.push(n),this.request()},s.prototype.removeStation=function(e){this._finders.forEach(function(t){t.unnode(e.gate),t.unnode(e.platform)}),this._sts.splice(this._sts.indexOf(e),1),this.request()},s.prototype.addRailLine=function(t){this._ls[t.uid]=[]},s.prototype.removeRailLine=function(t){var i=this;this._ls[t.uid].forEach(function(e){i._finders.forEach(function(t){return t.unnode(e)}),i._lts.splice(i._lts.indexOf(e),1)}),delete this._ls[t.uid],this.request()},s.prototype.addDeptTask=function(e){this._finders.forEach(function(t){return t.node(e)}),this._lts.push(e),this._ls[e.line.uid].push(e),this.request()},s.prototype.removeDeptTask=function(e){this._finders.forEach(function(t){return t.unnode(e)}),this._lts.splice(this._lts.indexOf(e),1),this._ls[e.line.uid].splice(this._ls[e.line.uid].indexOf(e),1),this.request()},s.prototype.changeLineOwner=function(t,e){var i=this;this._ls[t.uid].forEach(function(t){i._ls[e.uid].push(t)}),this.request()},s.prototype.addTrain=function(e){this._finders.forEach(function(t){return t.node(e)}),this._ts.push(e)},s.prototype.removeTrain=function(e){this._finders.forEach(function(t){return t.unnode(e)}),this._ts.splice(this._ts.indexOf(e),1)},s.prototype.addHuman=function(e){this._finders.forEach(function(t){return t.node(e)}),this._hs.push(e)},s.prototype.removeHuman=function(e){this._finders.forEach(function(t){return t.unnode(e)}),this._hs.splice(this._hs.indexOf(e),1)},Object.defineProperty(s.prototype,"completed",{get:function(){return this._complete.request&&this._complete.human&&this._complete.transport&&this._index.finder===this._finders.length},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"progress",{get:function(){var t=0;return this._complete.request&&t++,this._complete.transport&&t++,this._complete.human&&t++,t+=this._index.finder,0===this._computed?t/(3+this._finders.length):Math.min(t+this._computed)/(this._finders.length,this._lastComputed,1)},enumerable:!1,configurable:!0}),s.prototype._edgeTransport=function(t){for(var e=0,i=this._sts;e<i.length;e++){for(var n=i[e],s=0,o=this._lts;s<o.length;s++){var r=o[s];do{var h=r.subgoal(n.platform)}while(h&&t.edge(r,h,r.cost(n.platform)),(r=h)&&r!==n.platform)}for(var d=0,u=this._ts;d<u.length;d++){var a=u[d];a.subgoal(n.platform)===n.platform&&t.edge(a,n.platform,a.cost(n.platform))}}},s.prototype._edgeHuman=function(t){for(var e=0,i=this._hs;e<i.length;e++){var n=i[e];if(n.stand)t.edge(n,n.stand,0),t.edge(n,n.stand.station.gate,0),n.waiting&&t.edge(n,n.waiting,0);else if(n.travelling)t.edge(n,n.travelling,0);else{t.edge(n,t.goal.origin,h(n,t.goal.origin));for(var s=0,o=this._sts;s<o.length;s++){var r=o[s];t.edge(n,r.gate,h(n,r.gate))}}}},t.RouteFinder=s})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["commons_view"] = function(g) {
			((n,e)=>{function i(){for(var e=[],r=0;r<o.params.animation.pointer;r++)e.push(r);return e}Object.defineProperty(n,"__esModule",{value:!0}),n.createNoticeLayer=n.createPointerEdge=n.createPointerNode=n.createSelectedCursor=n.createCursor=n.createSpriteById=n.onError=n.gradationGray=n.gradation=n.createModal=n.createModalArea=n.createGuideLabel=n.toEstimationText=n.createInputFont=n.createWarnFont=n.createFont=n.createCancelButton=n.createCompleteButton=n.createMyFont=n.createPlayerFont=n.createCouponFont=n.createNumberFont=n.createCountDownFont=n.createFirstIcon=n.createIcon=n.createTerritory=n.createGameLayer=n.colors=void 0;var o=e("../models/parameters"),s=e("../utils/error"),c=e("./color_utils"),d=e("./sprite_button");n.colors=[{territory:"#ffdab9",residence:"#ffa07a",edge:"#ffa07a",train:"#ff7f50",station:"#dc143c",human:348,flag:"#e66767",primary:"#800000",primary_pressed:"#400000",secondary:"#bc8f8f",secondary_pressed:"#997474",modal:"#bbbbbb",disabled:"#eeeeee"},{territory:"#afeeee",residence:"#87cefa",edge:"#87cefa",train:"#6495ed",station:"#4169e1",human:225,flag:"#809fff",primary:"#0000cd",primary_pressed:"#00008b",secondary:"#b0c4de",secondary_pressed:"#8d9db3",modal:"#bbbbbb",disabled:"#eeeeee"},{territory:"#c6ffe2",residence:"#66cdaa",edge:"#66cdaa",train:"#3cb371",station:"#2e8b57",human:120,flag:"#3cb371",primary:"#006400",primary_pressed:"#004200",secondary:"#b8ccb8",secondary_pressed:"#749974",modal:"#bbbbbb",disabled:"#eeeeee"},{territory:"#ffc0cb",residence:"#da70d6",edge:"#da70d6",train:"#ba55d3",station:"#9932cc",human:300,flag:"#d580ff",primary:"#9400d3",primary_pressed:"#4b0082",secondary:"#c0afdb",secondary_pressed:"#857a99",modal:"#bbbbbb",disabled:"#eeeeee"}],n.createGameLayer=function(e){return new g.E({scene:e,x:64,y:64,width:o.params.view.game[0],height:o.params.view.game[1]})},n.createTerritory=function(e){var r=3*o.params.view.game[0]/8,t=3*o.params.view.game[1]/8,a=5*o.params.view.game[0]/8,n=5*o.params.view.game[1]/8;switch(e){case 0:return{x:0,y:0,width:a,height:n};case 1:return{x:r,y:0,width:a,height:n};case 2:return{x:0,y:t,width:a,height:n};case 3:return{x:r,y:t,width:a,height:n}}return s.reportError("invalid index: "+e),null},n.createIcon=function(e){return new g.FrameSprite({scene:e.scene,src:e.scene.asset.getImageById("icon_img"),width:o.params.view.icon,height:o.params.view.icon,x:e.x,y:e.y,anchorY:.5,frames:[e.oid]})},n.createFirstIcon=function(e,r){return new g.Sprite({scene:e,src:e.asset.getImageById("first_img"),x:r.width/2,anchorX:.5,anchorY:.5})},n.createCountDownFont=function(e){return new g.BitmapFont({src:e.asset.getImageById("countdown_img"),glyphInfo:JSON.parse(e.asset.getTextById("countdown_glyphs").data)})},n.createNumberFont=function(e){return new g.BitmapFont({src:e.asset.getImageById("number_img"),glyphInfo:JSON.parse(e.asset.getTextById("number_glyphs").data)})},n.createCouponFont=function(e){return new g.BitmapFont({src:e.asset.getImageById("coupon_img"),glyphInfo:JSON.parse(e.asset.getTextById("coupon_glyphs").data)})},n.createPlayerFont=function(e,r){return new g.BitmapFont({src:e.asset.getImageById("number"+r+"_img"),glyphInfo:JSON.parse(e.asset.getTextById("number"+r+"_glyphs").data)})},n.createMyFont=function(e,r){return void 0===r?null:new g.BitmapFont({src:e.asset.getImageById("my_number"+r+"_img"),glyphInfo:JSON.parse(e.asset.getTextById("my_number"+r+"_glyphs").data)})},n.createCompleteButton=function(e,r,t,a,n){a=new g.FrameSprite({scene:e,width:r.width,height:r.height,src:e.asset.getImageById("submit_img"),frames:[3*(a+1),3*(a+1)+1,3*(a+1)+2]});return r.append(a),new d.SpriteButton({scene:e,layer:r,sprite:a,label:t,downRate:.1,draggable:n})},n.createCancelButton=function(e,r,t,a){var n=new g.FrameSprite({scene:e,width:r.width,height:r.height,src:e.asset.getImageById("submit_img"),frames:[0,1,2]});return r.append(n),new d.SpriteButton({scene:e,layer:r,sprite:n,label:t,downRate:.1,draggable:a})},n.createFont=function(e,r){return void 0===r&&(r="#ffffff"),new g.DynamicFont({game:g.game,fontFamily:"sans-serif",size:e,fontColor:r})},n.createWarnFont=function(){return new g.DynamicFont({game:g.game,fontFamily:"sans-serif",fontColor:"#ff8888",size:20})},n.createInputFont=function(){return new g.DynamicFont({game:g.game,fontFamily:"monospace",size:46})},n.toEstimationText=function(e){return""+("     "+Math.round(e)).slice(-5)},n.createGuideLabel=function(e,r,t,a){return void 0===t&&(t=20),void 0===a&&(a=35),new g.Sprite({scene:e,src:e.asset.getImageById(r),x:t,y:a})},n.createModalArea=function(e,r){return new g.E({scene:e,x:r.width/2,y:r.height/2,width:o.params.view.modal[0],height:o.params.view.modal[1],anchorX:.5,anchorY:.5})},n.createModal=function(e){return new g.FrameSprite({scene:e.scene,width:e.layer.width,height:e.layer.height,src:e.scene.asset.getImageById("territory_img"),srcWidth:o.params.view.territory[0],srcHeight:o.params.view.territory[1],frames:[e.oid],opacity:.75})},n.gradation=function(e,r,t,a){return c.hueToRgb(e,r*(a-t)+t)},n.gradationGray=function(e,r,t){e=Math.floor(e*(t-r)+r);return"#"+("00"+e.toString(16)).slice(-2)+("00"+e.toString(16)).slice(-2)+("00"+e.toString(16)).slice(-2)},n.onError=function(e,r){var t=n.createWarnFont(),a=new g.Label({scene:e,text:r.message,font:t,fontSize:t.size});e.append(a),e.setTimeout(function(){a.destroy()},5e3)},n.createSpriteById=function(e){var r=e.scene.asset.getImageById(e.asset);return new g.Sprite({scene:e.scene,src:r,x:e.x,y:e.y,width:e.width,height:e.height,opacity:e.opacity,srcWidth:r.width,srcHeight:r.height})},n.createCursor=function(e,r,t,a){for(var n=[],i=0;i<o.params.animation.cursor;i++)n.push(i+r*o.params.animation.cursor);e=new g.FrameSprite({scene:e,src:e.asset.getImageById("cursor_img"),frames:n,width:o.params.view.cursor,height:o.params.view.cursor,anchorX:.5,anchorY:.5,x:t,y:a});return e.start(),e},n.createSelectedCursor=function(e,r){return new g.FrameSprite({scene:e,src:e.asset.getImageById("cursor_img"),frames:[Math.floor((r+.5)*o.params.animation.cursor)],width:o.params.view.cursor,height:o.params.view.cursor,anchorX:.5,anchorY:.5})},n.createPointerNode=function(e,r,t){var a=o.params.view.pointer*(t?2:1),e=new g.FrameSprite({scene:e,src:e.asset.getImageById(t?"pointer_large_circle_img":"pointer_circle_img"),x:r.x,y:r.y,anchorX:.5,anchorY:.5,width:a,height:a,frames:i()});return e.start(),e},n.createPointerEdge=function(e,r,t){e=new g.FrameSprite({scene:e,src:e.asset.getImageById("pointer_rect_img"),x:(r.x+t.x)/2,y:(r.y+t.y)/2,anchorX:.5,anchorY:.5,width:g.Util.distance(r.x,r.y,t.x,t.y),srcWidth:o.params.view.pointer,height:o.params.view.pointer,angle:Math.atan2(t.y-r.y,t.x-r.x)/Math.PI*180,frames:i()});return e.start(),e},n.createNoticeLayer=function(e){return new g.E({scene:e,x:64,y:64+o.params.view.game[1],width:o.params.view.game[0],height:100})}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["game_branch_scene"] = function(g) {
			((e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createBranchRailwayBuilder=void 0;var o=r("../handlers/railway_wizard_handler"),t=r("../models/parameters"),i=r("../view/commons_view"),c=r("./game_tooltip_scene");e.createBranchRailwayBuilder=function(r){var a=c.createTooltipView({scene:r.scene,layer:r.tooltip,numberFont:r.numberFont,oid:r.oid,execID:"tooltip_branch_img",order:c.orders.branch,cost:t.params.cost.station+t.params.cost.train.initial+t.params.ui.distance.rail*t.params.cost.rail,scorer:r.scorer,onUnlimit:r.onUnlimit}),e=(r.scorer.onTrainCostChanged.add(function(e){e.oid===r.oid&&(a.cost=t.params.cost.station+e.cost+t.params.ui.distance.rail*t.params.cost.rail)}),i.createGameLayer(r.scene)),n=(r.scene.append(e),new o.BranchRailwayWizardHandler({scene:r.scene,backgroundLayer:r.backgroundLayer,layer:e,oid:r.oid,territory:{x:0,y:0,width:e.width,height:e.height},numberFont:r.numberFont,inputFont:r.inputFont,scorer:r.scorer}));return a.onStarted.add(function(){n.import(r.gm.nodes(r.oid),r.gm.trains(r.oid)),n.show()}),a.onCanceled.add(function(){return n.cancel()}),n.onSubmit.add(function(){return a.disable()}),n.onCompleted.add(function(){return a.complete()}),a}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["game_init_scene"] = function(g) {
			((c,e)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.playGameScene=c.createDisplayName=c.createPenalty=c.createWizard=c.onGameStarted=void 0;var t=e("../events/railway_built_event"),l=e("../events/railway_rollback_event"),s=e("../handlers/advisor_handler"),d=e("../handlers/chat_handler"),y=e("../handlers/countdown_handler"),n=e("../handlers/penalty_handler"),o=e("../handlers/railway_wizard_handler"),u=e("../handlers/territoy_handler"),m=e("../handlers/tutorial_handler"),p=e("../models/parameters"),w=e("../models/trriger_model"),v=e("../view/commons_view"),b=e("./game_observer_tooltip_scene"),h=e("./game_tooltip_scene");c.onGameStarted=function(n){var e,r,a,t,o,i;new d.ChatHandler(n),void 0!==n.oid?(e=new u.TerritoryHandler({scene:n.scene,layer:n.territoryLayer,noticeLayer:n.noticeLayer,oid:n.oid,area:v.createTerritory(n.oid)}),r=new m.TutorialHandler(n),a=new w.Trigger,t=new w.Trigger,new s.AdvisorHandler({scene:n.scene,backgroundLayer:n.backgroundLayer,noticeLayer:n.noticeLayer,oid:n.oid,gm:n.gm,onUnlimit:a,onAction:t}),o=v.createGameLayer(n.scene),n.scene.append(o),c.createWizard({scene:n.scene,backgroundLayer:n.backgroundLayer,layer:o,numberFont:n.numberFont,inputFont:n.inputFont,oid:n.oid,scorer:n.scorer}),h.createRollbacker({scene:n.scene,numberFont:n.numberFont,oid:n.oid,scorer:n.scorer,gm:n.gm,onUnlimit:a}),n.scene.onMessage.add(i=function(e){l.isRailwayedRollbackEvent(e)&&(e=l.RailwayRollbackedEvent.parse(e)).oid()===n.oid&&c.createWizard({scene:n.scene,backgroundLayer:n.backgroundLayer,layer:o,numberFont:n.numberFont,inputFont:n.inputFont,oid:e.oid(),scorer:n.scorer})}),n.scene.setTimeout(function(){e.unlimit(),r.unlimit(),n.scene.onMessage.remove(i)},1e3*p.params.interval.tooltip[0]),n.scene.append(h.createTooltip({scene:n.scene,backgroundLayer:n.backgroundLayer,numberFont:n.numberFont,inputFont:n.inputFont,couponFont:n.couponFont,oid:n.oid,scorer:n.scorer,gm:n.gm,onUnlimit:a,onAction:t}))):n.scene.append(b.createObserverTooltip(n)),c.createPenalty({scene:n.scene,penaltyLayer:n.penaltyLayer,noticeLayer:n.noticeLayer,playerFonts:n.playerFonts,rf:n.rf,tf:n.tf,penalty:n.penalty}),n.scene.setTimeout(function(){var e=v.createGameLayer(n.scene);n.scene.append(e),new y.CountDownHandler({scene:n.scene,layer:e,countDownFont:n.countDownFont,last:"END!",opacity:.5,count:p.params.interval.end})},1e3*(p.params.interval.game-p.params.interval.end)),c.playGameScene(n.scene)},c.createWizard=function(n){function r(e){t.isRailwayBuiltEvent(e)&&t.RailwayBuiltEvent.parse(e).oid()===n.oid&&(a.graceDestroy(),n.scene.onMessage.remove(r))}var a=new o.RailwayWizardHandler({scene:n.scene,backgroundLayer:n.backgroundLayer,layer:n.layer,numberFont:n.numberFont,inputFont:n.inputFont,oid:n.oid,scorer:n.scorer,territory:v.createTerritory(n.oid)});n.scene.onMessage.add(r)},c.createPenalty=function(e){new n.PenaltyHandler({scene:e.scene,penaltyLayer:e.penaltyLayer,noticeLayer:e.noticeLayer,playerFonts:e.playerFonts,rf:e.rf,tf:e.tf,model:e.penalty})},c.createDisplayName=function(e){for(var n=new g.E({scene:e.scene,x:e.layer.x+10,y:e.layer.y+10,width:e.layer.width-20,height:e.layer.height-20}),r=0;r<e.players.num;r++){var a=new g.DynamicFont({game:g.game,fontFamily:"sans-serif",size:18,fontColor:v.colors[r].flag}),t=e.players.name(r),o=((null==(o=e.players.self)?void 0:o.oid)===r&&(t+=" ()"),new g.Label({scene:e.scene,y:2<=r?n.height:0,anchorY:2<=r?1:0,width:n.width,text:t,textAlign:r%2?"right":"left",widthAutoAdjust:!1,font:a,fontSize:a.size}));n.append(o)}return n},c.playGameScene=function(e){e.asset.getAudioById("nc198393").play()}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["game_tooltip_scene"] = function(g) {
			((l,e)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createRollbacker=l.createUnlimitLabel=l.registerTooltipHandler=l.createTooltip=l.createTooltipView=l.createTooltipButton=l.createRightLayer=l.orders=void 0;var u=e("../events/railway_built_event"),m=e("../events/railway_rollback_event"),r=e("../events/station_booster_event"),i=e("../handlers/railway_destroyer_handler"),p=e("../handlers/rollback_handler"),a=e("../handlers/station_booster_handler"),s=e("../handlers/station_inserter_handler"),c=e("../handlers/station_upgrade_handler"),d=e("../handlers/train_inserter_handler"),f=e("../models/parameters"),b=e("../view/commons_view"),v=e("../view/effect"),w=e("../view/tooltips_view"),y=e("./game_branch_scene"),_=e("./game_scene"),h=(l.orders={rollback:0,branch:0,insertStation:1,insertTrain:2,upgradeStation:3,boostGate:4,boostPlatform:5,destroyer:6},l.createRightLayer=function(e){return new g.E({scene:e,x:g.game.width-f.params.view.tooltip[0]-64,y:100,width:f.params.view.tooltip[0],height:g.game.height-128})},l.createTooltipButton=function(e,n){n=void 0===n?[0,1,2]:[3*(n+1),3*(n+1)+1,3*(n+1)+2];return new g.FrameSprite({scene:e,src:e.asset.getImageById("tooltip_img"),width:f.params.view.tooltip[0],height:f.params.view.tooltip[1],frames:n})},l.createTooltipView=function(e){var n=new g.E({scene:e.scene,y:e.order*f.params.view.tooltip[1]}),o=(e.layer.append(n),l.createTooltipButton(e.scene,e.oid)),t=(n.append(o),l.createTooltipButton(e.scene,e.oid)),n=(n.append(t),new w.TooltipView({scene:e.scene,numberFont:e.numberFont,tooltip:n,execText:e.execID,exec:o,cancel:t,oid:e.oid,scorer:e.scorer,cost:e.cost,unlimit:void 0!==e.unlimit?e.unlimit:f.params.interval.tooltip[e.order],noeffect:e.noeffect}));return n.onUnlimit.add(function(){return e.onUnlimit.fire(e.order)}),n},l.createTooltip=function(n){var o=l.createRightLayer(n.scene),t=(o.hide(),[]);t.push(y.createBranchRailwayBuilder({scene:n.scene,backgroundLayer:n.backgroundLayer,tooltip:o,numberFont:n.numberFont,inputFont:n.inputFont,oid:n.oid,gm:n.gm,scorer:n.scorer,onUnlimit:n.onUnlimit})),t.push(h({scene:n.scene,tooltip:o,numberFont:n.numberFont,oid:n.oid,gm:n.gm,scorer:n.scorer,onUnlimit:n.onUnlimit})),t.push(F({scene:n.scene,tooltip:o,numberFont:n.numberFont,oid:n.oid,expensive:"gate_booster_error_too_expensive_img",gm:n.gm,guide:"gate_booster_guide_img",exec:"tooltip_gating_img",submitting:"gate_booster_wait_img",order:l.orders.boostGate,scorer:n.scorer,cost:f.params.cost.boost.gate,msgFilter:function(e){return r.isGateBoostEvent(e)&&r.GateBoostEvent.parse(e).oid()===n.oid},filter:function(e){return!e.gate.boosted},onTrigger:function(e){return e.gate.onBoost},offTrigger:function(e){return e.gate.onUnBoost},ev:function(e){_.playEffect(n.scene),g.game.raiseEvent(new r.GateBoostEvent({id:g.game.selfId,oid:n.oid,changed:{nid:e}}))},onUnlimit:n.onUnlimit})),t.push(F({scene:n.scene,tooltip:o,numberFont:n.numberFont,oid:n.oid,expensive:"platform_booster_error_too_expensive_img",gm:n.gm,guide:"platform_booster_guide_img",exec:"tooltip_pusher_img",submitting:"platform_booster_wait_img",order:l.orders.boostPlatform,scorer:n.scorer,cost:f.params.cost.boost.platform,msgFilter:function(e){return r.isPlatformBoostEvent(e)&&r.PlatformBoostEvent.parse(e).oid()===n.oid},filter:function(e){return!e.platform.boosted},onTrigger:function(e){return e.platform.onBoost},offTrigger:function(e){return e.platform.onUnBoost},ev:function(e){_.playEffect(n.scene),g.game.raiseEvent(new r.PlatformBoostEvent({id:g.game.selfId,oid:n.oid,changed:{nid:e}}))},onUnlimit:n.onUnlimit})),t.push(U({scene:n.scene,tooltip:o,numberFont:n.numberFont,oid:n.oid,gm:n.gm,scorer:n.scorer,onUnlimit:n.onUnlimit})),t.push(T({scene:n.scene,tooltip:o,numberFont:n.numberFont,oid:n.oid,gm:n.gm,scorer:n.scorer,onUnlimit:n.onUnlimit})),t.push(E({scene:n.scene,backgroundLayer:n.backgroundLayer,tooltip:o,numberFont:n.numberFont,couponFont:n.couponFont,oid:n.oid,gm:n.gm,scorer:n.scorer,onUnlimit:n.onUnlimit})),l.registerTooltipHandler(t,n.onAction);return n.scene.onMessage.add(function(e){u.isRailwayBuiltEvent(e)?u.RailwayBuiltEvent.parse(e).oid()===n.oid&&(o.show(),t.forEach(function(e){return e.activate()})):m.isRailwayedRollbackEvent(e)&&m.RailwayRollbackedEvent.parse(e).oid()===n.oid&&(o.hide(),t.forEach(function(e){return e.inactivate()}))}),o},l.registerTooltipHandler=function(e,o){e.forEach(function(n){n.onStarted.add(function(){e.forEach(function(e){n!==e&&e.inactivate()}),o.fire(!0)}),n.onCanceled.add(function(){e.forEach(function(e){n!==e&&e.activate()}),o.fire(!1)}),n.onCompleted.add(function(){e.forEach(function(e){n!==e&&e.activate()}),o.fire(!1)})})},function(e){var n=l.createTooltipView({scene:e.scene,layer:e.tooltip,numberFont:e.numberFont,oid:e.oid,execID:"tooltip_upgrade_img",order:l.orders.upgradeStation,cost:f.params.cost.upgrade[0],scorer:e.scorer,onUnlimit:e.onUnlimit}),o=b.createGameLayer(e.scene),t=(e.scene.append(o),new c.StationUpgraderHandler({scene:e.scene,layer:o,tip:n,oid:e.oid,scorer:e.scorer}));return n.onStarted.add(function(){t.import(e.gm.nodes(e.oid)),t.show()}),n.onCanceled.add(function(){return t.cancel()}),t.onSubmit.add(function(){return n.disable()}),t.onCompleted.add(function(){return n.enable()}),n}),F=function(n){var o=l.createTooltipView({scene:n.scene,layer:n.tooltip,numberFont:n.numberFont,oid:n.oid,execID:n.exec,order:n.order,cost:n.cost,scorer:n.scorer,onUnlimit:n.onUnlimit}),e=b.createGameLayer(n.scene),t=(n.scene.append(e),new a.StationBoosterHandler({scene:n.scene,layer:e,expensive:n.expensive,guide:n.guide,submitting:n.submitting,cost:n.cost,filter:n.filter,msgFilter:n.msgFilter,onTrigger:n.onTrigger,offTrigger:n.offTrigger,oid:n.oid,scorer:n.scorer}));return o.onStarted.add(function(){t.import(n.gm.nodes(n.oid)),t.show()}),o.onCanceled.add(function(){return t.cancel()}),t.onSubmit.add(function(e){o.disable(),n.ev(e)}),t.onCompleted.add(function(){return o.enable()}),o},U=function(e){var n=l.createTooltipView({scene:e.scene,layer:e.tooltip,numberFont:e.numberFont,oid:e.oid,execID:"tooltip_station_img",order:l.orders.insertStation,cost:f.params.cost.station,scorer:e.scorer,onUnlimit:e.onUnlimit}),o=b.createGameLayer(e.scene),t=(e.scene.append(o),new s.StationInserterHandler({scene:e.scene,layer:o,oid:e.oid,scorer:e.scorer}));return n.onStarted.add(function(){t.import(e.gm.nodes(e.oid)),t.show()}),n.onCanceled.add(function(){return t.cancel()}),t.onSubmit.add(function(){return n.disable()}),t.onCompleted.add(function(){return n.enable()}),n},T=function(n){var o=l.createTooltipView({scene:n.scene,layer:n.tooltip,numberFont:n.numberFont,oid:n.oid,execID:"tooltip_train_img",order:l.orders.insertTrain,cost:f.params.cost.train.initial,scorer:n.scorer,onUnlimit:n.onUnlimit}),e=(n.scorer.onTrainCostChanged.add(function(e){e.oid===n.oid&&(o.cost=e.cost)}),b.createGameLayer(n.scene)),t=(n.scene.append(e),new d.TrainInserterHandler({scene:n.scene,layer:e,numberFont:n.numberFont,oid:n.oid,scorer:n.scorer}));return o.onStarted.add(function(){t.import(n.gm.nodes(n.oid),n.gm.trains(n.oid)),t.show()}),o.onCanceled.add(function(){return t.cancel()}),t.onSubmit.add(function(){return o.disable()}),t.onCompleted.add(function(){return o.enable()}),o},E=function(e){var n=b.createGameLayer(e.scene),o=(e.scene.append(n),l.createTooltipView({scene:e.scene,layer:e.tooltip,numberFont:e.numberFont,oid:e.oid,execID:"tooltip_destroyer_img",order:l.orders.destroyer,cost:0,scorer:e.scorer,onUnlimit:e.onUnlimit})),t=new i.RailwayDestroyerHandler({scene:e.scene,backgroundLayer:e.backgroundLayer,layer:n,couponFont:e.couponFont,oid:e.oid,scorer:e.scorer});return o.onStarted.add(function(){t.import(e.gm.edges(e.oid),e.gm.isSingleLine(e.oid)),t.show()}),o.onCanceled.add(function(){return t.cancel()}),t.onSubmit.add(function(){return o.disable()}),t.onCompleted.add(function(){t.import(e.gm.edges(e.oid),e.gm.isSingleLine(e.oid)),o.enable()}),o};l.createUnlimitLabel=function(e){return new g.Sprite({scene:e,src:e.asset.getImageById("unlimit_wait_img"),y:f.params.view.tooltip[1]+20})},l.createRollbacker=function(n){function e(e){u.isRailwayBuiltEvent(e)&&u.RailwayBuiltEvent.parse(e).oid()===n.oid&&o.show(),m.isRailwayedRollbackEvent(e)&&m.RailwayRollbackedEvent.parse(e).oid()===n.oid&&(c.enable(),d.cancel(),o.hide())}var o=l.createRightLayer(n.scene),t=(n.scene.append(o),o.hide(),l.createUnlimitLabel(n.scene)),r=(o.append(t),new g.Label({scene:n.scene,text:""+("  "+f.params.interval.tooltip[0]).slice(-2),font:n.numberFont,fontSize:n.numberFont.size,x:f.params.view.tooltip[0]-40,y:f.params.view.tooltip[1]+50})),i=(o.append(r),f.params.interval.tooltip[0]-1),a=n.scene.setInterval(function(){r.text=""+("  "+i).slice(-2),r.invalidate(),0===--i&&n.scene.clearInterval(a)},1e3),s=b.createGameLayer(n.scene),c=(n.scene.append(s),new p.RollbackHandler({scene:n.scene,layer:s,gm:n.gm,oid:n.oid})),d=l.createTooltipView({scene:n.scene,layer:o,numberFont:n.numberFont,oid:n.oid,execID:"rollback_img",cost:f.params.cost.rail*f.params.ui.distance.rail+2*f.params.cost.station+f.params.cost.train.initial,order:l.orders.rollback,scorer:n.scorer,unlimit:0,noeffect:!0,onUnlimit:n.onUnlimit});d.activate(),d.onStarted.add(function(){return c.show()}),d.onCanceled.add(function(){return c.graceHide()}),c.onSubmit.add(function(){return d.disable()}),c.onCanceled.add(function(){return d.cancel()});n.scene.onMessage.add(e),n.scene.setTimeout(function(){c.disable(),c.destroy(),d.destroy(),v.fadeOut({scene:n.scene,view:s,fade:f.params.interval.graceDestroy,destroy:!0}),v.fadeOut({scene:n.scene,view:o,fade:f.params.interval.graceDestroy,destroy:!0}),n.scene.onMessage.remove(e)},1e3*f.params.interval.tooltip[0])}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["scorer_handler"] = function(g) {
			((o,e)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ScorerHandler=void 0;var n=e("../models/parameters"),d=e("../view/scorer_view");function t(o){this._model=o.scorer,this._gm=o.gm,this._view=new d.ScorerView(o),this._num=o.num,this._setup()}t.prototype._setup=function(){var t=this;this._model.onScoreUpdated.add(function(o){return t._view.udpate(o.oid,o.value,o.first)}),this._model.onCouponUpdated.add(function(o){return t._view.updateCoupon(o.oid,o.value)});for(var o=0;o<this._num;o++)this._model.add(o,n.params.cost.player);this._model.onMask.add(function(){return t._view.mask()}),this._gm.onRailEdgeAdded.add(function(o){var e=g.Util.distance(o.from.x,o.from.y,o.to.x,o.to.y)*n.params.cost.rail;t._model.add(o.oid,-e),o.onDestroyed.add(function(){return t._model.addCoupon(o.oid,e*n.params.weight.coupon)})}),this._gm.onStationAdded.add(function(d){t._model.add(d.ownerID,-n.params.cost.station),d.onDestroyed.add(function(){for(var o=n.params.cost.station,e=0;e<d.lv;e++)o+=n.params.cost.upgrade[e];t._model.addCoupon(d.ownerID,o*n.params.weight.coupon)})}),this._gm.onTrainAdded.add(function(o){t._model.add(o.ownerID,-t._model.getTrainCost(o.ownerID)),t._model.incrementTrainCost(o.ownerID,n.params.cost.train.increment),o.onDestroyed.add(function(){t._model.decrementTrainCost(o.ownerID,n.params.cost.train.increment),t._model.addCoupon(o.ownerID,t._model.getTrainCost(o.ownerID)*n.params.weight.coupon)})}),this._gm.onStationUpgraded.add(function(o){return t._model.add(o.st.ownerID,-n.params.cost.upgrade[o.lv-1])}),this._gm.onPlatformBoosted.add(function(o){return t._model.add(o.ownerID,-n.params.cost.boost.platform)}),this._gm.onGateBoosted.add(function(o){return t._model.add(o.ownerID,-n.params.cost.boost.gate)}),this._gm.onRollbacked.add(function(o){t._model.resetTrainCost(o),t._model.resetCoupon(o)})},o.ScorerHandler=t})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["scorer_model"] = function(g) {
			((t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScorerModel=void 0;var s=o("./parameters"),i=o("./trriger_model"),o=(e.prototype.score=function(t){return this._values[t]},e.prototype.get=function(t){return this._values[t]+this._coupons[t]},e.prototype.add=function(t,o){o<0&&(this._coupons[t]>-o?(this._coupons[t]+=o,o=0,this.onCouponUpdated.fire({oid:t,value:this._coupons[t]})):0<this._coupons[t]&&(o+=this._coupons[t],this._coupons[t]=0,this.onCouponUpdated.fire({oid:t,value:this._coupons[t]}))),this._values[t]+=o,0!==o&&this.onScoreUpdated.fire({oid:t,value:this._values[t],first:this.maxOwner}),this.onUpdated.fire({oid:t,value:this.get(t)})},e.prototype.addCoupon=function(t,o){this._coupons[t]+=o,this.onCouponUpdated.fire({oid:t,value:this._coupons[t]}),this.onUpdated.fire({oid:t,value:this.get(t)})},e.prototype.record=function(){for(var t=[],o=0;o<this._values.length;o++)t.push(this._values[o]);this._records.push(t)},e.prototype.export=function(){return this._records},e.prototype.incrementTrainCost=function(t,o){this._trainCosts[t]+=o,this.onTrainCostChanged.fire({oid:t,cost:this._trainCosts[t]})},e.prototype.decrementTrainCost=function(t,o){this._trainCosts[t]-=o,this.onTrainCostChanged.fire({oid:t,cost:this._trainCosts[t]})},e.prototype.getTrainCost=function(t){return this._trainCosts[t]},e.prototype.resetTrainCost=function(t){this._trainCosts[t]=s.params.cost.train.initial,this.onTrainCostChanged.fire({oid:t,cost:this._trainCosts[t]})},e.prototype.resetCoupon=function(t){this._coupons[t]=0,this.onCouponUpdated.fire({oid:t,value:this._coupons[t]})},Object.defineProperty(e.prototype,"maxOwner",{get:function(){for(var t,o=Number.MIN_VALUE,s=0;s<this._values.length;s++)o<this._values[s]&&(o=this._values[s],t=s);return t},enumerable:!1,configurable:!0}),e);function e(t){this.onUpdated=new i.Trigger,this.onScoreUpdated=new i.Trigger,this.onCouponUpdated=new i.Trigger,this.onTrainCostChanged=new i.Trigger,this.onMask=new i.Trigger,this._values=[],this._coupons=[],this._trainCosts=[],this._records=[];for(var o=0;o<t;o++)this._values.push(0),this._coupons.push(0),this._trainCosts.push(s.params.cost.train.initial)}t.ScorerModel=o})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["game_header_scene"] = function(g) {
			((a,e)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.stopGameSceneSound=a.createHeader=void 0;var n=e("../handlers/scorer_handler"),s=e("../handlers/ticker_handler"),t=e("../models/parameters"),o=e("../view/path_finding_progress"),d=e("./ending_scene"),c=(a.createHeader=function(e){r=e.scene;var n,r=new g.E({scene:r,x:64,y:0,width:t.params.view.game[0],height:64});return i({scene:e.scene,layer:r,playerFonts:e.playerFonts,myFont:e.myFont,couponFont:e.couponFont,num:e.num,oid:null==(n=e.self)?void 0:n.oid,gm:e.gm,scorer:e.scorer}),l({scene:e.scene,layer:r,rf:e.rf,tf:e.tf}),c({scene:e.scene,layer:r,numberFont:e.numberFont,gameLayer:e.gameLayer,self:e.self,num:e.num,singleMode:e.singleMode,scorer:e.scorer,players:e.players,displayName:e.displayName,onStarted:e.onStarted}),r},function(r){var e=r.gameLayer.width-180,e=new g.E({scene:r.scene,x:e,width:g.game.width-e,height:r.layer.height}),n=(r.layer.append(e),new s.TickerHandler({scene:r.scene,layer:e,numberFont:r.numberFont,scorer:r.scorer}));r.onStarted.add(function(){return n.start()}),n.onEnded.add(function(){a.stopGameSceneSound(r.scene);var e=d.createEndingScene(),n=(r.gameLayer.moveTo(3,3),r.gameLayer.modified(),new g.Pane({scene:r.scene,width:t.params.view.game[0]+6,height:t.params.view.game[1]+6,children:[r.gameLayer]}));d.createEndingSceneHandlers({scene:e,gameLayer:n,num:r.num,self:r.self,singleMode:r.singleMode,scorer:r.scorer,displayName:r.displayName,players:r.players}),g.game.replaceScene(e)})}),i=function(e){new n.ScorerHandler(e)},l=function(e){var n=new g.E({scene:e.scene,width:200,height:10,y:100}),r=(n.x=(e.layer.width-n.width)/2,n.modified(),e.layer.append(n),new o.PathFindingProgress({scene:e.scene,layer:n,rf:e.rf,tf:e.tf}));e.tf.onRequested.add(function(){return r.start()}),e.rf.onCompleted.add(function(){return r.complete()})};a.stopGameSceneSound=function(e){e.asset.getAudioById("nc198393").stop()}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["scorer_view"] = function(g) {
			((t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScorerView=void 0;var n=i("../models/parameters"),_=i("./commons_view");function s(t){this._views=[],this._firsts=[],this._scene=t.scene,this._layer=t.layer,this._playerFonts=t.playerFonts,this._myFont=t.myFont,this._couponFont=t.couponFont,this._oid=t.oid,this._setup(t.num)}s.prototype.mask=function(){if(!this._mask){this._mask=!0;for(var t=0;t<this._firsts.length;t++)t!==this._oid&&(this._views[t].text=" ?????",this._views[t].invalidate()),this._firsts[t].hide()}},s.prototype.udpate=function(t,i,s){if(!(this._mask&&t!==this._oid||(this._views[t].text=""+("       "+Math.round(i)).slice(-6),this._views[t].invalidate(),this._mask)))for(var e=0;e<this._firsts.length;e++)e===s?this._firsts[e].show():this._firsts[e].hide()},s.prototype.updateCoupon=function(t,i){t===this._oid&&(0<i?this._coupon.show():this._coupon.hide(),this._coupon.text="+"+("      "+Math.round(i)).slice(-5),this._coupon.invalidate())},s.prototype._setup=function(t){for(var i=0,s=void 0===this._oid?t:t-1,e=0;e<t;e++){var o=_.createIcon({scene:this._scene,oid:e,x:e===this._oid?this._layer.width+.25*n.params.view.icon:i*(this._layer.width-200)/s,y:this._layer.height/2}),h=(this._layer.append(o),e===this._oid?this._myFont:this._playerFonts[e]),h=new g.Label({scene:this._scene,parent:this._layer,x:e===this._oid?this._layer.width+.75*n.params.view.icon-2:i*(this._layer.width-200)/s+n.params.view.icon+2,y:this._layer.height/2,font:h,fontSize:h.size,anchorY:.5,text:"------"}),h=(this._views.push(h),e!==this._oid&&i++,_.createFirstIcon(this._scene,o));h.hide(),o.append(h),this._firsts.push(h)}this._coupon=new g.Label({scene:this._scene,parent:this._layer,x:this._layer.width+105,y:this._layer.height/2+this._couponFont.size+5,font:this._couponFont,fontSize:this._couponFont.size,anchorY:.5,text:"-----",hidden:!0})},t.ScorerView=s})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["slider_view"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Slider=void 0;var h=t("./button"),n=t("./commons_view");function i(e){this._updatedHandlers=[],this._fixedHandlers=[],this._scene=e.scene,this._layer=e.layer,this._min=e.min,this._max=e.max,this._value=e.value,this._setup(e.oid)}i.prototype.addUpdateHandler=function(e){this._updatedHandlers.push(e)},i.prototype.addFixHandler=function(e){this._fixedHandlers.push(e)},i.prototype.destroy=function(){this._bar.destroyed()||this._bar.destroy(),this._pointer.destroy()},i.prototype.enable=function(){this._pointer.enable()},i.prototype.disable=function(){this._pointer.disable()},Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this._pointer.moveTo(this._area.x,this._area.y)},enumerable:!1,configurable:!0}),i.prototype._setup=function(e){var t=this,i=(this._bar=new g.FilledRect({scene:this._scene,x:0,y:.25*this._layer.height,width:this._layer.width,height:.5*this._layer.height,cssColor:"#888888"}),this._layer.append(this._bar),this._area);this._pointer=new h.RectangleButton({sensor:new g.E({scene:this._scene,parent:this._layer,x:i.x,y:i.y,width:i.width,height:i.height,touchable:!0,local:!0}),view:new g.FilledRect({scene:this._scene,parent:this._layer,x:i.x,y:i.y,width:i.width,height:i.height,cssColor:n.colors[e].primary}),pushed:new g.FilledRect({scene:this._scene,parent:this._layer,x:i.x,y:i.y,width:i.width,height:i.height,cssColor:n.colors[e].primary_pressed,hidden:!0}),disabled:new g.FilledRect({scene:this._scene,parent:this._layer,x:i.x,y:i.y,width:i.width,height:i.height,cssColor:n.colors[e].disabled,hidden:!0})}),this._pointer.onDragged.add(function(e){t._value+=e.dx/t._layer.width*(t._max-t._min),t._value<t._min?(t._value=t._min,t._pointer.moveTo(-i.height/2,0)):t._value>t._max?(t._value=t._max,t._pointer.moveTo(t._layer.width-i.height/2,0)):t._pointer.moveBy(e.dx,0),t._updatedHandlers.forEach(function(e){return e(t._value)})}),this._pointer.onPushed.add(function(){t._fixedHandlers.forEach(function(e){return e(t._value)})})},Object.defineProperty(i.prototype,"_area",{get:function(){var e=this._layer.height;return{x:(this._value-this._min)/(this._max-this._min)*this._layer.width-e/2,y:0,width:e,height:e}},enumerable:!1,configurable:!0}),e.Slider=i})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_upgrade_event"] = function(g) {
			!function(e,t){var o,n,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),t=(Object.defineProperty(e,"__esModule",{value:!0}),e.isStationUpgradedEvent=e.StationUpgradedEvent=void 0,t("./action_event")),a="STATION_UPGRADE",t=(n=t.ActionEvent,r(i,n),i.parse=function(t){return e.isStationUpgradedEvent(t)?new i(t.data.data):null},Object.defineProperty(i.prototype,"changed",{get:function(){return this.data.data.changed},enumerable:!1,configurable:!0}),i);function i(t){return n.call(this,a,t)||this}e.StationUpgradedEvent=t;e.isStationUpgradedEvent=function(t){return t.data.code===a}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_upgrader_view"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StationUpgraderView=void 0;var o=t("../models/parameters"),s=t("../models/trriger_model"),i=t("../scenes/game_scene"),r=t("./commons_view"),n=t("./effect");function h(e){this.onPointed=new s.Trigger,this._markers={},this._pointerID=null,this._scene=e.scene,this._layer=e.layer,this._oid=e.oid,this._setup()}h.prototype.import=function(s){var i=this;Object.keys(s).forEach(function(e){var t,e=s[e];e.st&&e.st.lv<o.params.cost.upgrade.length&&(t=r.createCursor(i._scene,i._oid,e.x,e.y),i._markerLayer.append(t),i._markers["n"+e.id]=t)})},h.prototype.upgrade=function(e,t){t>=o.params.cost.upgrade.length&&(null!=(t=this._markers["n"+e])&&t.destroy(),delete this._markers["n"+e]),this._selected.hide()},h.prototype.select=function(e,t){t&&(this._selected.x=e.node.x,this._selected.y=e.node.y,this._selected.modified(),this._selected.show())},h.prototype.tooExpensive=function(){this._selected.hide(),n.flashLabel({scene:this._scene,layer:this._layer,asset:"station_upgrade_error_too_expensive_img",x:20,y:70}),i.playTooExpensive(this._scene)},h.prototype.notFound=function(e){this._selected.hide(),e&&n.flashLabel({scene:this._scene,layer:this._layer,asset:"station_upgrade_error_no_station_img",x:20,y:70})},h.prototype.noMoreLevel=function(){this._selected.hide(),n.flashLabel({scene:this._scene,layer:this._layer,asset:"station_upgrade_error_top_level_img",x:20,y:70}),i.playTooExpensive(this._scene)},h.prototype.show=function(){var t=this;this._guide.show(),Object.keys(this._markers).forEach(function(e){return t._markers[e].show()})},h.prototype.enable=function(){this._sensor.show(),this._pointerID=null},h.prototype.disable=function(){this._sensor.hide()},h.prototype.cancel=function(){var t=this;this._guide.hide(),Object.keys(this._markers).forEach(function(e){return t._markers[e].destroy()}),this._markers={},this._selected.hide()},h.prototype.destory=function(){this.cancel(),this._guide.destroyed()||this._guide.destroy()},h.prototype._setup=function(){var t=this;this._sensor=new g.E({scene:this._scene,width:this._layer.width,height:this._layer.height,touchable:!0,local:!0}),this._sensor.hide(),this._layer.append(this._sensor),this._guide=r.createGuideLabel(this._scene,"station_upgrade_guide_img"),this._guide.hide(),this._layer.append(this._guide),this._markerLayer=new g.E({scene:this._scene,width:this._layer.width,height:this._layer.height}),this._layer.append(this._markerLayer),this._selected=r.createSelectedCursor(this._scene,this._oid),this._selected.hide(),this._layer.append(this._selected),this._sensor.onPointDown.add(function(e){null===t._pointerID&&(t.onPointed.fire({x:e.point.x,y:e.point.y,fixed:!1}),t._pointerID=e.pointerId)}),this._sensor.onPointMove.add(function(e){t._pointerID===e.pointerId&&t.onPointed.fire({x:e.point.x+e.startDelta.x,y:e.point.y+e.startDelta.y,fixed:!1})}),this._sensor.onPointUp.add(function(e){t._pointerID===e.pointerId&&(t.onPointed.fire({x:e.point.x+e.startDelta.x,y:e.point.y+e.startDelta.y,fixed:!0}),t._pointerID=null)})},e.StationUpgraderView=h})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_booster_event"] = function(g) {
			!function(e,t){var o,n,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),t=(Object.defineProperty(e,"__esModule",{value:!0}),e.isGateBoostEvent=e.GateBoostEvent=e.isPlatformBoostEvent=e.PlatformBoostEvent=void 0,t("./action_event")),a="PLATFORM_BOOSTED",i=(n=t.ActionEvent,r(c,n),c.parse=function(t){return e.isPlatformBoostEvent(t)?new c(t.data.data):null},Object.defineProperty(c.prototype,"changed",{get:function(){return this.data.data.changed},enumerable:!1,configurable:!0}),c);function c(t){return n.call(this,a,t)||this}e.PlatformBoostEvent=i;e.isPlatformBoostEvent=function(t){return t.data.code===a};var u,s="GATE_BOOSTED",i=(u=t.ActionEvent,r(l,u),l.parse=function(t){return e.isGateBoostEvent(t)?new l(t.data.data):null},Object.defineProperty(l.prototype,"changed",{get:function(){return this.data.data.changed},enumerable:!1,configurable:!0}),l);function l(t){return u.call(this,s,t)||this}e.GateBoostEvent=i;e.isGateBoostEvent=function(t){return t.data.code===s}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_booster_view"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StationBoosterView=void 0;var i=t("../models/trriger_model"),s=t("../scenes/game_scene"),o=t("./commons_view"),n=t("./effect");function r(e){this.onPointed=new i.Trigger,this._markers={},this._pointerID=null,this._scene=e.scene,this._guideText=e.guide,this._tooExpensive=e.expensive,this._layer=e.layer,this._oid=e.oid,this._filter=e.filter,this._onTrigger=e.onTrigger,this._offTrigger=e.offTrigger,this._setup()}r.prototype.import=function(i){var s=this;Object.keys(i).forEach(function(e){var t,e=i[e];e.st&&(t=o.createCursor(s._scene,s._oid,e.x,e.y),s._markerLayer.append(t),s._markers[e.st.uid]={station:e.st,onBoost:function(){return t.hide()},onUnBoost:function(){return t.show()},marker:t},s._filter(e.st)||t.hide(),s._onTrigger(e.st).add(s._markers[e.st.uid].onBoost),s._offTrigger(e.st).add(s._markers[e.st.uid].onUnBoost))})},r.prototype.select=function(e,t){t&&(this._selected.x=e.node.x,this._selected.y=e.node.y,this._selected.modified(),this._selected.show())},r.prototype.boost=function(){this._selected.hide()},r.prototype.tooExpensive=function(){this._selected.hide(),n.flashLabel({scene:this._scene,layer:this._layer,asset:this._tooExpensive,x:20,y:70}),s.playTooExpensive(this._scene)},r.prototype.notFound=function(e){this._selected.hide(),e&&n.flashLabel({scene:this._scene,layer:this._layer,asset:"station_booster_error_no_station_img",x:20,y:70})},r.prototype.alreadyBoosted=function(){this._selected.hide(),n.flashLabel({scene:this._scene,layer:this._layer,asset:"station_booster_error_already_boosted_img",x:20,y:70}),s.playTooExpensive(this._scene)},r.prototype.show=function(){this._guide.show(),this._markerLayer.show()},r.prototype.enable=function(){this._sensor.show(),this._pointerID=null},r.prototype.disable=function(){this._sensor.hide()},r.prototype.cancel=function(){var t=this;this._guide.hide(),Object.keys(this._markers).forEach(function(e){e=t._markers[e];t._onTrigger(e.station).remove(e.onBoost),t._offTrigger(e.station).remove(e.onUnBoost),e.marker.destroy()}),this._markers={},this._selected.hide()},r.prototype.destroy=function(){this.cancel(),this._guide.destroyed()||this._guide.destroy()},r.prototype._setup=function(){var t=this;this._sensor=new g.E({scene:this._scene,width:this._layer.width,height:this._layer.height,touchable:!0,local:!0}),this._sensor.hide(),this._layer.append(this._sensor),this._guide=o.createGuideLabel(this._scene,this._guideText),this._guide.hide(),this._layer.append(this._guide),this._markerLayer=new g.E({scene:this._scene,width:this._layer.width,height:this._layer.height}),this._layer.append(this._markerLayer),this._selected=o.createSelectedCursor(this._scene,this._oid),this._selected.hide(),this._layer.append(this._selected),this._sensor.onPointDown.add(function(e){null===t._pointerID&&(t.onPointed.fire({x:e.point.x,y:e.point.y,fixed:!1}),t._pointerID=e.pointerId)}),this._sensor.onPointMove.add(function(e){t._pointerID===e.pointerId&&t.onPointed.fire({x:e.point.x+e.startDelta.x,y:e.point.y+e.startDelta.y,fixed:!1})}),this._sensor.onPointUp.add(function(e){t._pointerID===e.pointerId&&(t.onPointed.fire({x:e.point.x+e.startDelta.x,y:e.point.y+e.startDelta.y,fixed:!0}),t._pointerID=null)})},e.StationBoosterView=r})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_view"] = function(g) {
			((e,t)=>{function r(e){for(var t=[],s=0;s<n.params.animation.circleProgress;s++)t.push(s);return new g.FrameSprite({scene:e,src:e.asset.getImageById("circle_progress_img"),width:n.params.view.circleProgress,height:n.params.view.circleProgress,x:n.params.view.circleProgress/2-10,y:-n.params.view.circleProgress,anchorX:.5,hidden:!0,frames:t})}Object.defineProperty(e,"__esModule",{value:!0}),e.StationView=void 0;var n=t("../models/parameters"),s=t("../models/trriger_model"),h=t("./color_utils"),o=t("./commons_view"),i=t("./effect");function a(e){this._onUpgraded=new s.Trigger,this._scene=e.scene,this._layer=e.layer,this._self=e.self,this._oid=e.oid,this._fadeOutPushing=function(){},this._fadeOutGating=function(){},this._fadeOutReject=function(){},this._fadeOutPusher=function(){},this._fadeOutStaff=function(){},this._fadeOutNoTrain=function(){},this._fadeOutFullPlatform=function(){},this._fadeOutFullGate=function(){},this._setup(e.x,e.y,e.oid,e.self,e.lv)}a.prototype.accept=function(e){this._capacity.show(),this._passengers.width=e*(this._self?48:22),this._passengers.modified(),this._releaseHandler&&(this._scene.clearTimeout(this._releaseHandler),this._releaseHandler=null)},a.prototype.release=function(e){var t=this;e<=0&&(this._releaseHandler=this._scene.setTimeout(function(){e<=0&&t._capacity.hide(),t._releaseHandler=null},1e3*n.params.interval.stationRelease)),this._passengers.width=e*(this._self?48:22),this._passengers.modified()},a.prototype.full=function(){this._self&&!this._fullGate.visible()&&(this._fadeOutFullPlatform(),this._fullPlatform.show(),this._fadeOutNoTrain(),this._noTrain.hide())},a.prototype.vacant=function(){this._self&&(this._fadeOutFullPlatform=i.fadeOut({scene:this._scene,view:this._fullPlatform,fade:n.params.interval.graceDestroy}))},a.prototype.fullGate=function(){this._self&&(this._fadeOutFullPlatform(),this._fullPlatform.hide(),this._fadeOutFullGate(),this._fullGate.show())},a.prototype.vacantGate=function(){this._self&&(this._fadeOutFullGate=i.fadeOut({scene:this._scene,view:this._fullGate,fade:n.params.interval.graceDestroy}))},a.prototype.reject=function(){var e=this;this._self&&(this._fadeOutReject(),this._reject.frameNumber=0,this._reject.modified(),this._reject.start(),this._reject.show(),this._rejectTimer&&(this._scene.clearTimeout(this._rejectTimer),this._rejectTimer=null),this._rejectTimer=this._scene.setTimeout(function(){e._fadeOutReject=i.fadeOut({scene:e._scene,view:e._reject,fade:n.params.interval.reject}),e._rejectTimer=null},1e3*n.params.interval.reject))},a.prototype.update=function(e){},a.prototype.upgrade=function(e,t){i.effectUpgrade({scene:this._scene,view:this._base,oid:this._oid}),this._onUpgraded.fire(e),this._passengers.width=t*(this._self?48:22),this._passengers.modified()},a.prototype.boostPlatform=function(){this._fadeOutPusher(),this._pusher.show(),this._self&&this._pusherProgress.show()},a.prototype.boostingPlatform=function(e){this._self&&(this._pusherProgress.frameNumber=Math.floor(e*n.params.animation.circleProgress),this._pusherProgress.modified())},a.prototype.unboostPlatform=function(){this._self&&this._pusherProgress.hide(),this._fadeOutPusher=i.fadeOut({scene:this._scene,view:this._pusher,fade:n.params.interval.graceDestroy})},a.prototype.boostGate=function(){this._fadeOutStaff(),this._staff.show(),this._self&&this._staffProgress.show()},a.prototype.boostingGate=function(e){this._self&&(this._staffProgress.frameNumber=Math.floor(e*n.params.animation.circleProgress),this._staffProgress.modified())},a.prototype.unboostGate=function(){this._self&&this._staffProgress.hide(),this._fadeOutStaff=i.fadeOut({scene:this._scene,view:this._staff,fade:n.params.interval.graceDestroy})},a.prototype.pushing=function(){var e=this;this._fadeOutPushing(),this._pushing.show(),this._pushingTimer&&(this._scene.clearTimeout(this._pushingTimer),this._pushingTimer=null),this._pushingTimer=this._scene.setTimeout(function(){e._fadeOutPushing=i.fadeOut({scene:e._scene,view:e._pushing,fade:n.params.interval.pushing}),e._pushingTimer=null},1e3*n.params.interval.pushing)},a.prototype.gating=function(){var e=this;this._fadeOutGating(),this._gating.show(),this._gatingTimer&&(this._scene.clearTimeout(this._gatingTimer),this._gatingTimer=null),this._gatingTimer=this._scene.setTimeout(function(){e._fadeOutGating=i.fadeOut({scene:e._scene,view:e._gating,fade:n.params.interval.gating}),e._gatingTimer=null},1e3*n.params.interval.gating)},a.prototype.noTrain=function(){this._self&&!this._fullPlatform.visible()&&(this._fadeOutNoTrain(),this._noTrain.show())},a.prototype.arrive=function(){this._self&&(this._fadeOutNoTrain=i.fadeOut({scene:this._scene,view:this._noTrain,fade:n.params.interval.graceDestroy}))},a.prototype.graceDestroy=function(){i.fadeOut({scene:this._scene,view:this._base,fade:n.params.interval.graceDestroy,destroy:!0})},a.prototype._setup=function(e,t,s,i,a){this._base=(e=>{for(var t=[],s=0;s<3;s++){var i=6*e.oid+s;e.self||(i+=3),t.push(i)}var a=new g.FrameSprite({scene:e.scene,x:e.x,y:e.y,width:n.params.view.station[0],height:n.params.view.station[1],anchorX:.5,anchorY:.5,src:e.scene.asset.getImageById("station_img"),frames:t,frameNumber:e.lv});return e.onUpgraded.add(function(e){a.frameNumber=e,a.modified()}),a})({scene:this._scene,oid:s,self:i,x:e,y:t,onUpgraded:this._onUpgraded,lv:a}),this._layer.append(this._base),this._reject=((e,t)=>{for(var s=[],i=0;i<n.params.animation.reject;i++)s.push(t*n.params.animation.reject+i);var a=new g.FrameSprite({scene:e,x:n.params.view.station[0]/2,y:10-n.params.view.reject,width:n.params.view.reject,height:n.params.view.reject,src:e.asset.getImageById("reject_img"),frames:s,hidden:!0,opacity:.75});return e.onUpdate.add(function(){a.frameNumber===n.params.animation.reject-1&&a.stop()}),a})(this._scene,s),this._base.append(this._reject),this._pusher=(e=this._scene,t=s,new g.FrameSprite({scene:e,x:-10,width:n.params.view.pusher,height:n.params.view.pusher,src:e.asset.getImageById("pusher_img"),frames:[t],hidden:!0})),this._base.append(this._pusher),this._pushing=(a=this._scene,e=s,new g.FrameSprite({scene:a,x:n.params.view.station[0]/2,y:10-n.params.view.pushing,width:n.params.view.pushing,height:n.params.view.pushing,src:a.asset.getImageById("pushing_img"),frames:[e],hidden:!0,opacity:.75})),this._base.append(this._pushing),this._staff=(t=this._scene,a=s,new g.FrameSprite({scene:t,x:-10,width:n.params.view.staff,height:n.params.view.staff,src:t.asset.getImageById("staff_img"),frames:[a],hidden:!0})),this._base.append(this._staff),this._gating=((e,t)=>{for(var s=[],i=0;i<n.params.animation.gating;i++)s.push(t*n.params.animation.gating+i);return(e=new g.FrameSprite({scene:e,x:n.params.view.station[0]/2,y:10-n.params.view.gating,width:n.params.view.gating,height:n.params.view.gating,src:e.asset.getImageById("gating_img"),frames:s,hidden:!0,opacity:.75})).start(),e})(this._scene,s),this._base.append(this._gating),this._noTrain=(e=this._scene,t=s,new g.FrameSprite({scene:e,x:n.params.view.station[0]/2+10,y:-n.params.view.noTrain/2,width:n.params.view.noTrain,height:n.params.view.noTrain,src:e.asset.getImageById("alert_no_train_img"),frames:[t+1],hidden:!0,opacity:.75})),this._base.append(this._noTrain),this._fullPlatform=(a=this._scene,e=s,new g.FrameSprite({scene:a,x:n.params.view.station[0]/2+10,y:-n.params.view.fullPlatform/2,width:n.params.view.fullPlatform,height:n.params.view.fullPlatform,src:a.asset.getImageById("alert_full_platform_img"),frames:[e+1],hidden:!0,opacity:.75})),this._base.append(this._fullPlatform),this._fullGate=(t=this._scene,a=s,new g.FrameSprite({scene:t,x:n.params.view.station[0]/2+10,y:-n.params.view.fullGate/2,width:n.params.view.fullGate,height:n.params.view.fullGate,src:t.asset.getImageById("alert_full_gate_img"),frames:[a+1],hidden:!0,opacity:.75})),this._base.append(this._fullGate),this._pusherProgress=r(this._scene),this._base.append(this._pusherProgress),this._staffProgress=r(this._scene),this._base.append(this._staffProgress),this._capacity=(e=this._scene,t=s,a=i,new g.FrameSprite({scene:e,src:e.asset.getImageById("capacity_img"),width:n.params.view.capacity[0],height:n.params.view.capacity[1],x:n.params.view.capacity[0]/2,anchorX:.5,y:-n.params.view.capacity[1]+n.params.view.capacity[1]*(a?0:.75),frames:[2*t+(a?0:1)],hidden:!0})),this._base.append(this._capacity),this._passengers=new g.FilledRect({scene:this._scene,x:i?6:19,y:i?6:7.5,width:0,height:i?5:2,cssColor:h.hueToRgb(o.colors[s].human,.75),opacity:i?1:.66}),this._capacity.append(this._passengers)},e.StationView=a})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["tooltips_view"] = function(g) {
			((t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipView=void 0;var i=e("../models/parameters"),s=e("../models/trriger_model"),o=e("../scenes/game_scene"),n=e("./effect"),c=e("./sprite_button");function h(t){this.onUnlimit=new s.Trigger,this.onStarted=new s.Trigger,this.onCompleted=new s.Trigger,this.onCanceled=new s.Trigger,this._limited=!0,this._inactive=!0,this._scene=t.scene,this._numberFont=t.numberFont,this._tooltip=t.tooltip,this._exec=t.exec,this._cancel=t.cancel,this._txtExec=t.execText,this._oid=t.oid,this._scorer=t.scorer,this._cost=t.cost,this._unlimit=t.unlimit,this._noeffect=t.noeffect,this._setup()}h.prototype.enable=function(){this._cost>this._scorer.get(this._oid)||this._execButton.enable()},h.prototype.disable=function(){this._execButton.disable()},h.prototype.unlimit=function(){this._limited=!1,this._inactive||this.show()},h.prototype.activate=function(){this._inactive=!1,this.show()},h.prototype.inactivate=function(){this._inactive=!0,this.hide()},h.prototype.show=function(){var t,e;this._limited||this._inactive||(this._initialEffected||(this._noeffect||(o.playUnlimit(this._scene),e=n.blink({scene:this._scene,view:this._exec}),this._scene.setTimeout(function(){e()},1e3*i.params.interval.unlimit)),this.onUnlimit.fire(),this._initialEffected=!0),(this._executing?this._cancelButton:this._execButton).show(),null!=(t=this._costLabel)&&t.show(),null!=(t=this._costSuffix)&&t.show())},h.prototype.hide=function(){var t;this._execButton.hide(),this._cancelButton.hide(),null!=(t=this._costLabel)&&t.hide(),null!=(t=this._costSuffix)&&t.hide()},h.prototype.complete=function(){this._executing=!1,this.enable(),this._execButton.show(),this._cancelButton.hide(),this.onCompleted.fire()},h.prototype.cancel=function(){this._execButton.show(),this._cancelButton.hide(),this.onCanceled.fire(),this._executing=!1},h.prototype.destroy=function(){this._execButton.destroy(),this._cancelButton.destroy(),this._costLabel&&!this._costLabel.destroyed()&&this._costLabel.destroy(),this._costSuffix&&!this._costSuffix.destroyed()&&this._costSuffix.destroy(),this._scoreHandler&&(this._scorer.onUpdated.remove(this._scoreHandler),this._scoreHandler=null)},Object.defineProperty(h.prototype,"cost",{set:function(t){this._cost=t,this._costLabel.text=""+("    "+this._cost).slice(-4),this._costLabel.invalidate(),this._cost>this._scorer.get(this._oid)?this.disable():this.enable()},enumerable:!1,configurable:!0}),h.prototype._setup=function(){var e=this;this._execButton=new c.SpriteButton({scene:this._scene,layer:this._tooltip,sprite:this._exec,label:this._txtExec,downRate:.1}),this._cancelButton=new c.SpriteButton({scene:this._scene,layer:this._tooltip,sprite:this._cancel,label:"prev_img",downRate:.1}),0<this._cost&&(this._costLabel=new g.Label({scene:this._scene,font:this._numberFont,text:""+("    "+this._cost).slice(-4),fontSize:18,x:this._exec.width,y:this._exec.height/2-15,anchorY:0}),this._tooltip.append(this._costLabel),this._costSuffix=new g.Sprite({scene:this._scene,src:this._scene.asset.getImageById("cost_img"),x:this._exec.width+25,y:this._exec.height/2-15,anchorY:-.75}),this._tooltip.append(this._costSuffix)),this.hide(),this._execButton.onPushed.add(function(){e._execButton.hide(),e._cancelButton.show(),e.onStarted.fire(),e._executing=!0}),this._execButton.onDisabledPushed.add(function(){n.flashLabel({scene:e._scene,layer:e._tooltip,asset:"too_expensive_img",x:12,y:-15,fade:.5}),o.playTooExpensive(e._scene)}),this._cancelButton.onPushed.add(function(){e._execButton.show(),e._cancelButton.hide(),e.onCanceled.fire(),e._executing=!1}),this._scoreHandler=function(t){t.oid===e._oid&&(e._cost>t.value?e.disable():e.enable())},this._scorer.onUpdated.add(this._scoreHandler),this._scene.setTimeout(function(){e.unlimit()},1e3*this._unlimit)},t.TooltipView=h})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["parameters"] = function(g) {
			(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.params=void 0,e.params={cost:{player:25e3,rail:10,station:800,train:{initial:800,increment:100},upgrade:[1600,1600],boost:{platform:400,gate:400}},boost:{gate:2,platform:2},weight:{upgrade:[1,.75,.5],charge:.1,fee:Math.sqrt(100),train:.1,penalty:{crowded:80,gate:1,train:.5,transport:[1.5,3,6]},coupon:.5},speed:{tips:540,human:25,gate:[4,8,16],ride:5,getOff:10,train:120},acceleration:{train:20},interval:{modeDefine:.5,resolveName:15,tips:17,start:5,end:5,game:270,scoreMask:30,immigration:60,residence:1,boost:{platform:20,gate:20},train:1,human:90,notice:10,tooltip:[45,45,75,75,150,150,120],unlimit:4,penalty:[105,180,225],pushing:1,gating:1,reject:1,stationRelease:1,record:5,graceDestroy:.5,ranking:4,advise:{pop:15,suspension:30},balloon:.2,chat:{chat:2,cooldown:10,beginner:60},fastforward:5},capacity:{platform:[20,30,60],train:40},limit:{platform:100,gate:50,train:5},threshold:{gateIn:5,ride:10,gateOut:5,entryQueue:10},distance:{residence:30,gate:20,human:10,detour:10,train:40,construction:100},view:{name:[560,82],playguide:[560,330],players:[386,164],sandbox:[560,400],join:[164,164],submit_large:[560,118],modal:[468,350],game:[960,560],icon:48,territory:[600,350],tooltip:[175,80],submit:[118,70],submit_margin:25,number:{field:[140,160],input:70},cursor:118,destroyer:50,pointer:50,capacity:[60,18],company:35,residence:35,railway:6,station:[60,65],train:48,human:35,pusher:35,staff:35,pushing:100,gating:100,reject:100,noTrain:100,fullPlatform:100,fullGate:100,positive:120,upgrade:118,progress:[200,20],circleProgress:40,alert:50,penalty:[960,60],penaltyRate:[300,70],notice:[650,60],first:30,construction:30,tips:[560,140],balloon:75,chat:60,fastforward:200},animation:{cursor:15,destroyer:15,pointer:15,gating:30,positive:30,upgrade:30,progress:30,reject:30,circleProgress:100,balloon:20,chat:5,fastforward:4},ui:{distance:{rail:10,branch:50,station:50,train:50,destroy:25}},contents:{tips:["active_suspension","charge","effect","full","full_platform","full_gate","gate_crowded","gate_upgrade","gating","no_train","passive_suspension","pusher","ride","staff","train","train_reject","upgrade"],chats:["discovery","fedup","good"]}}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["game_single_scene"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.runAsSingleMode=void 0;var n=t("../events/railway_built_event"),s=t("../events/station_booster_event"),d=t("../events/station_upgrade_event"),a=t("../events/train_inserter_event");e.runAsSingleMode=function(e,i,t){e.setTimeout(function(){g.game.raiseEvent(new n.RailwayBuiltEvent({id:"2P: ",oid:1,cpu:!0,nodes:[{x:896,y:70,st:!0},{x:896,y:280,st:!0},{x:544,y:280,st:!0}],ts:4})),g.game.raiseEvent(new n.RailwayBuiltEvent({id:"3P: ",oid:2,cpu:!0,nodes:[{x:96,y:340,st:!0},{x:448,y:340,st:!0},{x:448,y:490,st:!0},{x:96,y:490,st:!0}],ts:6})),g.game.raiseEvent(new n.RailwayBuiltEvent({id:"4P: ",oid:3,cpu:!0,nodes:[{x:864,y:490,st:!0},{x:768,y:480,st:!1},{x:704,y:440,st:!0},{x:616,y:385,st:!1},{x:544,y:340,st:!0}],ts:3})),e.setTimeout(function(){g.game.raiseEvent(new n.BranchRailwayBuiltEvent({id:"2P: ",oid:1,cpu:!0,branch:{id:i._find(1,544,280).id},nodes:[{x:544,y:60,st:!0},{x:192,y:60,st:!0}],ts:7})),g.game.raiseEvent(new n.BranchRailwayBuiltEvent({id:"3P: ",oid:2,cpu:!0,branch:{id:i._find(2,448,340).id},nodes:[{x:656,y:175,st:!0}],ts:5})),g.game.raiseEvent(new n.BranchRailwayBuiltEvent({id:"4P: ",oid:3,cpu:!0,branch:{id:i._find(3,544,340).id},nodes:[{x:448,y:280,st:!1},{x:280,y:175,st:!0}],ts:1})),e.setTimeout(function(){var t=i.nodes(2),n=(Object.keys(t).forEach(function(e){g.game.raiseEvent(new d.StationUpgradedEvent({id:"3P: ",oid:2,cpu:!0,changed:{nid:t[e].id,lv:2}}))}),i.nodes(3));Object.keys(n).forEach(function(e){n[e].st||g.game.raiseEvent(new a.TrainInsertionEvent({id:"4P: ",oid:3,cpu:!0,inserted:{nid:n[e].id}}))}),e.setTimeout(function(){e.setInterval(function(){var t=i.nodes(1);Object.keys(t).forEach(function(e){g.game.raiseEvent(new s.PlatformBoostEvent({id:"2P: ",oid:1,cpu:!0,changed:{nid:t[e].id}}))}),g.game.raiseEvent(new s.GateBoostEvent({id:"2P: ",oid:1,cpu:!0,changed:{nid:i._find(1,544,280).id}}))},3e4)},6e4)},6e4)},9e4)},1e4)}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["reset_event"] = function(g) {
			!function(t){var o,n,e=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.isResetEvent=t.ResetEvent=void 0,"RESET"),e=(n=g.MessageEvent,e(a,n),a.parse=function(e){return t.isResetEvent(e)?new a(e.data.data):null},Object.defineProperty(a.prototype,"id",{get:function(){return this.data.data.adminID},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"name",{get:function(){return this.data.data.adminName},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"singleMode",{get:function(){return this.data.data.singleMode},enumerable:!1,configurable:!0}),a);function a(e){return n.call(this,{code:r,data:e})||this}t.ResetEvent=e;t.isResetEvent=function(e){return e.data.code===r}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["path_finding_progress"] = function(g) {
			((e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PathFindingProgress=void 0;var r=s("../models/parameters"),t=s("./effect");function i(e){this._scene=e.scene,this._layer=e.layer,this._rf=e.rf,this._tf=e.tf,this._hideCanceler=function(){},this._setup()}i.prototype.start=function(){this._hideCanceler(),this._bar.show(),this._bar.start(),this._scene.onUpdate.remove(this._update),this._scene.onUpdate.add(this._update)},i.prototype.complete=function(){this._hideCanceler=t.fadeOut({scene:this._scene,view:this._bar,fade:r.params.interval.graceDestroy}),this._bar.stop(),this._scene.onUpdate.remove(this._update)},i.prototype._setup=function(){for(var s=this,e=[],t=0;t<r.params.animation.progress;t++)e.push(t);this._bar=new g.FrameSprite({scene:this._scene,hidden:!0,width:r.params.view.progress[0],height:r.params.view.progress[1],srcWidth:r.params.view.progress[0],srcHeight:r.params.view.progress[1],src:this._scene.asset.getImageById("progress_img"),frames:e}),this._layer.append(this._bar),this._update=function(){var e=(s._rf.progress+s._tf.progress)/2;s._bar.width=(e=1<e?1:e)*s._bar.srcWidth,s._bar.invalidate()}},e.PathFindingProgress=i})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["trriger_model"] = function(g) {
			(e=>{function r(){this._handlers=[]}Object.defineProperty(e,"__esModule",{value:!0}),e.Trigger=void 0,r.prototype.add=function(e){this._handlers.push(e)},r.prototype.fire=function(r){this._handlers.forEach(function(e){return e(r)})},r.prototype.remove=function(e){e=this._handlers.indexOf(e);-1!==e&&this._handlers.splice(e,1)},Object.defineProperty(r.prototype,"_length",{get:function(){return this._handlers.length},enumerable:!1,configurable:!0}),e.Trigger=r})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["human_view"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HumanView=void 0;var s=t("../models/parameters"),o=t("./commons_view"),i=t("./effect");function r(e){this._scene=e.scene,this._layer=e.layer,this._rectSeed=e.random.generate(),this._spriteSeed=Math.floor(5*this._rectSeed),this._oid=e.oid,this._setup(e.x,e.y,e.oid)}r.prototype.move=function(e,t,i){this._base.x=e,this._base.y=t;e=this._sprite.scaleX;this._inversion===Math.abs(i)<Math.PI/2&&(this._sprite.scaleX=this._inversion?-1:1,this._sprite.scaleX!==e)&&this._sprite.modified(),this._inversion=Math.abs(i)<Math.PI/2,this._base.modified()},r.prototype.waitGateIn=function(){},r.prototype.gateIn=function(e,t){this._base.x=e,this._base.y=t,this._base.modified(),this._sprite.hide()},r.prototype.detouch=function(){},r.prototype.stand=function(e){},r.prototype.waitTrain=function(){},r.prototype.ride=function(){},r.prototype.travel=function(e){},r.prototype.unready=function(){},r.prototype.getOff=function(e,t){this._base.x=e,this._base.y=t,this._base.modified()},r.prototype.waitGateOut=function(){},r.prototype.gateOut=function(){this._sprite.show()},r.prototype.dequeue=function(){},r.prototype.destroy=function(e){this._base.destroyed()||this._base.destroy()},r.prototype.shiftOwner=function(e){this._sprite.frameNumber=null!==e?e+1:0,this._sprite.modified(),null!==e&&e!==this._oid&&i.effectPositive({scene:this._scene,view:this._base,oid:e}),this._oid=e},r.prototype.throwAway=function(){this._sprite.show()},r.prototype._setup=function(e,t,i){this._neutral=o.gradationGray(this._rectSeed,153,204),this._base=new g.E({scene:this._scene,x:e,y:t,width:s.params.view.human,height:s.params.view.human}),this._layer.append(this._base),this._sprite=new g.FrameSprite({scene:this._scene,width:s.params.view.human,height:s.params.view.human,frames:[0+this._spriteSeed,5+this._spriteSeed,10+this._spriteSeed,15+this._spriteSeed,20+this._spriteSeed],anchorX:.5,anchorY:.5,scaleX:e<this._layer.width/2?-1:1,frameNumber:null===i?0:i+1,src:this._scene.asset.getImageById("human_img")}),this._base.append(this._sprite)},e.HumanView=r})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["train_view"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TrainView=void 0;var a=t("../models/parameters"),n=t("./color_utils"),r=t("./commons_view"),i=t("./effect");function s(e){this._scene=e.scene,this._layer=e.layer,this._self=e.self,this._setup(e.x,e.y,e.oid,e.self)}s.prototype.accept=function(e){this._capacity.show(),this._passengers.width=e*(this._self?48:22),this._passengers.modified()},s.prototype.release=function(e){e<=0&&this._capacity.hide(),this._passengers.width=e*(this._self?48:22),this._passengers.modified()},s.prototype.overCapacity=function(){},s.prototype.full=function(){},s.prototype.underCapacity=function(){},s.prototype.vacant=function(){},s.prototype.reject=function(){},s.prototype.releaseFailed=function(){},s.prototype.suspend=function(){},s.prototype.move=function(e,t,i){this._base.x=e,this._base.y=t,this._base.modified(),this._train.angle=i/Math.PI*180,90<this._train.angle&&(this._train.angle+=180),this._train.angle<-90&&(this._train.angle+=180),this._train.modified()},s.prototype.jammed=function(){},s.prototype.graceDestroy=function(){i.fadeOut({scene:this._scene,view:this._base,fade:a.params.interval.graceDestroy,destroy:!0})},s.prototype._setup=function(e,t,i,s){this._base=new g.E({scene:this._scene,x:e,y:t}),this._layer.append(this._base),this._train=new g.FrameSprite({scene:this._scene,src:this._scene.asset.getImageById("train_img"),width:a.params.view.train,height:a.params.view.train,anchorX:.5,anchorY:.5,frames:[2*i+(s?0:1)]}),this._base.append(this._train),this._capacity=new g.FrameSprite({scene:this._scene,src:this._scene.asset.getImageById("capacity_img"),width:a.params.view.capacity[0],height:a.params.view.capacity[1],y:2*-a.params.view.train/3+a.params.view.capacity[1]*(s?0:.25),anchorX:.5,frames:[2*i+(s?0:1)],hidden:!0}),this._base.append(this._capacity),this._passengers=new g.FilledRect({scene:this._scene,x:s?6:19,y:s?6:7.5,width:0,height:s?5:2,cssColor:n.hueToRgb(r.colors[i].human,.75),opacity:s?1:.66}),this._capacity.append(this._passengers)},e.TrainView=s})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_booster_handler"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StationBoosterHandler=void 0;var i=t("../models/parameters"),s=t("../models/station_booster_model"),o=t("../models/trriger_model"),n=t("../view/commons_view"),r=t("../view/effect"),d=t("../view/station_booster_view");function _(e){this.onSubmit=new o.Trigger,this.onCompleted=new o.Trigger,this._scene=e.scene,this._layer=e.layer,this._submittingText=e.submitting,this._msgFilter=e.msgFilter,this._hideCanceler=function(){},this._model=new s.StationBoosterModel(e),this._view=new d.StationBoosterView(e),this._setup()}_.prototype.import=function(e){this._model.import(e),this._view.import(e)},_.prototype.show=function(){this._view.show(),this._view.enable()},_.prototype.cancel=function(){this._submitting.hide(),this._view.cancel(),this._view.disable()},_.prototype.destroy=function(){this._view.destroy(),this._submitting.destroyed()||this._submitting.destroy(),this._scene.onMessage.remove(this._messagegHandler)},_.prototype._setup=function(){var t=this;this._model.onExpensive.add(function(){return t._view.tooExpensive()}),this._model.onNoStation.add(function(e){return t._view.notFound(e)}),this._model.onAlreadyBoosted.add(function(){return t._view.alreadyBoosted()}),this._model.onSelected.add(function(e){t._view.select(e.st,e.matched),e.fixed&&(t._view.disable(),t._hideCanceler(),t._submitting.show(),t.onSubmit.fire(e.st.node.id))}),this._view.onPointed.add(function(e){return t._model.select(e.x,e.y,e.fixed)}),this._submitting=n.createGuideLabel(this._scene,this._submittingText,20,70),this._submitting.hide(),this._layer.append(this._submitting),this._messagegHandler=function(e){return t._onMessage(e)},this._scene.onMessage.add(this._messagegHandler)},_.prototype._onMessage=function(e){this._msgFilter(e)&&this._submitting.visible()&&(this._hideCanceler=r.fadeOut({scene:this._scene,view:this._submitting,fade:i.params.interval.graceDestroy}),this._view.boost(),this._view.enable(),this.onCompleted.fire())},e.StationBoosterHandler=_})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_upgrade_handler"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StationUpgraderHandler=void 0;var i=t("../events/station_upgrade_event"),n=t("../models/parameters"),s=t("../models/station_upgrader_model"),o=t("../models/trriger_model"),d=t("../scenes/game_scene"),a=t("../view/commons_view"),r=t("../view/effect"),_=t("../view/station_upgrader_view");function l(e){this.onSubmit=new o.Trigger,this.onCompleted=new o.Trigger,this._scene=e.scene,this._layer=e.layer,this._oid=e.oid,this._model=new s.StationUpgraderModel(e),this._view=new _.StationUpgraderView(e),this._hideCanceler=function(){},this._setup()}l.prototype.import=function(e){this._model.import(e),this._view.import(e)},l.prototype.show=function(){this._view.show(),this._view.enable()},l.prototype.destroy=function(){this._view.destory(),this._submittingLabel.destroyed()||this._submittingLabel.destroy(),this._scene.onMessage.remove(this._messageHandler)},l.prototype.cancel=function(){this._view.cancel(),this._submittingLabel.hide(),this._view.disable()},l.prototype._setup=function(){var t=this;this._submittingLabel=a.createGuideLabel(this._scene,"station_upgrade_wait_img",20,70),this._submittingLabel.hide(),this._layer.append(this._submittingLabel),this._model.onExpensive.add(function(){return t._view.tooExpensive()}),this._model.onNoStation.add(function(e){return t._view.notFound(e)}),this._model.onNoMoreLevel.add(function(){return t._view.noMoreLevel()}),this._model.onSelected.add(function(e){t._view.select(e.st,e.matched),e.fixed&&(t._view.disable(),t._hideCanceler(),t._submittingLabel.show(),d.playEffect(t._scene),g.game.raiseEvent(new i.StationUpgradedEvent({id:g.game.selfId,oid:t._oid,changed:{nid:e.st.node.id,lv:e.st.lv+1}})),t.onSubmit.fire())}),this._view.onPointed.add(function(e){return t._model.select(e.x,e.y,e.fixed)}),this._messageHandler=function(e){return t._onMessage(e)},this._scene.onMessage.add(this._messageHandler)},l.prototype._onMessage=function(e){i.isStationUpgradedEvent(e)&&(e=i.StationUpgradedEvent.parse(e)).oid()===this._oid&&this._submittingLabel.visible()&&(this._hideCanceler=r.fadeOut({scene:this._scene,view:this._submittingLabel,fade:n.params.interval.graceDestroy}),this._view.upgrade(e.changed.nid,e.changed.lv),this._view.enable(),this.onCompleted.fire())},e.StationUpgraderHandler=l})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["railway_wizard_handler"] = function(g) {
			!function(e,t){var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.BranchRailwayWizardHandler=e.RailwayWizardHandler=void 0,t("../events/railway_built_event")),r=t("../models/parameters"),o=t("../models/rail_builder_model"),s=t("../models/station_builder_model"),d=t("../models/train_deployer_model"),l=t("../models/trriger_model"),_=t("../scenes/game_scene"),w=t("../view/railway_builder_view"),h=t("../view/station_builder_view"),u=t("../view/train_deployer_view"),t=(y.prototype._setup=function(e){var i=this;this._stationView.hide(),this._steupRailway(e),this._stationView.onPointed.add(function(e){return i._stationModel.add(e.x,e.y)}),this._stationView.onNext.add(function(){i._stationView.disable(),i._nodes=i._stationModel.all,i._trainModel.import(i._rail_estimated+i._stationModel.length*r.params.cost.station,i._scorer.getTrainCost(i._oid),i._trains),i._trainView.clear(),i._trainView.submitting.hide(),i._trainView.import(i._rail_estimated+i._stationModel.length*r.params.cost.station,i._railLength,i._deployedTrains,i._trains),i._trainView.enable(),i._trainView.show()}),this._stationView.onUndo.add(function(){i._stationModel.empty?(i._undoStart(),i._stationView.hide()):i._stationModel.pop()}),this._stationModel.onAdded.add(function(e){var t=i._stationView.build(e.st.node.x,e.st.node.y,e.cost);e.st.onDeleted.add(function(e){return i._stationView.remove(t,e)})}),this._stationModel.onNoRailway.add(function(){return i._stationView.notFound()}),this._stationModel.onExpensive.add(function(){return i._stationView.tooExpensive()}),this._trainView.onInputReserved.add(function(){return i._trainModel.reserve()}),this._trainView.onInputUnReserved.add(function(){return i._trainModel.unreserve()}),this._trainView.onSubmit.add(function(){i._trainView.submitting.show(),i._trainView.disable(),i._submit()}),this._trainView.onUndo.add(function(){i._trainModel.clear(),i._trainView.disable(),i._trainView.graceHide(),i._stationView.enable()}),this._trainModel.onUpdated.add(function(e){return i._trainView.update(i._trainModel.reserved,e)}),this._trainModel.onExpensive.add(function(){return i._trainView.warnNotEnoughMoney()}),this._messageHandler=function(e){return i._onMessage(e)},this._scene.onMessage.add(this._messageHandler)},y.prototype._undoStart=function(){this._stationModel.clear(),this._stationView.clear(),this._stationView.enable(),this._trainModel.clear(),this._trainView.clear(),this._trainView.enable()},y);function y(e){this._deployedTrains=0,this._trains=0,this._scene=e.scene,this._numberFont=e.numberFont,this._oid=e.oid,this._scorer=e.scorer,this._stationModel=new s.StationBuilderModel(e),this._trainModel=new d.TrainDeployerModel(e),this._railwayLayer=new g.E({scene:e.scene,parent:e.layer,width:e.layer.width,height:e.layer.height}),this._stationLayer=new g.E({scene:e.scene,parent:e.layer,width:e.layer.width,height:e.layer.height}),this._trainLayer=new g.E({scene:e.scene,parent:e.layer,width:e.layer.width,height:e.layer.height}),this._stationView=new h.StationBuilderView({scene:e.scene,backgroundLayer:e.backgroundLayer,layer:this._railwayLayer,numberFont:e.numberFont,oid:e.oid}),this._trainView=new u.TrainDeployerView({scene:e.scene,layer:this._trainLayer,numberFont:e.numberFont,inputFont:e.inputFont,oid:e.oid}),this._setup(e)}i(V,c=t),V.prototype.graceDestroy=function(){this._scene.onMessage.remove(this._messageHandler),this._railwayView.graceDestroy(),this._stationView.graceDestroy(),this._trainView.graceDestroy()},V.prototype._setup=function(e){c.prototype._setup.call(this,e)},V.prototype._steupRailway=function(e){var t=this;this._railwayModel=new o.RailwayBuilderModel(e),this._railwayView=new w.RailwayBuilderView({scene:this._scene,layer:this._railwayLayer,numberFont:this._numberFont,oid:this._oid,scorer:this._scorer}),this._railwayView.onInputStarted.add(function(e){return t._railwayModel.start(e.x,e.y)}),this._railwayView.onInputMoved.add(function(e){return t._railwayModel.extend(e.x,e.y)}),this._railwayView.onInputEnded.add(function(){return t._railwayModel.end()}),this._railwayModel.onNoEdge.add(function(){t._railwayView.reset(),t._railwayView.warnNoEdge()}),this._railwayModel.onOutBound.add(function(){return t._railwayView.warnMoveOutBoundTerritory()}),this._railwayModel.onExpensive.add(function(){return t._railwayView.warnTooLongRailway()}),this._railwayModel.onOutStarted.add(function(){t._railwayView.reset(),t._railwayView.warnStartOutBoundTerritory()}),this._railwayModel.onStarted.add(function(){return t._railwayView.start()}),this._railwayModel.onExtended.add(function(e){return t._railwayView.append(e)}),this._railwayModel.onEnded.add(function(e){t._railwayView.hide(),t._stationModel.import(e.nodes,e.estimated,!1),t._stationView.import(e.estimated,e.nodes[0],e.nodes[e.nodes.length-1],e.nodes,e.bounds),t._rail_estimated=e.estimated,t._railLength=e.railLength,t._trains=e.trainNum,t._stationView.show()})},V.prototype._undoStart=function(){c.prototype._undoStart.call(this),this._railwayModel.clear(),this._railwayView.clear(),this._railwayView.show()},V.prototype._onMessage=function(e){},V.prototype._submit=function(){_.playEffect(this._scene),g.game.raiseEvent(new n.RailwayBuiltEvent({id:g.game.selfId,oid:this._oid,nodes:this._nodes,ts:this._trainModel.reserved}))};var c,p=V;function V(){return null!==c&&c.apply(this,arguments)||this}e.RailwayWizardHandler=p;i(M,f=t),M.prototype.import=function(e,t){this._trainView.clear(),this._railwayModel.import(e),this._railwayView.import(e),this._deployedTrains=t},M.prototype.show=function(){this._railwayView.show()},M.prototype.cancel=function(){this._stationView.clear(),this._railwayView.cancel(),this._trainView.graceHide(),this._stationView.hide(),this._railwayView.hide(),this._trainModel.clear(),this._stationModel.clear(),this._railwayModel.clear()},M.prototype.graceHide=function(){this._trainView.graceHide(),this._trainModel.clear(),this._stationView.graceHide(),this._stationModel.clear(),this._railwayView.graceHide(),this._railwayModel.clear()},M.prototype._setup=function(e){var t=this;f.prototype._setup.call(this,e),this._trainView.onSubmit.add(function(){return t.onSubmit.fire()})},M.prototype._steupRailway=function(e){var t=this;this._railwayModel=new o.BranchRailwayBuilderModel(e),this._railwayView=new w.BranchRailwayBuilderView({scene:this._scene,layer:this._railwayLayer,numberFont:this._numberFont,oid:this._oid,scorer:this._scorer}),this._railwayView.hide(),this._railwayView.onInputStarted.add(function(e){return t._railwayModel.branch(e.x,e.y)}),this._railwayView.onInputMoved.add(function(e){return t._railwayModel.extend(e.x,e.y)}),this._railwayView.onInputEnded.add(function(){return t._railwayModel.end()}),this._railwayModel.onNoEdge.add(function(){t._railwayView.reset(),t._railwayView.warnNoEdge()}),this._railwayModel.onOutBound.add(function(){return t._railwayView.warnMoveOutBoundTerritory()}),this._railwayModel.onExpensive.add(function(){return t._railwayView.warnTooLongRailway()}),this._railwayModel.onNoStation.add(function(){t._railwayView.reset(),t._railwayView.warnNoBranch()}),this._railwayModel.onBranched.add(function(e){t._branch=e.id,t._railwayView.branch(e.st),t._railwayView.start()}),this._railwayModel.onExtended.add(function(e){return t._railwayView.append(e)}),this._railwayModel.onEnded.add(function(e){t._railwayView.hide(),t._stationModel.import(e.nodes,e.estimated,!0),t._stationView.import(e.estimated,void 0,e.nodes[e.nodes.length-1],e.nodes,e.bounds),t._rail_estimated=e.estimated,t._railLength=e.railLength,t._trains=e.trainNum,t._stationView.show()})},M.prototype._undoStart=function(){f.prototype._undoStart.call(this),this._railwayModel.clear(),this._railwayView.clear(),this._railwayView.show()},M.prototype._onMessage=function(e){n.isBranchRailwayBuiltEvent(e)&&n.BranchRailwayBuiltEvent.parse(e).oid()===this._oid&&(this.graceHide(),this.onCompleted.fire())},M.prototype._submit=function(){_.playEffect(this._scene),g.game.raiseEvent(new n.BranchRailwayBuiltEvent({id:g.game.selfId,oid:this._oid,branch:{id:this._branch},nodes:this._nodes,ts:this._trainModel.reserved}))};var f,p=M;function M(){var e=null!==f&&f.apply(this,arguments)||this;return e.onSubmit=new l.Trigger,e.onCompleted=new l.Trigger,e}e.BranchRailwayWizardHandler=p}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["residence_view"] = function(g) {
			((e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ResidenceView=void 0;var t=i("../models/parameters"),s=i("./effect");function n(e){this._scene=e.scene,this._layer=e.layer,this._oid=e.oid,this._setup(e.x,e.y,e.oid)}n.prototype.changeOwner=function(e){this._view.frameNumber=null===e?0:e+1,this._view.modified(),null!==e&&e!==this._oid&&s.effectPositive({scene:this._scene,oid:e,view:this._view}),this._oid=e},n.prototype.suspend=function(){},n.prototype.immigrate=function(){this._view.opacity=0,this._view.modified(),s.fadeIn({scene:this._scene,view:this._view,fade:1})},n.prototype._setup=function(e,i,s){this._view=new g.FrameSprite({scene:this._scene,x:e,y:i,width:t.params.view.residence,height:t.params.view.residence,anchorX:.5,anchorY:.5,src:this._scene.asset.getImageById("residence_img"),frames:[0,1,2,3,4],frameNumber:null===s?0:s+1}),this._layer.append(this._view)},e.ResidenceView=n})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["color_utils"] = function(g) {
			(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.hueToRgb=void 0,e.hueToRgb=function(e,o){var t,o=+o,e=e/60,r=o*(1-Math.abs(e%2-1)),i=0,l=0,u=0,e=(0<=e&&e<1&&(i=(t=[o,r,0])[0],l=t[1],u=t[2]),1<=e&&e<2&&(i=(t=[r,o,0])[0],l=t[1],u=t[2]),2<=e&&e<3&&(i=(t=[0,o,r])[0],l=t[1],u=t[2]),3<=e&&e<4&&(i=(t=[0,r,o])[0],l=t[1],u=t[2]),4<=e&&e<5&&(i=(t=[r,0,o])[0],l=t[1],u=t[2]),5<=e&&e<6&&(i=(t=[o,0,r])[0],l=t[1],u=t[2]),1-o),r=[i+e,l+e,u+e],i=r[0],l=r[1],u=r[2];return i=Math.floor(255*i),l=Math.floor(255*l),u=Math.floor(255*u),"#"+("00"+i.toString(16)).slice(-2)+("00"+l.toString(16)).slice(-2)+("00"+u.toString(16)).slice(-2)}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["commons_model"] = function(g) {
			(b=>{Object.defineProperty(b,"__esModule",{value:!0}),b.approachToObstacles=b.distanceToObstacle=void 0,b.distanceToObstacle=function(e,a,o,t,l,c){var s=Math.cos(o),o=Math.sin(o),l=l-e,e=c-a,c=s*l+o*e,a=Math.abs(s*e-o*l),s=0<c&&c<t&&a<t;return{blocked:s,available:s?c:t}},b.approachToObstacles=function(e,a,o,t){for(var l,c=Number.MAX_VALUE,s=!1,r=0;r<t.length;r++)e!==t[r]&&(l=b.distanceToObstacle(e.x(),e.y(),a,o,t[r].x(),t[r].y())).blocked&&l.available<c&&(s=!0,c=l.available);return{blocked:s,distance:c}}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["ticker_handler"] = function(g) {
			((e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TickerHandler=void 0;var i=r("../models/parameters"),t=r("../models/trriger_model"),s=r("../view/ticker_view");function a(e){this.onEnded=new t.Trigger,this._scene=e.scene,this._view=new s.TickerView(e),this._scorer=e.scorer,this._setup()}a.prototype.start=function(){var e=this,r=i.params.interval.record,t=this._scene.setInterval(function(){r<=0&&(e._scorer.record(),r+=i.params.interval.record),e._value<=i.params.interval.scoreMask&&e._scorer.onMask.fire(),e._value<1?(e._scene.clearInterval(t),e.onEnded.fire()):(e._view.tick(1),e._value--,r--)},1e3)},a.prototype._setup=function(){this._value=i.params.interval.game,this._view.start(this._value),this._scorer.record()},e.TickerHandler=a})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["ending_scene"] = function(g) {
			((h,e)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.createRankingGradation=h.craeteConfirmButton=h.craeteRestartButton=h.playEndingScene=h.onReset=h.createEndingScene=h.createEndingSceneHandlers=void 0;var w=e("../events/confirm_event"),u=e("../events/error_event"),f=e("../events/reset_event"),a=e("../handlers/fast_forward_handler"),v=e("../models/parameters"),i=e("../models/player_model"),y=e("../models/trriger_model"),s=e("../view/admin_confirm_view"),_=e("../view/balloon_view"),E=e("../view/commons_view"),S=e("../view/graph_view"),M=e("../view/ranking_view"),t=e("../view/sprite_button"),R=e("../view/tips_view"),r=e("./title_scene"),d=(h.createEndingSceneHandlers=function(e){var n=g.SpriteFactory.createSpriteFromE(e.scene,e.gameLayer);e.scene.onLoad.add(function(){d({scene:e.scene,gameLayer:n,self:e.self,num:e.num,singleMode:e.singleMode,scorer:e.scorer,displayName:e.displayName,players:e.players}),new a.FastForwardHandler({scene:e.scene,ignoreFirstTick:!1})})},h.createEndingScene=function(){return new g.Scene({game:g.game,name:"ending"})},h.onReset=function(e){var n=new i.PlayerContainer(g.game.random),a=(e.singleMode||n.add({id:e.adminID,name:e.adminName,admin:!0,cpu:!1,self:e.adminID===g.game.selfId}),r.createTitleScene());r.onLoadTitleScene({scene:a,players:n,displayName:e.displayName,singleMode:e.singleMode,isFirstGame:!1}),g.game.replaceScene(a)},h.playEndingScene=function(e){e.asset.getAudioById("nc34915").play()},function(n){for(var e=[],a=0;a<n.num;a++)e.push(E.createPlayerFont(n.scene,a));n.scene.onMessage.add(function(e){u.isErrorEvent(e)?E.onError(n.scene,u.ErrorEvent.parse(e)):f.isResetEvent(e)&&(e=f.ResetEvent.parse(e),h.onReset({adminID:e.id,adminName:e.name,displayName:n.displayName,singleMode:e.singleMode}))}),n.gameLayer.moveTo(23,17),n.gameLayer.scale(.75),n.gameLayer.modified(),n.scene.append(n.gameLayer);function i(){m.y-=r.height/(v.params.interval.ranking*g.game.fps),m.modified(),c.height=m.y+1,c.modified(),m.y<=-m.height&&(m.destroy(),c.destroy(),n.scene.onUpdate.remove(i),o)&&new _.BalloonView({scene:n.scene,layer:l})}var s,t=new g.E({scene:n.scene,x:26,y:.75*v.params.view.game[1]+40,width:.75*v.params.view.game[0]-20,height:g.game.height-.75*v.params.view.game[1]-60}),t=(n.scene.append(t),new S.GraphView({scene:n.scene,layer:t,oid:null==(t=n.self)?void 0:t.oid}).import(n.scorer.export()),new g.E({scene:n.scene,x:.75*v.params.view.game[0]+6,width:g.game.width-.75*v.params.view.game[0],height:g.game.height})),r=(n.scene.append(t),new g.E({x:10,scene:n.scene,width:t.width,height:3*t.height/4})),d=(t.append(r),new y.Trigger),o=(n.scene.onMessage.add(function(e){w.isConfirmEvent(e)&&(e=w.ConfirmEvent.parse(e),d.fire(e.oid()))}),M.showRanking({scene:n.scene,layer:r,playerFonts:e,oid:null==(p=n.self)?void 0:p.oid,num:n.num,scorer:n.scorer,players:n.players,onConfirmed:d})),m=h.createRankingGradation(n.scene,r),c=(r.append(m),new g.FilledRect({scene:n.scene,x:10,width:r.width,height:r.height,cssColor:"#000000",compositeOperation:"destination-out"})),l=(r.append(c),new g.E({scene:n.scene,width:g.game.width,height:g.game.height})),p=(n.scene.append(l),n.scene.onUpdate.add(i),new g.E({scene:n.scene,x:.75*v.params.view.game[0]+6,width:g.game.width-.75*v.params.view.game[0],y:3*t.height/4-I,height:t.height/4}));n.scene.append(p),null!=(t=n.self)&&t.admin&&(s=b({scene:n.scene,layer:p,oid:n.self.oid,singleMode:n.singleMode,displayName:n.displayName})),null===n.self&&new R.TipsView({scene:n.scene,layer:p}),n.self&&!n.singleMode&&(s&&s.hide(),N({scene:n.scene,layer:p,self:n.self}).onPushed.add(function(){s&&s.show()})),h.playEndingScene(n.scene)}),I=20,b=(h.craeteRestartButton=function(e,n){var a=new g.FrameSprite({scene:e,x:I,y:I,width:n.width-2*I,height:n.height-2*I,src:e.asset.getImageById("submit_large_img"),srcWidth:v.params.view.submit_large[0],srcHeight:v.params.view.submit_large[1],frames:[3,4,5]});return n.append(a),new t.SpriteButton({scene:e,layer:n,sprite:a,label:"end_game_img",downRate:.1})},h.craeteConfirmButton=function(e,n){var a=new g.FrameSprite({scene:e,x:I,y:I,width:n.width-2*I,height:n.height-2*I,src:e.asset.getImageById("submit_large_img"),srcWidth:v.params.view.submit_large[0],srcHeight:v.params.view.submit_large[1],frames:[3,4,5]});return n.append(a),new t.SpriteButton({scene:e,layer:n,sprite:a,label:"confirm_score_img",downRate:.1})},h.createRankingGradation=function(e,n){return new g.Sprite({scene:e,src:e.asset.getImageById("ranking_fader_img"),x:10,y:n.height,compositeOperation:"destination-out"})},function(e){var n=new g.E({scene:e.scene,width:g.game.width,height:g.game.height}),a=(e.scene.append(n),new s.AdminConfirmView({scene:e.scene,layer:n,oid:e.oid,text:"end_game_confirm_img"})),i=(a.hide(),h.craeteRestartButton(e.scene,e.layer));return a.onSubmit.add(function(){a.disable(),g.game.raiseEvent(new f.ResetEvent({adminID:g.game.selfId,adminName:e.displayName.name,singleMode:e.singleMode}))}),a.onCanceled.add(function(){a.hide(),i.enable()}),i.onPushed.add(function(){e.singleMode?g.game.raiseEvent(new f.ResetEvent({adminID:g.game.selfId,adminName:e.displayName.name,singleMode:e.singleMode})):a.show(),i.disable()}),i}),N=function(e){var n=h.craeteConfirmButton(e.scene,e.layer);return n.onPushed.add(function(){g.game.raiseEvent(new w.ConfirmEvent({id:g.game.selfId,oid:e.self.oid})),n.hide(),e.self.admin||new R.TipsView(e)}),n}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["ticker_view"] = function(g) {
			((e,t)=>{function i(e){return"TIME:"+("   "+Math.floor(e)).slice(-3)}Object.defineProperty(e,"__esModule",{value:!0}),e.TickerView=void 0;var n=t("../models/parameters");function s(e){this._scene=e.scene,this._layer=e.layer,this._numberFont=e.numberFont,this._setup()}s.prototype.start=function(e){this._value=e,this._label.text=i(e),this._label.invalidate()},s.prototype.tick=function(e){this._label.text=i(this._value-e),this._label.invalidate(),this._value-=e},s.prototype._setup=function(){this._label=new g.Label({scene:this._scene,y:this._layer.height/2,anchorY:.5,font:this._numberFont,fontSize:this._numberFont.size,text:"TIME:"+n.params.interval.game}),this._layer.append(this._label)},e.TickerView=s})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["ranking_view"] = function(g) {
			((t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createBackground=t.showRanking=void 0;var r=e("../models/parameters"),o=e("./commons_view"),a=e("./effect"),i=(t.showRanking=function(e){for(var n=[],r=0;r<e.num;r++)n.push({id:r,value:e.scorer.score(r)});n.sort(function(e,n){return e.value<n.value?1:n.value<e.value?-1:e.id-n.id});for(var a=new g.DynamicFont({game:g.game,fontFamily:"sans-serif",size:35,fontColor:"#ffffff"}),r=0;r<e.num;r++)e.layer.append(i({scene:e.scene,layer:e.layer,font:e.playerFonts[n[r].id],nameFont:a,oid:n[r].id,own:void 0!==e.oid&&e.oid===n[r].id,num:e.num,rank:r+1,score:n[r].value,name:e.players.name(n[r].id),onConfirmed:e.onConfirmed}));return n[0].id===e.oid},t.createBackground=function(e){var n=new g.FrameSprite({scene:e.scene,width:e.layer.width,height:e.layer.height,src:e.scene.asset.getImageById("territory_img"),srcWidth:r.params.view.territory[0],srcHeight:r.params.view.territory[1],frames:[e.oid],opacity:.75});return e.own&&a.blink({scene:e.scene,view:n,interval:3}),n},function(n){var e=(n.layer.height-60)*(n.rank-1)/4,r=new g.E({scene:n.scene,x:30,y:30+e,width:n.layer.width-60,height:(n.layer.height-60)/4}),e=(n.layer.append(r),t.createBackground({scene:n.scene,layer:r,oid:n.oid,own:n.own})),e=(r.append(e),new g.Label({scene:n.scene,font:n.font,fontSize:35,x:20,y:r.height/2,anchorY:.5,text:""+n.rank})),a=(r.append(e),new g.FrameSprite({scene:n.scene,src:n.scene.asset.getImageById("rank_img"),x:20+e.width,y:r.height/2,anchorY:.5,width:26,height:31,frames:[n.oid]})),i=(r.append(a),o.createIcon({scene:n.scene,oid:n.oid,x:e.width+a.width+40,y:r.height/3})),i=(r.append(i),1===n.rank&&i.append(o.createFirstIcon(n.scene,i)),new g.Label({scene:n.scene,font:n.nameFont,fontSize:35,x:i.width+e.width+a.width+60,y:r.height/3-4,anchorY:.5,text:n.name})),i=(i.modified(),r.append(i),new g.Label({scene:n.scene,font:n.font,fontSize:35,x:e.width+a.width+40,y:2*r.height/3,anchorY:.5,text:"SCORE:"+("      "+Math.floor(n.score)).slice(-6)}));return r.append(i),n.onConfirmed.add(function(e){e===n.oid&&r.append(new g.Sprite({scene:n.scene,src:n.scene.asset.getImageById("confirmed_mark_img"),x:r.width-15,anchorX:.5,y:r.height/2,anchorY:.5}))}),r})})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["penalty_handler"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PenaltyHandler=void 0;var n=t("../models/parameters"),i=t("../view/penalty_view");function r(e){this._scene=e.scene,this._model=e.model,this._rf=e.rf,this._tf=e.tf,this._view=new i.PenaltyView(e),this._setup()}r.prototype._setup=function(){var t=this;n.params.interval.penalty.forEach(function(e){t._scene.setTimeout(function(){return t._view.notice()},1e3*(e-n.params.interval.notice)),t._scene.setTimeout(function(){var e=t._model.invoke();t._view.invoke(e.ev,e.rates),t._rf.request(),t._tf.request()},1e3*e)})},e.PenaltyHandler=r})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["penalty_model"] = function(g) {
			((t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PenaltyModel=void 0;var e=i("./parameters"),a=i("./trriger_model"),r=(n.prototype.clear=function(){this.crowded=0,this.waitGate=0,this.waitTrain=0},Object.defineProperty(n.prototype,"highest",{get:function(){var t=this.crowded*e.params.weight.penalty.crowded,i=this.waitGate*e.params.weight.penalty.gate,a=this.waitTrain*e.params.weight.penalty.train;return i<t&&a<t?"crowded":a<i?"waitGate":"waitTrain"},enumerable:!1,configurable:!0}),n);function n(t){this.crowded=0,this.waitGate=0,this.waitTrain=0,this.oid=t}function s(t){this.onInvoked=new a.Trigger,this._data=[],this._penalties=[];for(var i=this._counter=0;i<t;i++)this._data.push(new r(i)),this._penalties.push(1);this._summary=new r}s.prototype.crowd=function(t,i){this._data[t].crowded+=i,this._summary.crowded+=i},s.prototype.waitGate=function(t,i){this._data[t].waitGate+=i,this._summary.waitGate+=i},s.prototype.waitTrain=function(t,i){this._data[t].waitTrain+=i,this._summary.waitTrain+=i},s.prototype.invoke=function(){this._counter++,this._running=this._summary.highest;for(var t=0;t<this._penalties.length;t++)this._penalties[t]=this._calc(t),this._data[t].clear();return this._summary.clear(),this.onInvoked.fire(this._running),{ev:this._running,rates:this._penalties}},s.prototype.transport=function(t){return this._penalties[t]},s.prototype._calc=function(t){if(!this._running)return 1;switch(this._running){case"crowded":return this._summary.crowded?.5+this._data[t].crowded/this._summary.crowded*e.params.weight.penalty.transport[this._counter-1]:1;case"waitGate":return this._summary.waitGate?.5+this._data[t].waitGate/this._summary.waitGate*e.params.weight.penalty.transport[this._counter-1]:1;case"waitTrain":return this._summary.waitTrain?.5+this._data[t].waitTrain/this._summary.waitTrain*e.params.weight.penalty.transport[this._counter-1]:1}},t.PenaltyModel=s})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["penalty_view"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PenaltyView=void 0;var h=t("../models/parameters"),r=t("./effect");function n(e){this._scene=e.scene,this._penaltyLayer=e.penaltyLayer,this._noticeLayer=e.noticeLayer,this._playerFonts=e.playerFonts}n.prototype.notice=function(){var t=this,n=new g.E({scene:this._scene,x:this._noticeLayer.width/2,width:h.params.view.notice[0],height:h.params.view.notice[1],anchorX:.5});this._noticeLayer.append(n),r.flash({scene:this._scene,layer:n,asset:"notice_modal_img",opacity:.5,fade:7,onStart:function(e){e.append(new g.Sprite({scene:t._scene,x:n.width/2,anchorX:.5,y:n.height/2,anchorY:.5,src:t._scene.asset.getImageById("penalty_notice_img")}))},onEnd:function(){n.destroy()}})},n.prototype.invoke=function(n,a){for(var i=this,e=new g.E({scene:this._scene,x:this._noticeLayer.width/2,width:h.params.view.penalty[0],height:h.params.view.penalty[1],anchorX:.5}),s=(this._noticeLayer.append(e),r.flash({scene:this._scene,layer:e,asset:"penalty_modal_img",opacity:.5,fade:10,onStart:function(e){var t=new g.Sprite({scene:i._scene,src:i._scene.asset.getImageById("penalty_"+n+"_img"),x:e.width/4,y:e.height/2,anchorX:.5,anchorY:.5}),t=(e.append(t),new g.Sprite({scene:i._scene,src:i._scene.asset.getImageById("penalty_"+n+"_detail_img"),x:3*e.width/4,y:e.height/2,anchorX:.5,anchorY:.5}));e.append(t)},onEnd:function(){e.destroy()}}),this),t=0;t<a.length;t++)(t=>{var e=new g.E({scene:s._scene,x:t%2?s._penaltyLayer.width-h.params.view.penaltyRate[0]/2:h.params.view.penaltyRate[0]/2,y:1<t?s._penaltyLayer.height-h.params.view.penaltyRate[1]/2-15:h.params.view.penaltyRate[1]/2+15,anchorX:.5,anchorY:.5,width:h.params.view.penaltyRate[0],height:h.params.view.penaltyRate[1]});s._penaltyLayer.append(e),r.flash({scene:s._scene,layer:e,asset:"penalty_rate_modal_img",opacity:.5,fade:10,onStart:function(e){i._createPanel(e,t,a[t])},onEnd:function(){e.destroy()}})})(t)},n.prototype._createPanel=function(e,t,n){var a=this._playerFonts[t];1<n?e.append(new g.FrameSprite({scene:this._scene,src:this._scene.asset.getImageById("penalty_img"),x:e.width/4+10,anchorX:.5,y:e.height/2,anchorY:.5,width:114,height:31,frames:[t]})):e.append(new g.FrameSprite({scene:this._scene,src:this._scene.asset.getImageById("bonus_img"),x:e.width/4+10,anchorX:.5,y:e.height/2,anchorY:.5,width:92,height:31,frames:[t]})),1<n?e.append(new g.Label({scene:this._scene,font:a,fontSize:a.size,x:e.width/2,y:e.height/2,anchorY:.5,text:"-"+("   "+Math.floor(100*(n-1))).slice(-3)})):e.append(new g.Label({scene:this._scene,font:a,fontSize:a.size,x:e.width/2,y:e.height/2,anchorY:.5,text:"+"+("   "+Math.floor(100*(1-n))).slice(-3)+"%"})),e.append(new g.FrameSprite({scene:this._scene,src:this._scene.asset.getImageById("percent_img"),x:e.width-55,y:e.height/2,anchorY:.5,width:27,height:31,frames:[t]}))},e.PenaltyView=n})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_inserter_event"] = function(g) {
			!function(n,t){var o,e,r=this&&this.__extends||(o=function(t,n){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),t=(Object.defineProperty(n,"__esModule",{value:!0}),n.isStationInsertionEvent=n.StationInsertionEvent=void 0,t("./action_event")),i="INSERT_STATION",t=(e=t.ActionEvent,r(a,e),a.parse=function(t){return n.isStationInsertionEvent(t)?new a(t.data.data):null},Object.defineProperty(a.prototype,"inserted",{get:function(){return this.data.data.inserted},enumerable:!1,configurable:!0}),a);function a(t){return e.call(this,i,t)||this}n.StationInsertionEvent=t;n.isStationInsertionEvent=function(t){return t.data.code===i}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_inserter_handler"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StationInserterHandler=void 0;var i=t("../events/station_inserter_event"),n=t("../models/parameters"),s=t("../models/station_inserter_model"),o=t("../models/trriger_model"),r=t("../scenes/game_scene"),d=t("../view/commons_view"),a=t("../view/effect"),_=t("../view/station_inserter_view");function h(e){this.onSubmit=new o.Trigger,this.onCompleted=new o.Trigger,this._scene=e.scene,this._layer=e.layer,this._oid=e.oid,this._model=new s.StationInserterModel(e),this._view=new _.StationInserterView(e),this._hideCanceler=function(){},this._setup()}h.prototype.import=function(e){this._model.import(e)},h.prototype.show=function(){this._view.show(),this._view.enable()},h.prototype.cancel=function(){this._submitting.hide(),this._view.cancel()},h.prototype.destroy=function(){this._view.destroy(),this._submitting.destroyed()||this._submitting.destroy(),this._scene.onMessage.remove(this._messagegHandler)},h.prototype._setup=function(){var t=this;this._model.onExpensive.add(function(){return t._view.tooExpensive()}),this._model.onNoVacant.add(function(){return t._view.notFound()}),this._model.onSelected.add(function(e){t._view.select(e.rn.x,e.rn.y),e.fixed&&(t._view.disable(),t._hideCanceler(),t._submitting.show(),r.playEffect(t._scene),g.game.raiseEvent(new i.StationInsertionEvent({id:g.game.selfId,oid:t._oid,inserted:{nid:e.rn.id}})),t.onSubmit.fire())}),this._view.onPointed.add(function(e){return t._model.select(e.x,e.y,e.fixed)}),this._submitting=d.createGuideLabel(this._scene,"station_inserter_wait_img",20,70),this._submitting.hide(),this._layer.append(this._submitting),this._messagegHandler=function(e){return t._onMessage(e)},this._scene.onMessage.add(this._messagegHandler)},h.prototype._onMessage=function(e){i.isStationInsertionEvent(e)&&i.StationInsertionEvent.parse(e).oid()===this._oid&&this._submitting.visible()&&(this._hideCanceler=a.fadeOut({scene:this._scene,view:this._submitting,fade:n.params.interval.graceDestroy}),this._view.build(),this._view.enable(),this.onCompleted.fire())},e.StationInserterHandler=h})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_inserter_model"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StationInserterModel=void 0;var a=t("./parameters"),i=t("./trriger_model");function o(e){this.onNoVacant=new i.Trigger,this.onExpensive=new i.Trigger,this.onSelected=new i.Trigger,this._nodes={},this._oid=e.oid,this._scorer=e.scorer}o.prototype.import=function(e){this._nodes=e},o.prototype.select=function(e,t,i){a.params.cost.station>this._scorer.get(this._oid)?this.onExpensive.fire():(e=this._findVacantNode(e,t))?this.onSelected.fire({rn:e,fixed:i}):this.onNoVacant.fire()},o.prototype._findVacantNode=function(i,o){var n=this,r=null,s=Number.MAX_VALUE;return Object.keys(this._nodes).forEach(function(e){var t,e=n._nodes[e];e.st||(t=g.Util.distance(i,o,e.x,e.y))<s&&(s=t,r=e)}),s<a.params.ui.distance.station?r:null},e.StationInserterModel=o})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_inserter_view"] = function(g) {
			((s,e)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.StationInserterView=s.createStation=void 0;var i=e("../models/parameters"),t=e("../models/trriger_model"),o=e("../scenes/game_scene"),n=e("./commons_view"),r=e("./effect");function h(e){this.onPointed=new t.Trigger,this._pointerID=null,this._scene=e.scene,this._layer=e.layer,this._oid=e.oid,this._setup()}s.createStation=function(e,t){return new g.FrameSprite({scene:e,width:i.params.view.station[0],height:i.params.view.station[1],anchorX:.5,anchorY:.5,src:e.asset.getImageById("station_img"),frames:[6*t]})},h.prototype.show=function(){this._guide.show()},h.prototype.enable=function(){this._sensor.show(),this._pointerID=null},h.prototype.disable=function(){this._sensor.hide()},h.prototype.cancel=function(){this._sensor.hide(),this._guide.hide(),this._cursor.hide()},h.prototype.destroy=function(){this.cancel(),this._guide.destroyed()||this._guide.destroy(),this._sensor.destroyed()||this._sensor.destroy(),this._cursor.destroyed()||this._cursor.destroy()},h.prototype.build=function(){this._cursor.hide()},h.prototype.select=function(e,t){this._cursor.x=e,this._cursor.y=t,this._cursor.modified(),this._cursor.show()},h.prototype.tooExpensive=function(){this._cursor.hide(),r.flashLabel({scene:this._scene,layer:this._layer,asset:"station_inserter_error_too_expensive_img",x:20,y:70}),o.playTooExpensive(this._scene)},h.prototype.notFound=function(){this._cursor.hide(),r.flashLabel({scene:this._scene,layer:this._layer,asset:"station_inserter_error_no_node_img",x:20,y:70})},h.prototype._setup=function(){var e,t,i=this;this._sensor=(e=this._scene,t=this._layer,new g.E({scene:e,width:t.width,height:t.height,touchable:!0,local:!0})),this._sensor.hide(),this._layer.append(this._sensor),this._guide=n.createGuideLabel(this._scene,"station_inserter_guide_img"),this._guide.hide(),this._layer.append(this._guide),this._cursor=s.createStation(this._scene,this._oid),this._cursor.hide(),this._layer.append(this._cursor),this._sensor.onPointDown.add(function(e){null===i._pointerID&&(i.onPointed.fire({x:e.point.x,y:e.point.y,fixed:!1}),i._pointerID=e.pointerId)}),this._sensor.onPointMove.add(function(e){i._pointerID===e.pointerId&&i.onPointed.fire({x:e.point.x+e.startDelta.x,y:e.point.y+e.startDelta.y,fixed:!1})}),this._sensor.onPointUp.add(function(e){i._pointerID===e.pointerId&&(i.onPointed.fire({x:e.point.x+e.startDelta.x,y:e.point.y+e.startDelta.y,fixed:!0}),i._pointerID=null)})},s.StationInserterView=h})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["train_inserter_event"] = function(g) {
			!function(n,t){var r,e,o=this&&this.__extends||(r=function(t,n){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),t=(Object.defineProperty(n,"__esModule",{value:!0}),n.isTrainInsertionEvent=n.TrainInsertionEvent=void 0,t("./action_event")),i="INSERT_TRAIN",t=(e=t.ActionEvent,o(a,e),a.parse=function(t){return n.isTrainInsertionEvent(t)?new a(t.data.data):null},Object.defineProperty(a.prototype,"inserted",{get:function(){return this.data.data.inserted},enumerable:!1,configurable:!0}),a);function a(t){return e.call(this,i,t)||this}n.TrainInsertionEvent=t;n.isTrainInsertionEvent=function(t){return t.data.code===i}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["train_inserter_model"] = function(g) {
			((e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TrainInserterModel=void 0;var a=i("./parameters"),t=i("./trriger_model");function r(e){this.onNoRailway=new t.Trigger,this.onExpensive=new t.Trigger,this.onSelected=new t.Trigger,this.onTooJammed=new t.Trigger,this._nodes={},this._oid=e.oid,this._scorer=e.scorer}r.prototype.import=function(e){this._nodes=e},r.prototype.select=function(e,i,t){this._scorer.getTrainCost(this._oid)>this._scorer.get(this._oid)?this.onExpensive.fire():(e=this._findRailway(e,i))?(i=e.depts[0].line).trains.length>=Math.ceil(i.length/a.params.distance.train)-3?this.onTooJammed.fire():this.onSelected.fire({rn:e,fixed:t}):this.onNoRailway.fire()},r.prototype._findRailway=function(t,r){var n=this,o=null,s=Number.MAX_VALUE;return Object.keys(this._nodes).forEach(function(e){var i,e=n._nodes[e];e.st||2!==e.depts.length||(i=g.Util.distance(t,r,e.x,e.y))<s&&(s=i,o=e)}),s<a.params.ui.distance.train?o:null},e.TrainInserterModel=r})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["train_inserter_view"] = function(g) {
			((s,e)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TrainInserterView=s.createTrain=void 0;var i=e("../models/parameters"),t=e("../models/trriger_model"),r=e("../scenes/game_scene"),o=e("./commons_view"),n=e("./effect"),h=e("./train_cost_view");function _(e){this.onPointed=new t.Trigger,this._pointerID=null,this._scene=e.scene,this._layer=e.layer,this._numberFont=e.numberFont,this._oid=e.oid,this._setup()}s.createTrain=function(e,t){return new g.FrameSprite({scene:e,src:e.asset.getImageById("train_img"),width:i.params.view.train,height:i.params.view.train,anchorX:.5,anchorY:.5,frames:[2*t]})},_.prototype.import=function(e){this._trainCost.trains=e+1},_.prototype.show=function(){this._guide.show(),this._trainCost.show()},_.prototype.enable=function(){this._sensor.show(),this._pointerID=null},_.prototype.disable=function(){this._sensor.hide()},_.prototype.cancel=function(){this._sensor.hide(),this._guide.hide(),this._trainCost.hide(),this._cursor.hide()},_.prototype.destroy=function(){this.cancel(),this._guide.destroyed()||this._guide.destroy(),this._sensor.destroyed()||this._sensor.destroy(),this._trainCost.destroy(),this._cursor.destroyed()||this._cursor.destroy()},_.prototype.build=function(){this._cursor.hide()},_.prototype.select=function(e,t,i){this._cursor.x=e,this._cursor.y=t,this._cursor.modified(),this._cursor.show(),i&&this._trainCost.trains++},_.prototype.tooExpensive=function(){this._cursor.hide(),n.flashLabel({scene:this._scene,layer:this._layer,asset:"train_inserter_error_too_expensive_img",x:20,y:70}),r.playTooExpensive(this._scene)},_.prototype.notFound=function(){this._cursor.hide(),n.flashLabel({scene:this._scene,layer:this._layer,asset:"train_inserter_error_no_node_img",x:20,y:70})},_.prototype.tooJammed=function(){this._cursor.hide(),n.flashLabel({scene:this._scene,layer:this._layer,asset:"train_inserter_error_too_jammed_img",x:20,y:70})},_.prototype._setup=function(){var e,t,i=this;this._sensor=(e=this._scene,t=this._layer,new g.E({scene:e,width:t.width,height:t.height,touchable:!0,local:!0})),this._sensor.hide(),this._layer.append(this._sensor),this._guide=o.createGuideLabel(this._scene,"train_inserter_guide_img"),this._guide.hide(),this._layer.append(this._guide),this._trainCost=new h.TrainCostView({scene:this._scene,layer:this._layer,numberFont:this._numberFont,offsetX:528,offsetY:35,multiLine:!1,trains:1}),this._trainCost.hide(),this._cursor=s.createTrain(this._scene,this._oid),this._cursor.hide(),this._layer.append(this._cursor),this._sensor.onPointDown.add(function(e){null===i._pointerID&&(i.onPointed.fire({x:e.point.x,y:e.point.y,fixed:!1}),i._pointerID=e.pointerId)}),this._sensor.onPointMove.add(function(e){i._pointerID===e.pointerId&&i.onPointed.fire({x:e.point.x+e.startDelta.x,y:e.point.y+e.startDelta.y,fixed:!1})}),this._sensor.onPointUp.add(function(e){i._pointerID===e.pointerId&&(i.onPointed.fire({x:e.point.x+e.startDelta.x,y:e.point.y+e.startDelta.y,fixed:!0}),i._pointerID=null)})},s.TrainInserterView=_})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["train_inserter_handler"] = function(g) {
			((e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TrainInserterHandler=void 0;var t=i("../events/train_inserter_event"),n=i("../models/parameters"),s=i("../models/train_inserter_model"),r=i("../models/trriger_model"),o=i("../scenes/game_scene"),d=i("../view/commons_view"),a=i("../view/effect"),_=i("../view/train_inserter_view");function h(e){this.onSubmit=new r.Trigger,this.onCompleted=new r.Trigger,this._scene=e.scene,this._layer=e.layer,this._oid=e.oid,this._model=new s.TrainInserterModel(e),this._view=new _.TrainInserterView(e),this._hideCanceler=function(){},this._setup()}h.prototype.import=function(e,i){this._model.import(e),this._view.import(i)},h.prototype.show=function(){this._view.show(),this._view.enable()},h.prototype.cancel=function(){this._submitting.hide(),this._view.cancel()},h.prototype.destroy=function(){this._view.destroy(),this._submitting.destroyed()||this._submitting.destroy(),this._scene.onMessage.remove(this._messagegHandler)},h.prototype._setup=function(){var i=this;this._model.onExpensive.add(function(){return i._view.tooExpensive()}),this._model.onNoRailway.add(function(){return i._view.notFound()}),this._model.onTooJammed.add(function(){return i._view.tooJammed()}),this._model.onSelected.add(function(e){i._view.select(e.rn.x,e.rn.y,e.fixed),e.fixed&&(i._hideCanceler(),i._submitting.show(),i._view.disable(),o.playEffect(i._scene),g.game.raiseEvent(new t.TrainInsertionEvent({id:g.game.selfId,oid:i._oid,inserted:{nid:e.rn.id}})),i.onSubmit.fire())}),this._view.onPointed.add(function(e){return i._model.select(e.x,e.y,e.fixed)}),this._submitting=d.createGuideLabel(this._scene,"train_inserter_wait_img",20,70),this._submitting.hide(),this._layer.append(this._submitting),this._messagegHandler=function(e){return i._onMessage(e)},this._scene.onMessage.add(this._messagegHandler)},h.prototype._onMessage=function(e){t.isTrainInsertionEvent(e)&&t.TrainInsertionEvent.parse(e).oid()===this._oid&&this._submitting.visible()&&(this._hideCanceler=a.fadeOut({scene:this._scene,view:this._submitting,fade:n.params.interval.graceDestroy}),this._view.build(),this._view.enable(),this.onCompleted.fire())},e.TrainInserterHandler=h})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["action_event"] = function(g) {
			!function(t){var n,e,o=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,o){t.__proto__=o}:function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])}))(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.ActionEvent=void 0,e=g.MessageEvent,o(r,e),r.prototype.id=function(){return this.data.data.id},r.prototype.oid=function(){return this.data.data.oid},r);function r(t,o){return e.call(this,{code:t,data:o})||this}t.ActionEvent=o}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["display_name_event"] = function(g) {
			!function(e,t){var o,n,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),t=(Object.defineProperty(e,"__esModule",{value:!0}),e.isDisplayNameEvent=e.DisplayNameEvent=void 0,t("./action_event")),a="NAME",t=(n=t.ActionEvent,r(i,n),i.parse=function(t){return e.isDisplayNameEvent(t)?new i(t.data.data):null},Object.defineProperty(i.prototype,"name",{get:function(){return this.data.data.name},enumerable:!1,configurable:!0}),i);function i(t){return n.call(this,a,t)||this}e.DisplayNameEvent=t;e.isDisplayNameEvent=function(t){return t.data.code===a}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["title_handler"] = function(g) {
			((e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TitleHandler=void 0;var d=i("../events/display_name_event"),a=i("../events/join_event"),t=i("../events/leave_event"),s=i("../events/resolve_name_event"),m=i("../events/start_event"),n=i("../models/trriger_model"),o=i("../view/title_view");function l(e){this.onStarted=new n.Trigger,this._scene=e.scene,this._displayName=e.displayName,this.model=e.model,this.view=new o.TitleView({scene:e.scene,layer:e.layer,numberFont:e.numberFont,initialName:e.displayName.name}),this._setup()}l.prototype.singleMode=function(){this.model.add({id:g.game.selfId,name:this._displayName.name,self:!0,admin:!0,cpu:!1}),this.model.add({id:void 0,name:"CPU1",self:!1,admin:!1,cpu:!0}),this.model.add({id:void 0,name:"CPU2",self:!1,admin:!1,cpu:!0}),this.model.add({id:void 0,name:"CPU3",self:!1,admin:!1,cpu:!0}),this.view.singleMode(),this._singleMode=!0},l.prototype._setup=function(){var n=this;this._displayName.onUpdated.add(function(){n.view.modifyDisplayName(n._displayName.name)}),this.view.onDisplayNameResolved.add(function(e){n._displayName.name=e,g.game.raiseEvent(new s.ResolveNameEndedEvent({id:g.game.selfId,error:!1,name:e,oid:null==(e=n.model.self)?void 0:e.oid}))}),this.view.onDisplayNameModified.add(function(e){n._displayName.name=e;var i=n.model.self;i?g.game.raiseEvent(new d.DisplayNameEvent({id:g.game.selfId,oid:i.oid,name:e})):n.view.enableDisplayName()}),this.view.onJoined.add(function(e){return g.game.raiseEvent(new a.JoinEvent({id:g.game.selfId,name:e,admin:!1}))}),this.view.onLeft.add(function(){return g.game.raiseEvent(new t.LeaveEvent(g.game.selfId))}),this.view.onStarted.add(function(){return g.game.raiseEvent(new m.StartEvent)}),this.model.onJoined.add(function(e){return n.view.join(e)}),this.model.onLeft.add(function(e){return n.view.leave(e)}),this.model.onFailedAdminAdded.add(function(){return n.view.warnFailedAdminAdded()}),this.model.onFull.add(function(){return n.view.warnFull()}),this.model.onNameModified.add(function(e){return n.view.modifyEntry(e.oid,e.name)}),this.model.admin&&this.view.join(this.model.admin),this._scene.onMessage.add(function(e){var i;a.isJoinEvent(e)?(i=a.JoinEvent.parse(e),n.model.add({id:i.id,name:i.name,admin:i.admin,cpu:!1,self:i.id===g.game.selfId}),i.id===g.game.selfId&&n._displayName.update(i.name)):t.isLeaveEvent(e)?(i=t.LeaveEvent.parse(e),n.model.remove(i.id)):d.isDisplayNameEvent(e)?((i=d.DisplayNameEvent.parse(e)).id()===g.game.selfId&&(n._displayName.update(i.name),n.view.enableDisplayName()),n.model.modifyName(i.oid(),i.name)):m.isStartEvent(e)?n.onStarted.fire({singleMode:n._singleMode}):s.isResolveNameEndedEvent(e)&&(null!=(i=s.ResolveNameEndedEvent.parse(e)).oid&&n.model.modifyName(i.oid,i.name),i.id===g.game.selfId)&&(n._displayName.update(i.name),n.view.enableDisplayName(),i.error)&&n.view.warnResolveError()})},e.TitleHandler=l})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["play_guide_view"] = function(g) {
			((e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPlayGuide=void 0;var a=s("../models/parameters");e.createPlayGuide=function(e){var s=new g.Sprite({scene:e.scene,width:a.params.view.playguide[0],height:a.params.view.playguide[1],src:e.scene.asset.getImageById("play_guide_img")});return s.append(new g.Sprite({scene:e.scene,x:25,y:40,src:e.scene.asset.getImageById("play_guide_1_img")})),s.append(new g.Sprite({scene:e.scene,x:25,y:78,src:e.scene.asset.getImageById("play_guide_2_img")})),s.append(new g.Sprite({scene:e.scene,x:25,y:116,src:e.scene.asset.getImageById("play_guide_3_img")})),s.append(new g.Sprite({scene:e.scene,x:25,y:154,src:e.scene.asset.getImageById("play_guide_4_img")})),s.append(new g.Sprite({scene:e.scene,x:25,y:192,src:e.scene.asset.getImageById("play_guide_5_img")})),s.append(new g.Sprite({scene:e.scene,x:25,y:230,src:e.scene.asset.getImageById("play_guide_6_img")})),s.append(new g.Sprite({scene:e.scene,x:25,y:268,src:e.scene.asset.getImageById("play_guide_7_img")})),s}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["sandbox_view"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SandboxView=void 0;var i=t("../handlers/sandbox_handler"),a=t("../models/parameters"),r=t("./sprite_button");function s(e){this._scene=e.scene,this._layer=e.layer,this._numberFont=e.numberFont,this._setup()}s.prototype._setup=function(){var e=new g.Sprite({scene:this._scene,width:a.params.view.sandbox[0],height:a.params.view.sandbox[1],src:this._scene.asset.getImageById("sandbox_img")}),t=(this._layer.append(e),new g.E({scene:this._scene,x:5,y:10,width:e.width-10,height:e.height-15})),s=(e.append(t),new i.SandboxHandler({scene:this._scene,layer:t,numberFont:this._numberFont})),t=new g.E({scene:this._scene,width:a.params.view.submit[0],height:a.params.view.submit[1],x:20,y:e.height-a.params.view.submit[1]-20}),e=(e.append(t),new g.FrameSprite({scene:this._scene,width:t.width,height:t.height,src:this._scene.asset.getImageById("submit_img"),frames:[0,1,2]})),n=(t.append(e),new r.SpriteButton({scene:this._scene,layer:t,label:"retry_img",sprite:e,downRate:.1}));n.hide(),s.onCompleted.add(function(){return n.show()}),n.onPushed.add(function(){s.clear(),n.hide()})},e.SandboxView=s})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["display_name_model"] = function(g) {
			((e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DisplayNameModel=void 0;var t=o("./trriger_model");function i(){this.onUpdated=new t.Trigger,this.name=""}i.prototype.update=function(e){this.name=e,this.onUpdated.fire()},e.DisplayNameModel=i})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["display_name_view"] = function(g) {
			((s,e)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DisplayNameView=s.createKeyboard=s.createCompleteButton=s.createModifyButton=s.createResolveButton=s.createBackground=void 0;var n=e("@akashic-extension/resolve-player-info"),r=e("../events/resolve_name_event"),t=e("../lib/keyboard/keyboard_MultiKeyboard"),o=e("../models/parameters"),a=e("../models/trriger_model"),i=e("./sprite_button"),e=(s.createBackground=function(e){return new g.Sprite({scene:e,src:e.asset.getImageById("input_name_img"),width:o.params.view.name[0],height:o.params.view.name[1]})},s.createResolveButton=function(e,t){var a=new g.FrameSprite({scene:e,width:o.params.view.submit[0],height:o.params.view.submit[1],src:e.asset.getImageById("submit_img"),frames:[0,1,2]});return t.append(a),new i.SpriteButton({scene:e,layer:t,label:"resolve_name_img",sprite:a,downRate:.1})},s.createModifyButton=function(e,t){var a=new g.FrameSprite({scene:e,width:o.params.view.submit[0],height:o.params.view.submit[1],src:e.asset.getImageById("submit_img"),frames:[0,1,2]});return t.append(a),new i.SpriteButton({scene:e,layer:t,label:"modify_name_img",sprite:a,downRate:.1})},s.createCompleteButton=function(e,t){var a=new g.FrameSprite({scene:e,width:o.params.view.submit_large[0],height:o.params.view.submit_large[1],src:e.asset.getImageById("submit_large_img"),frames:[6,7,8]});return t.append(a),new i.SpriteButton({scene:e,layer:t,label:"complete_img",sprite:a,downRate:.1})},s.createKeyboard=function(e){return new t.MultiKeyboard({scene:e,font:new g.BitmapFont({src:e.asset.getImageById("notosansFont"),map:JSON.parse(e.asset.getTextById("notosansGlyph").data),defaultGlyphWidth:72,defaultGlyphHeight:72}),sceneAssets:e.assets,maxLength:10,hidden:!0})},m.prototype.modify=function(e){this._name=e,this._label.text=e,this._label.invalidate()},m.prototype.enable=function(){this._resolveButton.enable(),this._modifyButton.enable()},m.prototype.disable=function(){this._resolveButton.disable(),this._modifyButton.disable()},Object.defineProperty(m.prototype,"displayName",{get:function(){return this._name},enumerable:!1,configurable:!0}),m.prototype._setup=function(){var a=this,e=(this._nameField=s.createBackground(this._scene),this._layer.append(this._nameField),this._nameField.append(new g.FilledRect({scene:this._scene,x:10,y:30,width:this._nameField.width-20-4*o.params.view.submit[1],height:this._nameField.height-40,opacity:.5,cssColor:"#000000"})),new g.DynamicFont({game:g.game,fontFamily:"monospace",fontColor:"#ffffff",size:30})),e=(this._label=new g.Label({scene:this._scene,font:e,fontSize:e.size,x:25,y:o.params.view.name[1]/2+5,anchorY:.5,text:this._name}),this._nameField.append(this._label),new g.E({scene:this._scene,x:o.params.view.name[0]-2*o.params.view.submit[0],y:o.params.view.name[1]/2+3,anchorY:.5,scaleX:.75,scaleY:.75,width:o.params.view.submit[0],height:o.params.view.submit[1]})),e=(this._nameField.append(e),this._resolveButton=s.createResolveButton(this._scene,e),this._resolveButton.onPushed.add(function(){a.disable(),n.resolvePlayerInfo({raises:!1,limitSeconds:o.params.interval.resolveName},function(e,t){e||!t.name?g.game.raiseEvent(new r.ResolveNameEndedEvent({id:g.game.selfId,error:!0})):(a.modify(t.name),a.onResolved.fire())})}),new g.E({scene:this._scene,x:o.params.view.name[0]-o.params.view.submit[0],y:o.params.view.name[1]/2+3,anchorY:.5,scaleX:.75,scaleY:.75,width:o.params.view.submit[0],height:o.params.view.submit[1]})),t=(this._nameField.append(e),s.createKeyboard(this._scene)),i=(this._scene.append(t),new g.E({scene:this._scene,x:g.game.width/2,anchorX:.5,y:g.game.height-175,width:o.params.view.submit_large[0],height:o.params.view.submit_large[1]}));t.append(i),s.createCompleteButton(this._scene,i).onPushed.add(function(){a.modify(""===t.text?"":t.text),t.hide(),a.onModified.fire()}),this._modifyButton=s.createModifyButton(this._scene,e),this._modifyButton.onPushed.add(function(){a.disable(),t.show()})},m);function m(e){this.onResolved=new a.Trigger,this.onModified=new a.Trigger,this._scene=e.scene,this._layer=e.layer,this._name=e.initialName,this._setup()}s.DisplayNameView=e})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["sprite_button"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteButton=e.createLabel=void 0;var i=t("../models/trriger_model"),t=(e.createLabel=function(e){var t=e.scene.asset.getImageById(e.texture);return new g.Sprite({scene:e.scene,x:e.layer.width/2,y:(e.layer.height-t.height*(1+2*e.downRate))/2,anchorX:.5,src:t})},s.prototype.show=function(){this._hidden=!1,this._sensor.show(),this._sprite.show(),this._disabled?(this._sprite.frameNumber=2,this._sprite.modified(),this._label&&(this._label.y=(this._sprite.height-this._label.height*(1+2*this._downRate))/2,this._label.modified())):this._overed?(this._sprite.frameNumber=1,this._sprite.modified(),this._label&&(this._label.y=(this._sprite.height-this._label.height)/2,this._label.modified())):(this._sprite.frameNumber=0,this._sprite.modified(),this._label&&(this._label.y=(this._sprite.height-this._label.height*(1+2*this._downRate))/2,this._label.modified()))},s.prototype.hide=function(){this._hidden=!0,this._sensor.hide(),this._sprite.hide()},s.prototype.disable=function(){this._disabled=!0,this._sprite.frameNumber=2,this._sprite.modified(),this._label&&(this._label.y=(this._sprite.height-this._label.height*(1+2*this._downRate))/2,this._label.modified())},s.prototype.enable=function(){this._disabled=!1,this._overed?(this._sprite.frameNumber=1,this._sprite.modified(),this._label&&(this._label.y=(this._sprite.height-this._label.height)/2,this._label.modified())):(this._sprite.frameNumber=0,this._sprite.modified(),this._label&&(this._label.y=(this._sprite.height-this._label.height*(1+2*this._downRate))/2,this._label.modified()))},s.prototype.destroy=function(){this._label&&!this._label.destroyed()&&this._label.destroy()},s.prototype.moveBy=function(e,t){this._sensor.moveBy(e,t),this._sprite.moveBy(e,t),this._sensor.modified(),this._sprite.modified()},s.prototype.moveTo=function(e,t){this._sensor.moveTo(e,t),this._sprite.moveTo(e,t),this._sensor.modified(),this._sprite.modified()},Object.defineProperty(s.prototype,"enabled",{get:function(){return!this._hidden&&!this._disabled},enumerable:!1,configurable:!0}),s.prototype._setup=function(){var i=this,s=(this._sensor=new g.E({scene:this._scene,parent:this._layer,x:this._sprite.x,y:this._sprite.y,width:this._sprite.width,height:this._sprite.height,touchable:!0,local:!0}),this._labelText&&(this._label=e.createLabel({scene:this._scene,layer:this._sprite,texture:this._labelText,downRate:this._downRate}),this._sprite.append(this._label)),null),h=null,r=!0,l=!1;this._sensor.onPointDown.add(function(e){null===s&&(i._disabled?i.onDisabledPushed.fire():i.enabled&&(i._overed=!0,i._sprite.frameNumber=1,i._sprite.modified(),i._label&&(i._label.y=(i._sprite.height-i._label.height)/2,i._label.modified()),s=e.pointerId,h={x:i._sensor.x,y:i._sensor.y},r=!0))}),this._sensor.onPointMove.add(function(e){var t;i.enabled&&s===e.pointerId&&(r&&((l||i._draggable&&20<g.Util.distance(0,0,e.startDelta.x,e.startDelta.y))&&(i.moveBy(e.prevDelta.x,e.prevDelta.y),l=!0),i.onDragged.fire({dx:e.prevDelta.x,dy:e.prevDelta.y})),t=e.point.x+e.startDelta.x+h.x-i._sensor.x,e=e.point.y+e.startDelta.y+h.y-i._sensor.y,r=i._overed=0<=t&&t<=i._sensor.width&&0<=e&&e<=i._sensor.height,i._overed?(i._sprite.frameNumber=1,i._sprite.modified(),i._label&&(i._label.y=(i._sprite.height-i._label.height)/2,i._label.modified())):(i._sprite.frameNumber=0,i._sprite.modified(),i._label&&(i._label.y=(i._sprite.height-i._label.height*(1+2*i._downRate))/2,i._label.modified())))}),this._sensor.onPointUp.add(function(e){i.enabled&&s===e.pointerId&&(i._overed&&(i._overed=!1,i._sprite.frameNumber=0,i._sprite.modified(),i._label&&(i._label.y=(i._sprite.height-i._label.height*(1+2*i._downRate))/2,i._label.modified()),l||i.onPushed.fire()),s=h=null,l=r=!1)})},s);function s(e){this.onDragged=new i.Trigger,this.onPushed=new i.Trigger,this.onDisabledPushed=new i.Trigger,this._scene=e.scene,this._layer=e.layer,this._sprite=e.sprite,this._labelText=e.label,this._downRate=e.downRate,this._draggable=e.draggable,this._setup()}e.SpriteButton=t})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["estimation_view"] = function(g) {
			((t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EstimationView=void 0;var s=e("../models/parameters"),i=e("./effect");function n(t){this._cost=0,this._scene=t.scene,this._layer=t.layer,this._asset=t.asset,this._numberFont=t.numberFont,this._offsetX=t.x,this._offsetY=t.y,this._cost=t.cost,this._setup()}n.prototype.show=function(){this._cost&&this._container.show()},n.prototype.hide=function(){this._container.hide()},n.prototype.visible=function(){return this._container.visible()},n.prototype.graceDestroy=function(){i.fadeOut({scene:this._scene,view:this._container,fade:s.params.interval.graceDestroy,destroy:!0})},Object.defineProperty(n.prototype,"cost",{get:function(){return this._cost},set:function(t){this._number.text=""+("     "+Math.round(t)).slice(-5),this._number.invalidate(),0<(this._cost=t)?this.show():this.hide()},enumerable:!1,configurable:!0}),n.prototype._setup=function(){this._container=new g.E({scene:this._scene,hidden:!this._cost}),this._layer.append(this._container),this._label=new g.Sprite({scene:this._scene,src:this._scene.asset.getImageById(this._asset),x:this._offsetX,y:this._offsetY}),this._container.append(this._label),this._number=new g.Label({scene:this._scene,font:this._numberFont,fontSize:this._numberFont.size,text:""+("     "+Math.round(this._cost)).slice(-5),x:this._offsetX+this._label.width,y:this._offsetY+3}),this._container.append(this._number)},t.EstimationView=n})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["sandbox_handler"] = function(g) {
			((u,e)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SandboxHandler=u.createCompanyName=u.createResidenceName=void 0;var l=e("../models/gamemap_model"),h=e("../models/parameters"),m=e("../models/penalty_model"),p=e("../models/rail_builder_model"),y=e("../models/route_finder_model"),_=e("../models/scorer_model"),f=e("../models/transport_finder_model"),n=e("../models/trriger_model"),t=e("../view/effect"),w=e("../view/gamemap_view"),x=e("../view/railway_builder_view"),e=(u.createResidenceName=function(e,n){return new g.Sprite({scene:e,src:e.asset.getImageById("tutorial_residence_img"),x:n.width/8,y:n.height/8+85,anchorX:.5,anchorY:.5})},u.createCompanyName=function(e,n){return new g.Sprite({scene:e,src:e.asset.getImageById("tutorial_company_img"),x:7*n.width/8,y:7*n.height/8+35,anchorX:.5,anchorY:.5})},d.prototype.clear=function(){t.fadeOut({scene:this._scene,view:this._container,destroy:!0,fade:h.params.interval.graceDestroy}),this._container=new g.E({scene:this._scene,width:this._layer.width,height:this._layer.height}),this._layer.append(this._container),this._deploy(this._container)},d.prototype._deploy=function(e){var n=this,t=new _.ScorerModel(1),d=(t.add(0,2*h.params.cost.station+2*h.params.cost.train.initial+h.params.cost.train.increment+h.params.cost.rail*g.Util.distance(0,0,e.width,e.height)),new m.PenaltyModel(1)),a=new y.RouteFinder,r=new f.TransportFinder(d),o=new l.GameMapModel(a,r,d,1,g.game.localRandom),i=new w.GameMapView({scene:this._scene,layer:e,oid:0,random:g.game.localRandom}),c=(o.onCompanyAdded.add(function(e){return i.addCompany(e)}),o.onResidenceAdded.add(function(e){var n=i.addResidence(e.x(),e.y(),e.nextOwner);a.onCompleted.add(function(){return n.changeOwner(e.nextOwner)})}),o.onRailEdgeAdded.add(function(e){return i.addRailEdge(e.oid,e.from,e.to)}),o.onStationAdded.add(function(e){var n=i.addStation(e);e.onAccepted.add(function(){return n.accept(e.rate)}),e.onReleased.add(function(){return n.release(e.rate)})}),o.onTrainAdded.add(function(e){var n=i.addTrain(e.ownerID,e.x(),e.y());e.onMoved.add(function(e){return n.move(e.x,e.y,e.heading)}),e.onAccepted.add(function(){return n.accept(e.rate)}),e.onReleased.add(function(){return n.release(e.rate)})}),o.onHumanAdded.add(function(e){var n=i.addHuman(e.initialOwner,e.x(),e.y());e.onMoved.add(function(){return n.move(e.x(),e.y(),e.heading)}),e.onGateIn.add(function(e){return n.gateIn(e.x,e.y)}),e.onGateOut.add(function(){return n.gateOut()}),e.onOwnerShifted.add(function(e){return n.shiftOwner(e)}),e.onGoal.add(function(){return n.destroy(!1)}),e.onKilled.add(function(){return n.destroy(!0)})}),new p.RailwayBuilderModel({oid:0,territory:{x:0,y:0,width:e.width,height:e.height},scorer:t})),s=new x.SandboxRailwayBuilderView({scene:this._scene,layer:e,numberFont:this._numberFont,oid:0,scorer:t});s.onInputStarted.add(function(e){return c.start(e.x,e.y)}),s.onInputMoved.add(function(e){return c.extend(e.x,e.y)}),s.onInputEnded.add(function(){return c.end()}),c.onNoEdge.add(function(){s.reset(),s.warnNoEdge()}),c.onExpensive.add(function(){return s.warnTooLongRailway()}),c.onStarted.add(function(){return s.start()}),c.onExtended.add(function(e){return s.append(e)}),c.onEnded.add(function(t){s.graceDestroy();var d=[];t.nodes.forEach(function(e,n){d.push({x:e.x,y:e.y,st:0===n||n===t.nodes.length-1})}),o.import(0,d,t.trainNum),n.onCompleted.fire()}),o.buildSandbox(e.width,e.height),e.append(u.createResidenceName(this._scene,this._container)),e.append(u.createCompanyName(this._scene,this._container)),e.onUpdate.add(function(){o.onTick(1/g.game.fps)})},d);function d(e){this.onCompleted=new n.Trigger,this._scene=e.scene,this._layer=e.layer,this._numberFont=e.numberFont,this._container=new g.E({scene:this._scene,width:this._layer.width,height:this._layer.height}),this._layer.append(this._container),this._deploy(this._container)}u.SandboxHandler=e})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["keyboard_define"] = function(g) {
			(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.convY=a.convX=a.symY=a.symX=a.alphaY=a.alphaX=a.semiVoicedY=a.semiVoicedX=a.voicedY=a.voicedX=a.smallY=a.smallX=a.kanaY=a.kanaX=a.scale=a.toRoman=a.bChar=a.smallChar=a.semiVoicedChar=a.voicedChar=a.canSmall=a.canSemiVoiced=a.canVoiced=a.symbol=a.alpha=a.digit=a.hiragana=void 0,a.hiragana="",a.digit="1234567890",a.alpha="abcdefghijklmnopqrstuvwxyz",a.symbol="'",a.canVoiced="",a.canSemiVoiced="",a.canSmall="",a.voicedChar="",a.semiVoicedChar="",a.smallChar="",a.bChar="",a.toRoman={"":"a","":"i","":"u","":"e","":"o","":"ka","":"ki","":"ku","":"ke","":"ko","":"sa","":"si","":"su","":"se","":"so","":"ta","":"ti","":"tu","":"te","":"to","":"na","":"ni","":"nu","":"ne","":"no","":"ha","":"hi","":"hu","":"he","":"ho","":"ma","":"mi","":"mu","":"me","":"mo","":"ya","":"yu","":"yo","":"ra","":"ri","":"ru","":"re","":"ro","":"wa","":"wo","":"nn"},a.scale=.875,a.kanaX=[8,88,168,248,328,444,524,604,684,764,880,960,1040,1120,1200,8,88,168,248,328,444,524,604,684,764,880,960,1040,1120,1200,8,88,168,248,328,444,580,716,880,960,1040,1120,1200,8,144,280];for(var e=0;e<a.kanaX.length;e++)a.kanaX[e]*=a.scale;for(a.kanaY=[216,216,216,216,216,216,216,216,216,216,216,216,216,216,216,312,312,312,312,312,312,312,312,312,312,312,312,312,312,312,408,408,408,408,408,408,408,408,408,408,408,408,408,504,504,504],e=0;e<a.kanaX.length;e++)a.kanaY[e]*=a.scale,a.kanaY[e]-=60;for(a.smallX=444*a.scale,a.smallY=504*a.scale-60,a.voicedX=580*a.scale,a.voicedY=504*a.scale-60,a.semiVoicedX=716*a.scale,a.semiVoicedY=504*a.scale-60,a.alphaX=[8,167,326,485,645,804,963,1122,8,167,326,485,645,804,963,1122,8,167,326,485,645,804,963,1122,8,167],e=0;e<a.alphaX.length;e++)a.alphaX[e]*=a.scale;for(a.alphaY=[216,216,216,216,216,216,216,216,312,312,312,312,312,312,312,312,408,408,408,408,408,408,408,408,504,504],e=0;e<a.alphaY.length;e++)a.alphaY[e]*=a.scale,a.alphaY[e]-=60;for(a.symX=[8,136,264,393,521,649,777,906,1034,1162,8,136,264,393,521,649,777,906,1034,1162],e=0;e<a.symX.length;e++)a.symX[e]*=a.scale;for(a.symY=[216,309,402],e=0;e<a.symY.length;e++)a.symY[e]*=a.scale,a.symY[e]-=60;a.convX=[80+880*a.scale,80+1092*a.scale],a.convY=504*a.scale})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["keyboard_Keyboard"] = function(g) {
			!function(e,t){var i,o,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=(Object.defineProperty(e,"__esModule",{value:!0}),e.Keyboard=void 0,t("@akashic-extension/akashic-label")),l=t("./keyboard_define"),r=t("./keyboard_SpriteReader"),t=(o=g.E,n(a,o),a.prototype.invalidate=function(){o.prototype.modified.call(this),this.inputtingLabel.font=this.font,this.inputtingLabel.fontSize=this.fontSize,this.inputtingLabel.height=this.fontSize,this.inputtingLabel.textColor=this.textColor,this.inputtingLabel.text=this.inputtingLabel.text.slice(0,this.maxLength),this.inputtingLabel.invalidate(),this.keyboardBack.cssColor=this.backgroundColor,this.keyboardBack.modified()},a.prototype.destroy=function(){o.prototype.destroy.call(this),this.common.destroyed()||this.common.destroy(),this.kanaKey.destroyed()||this.kanaKey.destroy(),this.keyboardBack.destroyed()||this.keyboardBack.destroy(),this.inputtingLabelBack.destroyed()||this.inputtingLabelBack.destroy(),this.inputtingLabel.destroyed()||this.inputtingLabel.destroy(),this.backSpaceKey.destroyed()||this.backSpaceKey.destroy()},Object.defineProperty(a.prototype,"text",{get:function(){return this.inputtingLabel.text},set:function(e){this.inputtingLabel.text=e.slice(0,Math.min(this.maxLength,e.length)),this.inputtingLabel.invalidate()},enumerable:!1,configurable:!0}),a);function a(e){for(var i=o.call(this,e)||this,n=new r.SpriteReader(e.scene,"hint_key_kana","img_key_kana"),e=(i.font=e.font,i.fontSize="fontSize"in e?e.fontSize:72,i.textColor="textColor"in e?e.textColor:"#575757",i.backgroundColor="backgroundColor"in e?e.backgroundColor:"#252525",i.maxLength="maxLength"in e?e.maxLength:15,i.common=new g.E({scene:i.scene,width:g.game.width,height:g.game.height,touchable:!0,local:!0}),i.append(i.common),i.kanaKey=new g.E({scene:i.scene,x:80,y:60,width:1120,height:g.game.height}),i.append(i.kanaKey),i.keyboardBack=new g.FilledRect({scene:i.scene,cssColor:i.backgroundColor,width:g.game.width,height:g.game.height,opacity:.8}),i.common.append(i.keyboardBack),i.scene.asset.getImageById("inputtingLabelBack")),a=(i.inputtingLabelBack=new g.Pane({scene:i.scene,width:e.width,height:e.height,x:88,y:40,scaleX:l.scale,scaleY:l.scale,backgroundImage:e}),i.inputtingLabel=new c.Label({scene:i.scene,font:i.font,fontSize:i.fontSize,text:"",textColor:i.textColor,width:i.inputtingLabelBack.width-40,height:i.fontSize,x:20,y:i.inputtingLabelBack.height/2,anchorX:0,anchorY:.5}),i.inputtingLabelBack.append(i.inputtingLabel),i.common.append(i.inputtingLabelBack),this),t=0;t<l.hiragana.length;t++)(e=>{var t=l.hiragana[e];(e=n.createSprite(l.toRoman[t],{x:l.kanaX[e],y:l.kanaY[e],touchable:!0})).onPointDown.add(function(){i.inputtingLabel.text.length<i.maxLength&&(i.inputtingLabel.text+=t,i.inputtingLabel.invalidate())}),a.kanaKey.append(e)})(t);e=n.createSprite("small",{x:l.smallX,y:l.smallY,touchable:!0}),e.onPointDown.add(function(){var e,t;i.inputtingLabel.text.length<=0||(t=i.inputtingLabel.text.slice(-1),e=l.canSmall.indexOf(t),t=l.smallChar.indexOf(t),-1===e&&-1===t)||(i.inputtingLabel.text=i.inputtingLabel.text.slice(0,-1),i.inputtingLabel.text+=-1!==e?l.smallChar[e]:l.canSmall[t],i.inputtingLabel.invalidate())}),i.kanaKey.append(e),e=n.createSprite("voiced",{x:l.voicedX,y:l.voicedY,touchable:!0}),e.onPointDown.add(function(){var e,t,n;i.inputtingLabel.text.length<=0||(n=i.inputtingLabel.text.slice(-1),e=l.canVoiced.indexOf(n),t=l.voicedChar.indexOf(n),n=l.semiVoicedChar.indexOf(n),-1===e&&-1===t&&-1===n)||(i.inputtingLabel.text=i.inputtingLabel.text.slice(0,-1),i.inputtingLabel.text+=-1!==e?l.voicedChar[e]:-1!==t?l.canVoiced[t]:l.bChar[n],i.inputtingLabel.invalidate())}),i.kanaKey.append(e),e=n.createSprite("semiVoiced",{x:l.semiVoicedX,y:l.semiVoicedY,touchable:!0}),e.onPointDown.add(function(){var e,t,n;i.inputtingLabel.text.length<=0||(n=i.inputtingLabel.text.slice(-1),e=l.canSemiVoiced.indexOf(n),t=l.semiVoicedChar.indexOf(n),n=l.bChar.indexOf(n),-1===e&&-1===t&&-1===n)||(i.inputtingLabel.text=i.inputtingLabel.text.slice(0,-1),i.inputtingLabel.text+=-1!==e?l.semiVoicedChar[e]:-1!==t?l.canSemiVoiced[t]:l.semiVoicedChar[n],i.inputtingLabel.invalidate())}),i.kanaKey.append(e),e=i.scene.asset.getImageById("backSpaceKey");return i.backSpaceKey=new g.Pane({scene:i.scene,width:e.width,height:e.height,x:1172-e.width,y:i.inputtingLabelBack.y+(i.inputtingLabelBack.height-e.height)*l.scale/2,backgroundImage:e,touchable:!0,scaleX:l.scale,scaleY:l.scale,local:!0}),i.backSpaceKey.onPointDown.add(function(){0<i.inputtingLabel.text.length&&(i.inputtingLabel.text=i.inputtingLabel.text.slice(0,-1),i.inputtingLabel.invalidate())}),i.common.append(i.backSpaceKey),i}e.Keyboard=t}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["keyboard_KeyboardParameterObject"] = function(g) {
			(e=>{Object.defineProperty(e,"__esModule",{value:!0})})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["keyboard_MultiKeyboard"] = function(g) {
			!function(e,n){var a,s,t=this&&this.__extends||(a=function(e,n){return(a=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,n){e.__proto__=n}:function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}))(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}a(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),d=(Object.defineProperty(e,"__esModule",{value:!0}),e.MultiKeyboard=void 0,n("./keyboard_define")),o=n("./keyboard_Keyboard"),l=n("./keyboard_SpriteReader"),n=(s=o.Keyboard,t(i,s),i.prototype.destroy=function(){s.prototype.destroy.call(this),this.alphaKey.destroyed()||this.alphaKey.destroy(),this.symKey.destroyed()||this.symKey.destroy(),this.convKana.destroyed()||this.convKana.destroy(),this.convAlpha.destroyed()||this.convAlpha.destroy(),this.convSym.destroyed()||this.convSym.destroy()},i);function i(e){for(var t=s.call(this,e)||this,a=new l.SpriteReader(e.scene,"hint_key_alpha","img_key_alpha"),o=new l.SpriteReader(e.scene,"hint_key_sym","img_key_sym"),i=(t.alphaKey=new g.E({scene:t.scene,x:80,width:1120,height:g.game.height,hidden:!0,y:60}),t.append(t.alphaKey),t.symKey=new g.E({scene:t.scene,x:80,width:1120,height:g.game.height,hidden:!0,y:60}),t.append(t.symKey),this),n=0;n<d.alpha.length;n++)(e=>{var n=d.alpha[e];(n=a.createSprite("a_"+n,{x:d.alphaX[e],y:d.alphaY[e],touchable:!0})).onPointDown.add(function(){t.inputtingLabel.text.length<t.maxLength&&(t.inputtingLabel.text+=d.alpha[e],t.inputtingLabel.invalidate())}),i.alphaKey.append(n)})(n);for(var h=this,n=0;n<d.digit.length;n++)(e=>{var n=d.digit[e];(e=o.createSprite("d_"+(e+1)%10,{x:d.symX[e],y:d.symY[0],touchable:!0})).onPointDown.add(function(){t.inputtingLabel.text.length<t.maxLength&&(t.inputtingLabel.text+=n,t.inputtingLabel.invalidate())}),h.symKey.append(e)})(n);for(var c=this,n=0;n<d.symbol.length;n++)(e=>{var n=d.symbol[e];(e=o.createSprite("sym_"+e,{x:d.symX[e],y:d.symY[Math.floor(e/10)+1],touchable:!0})).onPointDown.add(function(){t.inputtingLabel.text.length<t.maxLength&&(t.inputtingLabel.text+=n,t.inputtingLabel.invalidate())}),c.symKey.append(e)})(n);e=t.scene.asset.getImageById("toKanaLetters"),t.convKana=new g.Pane({scene:t.scene,width:e.width,height:e.height,x:d.convX[0],y:d.convY,backgroundImage:e,touchable:!0,hidden:!0,scaleX:d.scale,scaleY:d.scale,local:!0}),t.convKana.onPointDown.add(function(){t.alphaKey.hide(),t.symKey.hide(),t.kanaKey.show(),t.convAlpha.x=d.convX[0],t.convAlpha.modified(),t.convKana.hide(),t.convAlpha.show(),t.convSym.show()}),t.common.append(t.convKana),e=t.scene.asset.getImageById("toAlphaLetters"),t.convAlpha=new g.Pane({scene:t.scene,width:e.width,height:e.height,x:d.convX[0],y:d.convY,backgroundImage:e,touchable:!0,scaleX:d.scale,scaleY:d.scale,local:!0}),t.convAlpha.onPointDown.add(function(){t.kanaKey.hide(),t.symKey.hide(),t.alphaKey.show(),t.convAlpha.hide(),t.convKana.show(),t.convSym.show()}),t.common.append(t.convAlpha),e=t.scene.asset.getImageById("toSymLetters");return t.convSym=new g.Pane({scene:t.scene,width:e.width,height:e.height,x:d.convX[1],y:d.convY,backgroundImage:e,touchable:!0,scaleX:d.scale,scaleY:d.scale,local:!0}),t.convSym.onPointDown.add(function(){t.kanaKey.hide(),t.alphaKey.hide(),t.symKey.show(),t.convAlpha.x=d.convX[1],t.convAlpha.modified(),t.convSym.hide(),t.convKana.show(),t.convAlpha.show()}),t.common.append(t.convSym),t}e.MultiKeyboard=n}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["keyboard_SpriteReader"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteReader=void 0;var i=t("./keyboard_define");function s(e,t,i){this._scene=e,this._coordinates=JSON.parse(e.asset.getTextById(t).data),this._image=e.assets[i],this._surface=g.SurfaceUtil.asSurface(this._image)}s.prototype.createSprite=function(e,t){e=this._coordinates[e];return new g.Sprite({scene:this._scene,src:this._image,width:e.width,height:e.height,srcWidth:e.width,srcHeight:e.height,srcX:e.x,srcY:e.y,x:t.x,y:t.y,scaleX:i.scale,scaleY:i.scale,touchable:t.touchable,local:!0})},e.SpriteReader=s})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["hover_plugin"] = function(g) {
			((e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),i.isSupported=function(){return"undefined"!=typeof document&&"function"==typeof document.addEventListener},i.prototype.start=function(){return this.view.addEventListener("mousemove",this._onMouseMove_bound,!1),this.view.addEventListener("mouseout",this._onMouseOut_bound,!1),!0},i.prototype.stop=function(){this.view.removeEventListener("mousemove",this._onMouseMove_bound,!1),this.view.removeEventListener("mouseout",this._onMouseOut_bound,!1)},i.prototype._onMouseMove=function(e){var o,t,i=this.game.scene();i&&(t=(o=this.view.getBoundingClientRect()).left+window.pageXOffset,t=e.pageX-t,e=e.pageY-(o.top+window.pageYOffset),o={x:1,y:1},t={x:t/(o=this._getScale?this._getScale():o).x,y:e/o.y},(e=i.findPointSourceByPoint(t).target)&&e.hoverable?(e!==this.beforeHover&&(this.beforeHover&&this.beforeHover.hoverable&&this._onUnhovered(e),this._onHovered(e)),this.beforeHover=e):this.beforeHover&&this._onUnhovered(this.beforeHover))},i.prototype._onHovered=function(e){e.hoverable&&(this.view.style.cursor=e.cursor||this._cursor,this._showTooltip&&e.title&&this.view.setAttribute("title",e.title),e.hovered.fire())},i.prototype._onUnhovered=function(e){this.view.style.cursor="auto",this.beforeHover&&this.beforeHover.unhovered&&(this.beforeHover.unhovered.fire(),this._showTooltip)&&this.view.removeAttribute("title"),this.beforeHover=null},i.prototype._onMouseOut=function(){this.beforeHover&&this._onUnhovered(this.beforeHover)};var t=i;function i(e,o,t){void 0===t&&(t={}),this.game=e,this.view=o.view,this.beforeHover=null,this.operationTrigger=new g.Trigger,this._cursor=t.cursor||"pointer",this._showTooltip=!!t.showTooltip,this._getScale=o.getScale?function(){return o.getScale()}:null,this._onMouseMove_bound=this._onMouseMove.bind(this),this._onMouseOut_bound=this._onMouseOut.bind(this)}e.HoverPlugin=t,o.exports=t})(g.module.exports,(g.module.require,g.module));
		};



		window.gLocalAssetContainer["graph_view"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GraphView=void 0;var a=t("../models/parameters"),o=t("./commons_view");function i(e){this._scene=e.scene,this._layer=e.layer,this._oid=e.oid,this._setup()}i.prototype.import=function(e){var t=this,i=this._highest(e),s=(this._draw(e,i),function(){t._gradation.x+=t._layer.width/(a.params.interval.ranking*g.game.fps),t._gradation.modified(),t._mask.x=t._gradation.x+t._gradation.width-1,t._mask.width=t._layer.width-t._mask.x+5,t._mask.modified(),t._gradation.x>=t._layer.width&&(t._gradation.destroy(),t._mask.destroy(),t._scene.onUpdate.remove(s))});this._scene.onUpdate.add(s)},i.prototype._draw=function(e,t){for(var i=0;i<e.length-1;i++)for(var s=0;s<e[i].length;s++){var a=(1-e[i][s]/t)*this._layer.height,h=(1-e[i+1][s]/t)*this._layer.height,r=1/(e.length-1)*this._layer.width,n=g.Util.distance(0,a,r,h),h=Math.atan2(h-a,r)/Math.PI*180,r=new g.FilledRect({scene:this._scene,width:n+1,height:s===this._oid?3:1,x:i/(e.length-1)*this._layer.width,y:a,angle:h,cssColor:o.colors[s].flag});this._layer.append(r)}this._gradation=new g.Sprite({scene:this._scene,y:-2,src:this._scene.asset.getImageById("graph_fader_img"),compositeOperation:"destination-out"}),this._layer.append(this._gradation),this._mask=new g.FilledRect({scene:this._scene,x:this._gradation.width,y:-2,width:this._layer.width-this._gradation.width+5,height:this._layer.height+4,cssColor:"#000000",compositeOperation:"destination-out"}),this._layer.append(this._mask)},i.prototype._setup=function(){var e=new g.Sprite({scene:this._scene,x:20,src:this._scene.asset.getImageById("graph_img")}),e=(this._layer.append(e),new g.FilledRect({scene:this._scene,width:1,height:this._layer.height,cssColor:"#888888"})),e=(this._layer.append(e),new g.FilledRect({scene:this._scene,width:this._layer.width,height:1,y:this._layer.height-1,cssColor:"#888888"}));this._layer.append(e)},i.prototype._highest=function(e){for(var t=0,i=0;i<e.length;i++)for(var s=0;s<e[i].length;s++)t<e[i][s]&&(t=e[i][s]);return t},e.GraphView=i})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["countdown_handler"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CountDownHandler=void 0;var n=t("../models/trriger_model"),o=t("../view/countdown_view");function i(e){this.onCompleted=new n.Trigger,this._scene=e.scene,this._count=e.count,this._view=new o.CountDownView(e),this._setup()}i.prototype._setup=function(){var e=this,t=this._count,n=this._scene.setInterval(function(){t<=0?(e._scene.clearInterval(n),e._view.destroy(),e.onCompleted.fire()):(t--,e._view.count=t)},1e3)},e.CountDownHandler=i})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["countdown_view"] = function(g) {
			((t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CountDownView=void 0;var i=e("../models/parameters");function o(t){this._scene=t.scene,this._layer=t.layer,this._font=t.countDownFont,this._last=t.last,this._opacity=t.opacity,this._setup()}o.prototype.destroy=function(){this._view.destroyed()||this._view.destroy()},Object.defineProperty(o.prototype,"count",{set:function(t){this._view.text=t?""+t:this._last,this._view.invalidate()},enumerable:!1,configurable:!0}),o.prototype._setup=function(){this._view=new g.Label({scene:this._scene,font:this._font,fontSize:this._font.size,text:""+i.params.interval.start,anchorX:.5,anchorY:.5,opacity:this._opacity,x:this._layer.width/2,y:this._layer.height/4}),this._layer.append(this._view)},t.CountDownView=o})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["rollback_view"] = function(g) {
			((e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RollbackView=void 0;var t=i("../models/parameters"),a=i("../models/trriger_model"),s=i("./commons_view"),o=i("./dialogue"),r=i("./effect");function n(e){this.onSubmit=new a.Trigger,this.onCanceled=new a.Trigger,this._scene=e.scene,this._layer=e.layer,this._oid=e.oid,this._hideCanceler=function(){},this._setup()}n.prototype.show=function(){this._hideCanceler(),this._area.show()},n.prototype.graceHide=function(){this._hideCanceler(),this._area.show(),this._hideCanceler=r.fadeOut({scene:this._scene,view:this._area,fade:t.params.interval.graceDestroy})},n.prototype.enable=function(){this._dialogue.enable()},n.prototype.disable=function(){this._dialogue.disable()},n.prototype.destroy=function(){this._area.destroyed()||this._area.destroy(),this.submitting.destroyed()||this.submitting.destroy(),this._dialogue.destroy()},n.prototype._setup=function(){var e=this;this._area=s.createModalArea(this._scene,this._layer),this._area.hide(),this._layer.append(this._area),this._dialogue=new o.Dialogue({scene:this._scene,layer:this._area,oid:this._oid,primary:"rollback_ok_img",secondary:"prev_img"}),this._dialogue.modal.append(new g.Sprite({scene:this._scene,src:this._scene.asset.getImageById("rollback_title_img"),x:this._area.width/2,y:30,anchorX:.5})),this._dialogue.modal.append(s.createGuideLabel(this._scene,"rollback_detail_img",20,100)),this.submitting=s.createGuideLabel(this._scene,"rollback_wait_img",20,135),this.submitting.hide(),this._dialogue.modal.append(this.submitting),this._dialogue.onCompleted.add(function(){return e.onSubmit.fire()}),this._dialogue.onCanceled.add(function(){return e.onCanceled.fire()})},e.RollbackView=n})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["territoy_handler"] = function(g) {
			((e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TerritoryHandler=void 0;var t=i("../events/railway_built_event"),o=i("../events/railway_rollback_event"),n=i("../view/territory_view");function r(e){this._scene=e.scene,this._oid=e.oid,this._view=new n.TerritoryView(e),this._setup()}r.prototype.unlimit=function(){this._view.unlimit()},r.prototype._onMessage=function(e){t.isRailwayBuiltEvent(e)?t.RailwayBuiltEvent.parse(e).oid()===this._oid&&this._view.hide():o.isRailwayedRollbackEvent(e)&&o.RailwayRollbackedEvent.parse(e).oid()===this._oid&&this._view.show()},r.prototype._setup=function(){var i=this;this._scene.onMessage.add(function(e){return i._onMessage(e)})},e.TerritoryHandler=r})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["confirm_event"] = function(g) {
			!function(n,t){var e,o,r=this&&this.__extends||(e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),t=(Object.defineProperty(n,"__esModule",{value:!0}),n.isConfirmEvent=n.ConfirmEvent=void 0,t("./action_event")),i="CONFIRM",t=(o=t.ActionEvent,r(u,o),u.parse=function(t){return n.isConfirmEvent(t)?new u(t.data.data):null},u);function u(t){return o.call(this,i,t)||this}n.ConfirmEvent=t;n.isConfirmEvent=function(t){return t.data.code===i}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["rollback_handler"] = function(g) {
			((e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RollbackHandler=void 0;var t=i("../events/railway_rollback_event"),s=i("../models/parameters"),n=i("../models/trriger_model"),o=i("../scenes/game_scene"),a=i("../view/effect"),r=i("../view/rollback_view");function d(e){this.onCanceled=new n.Trigger,this.onSubmit=new n.Trigger,this.onCompleted=new n.Trigger,this._scene=e.scene,this._oid=e.oid,this._gm=e.gm,this._view=new r.RollbackView(e),this._hideCanceler=function(){},this._setup()}d.prototype.show=function(){this._view.show()},d.prototype.graceHide=function(){this._view.graceHide()},d.prototype.enable=function(){this._view.enable()},d.prototype.disable=function(){this._view.disable()},d.prototype.destroy=function(){this._scene.onMessage.remove(this._messageHandler)},d.prototype._setup=function(){var i=this;this._view.onSubmit.add(function(){i._view.disable(),i._hideCanceler(),i._view.submitting.show();var e=i._gm.primaryLine(i._oid);g.game.raiseEvent(new t.RailwayRollbackedEvent({id:g.game.selfId,oid:i._oid,nodes:e.nodes,edges:e.edges,luid:e.luid,ts:e.ts})),o.playEffect(i._scene),i.onSubmit.fire()}),this._view.onCanceled.add(function(){i._view.graceHide(),i.onCanceled.fire()}),this._messageHandler=function(e){return i._onMessage(e)},this._scene.onMessage.add(this._messageHandler)},d.prototype._onMessage=function(e){t.isRailwayedRollbackEvent(e)&&t.RailwayRollbackedEvent.parse(e).oid()===this._oid&&(this._view.graceHide(),this._view.enable(),this._hideCanceler=a.fadeOut({scene:this._scene,view:this._view.submitting,fade:s.params.interval.graceDestroy}),this.onCompleted.fire())},e.RollbackHandler=d})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["admin_confirm_view"] = function(g) {
			((e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AdminConfirmView=void 0;var t=i("../models/trriger_model"),o=i("./commons_view"),s=i("./dialogue");function n(e){this.onSubmit=new t.Trigger,this.onCanceled=new t.Trigger,this._scene=e.scene,this._layer=e.layer,this._oid=e.oid,this._text=e.text,this._setup()}n.prototype.show=function(){this._area.show()},n.prototype.hide=function(){this._area.hide()},n.prototype.enable=function(){this._dialogue.enable()},n.prototype.disable=function(){this._dialogue.disable()},n.prototype.destroy=function(){this._area.destroyed()||this._area.destroy(),this._dialogue.destroy()},n.prototype._setup=function(){var e=this;this._area=o.createModalArea(this._scene,this._layer),this._layer.append(this._area),this._dialogue=new s.Dialogue({scene:this._scene,layer:this._area,oid:this._oid,primary:"next_img",secondary:"prev_img"}),this._dialogue.modal.append(new g.Sprite({scene:this._scene,src:this._scene.asset.getImageById(this._text),x:20,y:30})),this._dialogue.onCompleted.add(function(){return e.onSubmit.fire()}),this._dialogue.onCanceled.add(function(){return e.onCanceled.fire()})},e.AdminConfirmView=n})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["train_cost_view"] = function(g) {
			((t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TrainCostView=void 0;var s=e("../models/parameters");function i(t){this._scene=t.scene,this._layer=t.layer,this._numberFont=t.numberFont,this._offsetX=t.offsetX,this._offsetY=t.offsetY,this._multiLine=t.multiLine,this._trains=t.trains,this._setup()}i.prototype.show=function(){this._numLabel.show(),this._text.show(),this._costLabel.show()},i.prototype.hide=function(){this._numLabel.hide(),this._text.hide(),this._costLabel.hide()},i.prototype.destroy=function(){this._numLabel.destroyed()||this._numLabel.destroy(),this._text.destroyed()||this._text.destroy(),this._costLabel.destroyed()||this._costLabel.destroy()},Object.defineProperty(i.prototype,"trains",{get:function(){return this._trains},set:function(t){this._trains=t,this._numLabel.text=""+("  "+this._trains).slice(-2),this._numLabel.invalidate(),this._costLabel.text=""+("    "+(s.params.cost.train.initial+(this._trains-1)*s.params.cost.train.increment)).slice(-4),this._costLabel.invalidate()},enumerable:!1,configurable:!0}),i.prototype._setup=function(){this._numLabel=new g.Label({scene:this._scene,font:this._numberFont,fontSize:this._numberFont.size,text:""+("  "+(this._trains+1)).slice(-2),x:this._offsetX,y:this._offsetY-(this._multiLine?this._numberFont.size:0)+2}),this._layer.append(this._numLabel),this._text=new g.Sprite({scene:this._scene,src:this._scene.asset.getImageById("train_deployer_cost_img"),x:this._offsetX+1.75*this._numberFont.size,y:this._offsetY-(this._multiLine?this._numberFont.size:0)}),this._layer.append(this._text),this._costLabel=new g.Label({scene:this._scene,font:this._numberFont,fontSize:this._numberFont.size,text:""+("    "+(s.params.cost.train.initial+this._trains*s.params.cost.train.increment)).slice(-4),x:this._offsetX+(this._multiLine?0:1.75*this._numberFont.size+124),y:this._offsetY-(this._multiLine?this._numberFont.size-35:0)+2}),this._layer.append(this._costLabel)},t.TrainCostView=i})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["railway_destroy_event"] = function(g) {
			!function(t,e){var r,n,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),e=(Object.defineProperty(t,"__esModule",{value:!0}),t.isRailwayDestroyedEvent=t.RailwayDestroyedEvent=void 0,e("./action_event")),a="RAILWAY_DESTROY",e=(n=e.ActionEvent,o(i,n),i.parse=function(e){return t.isRailwayDestroyedEvent(e)?new i(e.data.data):null},Object.defineProperty(i.prototype,"nodes",{get:function(){return this.data.data.nodes},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"edges",{get:function(){return this.data.data.edges},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"luid",{get:function(){return this.data.data.luid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lts",{get:function(){return this.data.data.lts},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"outer",{get:function(){return this.data.data.outer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"branch",{get:function(){return this.data.data.branch},enumerable:!1,configurable:!0}),i);function i(e){return n.call(this,a,e)||this}t.RailwayDestroyedEvent=e;t.isRailwayDestroyedEvent=function(e){return e.data.code===a}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["railway_rollback_event"] = function(g) {
			!function(e,t){var o,n,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),t=(Object.defineProperty(e,"__esModule",{value:!0}),e.isRailwayedRollbackEvent=e.RailwayRollbackedEvent=void 0,t("./action_event")),a="RAILWAY_ROLLBACK",t=(n=t.ActionEvent,r(i,n),i.parse=function(t){return e.isRailwayedRollbackEvent(t)?new i(t.data.data):null},Object.defineProperty(i.prototype,"nodes",{get:function(){return this.data.data.nodes},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"edges",{get:function(){return this.data.data.edges},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"luid",{get:function(){return this.data.data.luid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trains",{get:function(){return this.data.data.ts},enumerable:!1,configurable:!0}),i);function i(t){return n.call(this,a,t)||this}e.RailwayRollbackedEvent=t;e.isRailwayedRollbackEvent=function(t){return t.data.code===a}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["railway_destroyer_handler"] = function(g) {
			((e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RailwayDestroyerHandler=void 0;var d=i("../events/railway_destroy_event"),t=i("../models/railway_destroyer_model"),n=i("../models/trriger_model"),u=i("../scenes/game_scene"),o=i("../view/railway_destroyer_view");function r(e){this.onSubmit=new n.Trigger,this.onCompleted=new n.Trigger,this._scene=e.scene,this._oid=e.oid,this._model=new t.RailwayDestroyer,this._view=new o.RailwayDestroyerView(e),this._hideCanceler=function(){},this._setup()}r.prototype.import=function(e,i){e=this._scanTerminal(e);this._model.import(e,i),this._view.import(e)},r.prototype.show=function(){this._hideCanceler(),this._view.show()},r.prototype.cancel=function(){this._view.dialogue.disable(),this._view.graceHide()},r.prototype.graceHide=function(){this._view.graceHideDialogue()},r.prototype._scanTerminal=function(o){var r={},s={},a=[];return Object.keys(o).forEach(function(e){if(!r[e]&&!s[e]){for(var e=o[e],i=[e],t=e;!t.to.st;)t=t.to.out[0],i.push(t);for(var n=0===t.to.out.length,t=e;!t.from.st;)t=t.from.in[0],i.push(t);e=0===t.from.in.length&&1===t.from.out.length;n||e?(i.forEach(function(e){return r["e"+e.id]=e}),a.push(i)):i.forEach(function(e){return s["e"+e.id]=e})}}),a},r.prototype._setup=function(){var s,a=this,n=[];this._model.onSelected.add(function(e){var t=0,i=[];n.forEach(function(e){return e.lt.onTrainChanged.remove(e.fn)}),n.length=0,(s=e).lts.forEach(function(e){t+=e.trains.length;function i(e){a._view.updateTrains(e)}e.onTrainChanged.add(i),n.push({lt:e,fn:i})}),s.nodes.forEach(function(e){e.st&&i.push(e.st)}),a._view.disable(),a._view.filter(e.cluster,i,t),a._view.dialogue.enable(),a._view.submitting.hide(),a._view.showDialogue()}),this._model.onExtinction.add(function(){return a._view.extinction()}),this._model.onNoEdge.add(function(){return a._view.noEdge()}),this._model.onNoTerminal.add(function(){return a._view.noTerminal()}),this._view.onPointed.add(function(e){return a._model.select(e.x,e.y)}),this._view.onCanceled.add(function(){a._view.enable(),a._view.unfilter(),a._view.dialogue.disable(),a._view.graceHideDialogue()}),this._view.onSubmit.add(function(){a._view.dialogue.disable(),a._view.submitting.show();var e,i,t=[],n=(s.nodes.forEach(function(e){return t.push("n"+e.id)}),[]),o=(s.edges.forEach(function(e){return n.push("e"+e.id)}),[]),r=(s.lts.forEach(function(e){return o.push(e.uid)}),s.lts[0].line.uid);s.outer&&(e={prev:s.outer.prev.uid,next:s.outer.next.uid}),s.branch&&(i={eid:"e"+s.branch.e.id,luid:s.branch.prev.line.uid,prev:s.branch.prev.uid,next:s.branch.next.uid}),g.game.raiseEvent(new d.RailwayDestroyedEvent({id:g.game.selfId,oid:a._oid,nodes:t,edges:n,luid:r,lts:o,outer:e,branch:i})),u.playEffect(a._scene),a.onSubmit.fire()}),this._msgHandler=function(e){return a._onMessage(e)},this._scene.onMessage.add(this._msgHandler)},r.prototype._onMessage=function(e){d.isRailwayDestroyedEvent(e)&&d.RailwayDestroyedEvent.parse(e).oid()===this._oid&&this._view.submitting.visible()&&(this._view.graceHideDialogue(),this._view.enable(),this.onCompleted.fire())},e.RailwayDestroyerHandler=r})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["railway_destroyer_model"] = function(g) {
			((t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RailwayDestroyer=void 0;var o=e("./line_task_model"),p=e("./parameters"),r=e("./trriger_model");function n(){this.onNoEdge=new r.Trigger,this.onNoTerminal=new r.Trigger,this.onExtinction=new r.Trigger,this.onSelected=new r.Trigger,this._clusters=[]}n.prototype.import=function(t,e){this._clusters=t,this._singleLine=e},n.prototype.select=function(t,e){var r,n,t=this._nearest(t,e);t?(e=this._railpart(t.re)).start.terminal||e.end.terminal?(r=this._lineTasks(e),this._singleLine&&!r.outer?this.onExtinction.fire():(r.branch&&(n={e:e.branch,prev:r.branch.prev,next:r.branch.next}),this.onSelected.fire({cluster:t.cluster,nodes:e.nodes,edges:e.edges,lts:r.lts,outer:r.outer,branch:n}))):this.onNoTerminal.fire():this.onNoEdge.fire()},n.prototype._nearest=function(u,f){var h,d=Number.MAX_VALUE;return this._clusters.forEach(function(t,a){return t.forEach(function(t){var e={x:t.to.x-t.from.x,y:t.to.y-t.from.y},r=g.Util.distance(0,0,e.x,e.y),n=e.x/r,e=e.y/r,o=u-t.from.x,s=f-t.from.y,i=n*o+e*s,r=i<=0?g.Util.distance(u,f,t.from.x,t.from.y):r<=i?g.Util.distance(u,f,t.to.x,t.to.y):Math.abs(n*s-e*o);r<d&&r<p.params.ui.distance.destroy&&(d=r,h={cluster:a,re:t})})}),h},n.prototype._railpart=function(t){for(var e,r=[],n=[],o=(n.push(t),t);!o.to.st;)o=o.to.out[0],r.push(o.from),n.push(o);var s={st:o.to.st,terminal:0===o.to.out.length,branchOwner:0<o.to.branches.length,in:o};for(s.terminal&&!s.branchOwner&&r.push(o.to),0<o.to.branches.length&&(e=o.to.branches[0]),o=t;!o.from.st;)o=o.from.in[0],r.push(o.to),n.push(o);t={st:o.from.st,terminal:o.from.out.length+o.from.in.length===1||-1!==o.from.branches.indexOf(o),branchOwner:-1!==o.from.branches.indexOf(o),out:o};return t.terminal&&!t.branchOwner&&r.push(o.from),{start:t,end:s,nodes:r,edges:n,branch:e=0<o.from.branches.length?o.from.branches[0]:e}},n.prototype._findOutBoundTask=function(t){for(var e=0;e<t.from.depts.length;e++){var r=t.from.depts[e];if(r.destination===t.to)return r.prev}},n.prototype._findInBoundTask=function(t){for(var e=0;e<t.to.depts.length;e++){var r=t.to.depts[e];if(r.destination===t.from)return r.prev}},n.prototype._findOutBoundOuterTask=function(t,e){for(var r=0;r<e.from.depts.length;r++){var n=e.from.depts[r];if(n.line===t&&n instanceof o.DeptTask&&n.next.destination!==e.to)return n}},n.prototype._findInBoundOuterTask=function(t){for(var e=0;e<t.to.depts.length;e++){var r=t.to.depts[e];if(r.destination===t.from)return r.prev.prev}},n.prototype._lineTasks=function(t){var e,r,n=[],o=this._findOutBoundTask(t.start.out);for(t.start.terminal||(r={prev:o.prev,next:this._findOutBoundOuterTask(o.line,t.start.out)}),n.push(o);o.destination.st!==t.end.st;)o=o.next,n.push(o);for(t.end.terminal||(r={next:o.next,prev:this._findInBoundOuterTask(t.end.in)}),o=this._findInBoundTask(t.end.in),n.push(o);o.destination.st!==t.start.st;)o=o.next,n.push(o);return{lts:n,outer:r,branch:e=r&&(r=r.next.departure.branches).length?{prev:this._findInBoundTask(r[0]),next:this._findOutBoundTask(r[0])}:e}},t.RailwayDestroyer=n})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["railway_destroyer_view"] = function(g) {
			((e,t)=>{function a(e){for(var t=[],i=0;i<n.params.animation.destroyer;i++)t.push(i+e*n.params.animation.destroyer);return t}Object.defineProperty(e,"__esModule",{value:!0}),e.RailwayDestroyerView=void 0;var n=t("../models/parameters"),i=t("../models/trriger_model"),s=t("./commons_view"),o=t("./dialogue"),r=t("./effect"),h=t("./estimation_view");function c(e){this.onPointed=new i.Trigger,this.onCanceled=new i.Trigger,this.onSubmit=new i.Trigger,this._nodes=[],this._edges=[],this._res=[],this._scene=e.scene,this._backgroundLayer=e.backgroundLayer,this._couponFont=e.couponFont,this._layer=e.layer,this._oid=e.oid,this._scorer=e.scorer,this._hideCanceler=function(){},this._setup()}c.prototype.import=function(e){var r=this;this.cancel(),e.forEach(function(e){var i={},s=[],o=[];e.forEach(function(e){var t=((e,t,i)=>((e=new g.FrameSprite({scene:e,src:e.asset.getImageById("destroyer_rect_img"),x:(i.from.x+i.to.x)/2,y:(i.from.y+i.to.y)/2,anchorX:.5,anchorY:.5,width:g.Util.distance(i.from.x,i.from.y,i.to.x,i.to.y),srcWidth:n.params.view.destroyer,height:n.params.view.destroyer,angle:Math.atan2(i.to.y-i.from.y,i.to.x-i.from.x)/Math.PI*180,frames:a(t)})).start(),e))(r._scene,r._oid,e);r._backgroundLayer.append(t),s.push(t),o.push(e),[e.from,e.to].forEach(function(e){var t;i["n"+e.id]||(t=((e,t,i)=>((e=new g.FrameSprite({scene:e,src:e.asset.getImageById("destroyer_circle_img"),x:i.x,y:i.y,anchorX:.5,anchorY:.5,width:n.params.view.destroyer,height:n.params.view.destroyer,frames:a(t)})).start(),e))(r._scene,r._oid,e),r._backgroundLayer.append(t),i["n"+e.id]=t)})}),r._nodes.push(i),r._edges.push(s),r._res.push(o)})},c.prototype.filter=function(i,e,t){for(var s=this,o=(this._estimationLabel.cost=0,this._edges.forEach(function(e,t){i!==t&&e.forEach(function(e){return e.hide()})}),this._nodes.forEach(function(t,e){i!==e&&Object.keys(t).forEach(function(e){return t[e].hide()})}),this._res[i].forEach(function(e){s._estimationLabel.cost+=g.Util.distance(e.from.x,e.from.y,e.to.x,e.to.y)*n.params.cost.rail*n.params.weight.coupon}),e.forEach(function(e){for(var t=n.params.cost.station,i=0;i<e.lv;i++)t+=n.params.cost.upgrade[i];s._estimationLabel.cost+=t*n.params.weight.coupon}),this._scorer.getTrainCost(this._oid)),r=0;r<t;r++)o-=n.params.cost.train.increment,this._estimationLabel.cost+=o*n.params.weight.coupon;this._trainCost=o},c.prototype.unfilter=function(){this._edges.forEach(function(e){return e.forEach(function(e){return e.show()})}),this._nodes.forEach(function(t){return Object.keys(t).forEach(function(e){return t[e].show()})})},c.prototype.extinction=function(){r.flashLabel({scene:this._scene,layer:this._layer,asset:"railway_destroyer_error_extinction_img",x:20,y:70})},c.prototype.noEdge=function(){r.flashLabel({scene:this._scene,layer:this._layer,asset:"railway_destroyer_error_no_edge_img",x:20,y:70})},c.prototype.noTerminal=function(){r.flashLabel({scene:this._scene,layer:this._layer,asset:"railway_destroyer_error_no_terminal_img",x:20,y:70})},c.prototype.updateTrains=function(e){1===e?(this._trainCost-=n.params.cost.train.increment,this._estimationLabel.cost+=this._trainCost*n.params.weight.coupon):(this._estimationLabel.cost-=this._trainCost*n.params.weight.coupon,this._trainCost+=n.params.cost.train.increment)},c.prototype.cancel=function(){this._edges.forEach(function(e){return e.forEach(function(e){return e.destroy()})}),this._nodes.forEach(function(t){return Object.keys(t).forEach(function(e){return t[e].destroy()})}),this._edges.length=0,this._nodes.length=0,this._res.length=0},c.prototype.show=function(){this._guide.show(),this._edges.forEach(function(e){return e.forEach(function(e){return e.show()})}),this._nodes.forEach(function(t){return Object.keys(t).forEach(function(e){return t[e].show()})}),this._sensor.show()},c.prototype.graceHide=function(){this._guide.hide(),this._sensor.hide(),this.cancel(),this.graceHideDialogue()},c.prototype.showDialogue=function(){this._hideCanceler(),this._dialogueArea.show()},c.prototype.graceHideDialogue=function(){this._dialogueArea.visible()&&(this._hideCanceler(),this._dialogueArea.show(),this._hideCanceler=r.fadeOut({scene:this._scene,view:this._dialogueArea,fade:n.params.interval.graceDestroy}))},c.prototype.enable=function(){this._sensor.show()},c.prototype.disable=function(){this._sensor.hide()},c.prototype._setup=function(){var t=this;this._sensor=new g.E({scene:this._scene,width:this._layer.width,height:this._layer.height,local:!0,touchable:!0,hidden:!0}),this._layer.append(this._sensor),this._guide=s.createGuideLabel(this._scene,"railway_destroyer_guide_img"),this._guide.hide(),this._layer.append(this._guide),this._sensor.onPointUp.add(function(e){return t.onPointed.fire({x:e.point.x+e.startDelta.x,y:e.point.y+e.startDelta.y})}),this._dialogueArea=s.createModalArea(this._scene,this._layer),this._dialogueArea.hide(),this._layer.append(this._dialogueArea),this.dialogue=new o.Dialogue({scene:this._scene,layer:this._dialogueArea,oid:this._oid,primary:"railway_destroyer_ok_img",secondary:"prev_img"}),this.dialogue.modal.append(new g.Sprite({scene:this._scene,src:this._scene.asset.getImageById("railway_destroyer_title_img"),x:this._dialogueArea.width/2,y:30,anchorX:.5})),this.dialogue.modal.append(s.createGuideLabel(this._scene,"railway_destroyer_detail1_img",20,100)),this.dialogue.modal.append(s.createGuideLabel(this._scene,"railway_destroyer_detail2_img",20,135)),this.dialogue.modal.append(s.createGuideLabel(this._scene,"railway_destroyer_detail3_img",20,170)),this._estimationLabel=new h.EstimationView({scene:this._scene,layer:this.dialogue.modal,asset:"coupon_estimation_img",numberFont:this._couponFont,x:20,y:205,cost:0}),this.submitting=s.createGuideLabel(this._scene,"railway_destroyer_wait_img",20,240),this.submitting.hide(),this.dialogue.modal.append(this.submitting),this.dialogue.onCompleted.add(function(){return t.onSubmit.fire()}),this.dialogue.onCanceled.add(function(){return t.onCanceled.fire()})},e.RailwayDestroyerView=c})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_booster_model"] = function(g) {
			((t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StationBoosterModel=void 0;var d=e("./parameters"),i=e("./trriger_model");function o(t){this.onNoStation=new i.Trigger,this.onExpensive=new i.Trigger,this.onAlreadyBoosted=new i.Trigger,this.onSelected=new i.Trigger,this._oid=t.oid,this._scorer=t.scorer,this._filter=t.filter,this._cost=t.cost}o.prototype.import=function(t){this._nodes=t},o.prototype.select=function(t,e,i){t=this._findStation(t,e);if(t){if(i){if(this._cost>this._scorer.get(this._oid))return void this.onExpensive.fire();if(!this._filter(t))return void this.onAlreadyBoosted.fire()}this.onSelected.fire({st:t,matched:this._filter(t),fixed:i})}else this.onNoStation.fire(i)},o.prototype._findStation=function(i,o){var r,s=this,n=Number.MAX_VALUE;return Object.keys(this._nodes).forEach(function(t){var e,t=s._nodes[t];t.st&&(e=g.Util.distance(i,o,t.x,t.y))<n&&(n=e,r=t.st)}),n<d.params.ui.distance.station?r:null},t.StationBoosterModel=o})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["station_upgrader_model"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StationUpgraderModel=void 0;var a=t("./parameters"),i=t("./trriger_model");function o(e){this.onNoStation=new i.Trigger,this.onExpensive=new i.Trigger,this.onNoMoreLevel=new i.Trigger,this.onSelected=new i.Trigger,this._oid=e.oid,this._scorer=e.scorer}o.prototype.import=function(e){this._nodes=e},o.prototype.select=function(e,t,i){e=this._findStation(e,t);if(e){if(i){if(a.params.cost.upgrade[e.lv]>this._scorer.get(this._oid))return void this.onExpensive.fire();if(e.lv>=a.params.cost.upgrade.length)return void this.onNoMoreLevel.fire()}this.onSelected.fire({st:e,matched:e.lv<a.params.cost.upgrade.length,fixed:i})}else this.onNoStation.fire(i)},o.prototype._findStation=function(i,o){var r,n=this,s=Number.MAX_VALUE;return Object.keys(this._nodes).forEach(function(e){var t,e=n._nodes[e];e.st&&(t=g.Util.distance(i,o,e.x,e.y))<s&&(s=t,r=e.st)}),s<a.params.ui.distance.station?r:null},e.StationUpgraderModel=o})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["mult_iplay_event"] = function(g) {
			!function(e){var o,t,n=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=(Object.defineProperty(e,"__esModule",{value:!0}),e.isMultiPlayEvent=e.MultiPlayEvent=void 0,"MULTI_PLAY"),n=(t=g.MessageEvent,n(i,t),i.parse=function(t){return e.isMultiPlayEvent(t)?new i:null},i);function i(){return t.call(this,{code:r})||this}e.MultiPlayEvent=n;e.isMultiPlayEvent=function(t){return t.data.code===r}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["tips_view"] = function(g) {
			((e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TipsView=void 0;var n=s("../models/parameters");function i(e){this._tips=[],this._scene=e.scene,this._layer=e.layer,this._setup()}i.prototype._setup=function(){for(var e=this,s=(this._view=new g.Pane({scene:this._scene,width:this._layer.width,height:this._layer.height}),this._layer.append(this._view),[]),i=0;i<n.params.contents.tips.length;i++)s.push(i);for(;this._tips.length<n.params.contents.tips.length;){var i=Math.floor(g.game.localRandom.generate()*s.length),t=new g.Sprite({scene:this._scene,src:this._scene.asset.getImageById("tips_"+n.params.contents.tips[s[i]]+"_img"),hidden:!0});s.splice(i,1),this._view.append(t),this._tips.push(t)}var p="slideIn",a=0,h=1;this._tips[0].x=this._view.width+1,this._tips[0].modified(),this._tips[0].show(),this._scene.onUpdate.add(function(){switch(p){case"slideIn":e._tips[a].x-=n.params.speed.tips/g.game.fps,e._tips[a].x<0&&(e._tips[a].x=0,p="stay"),e._tips[a].modified();break;case"slideOut":e._tips[a].x-=n.params.speed.tips/g.game.fps,e._tips[a].modified(),h>n.params.interval.tips*g.game.fps&&(h=0,e._tips[a].hide(),++a>=e._tips.length&&(a=0),e._tips[a].x=e._view.width+1,e._tips[a].modified(),e._tips[a].show(),p="slideIn");break;case"stay":h>(n.params.interval.tips-1)*g.game.fps&&(p="slideOut")}h++})},e.TipsView=i})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["advisor_handler"] = function(g) {
			((o,e)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AdvisorHandler=void 0;var i=e("../models/advisor_model"),t=e("../view/advisor_view");function n(n){this._scene=n.scene,this._model=new i.Advisor({oid:n.oid,setTimeout:function(o,e){return n.scene.setTimeout(o,e)},gm:n.gm,onAction:n.onAction,onUnlimit:n.onUnlimit}),this._view=new t.AdvsiorView(n),this._setup()}n.prototype._setup=function(){var e=this;this._model.onNotEnoughTrain.add(function(o){return e._view.notEnoughTrain(o)}),this._model.onNotEnoughStation.add(function(o){return e._view.notEnoughStation(o)}),this._model.onFullGate.add(function(o){return e._view.fullGate(o)})},o.AdvisorHandler=n})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["advisor_model"] = function(g) {
			!function(t,e){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.Advisor=void 0,e("../scenes/game_tooltip_scene")),s=e("./parameters"),r=e("./trriger_model");function a(t){this.onNotEnoughTrain=new r.Trigger,this.onNotEnoughStation=new r.Trigger,this.onFullGate=new r.Trigger,this._queue=[],this._oid=t.oid,this._gm=t.gm,this._setTimeout=t.setTimeout,this._onUnlimit=t.onUnlimit,this._onAction=t.onAction,this._setup()}a.prototype.take=function(){for(;0<this._queue.length;){var t=this._queue[0];if(this._queue.splice(0,1),t.isSatisfied())return void this._fire(t)}},a.prototype.push=function(t){0!==this._queue.length||this._effect?this._queue.push(t):this._fire(t)},a.prototype._fire=function(t){var e=this;t.fire(),this._effect=!0,this._setTimeout(function(){e._effect=!1,e.take()},1e3*s.params.interval.advise.pop),this._setTimeout(function(){return t.interval()},1e3*s.params.interval.advise.suspension)},a.prototype._setup=function(){var t={oid:this._oid,gm:this._gm,advisor:this,onUnlimit:this._onUnlimit,onAction:this._onAction};new _(t),new l(t),new y(t)},t.Advisor=a;d.prototype.isSatisfied=function(){return this._unlimit&&!this._action&&this._intervaled},d.prototype.fire=function(){this._intervaled=!1},d.prototype.interval=function(){this._intervaled=!0,this._tryEntry()},d.prototype._tryEntry=function(){this.isSatisfied()&&this._advisor.push(this)};e=d;function d(t,e){var i=this;this._intervaled=!0,this._advisor=t.advisor,t.onUnlimit.add(function(t){t===e&&(i._unlimit=!0,i._tryEntry())}),t.onAction.add(function(t){(i._action=t)||i._tryEntry()})}i(c,u=e),c.prototype.fire=function(){var e=this;u.prototype.fire.call(this),this._advisor.onNotEnoughTrain.fire(this._target),this._target=null,Object.keys(this._rejected).forEach(function(t){e._rejected[t]=0})},c.prototype.isSatisfied=function(){if(!u.prototype.isSatisfied.call(this))return!1;for(var t,e=0,i=Object.keys(this._stations),n=0;n<i.length;n++)this._rejected[i[n]]>=Object.keys(this._stations[i[n]]).length/2&&this._rejected[i[n]]>e&&(t=this._ls[i[n]],this._target=t,e=this._rejected[i[n]]);return!!t};var u,_=c;function c(i){var n=u.call(this,i,o.orders.insertTrain)||this;return n._rejected={},n._stations={},n._ls={},i.gm.onRailLineAdded.add(function(e){e.ownerID===i.oid&&(n._stations[e.uid]=e.stations,Object.keys(e.stations).forEach(function(t){n._stations[e.uid][t].onDestroyed.add(function(){n._stations[e.uid]&&delete n._stations[e.uid][t]})}),n._rejected[e.uid]=0,(n._ls[e.uid]=e).onDestroyed.add(function(){delete n._stations[e.uid],delete n._rejected[e.uid],delete n._ls[e.uid]}))}),i.gm.onTrainAdded.add(function(t){t.ownerID===i.oid&&t.onRejected.add(function(){n._rejected[t.task.line.uid]++,n._tryEntry()})}),n}i(f,h=e),f.prototype.fire=function(){var e=this;h.prototype.fire.call(this),this._advisor.onNotEnoughStation.fire(this._target),this._target=null,Object.keys(this._obstacles).forEach(function(t){e._obstacles[t]=0})},f.prototype.isSatisfied=function(){if(!h.prototype.isSatisfied.call(this))return!1;for(var t,e=0,i=Object.keys(this._obstacles),n=0;n<i.length;n++)this._obstacles[i[n]]>s.params.threshold.entryQueue&&this._obstacles[i[n]]>e&&(t=this._sts[i[n]],this._target=t,e=this._obstacles[i[n]]);return!!t};var h,l=f;function f(t){var i=h.call(this,t,o.orders.insertStation)||this;return i._obstacles={},i._sts={},t.gm.onStationAdded.add(function(e){e.ownerID===t.oid&&(i._obstacles[e.uid]=0,(i._sts[e.uid]=e).gate.onEntried.add(function(t){i._obstacles[e.uid]=t,i._tryEntry()}),e.onDestroyed.add(function(){delete i._obstacles[e.uid],delete i._sts[e.uid],e===i._target&&(i._target=null)}))}),i}i(g,p=e),g.prototype.fire=function(){p.prototype.fire.call(this),this._advisor.onFullGate.fire(this._target),this._target=null},g.prototype.isSatisfied=function(){return!!p.prototype.isSatisfied.call(this)&&!!this._target};var p,y=g;function g(e){var i=p.call(this,e,o.orders.upgradeStation)||this;return i._sts={},e.gm.onStationAdded.add(function(t){t.ownerID===e.oid&&((i._sts[t.uid]=t).gate.onFull.add(function(){i._target=t,i._tryEntry()}),t.gate.onVacant.add(function(){t===i._target&&(i._target=null)})),t.onDestroyed.add(function(){delete i._sts[t.uid],t===i._target&&(i._target=null)})}),i}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["advisor_view"] = function(g) {
			((e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AdvsiorView=void 0;var u=a("../models/parameters"),t=a("../scenes/game_tooltip_scene"),_=a("./commons_view"),h=a("./effect");function r(e){this._scene=e.scene,this._backgroundLayer=e.backgroundLayer,this._noticeLayer=e.noticeLayer,this._onUnlimit=e.onUnlimit,this._setup()}r.prototype.notEnoughTrain=function(e){var n,i=this,o=(h.flashLabel({scene:this._scene,layer:this._noticeLayer,x:280,y:45,asset:"alert_img",fade:u.params.interval.advise.pop}),h.flashLabel({scene:this._scene,layer:this._noticeLayer,x:350,y:55,asset:"advise_train_img",fade:u.params.interval.advise.pop}),{}),d=[],c=[],p=[],y=Number.MAX_VALUE,a=(e.tasks.forEach(function(e){var a,t,r,s;o["n"+e.departure.id]||(e.departure.x<y&&(n=e.departure,y=e.departure.x),a=_.createPointerNode(i._scene,e.departure),i._backgroundLayer.append(a),o["n"+e.departure.id]=a,e.departure.onDestroyed.add(t=function(){a.destroy(),delete o["n"+e.departure.id]}),c.push(function(){return e.departure.onDestroyed.remove(t)}),e.departure!==e.destination&&(r=_.createPointerEdge(i._scene,e.departure,e.destination),i._backgroundLayer.append(r),d.push(r),e.departure.onDestroyed.add(s=function(){r.destroyed()||r.destroy();var e=d.indexOf(r);-1!==e&&d.splice(e,1)}),e.destination.onDestroyed.add(s),p.push(function(){e.departure.onDestroyed.remove(s),e.destination.onDestroyed.remove(s)})))}),new g.Sprite({scene:this._scene,x:n.x-u.params.view.alert,y:n.y-u.params.view.alert,anchorX:.5,anchorY:.5,src:this._scene.asset.getImageById("alert_img")})),t=(this._backgroundLayer.append(a),function(){a.destroy()});n.onDestroyed.add(t);this._scene.asset.getAudioById("nc151497").play(),this._scene.setTimeout(function(){c.forEach(function(e){return e()}),c.length=0,p.forEach(function(e){return e()}),p.length=0,Object.keys(o).forEach(function(e){return h.fadeOut({scene:i._scene,view:o[e],destroy:!0,fade:u.params.interval.graceDestroy})}),d.forEach(function(e){return h.fadeOut({scene:i._scene,view:e,destroy:!0,fade:u.params.interval.graceDestroy})}),n.onDestroyed.remove(t),h.fadeOut({scene:i._scene,view:a,destroy:!0,fade:u.params.interval.graceDestroy})},1e3*(u.params.interval.advise.pop-u.params.interval.graceDestroy))},r.prototype.notEnoughStation=function(e){var a=this,t=(h.flashLabel({scene:this._scene,layer:this._noticeLayer,x:this._upgrade?180:330,y:45,asset:"alert_img",fade:u.params.interval.advise.pop}),h.flashLabel({scene:this._scene,layer:this._noticeLayer,x:this._upgrade?250:400,y:55,asset:this._upgrade?"advise_upgrade_img":"advise_station_img",fade:u.params.interval.advise.pop}),_.createPointerNode(this._scene,e.node,!0)),r=(this._backgroundLayer.append(t),new g.Sprite({scene:this._scene,x:e.node.x-u.params.view.alert,y:e.node.y-u.params.view.alert,anchorX:.5,anchorY:.5,src:this._scene.asset.getImageById("alert_img")})),s=(this._backgroundLayer.append(r),function(){t.destroy(),r.destroy()});e.node.onDestroyed.add(s);this._scene.asset.getAudioById("nc151497").play(),this._scene.setTimeout(function(){e.node.onDestroyed.remove(s),h.fadeOut({scene:a._scene,view:t,destroy:!0,fade:u.params.interval.graceDestroy}),h.fadeOut({scene:a._scene,view:r,destroy:!0,fade:u.params.interval.graceDestroy})},1e3*(u.params.interval.advise.pop-u.params.interval.graceDestroy))},r.prototype.fullGate=function(e){var a=this,t=(h.flashLabel({scene:this._scene,layer:this._noticeLayer,x:130,y:45,asset:"alert_img",fade:u.params.interval.advise.pop}),h.flashLabel({scene:this._scene,layer:this._noticeLayer,x:200,y:55,asset:"advise_gate_img",fade:u.params.interval.advise.pop}),_.createPointerNode(this._scene,e.node,!0)),r=(this._backgroundLayer.append(t),new g.Sprite({scene:this._scene,x:e.node.x-u.params.view.alert,y:e.node.y-u.params.view.alert,anchorX:.5,anchorY:.5,src:this._scene.asset.getImageById("alert_img")})),s=(this._backgroundLayer.append(r),function(){t.destroy(),r.destroy()});e.node.onDestroyed.add(s);this._scene.asset.getAudioById("nc151497").play(),this._scene.setTimeout(function(){e.node.onDestroyed.remove(s),h.fadeOut({scene:a._scene,view:t,destroy:!0,fade:u.params.interval.graceDestroy}),h.fadeOut({scene:a._scene,view:r,destroy:!0,fade:u.params.interval.graceDestroy})},1e3*(u.params.interval.advise.pop-u.params.interval.graceDestroy))},r.prototype._setup=function(){var a=this;this._onUnlimit.add(function(e){e===t.orders.upgradeStation&&(a._upgrade=!0)})},e.AdvsiorView=r})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["balloon_view"] = function(g) {
			((e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BalloonView=void 0;var s=a("../models/parameters");function o(e){this._scene=e.scene,this._layer=e.layer,this._setup()}o.prototype._setup=function(){var i=this;this._scene.setInterval(function(){function e(){n.x=t+10*Math.sin(r),n.y+=l,n.modified(),l-=.1,r+=10*Math.PI/180,n.y<-s.params.view.balloon&&(n.destroy(),a.onUpdate.remove(e))}var a,o,n,t,l,r;i._layer.append((a=i._scene,o=i._layer,n=new g.FrameSprite({scene:a,src:a.asset.getImageById("balloon_img"),width:s.params.view.balloon,height:s.params.view.balloon,x:o.width*g.game.localRandom.generate(),y:o.height+2*s.params.view.balloon,anchorX:.5,anchorY:.5,frames:[Math.floor(s.params.animation.balloon*g.game.localRandom.generate())]}),t=n.x,r=l=0,a.onUpdate.add(e),n))},1e3*s.params.interval.balloon)},e.BalloonView=o})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["tutorial_handler"] = function(g) {
			((i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TutorialHandler=void 0;var e=t("../events/railway_built_event"),s=t("../events/railway_rollback_event"),o=t("../view/tutorial_view");function l(i){var t=this;this._oid=i.oid,this._scene=i.scene,this._view=new o.TutorialView(i),this._msgHandler=function(i){return t._onMessage(i)},this._scene.onMessage.add(this._msgHandler)}l.prototype.build=function(){this._unlimit?this.destroy():(this._view.build(),this._built=!0)},l.prototype.rollback=function(){this._view.rollback(),this._built=!1},l.prototype.unlimit=function(){this._built&&this.destroy(),this._unlimit=!0},l.prototype.destroy=function(){this._scene.onMessage.add(this._msgHandler),this._view.graceDestroy()},l.prototype._onMessage=function(i){e.isRailwayBuiltEvent(i)?e.RailwayBuiltEvent.parse(i).oid()===this._oid&&this.build():s.isRailwayedRollbackEvent(i)&&s.RailwayRollbackedEvent.parse(i).oid()===this._oid&&this.rollback()},i.TutorialHandler=l})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["tutorial_view"] = function(g) {
			((e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TutorialView=void 0;var i=s("../models/parameters"),t=s("./commons_view"),r=s("./effect");function a(e){this._scene=e.scene,this._backgroundLayer=e.backgroundLayer,this._tutorialLayer=e.tutorialLayer,this._tutorialGuideLayer=e.tutorialGuideLayer,this._oid=e.oid,this._rCursorCanceler=function(){},this._cCursorCanceler=function(){},this._railGuideCanceler=function(){},this._setup()}a.prototype.rollback=function(){this._rCursorCanceler(),this._cCursorCanceler(),this._railGuideCanceler(),this._rCursor.opacity=.5,this._rCursor.modified(),this._rCursor.show(),this._cCursor.opacity=.5,this._cCursor.modified(),this._cCursor.show(),this._railGuide.opacity=.5,this._railGuide.modified(),this._railGuide.show(),this._step1guide.opacity=.75,this._step1guide.modified()},a.prototype.build=function(){this._rCursorCanceler(),this._cCursorCanceler(),this._railGuideCanceler(),this._rCursorCanceler=r.fadeOut({scene:this._scene,view:this._rCursor,fade:i.params.interval.graceDestroy}),this._cCursorCanceler=r.fadeOut({scene:this._scene,view:this._cCursor,fade:i.params.interval.graceDestroy}),this._railGuideCanceler=r.fadeOut({scene:this._scene,view:this._railGuide,fade:i.params.interval.graceDestroy}),this._step1guide.opacity=.25,this._step1guide.modified()},a.prototype.graceDestroy=function(){this._rCursorCanceler(),this._cCursorCanceler(),this._railGuideCanceler(),r.fadeOut({scene:this._scene,view:this._rCursor,fade:i.params.interval.graceDestroy,destroy:!0}),r.fadeOut({scene:this._scene,view:this._cCursor,fade:i.params.interval.graceDestroy,destroy:!0}),r.fadeOut({scene:this._scene,view:this._railGuide,fade:i.params.interval.graceDestroy,destroy:!0}),r.fadeOut({scene:this._scene,view:this._step1guide,fade:i.params.interval.graceDestroy,destroy:!0}),r.fadeOut({scene:this._scene,view:this._step2guide,fade:i.params.interval.graceDestroy,destroy:!0})},a.prototype._setup=function(){this._railGuide=new g.E({scene:this._scene,opacity:.75}),this._tutorialLayer.append(this._railGuide),this._rCursor=t.createPointerNode(this._scene,{x:this._oid%2?7*i.params.view.game[0]/8:i.params.view.game[0]/8,y:1<this._oid?7*i.params.view.game[1]/8:i.params.view.game[1]/8},!0),this._rCursor.opacity=.5,this._rCursor.modified(),this._backgroundLayer.append(this._rCursor),this._railGuide.append(new g.Sprite({scene:this._scene,x:this._rCursor.x,y:this._rCursor.y+40,anchorX:.5,anchorY:.5,src:this._scene.asset.getImageById("tutorial_residence_img")})),this._cCursor=t.createPointerNode(this._scene,{x:i.params.view.game[0]/2,y:i.params.view.game[1]/2},!0),this._cCursor.opacity=.5,this._cCursor.modified(),this._backgroundLayer.append(this._cCursor),this._railGuide.append(new g.Sprite({scene:this._scene,x:this._cCursor.x,y:this._cCursor.y+(1<this._oid?-40:40),anchorX:.5,anchorY:.5,src:this._scene.asset.getImageById("tutorial_company_img")}));var e=[30,-30,-30,30],s=new g.Sprite({scene:this._scene,x:this._oid%2?11*i.params.view.game[0]/16:5*i.params.view.game[0]/16,y:1<this._oid?11*i.params.view.game[1]/16:5*i.params.view.game[1]/16,anchorX:.5,anchorY:.5,angle:e[this._oid],opacity:.5,src:this._scene.asset.getImageById("tutorial_step1_rail_img")}),s=(this._railGuide.append(s),this._railGuide.append(new g.Sprite({scene:this._scene,x:s.x,y:s.y-75,anchorX:.5,anchorY:.5,scaleX:this._oid%2?-1:1,angle:e[this._oid],opacity:.5,src:this._scene.asset.getImageById("tutorial_step1_arrow_img")})),this._step1guide=new g.E({scene:this._scene,opacity:.75}),this._tutorialGuideLayer.append(this._step1guide),-10),e=170;this._step1guide.append(new g.Sprite({scene:this._scene,x:s,y:e,src:this._scene.asset.getImageById("tutorial_step1_1_img")})),this._step1guide.append(new g.Sprite({scene:this._scene,x:s,y:200,src:this._scene.asset.getImageById("tutorial_step1_2_img")})),this._step1guide.append(new g.Sprite({scene:this._scene,x:s,y:230,src:this._scene.asset.getImageById("tutorial_step1_3_img")})),this._step2guide=new g.E({scene:this._scene,opacity:.75}),this._tutorialGuideLayer.append(this._step2guide),this._step2guide.append(new g.Sprite({scene:this._scene,x:s,y:270,src:this._scene.asset.getImageById("tutorial_step2_1_img")})),this._step2guide.append(new g.Sprite({scene:this._scene,x:s,y:300,src:this._scene.asset.getImageById("tutorial_step2_2_img")})),this._step2guide.append(new g.Sprite({scene:this._scene,x:s,y:330,src:this._scene.asset.getImageById("tutorial_step2_3_img")})),this._step2guide.append(new g.Sprite({scene:this._scene,x:30,y:370,src:this._scene.asset.getImageById("tutorial_step2_action_img")}))},e.TutorialView=a})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["chat_event"] = function(g) {
			!function(e){var r,n,t=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=(Object.defineProperty(e,"__esModule",{value:!0}),e.isChatEvent=e.ChatEvent=void 0,"CHAT"),t=(n=g.MessageEvent,t(a,n),a.parse=function(t){return e.isChatEvent(t)?new a(t.data.data):null},Object.defineProperty(a.prototype,"id",{get:function(){return this.data.data.id},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"typ",{get:function(){return this.data.data.typ},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"x",{get:function(){return this.data.data.x},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.data.data.y},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"frame",{get:function(){return this.data.data.frame},enumerable:!1,configurable:!0}),a);function a(t){return n.call(this,{code:o,data:t})||this}e.ChatEvent=t;e.isChatEvent=function(t){return t.data.code===o}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["chat_handler"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ChatHandler=void 0;var n=t("../events/chat_event"),a=t("../view/chat_view");function i(e){this._scene=e.scene,this._view=new a.ChatView(e),this._setup()}i.prototype.add=function(e,t,n,a){this._view.add(e,t,n,a)},i.prototype._setup=function(){var t=this;this._scene.onMessage.add(function(e){n.isChatEvent(e)&&(e=n.ChatEvent.parse(e),t.add(e.typ,e.x,e.y,e.frame))})},e.ChatHandler=i})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["chat_inserter_handler"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ChatInserterHandler=void 0;var i=t("../events/chat_event"),n=t("../models/parameters"),s=t("../models/trriger_model"),a=t("../scenes/game_scene"),r=t("../view/chat_inserter_view"),o=t("../view/commons_view"),h=t("../view/effect");function _(e){this.onSubmit=new s.Trigger,this.onCompleted=new s.Trigger,this._scene=e.scene,this._layer=e.layer,this._view=new r.ChatInserterView(e),this._hideCanceler=function(){},this._setup()}_.prototype.show=function(e){this._view.show(e),this._view.enable()},_.prototype.cancel=function(){this._submitting.hide(),this._view.cancel()},_.prototype._setup=function(){var t=this;this._view.onPointed.add(function(e){t._view.disable(),t._hideCanceler(),t._submitting.show(),a.playEffect(t._scene),g.game.raiseEvent(new i.ChatEvent(e)),t.onSubmit.fire(e.typ)}),this._submitting=o.createGuideLabel(this._scene,"chat_wait_img",20,80),this._submitting.hide(),this._layer.append(this._submitting),this._scene.onMessage.add(function(e){i.isChatEvent(e)&&(e=i.ChatEvent.parse(e)).id===g.game.selfId&&t._submitting.visible()&&(t._hideCanceler=h.fadeOut({scene:t._scene,view:t._submitting,fade:n.params.interval.graceDestroy}),t._view.cancel(),t.onCompleted.fire(e.typ))})},e.ChatInserterHandler=_})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["game_observer_tooltip_scene"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createObserverTooltip=void 0;var n=t("../handlers/chat_inserter_handler"),d=t("../models/parameters"),o=t("../view/commons_view"),p=t("../view/tooltips_observer_view"),l=t("./game_tooltip_scene");e.createObserverTooltip=function(c){var r=l.createRightLayer(c.scene),e=(r.append(new g.Sprite({scene:c.scene,x:-10,y:-40,src:c.scene.asset.getImageById("chat_description_img")})),o.createGameLayer(c.scene)),i=(c.scene.append(e),new n.ChatInserterHandler({scene:c.scene,layer:e})),s=[];return d.params.contents.chats.forEach(function(t,e){var e=new g.E({scene:c.scene,y:e*d.params.view.tooltip[1],width:d.params.view.tooltip[0],height:d.params.view.tooltip[1]}),n=(r.append(e),l.createTooltipButton(c.scene,void 0)),o=(e.append(n),l.createTooltipButton(c.scene,void 0)),a=(e.append(o),new p.TooltipObserverView({scene:c.scene,tooltip:e,exec:n,cancel:o,execText:"tooltip_chat_"+t+"_img"}));a.onStarted.add(function(){return i.show(t)}),a.onCanceled.add(function(){return i.cancel()}),i.onSubmit.add(function(e){e===t&&a.disable()}),i.onCompleted.add(function(){return a.complete()}),s.push(a)}),s.forEach(function(t){t.onStarted.add(function(){s.forEach(function(e){t!==e&&e.inactivate()})}),t.onCanceled.add(function(){s.forEach(function(e){t!==e&&e.activate()})}),t.onCompleted.add(function(){s.forEach(function(e){t!==e&&e.activate()})})}),r}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["chat_inserter_view"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ChatInserterView=void 0;var r=t("../models/parameters"),s=t("../models/trriger_model"),o=t("./commons_view");function i(e){this.onPointed=new s.Trigger,this._guideIcons={},this._cursors={},this._pointerID=null,this._scene=e.scene,this._layer=e.layer,this._setup()}i.prototype.show=function(e){this._guideIcons[e].show(),this._guideLabel.show(),this._typ=e},i.prototype.enable=function(){this._sensor.show(),this._pointerID=null},i.prototype.disable=function(){this._sensor.hide()},i.prototype.cancel=function(){this._sensor.hide(),this._guideIcons[this._typ].hide(),this._guideLabel.hide(),this._cursors[this._typ].hide(),this._typ=null},i.prototype._setup=function(){for(var s=this,i=(this._sensor=new g.E({scene:this._scene,width:this._layer.width,height:this._layer.height,touchable:!0,local:!0}),this._sensor.hide(),this._layer.append(this._sensor),this._guideLabel=o.createGuideLabel(this._scene,"chat_guide_img",170,40),this._guideLabel.hide(),this._layer.append(this._guideLabel),[]),e=0;e<r.params.animation.chat;e++)i.push(e);r.params.contents.chats.forEach(function(e){var t=new g.Sprite({scene:s._scene,src:s._scene.asset.getImageById("tooltip_chat_"+e+"_img"),y:10,hidden:!0}),t=(s._layer.append(t),s._guideIcons[e]=t,new g.FrameSprite({scene:s._scene,src:s._scene.asset.getImageById("chat_"+e+"_img"),hidden:!0,frames:i,width:r.params.view.chat,height:r.params.view.chat,anchorX:.5,anchorY:1}));s._layer.append(t),s._cursors[e]=t}),this._sensor.onPointDown.add(function(e){null===s._pointerID&&(s._frame=Math.floor(g.game.localRandom.generate()*r.params.animation.chat),s._cursors[s._typ].x=e.point.x,s._cursors[s._typ].y=e.point.y,s._cursors[s._typ].frameNumber=s._frame,s._cursors[s._typ].modified(),s._cursors[s._typ].show(),s._pointerID=e.pointerId)}),this._sensor.onPointMove.add(function(e){var t;s._pointerID===e.pointerId&&(t=e.point.x+e.startDelta.x,e=e.point.y+e.startDelta.y,(t=t<0?0:t)>r.params.view.game[0]&&(t=r.params.view.game[0]),(e=e<0?0:e)>r.params.view.game[1]&&(e=r.params.view.game[1]),s._cursors[s._typ].x=t,s._cursors[s._typ].y=e,s._cursors[s._typ].modified())}),this._sensor.onPointUp.add(function(e){s._pointerID===e.pointerId&&(s.onPointed.fire({id:g.game.selfId,typ:s._typ,x:s._cursors[s._typ].x,y:s._cursors[s._typ].y,frame:s._frame}),s._pointerID=null)})},e.ChatInserterView=i})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["chat_view"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ChatView=void 0;var r=t("../models/parameters"),n=t("./effect");function s(e){this._isFirst=!0,this._beginner=!0,this._scene=e.scene,this._layer=e.chatLayer,this._setup()}s.prototype.add=function(e,t,s,i){var a=this,h=((this._isFirst||this._beginner)&&(this._whatsthis.x=t,this._whatsthis.y=s-r.params.view.chat-5,this._whatsthis.show()),new g.FrameSprite({scene:this._scene,src:this._scene.asset.getImageById("chat_"+e+"_img"),x:t,y:s,anchorX:.5,anchorY:1,width:r.params.view.chat,height:r.params.view.chat,frames:[i]}));this._layer.append(h),this._scene.setTimeout(function(){n.fadeOut({scene:a._scene,view:h,fade:r.params.interval.graceDestroy,destroy:!0}),a._whatsthis.visible()&&n.fadeOut({scene:a._scene,view:a._whatsthis,fade:r.params.interval.graceDestroy})},1e3*r.params.interval.chat.chat),this._isFirst=!1},s.prototype._setup=function(){var e=this;this._whatsthis=new g.Sprite({scene:this._scene,src:this._scene.asset.getImageById("chat_whatsthis_img"),hidden:!0,anchorX:.5,anchorY:1}),this._layer.append(this._whatsthis),this._scene.setTimeout(function(){return e._beginner=!1},1e3*r.params.interval.chat.beginner)},e.ChatView=s})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["tooltips_observer_view"] = function(g) {
			((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TooltipObserverView=void 0;var i=t("../models/parameters"),o=t("../models/trriger_model"),n=t("../scenes/game_scene"),s=t("./effect"),c=t("./sprite_button");function h(e){this.onStarted=new o.Trigger,this.onCompleted=new o.Trigger,this.onCanceled=new o.Trigger,this._scene=e.scene,this._tooltip=e.tooltip,this._exec=e.exec,this._cancel=e.cancel,this._txtExec=e.execText,this._setup()}h.prototype.enable=function(){this._execButton.enable()},h.prototype.disable=function(){this._execButton.disable()},h.prototype.activate=function(){this._inactive=!1,this.show()},h.prototype.inactivate=function(){this._inactive=!0,this.hide()},h.prototype.show=function(){this._inactive||(this._executing?this._cancelButton.show():(this._execButton.show(),this._cooling&&this._coolDown.show()))},h.prototype.hide=function(){this._execButton.hide(),this._cancelButton.hide(),this._coolDown.hide()},h.prototype.complete=function(){var e=this,t=(this._executing=!1,this.disable(),this._execButton.show(),this._cancelButton.hide(),this._coolDown.show(),i.params.interval.chat.cooldown*g.game.fps),o=(this._cooling=!0,function(){t<0&&(e.enable(),e._coolDown.hide(),e._cooling=!1,e._scene.onUpdate.remove(o)),e._coolDown.frameNumber=Math.floor(t/(i.params.interval.chat.cooldown*g.game.fps)*i.params.animation.circleProgress),e._coolDown.modified(),t--});this._scene.onUpdate.add(o),this.onCompleted.fire()},h.prototype.cancel=function(){this._execButton.show(),this._cancelButton.hide(),this.onCanceled.fire(),this._executing=!1},h.prototype.destroy=function(){this._execButton.destroy(),this._cancelButton.destroy()},h.prototype._setup=function(){for(var e=this,t=(this._execButton=new c.SpriteButton({scene:this._scene,layer:this._tooltip,sprite:this._exec,label:this._txtExec,downRate:.1}),this._cancelButton=new c.SpriteButton({scene:this._scene,layer:this._tooltip,sprite:this._cancel,label:"prev_img",downRate:.1}),this._cancelButton.hide(),[]),o=0;o<i.params.animation.circleProgress;o++)t.push(o);this._coolDown=new g.FrameSprite({scene:this._scene,src:this._scene.asset.getImageById("circle_progress_img"),width:i.params.view.circleProgress,height:i.params.view.circleProgress,x:5,y:5,anchorX:.5,anchorY:.5,frames:t,hidden:!0}),this._tooltip.append(this._coolDown),this._execButton.onPushed.add(function(){e._execButton.hide(),e._cancelButton.show(),e.onStarted.fire(),e._executing=!0}),this._execButton.onDisabledPushed.add(function(){s.flashLabel({scene:e._scene,layer:e._tooltip,asset:"chat_error_cooldown_img",x:-25,y:-15,fade:.5}),n.playTooExpensive(e._scene)}),this._cancelButton.onPushed.add(function(){e._execButton.show(),e._cancelButton.hide(),e.onCanceled.fire(),e._executing=!1})},e.TooltipObserverView=h})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["fast_forward_handler"] = function(g) {
			((i,e)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FastForwardHandler=void 0;var r=e("../view/fast_forward_view");function t(i){this._scene=i.scene,this._ignoreFirstTick=i.ignoreFirstTick,this._view=new r.FastForwardView(i),this._setup()}t.prototype.forgrand=function(){this._view.forgrand()},t.prototype._setup=function(){var i,e=this;g.game.isSkipping&&(this._view.show(),i=!0),this._scene.onUpdate.add(function(){e._ignoreFirstTick?e._ignoreFirstTick=!1:(g.game.isSkipping&&!i&&(e._view.show(),i=!0),!g.game.isSkipping&&i&&(e._view.graceHide(),i=!1))})},i.FastForwardHandler=t})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["fast_forward_view"] = function(g) {
			((e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FastForwardView=void 0;var a=s("../models/parameters"),t=s("./effect");function i(e){this._scene=e.scene,this._shadeCanceler=function(){},this._iconCanceler=function(){},this._setup()}i.prototype.show=function(){this._shadeCanceler(),this._iconCanceler(),this._shade.touchable=!0,this._shade.modified(),this._shade.show(),this._icon.show()},i.prototype.graceHide=function(){this._shadeCanceler(),this._iconCanceler(),this._shade.touchable=!1,this._shade.modified(),this._shadeCanceler=t.fadeOut({scene:this._scene,view:this._shade,fade:a.params.interval.graceDestroy}),this._iconCanceler=t.fadeOut({scene:this._scene,view:this._icon,fade:a.params.interval.graceDestroy})},i.prototype.forgrand=function(){this._scene.remove(this._shade),this._scene.remove(this._icon),this._scene.append(this._shade),this._scene.append(this._icon)},i.prototype._setup=function(){for(var e=this,s=(this._shade=new g.FilledRect({scene:this._scene,width:g.game.width,height:g.game.height,cssColor:"#000000",opacity:.25,touchable:!0,local:!0,hidden:!0}),this._scene.append(this._shade),[]),t=0;t<a.params.animation.fastforward;t++)s.push(t);this._icon=new g.FrameSprite({scene:this._scene,src:this._scene.asset.getImageById("fast_forward_img"),width:a.params.view.fastforward,height:a.params.view.fastforward,x:g.game.width/2,y:g.game.height/2,anchorX:.5,anchorY:.5,frames:s,hidden:!0}),this._scene.append(this._icon);var i=0;this._scene.setInterval(function(){i>=a.params.animation.fastforward&&(i=0),e._icon.frameNumber=i,e._icon.modified(),i++},1e3*a.params.interval.fastforward)},e.FastForwardView=i})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["resolve_name_event"] = function(g) {
			!function(t){var o,n,e=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=(Object.defineProperty(t,"__esModule",{value:!0}),t.isResolveNameEndedEvent=t.ResolveNameEndedEvent=void 0,"RESOLVE_END"),e=(n=g.MessageEvent,e(a,n),a.parse=function(e){return t.isResolveNameEndedEvent(e)?new a(e.data.data):null},Object.defineProperty(a.prototype,"id",{get:function(){return this.data.data.id},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"error",{get:function(){return this.data.data.error},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"name",{get:function(){return this.data.data.name},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"oid",{get:function(){return this.data.data.oid},enumerable:!1,configurable:!0}),a);function a(e){return n.call(this,{code:r,data:e})||this}t.ResolveNameEndedEvent=e;t.isResolveNameEndedEvent=function(e){return e.data.code===r}}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["a_e_z_0"] = function(g) {
			(e=>{function r(){}Object.defineProperty(e,"__esModule",{value:!0}),r.asHoverable=function(e,r){return e.hoverable=!0,e.touchable=!0,e.hovered=e.hovered||new g.Trigger,e.unhovered=e.unhovered||new g.Trigger,r&&r.cursor&&(e.cursor=r.cursor),e},r.asUnhoverable=function(e){return delete e.hoverable,e.hovered&&!e.hovered.destroyed()&&(e.hovered.destroy(),delete e.hovered),e.unhovered&&!e.unhovered.destroyed()&&(e.unhovered.fire(),e.unhovered.destroy(),delete e.unhovered),e},e.Converter=r})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["a_e_z_2"] = function(g) {
			((e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),r=r("./Converter"),e.Converter=r.Converter})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["a_e_z_3"] = function(g) {
			(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parse=void 0,e.parse=function(e){for(var r=/^((?:[^\\{]|\\+.)*?)({(?:[^\\}]|\\+.)*?})([\s\S]*)/,a=[];0<e.length;){var p=e.match(r);if(null===p){a.push(e.replace(/\\{/g,"{").replace(/\\}/g,"}"));break}var t=p[1],l=p[2],p=(e=p[3],0<t.length&&a.push(t.replace(/\\{/g,"{").replace(/\\}/g,"}")),JSON.parse(l.replace(/\\/g,"\\\\")));if(!p.hasOwnProperty("rt")||!p.hasOwnProperty("rb"))throw g.ExceptionFactory.createTypeMismatchError("parse","RubyFragment");p.rt=p.rt.replace(/\\{/g,"{").replace(/\\}/g,"}"),p.rb=p.rb.replace(/\\{/g,"{").replace(/\\}/g,"}"),p.text=l,a.push(p)}return a}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["a_e_z_4"] = function(g) {
			(t=>{function i(t,i,e,h,r,s){this.text=t.text,this.fragment=t,this.width=i,this.rbWidth=e,this.rtWidth=h,this.glyphs=r,this.rubyGlyphs=s}Object.defineProperty(t,"__esModule",{value:!0}),t.RubyFragmentDrawInfo=t.StringDrawInfo=void 0,t.StringDrawInfo=function(t,i,e){this.text=t,this.width=i,this.glyphs=e},t.RubyFragmentDrawInfo=i})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["a_e_z_5"] = function(g) {
			!function(t,e){var r,i,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),c=t("./RubyParser"),l=t("./FragmentDrawInfo"),o=t("./DefaultRubyParser"),t=(i=g.CacheableE,n(s,i),s.prototype.invalidate=function(){this._invalidateSelf(),i.prototype.invalidate.call(this)},s.prototype.renderCache=function(t){if(this.rubyEnabled||0!==this.fontSize){t.save();for(var e=0,i=0;i<this._lines.length;++i)0<this._lines[i].width&&0<this._lines[i].height&&t.drawImage(this._lines[i].surface,0,0,this._lines[i].width,this._lines[i].height,this._offsetX(this._lines[i].width),e),e+=this._lines[i].height+this.lineGap;this.textColor&&(t.setCompositeOperation("source-atop"),t.fillRect(0,0,this._lineBreakWidth,this.height,this.textColor)),t.restore()}},s.prototype.destroy=function(){this._destroyLines(),i.prototype.destroy.call(this)},s.prototype.calculateCacheSize=function(){return{width:Math.ceil(this._lines.reduce(function(t,e){return Math.max(t,e.width)},this.width)),height:this.height}},Object.defineProperty(s.prototype,"lineCount",{get:function(){return this._lines.length},enumerable:!1,configurable:!0}),s.prototype._offsetX=function(t){switch(this.textAlign){case"left":case g.TextAlign.Left:return 0;case"right":case g.TextAlign.Right:return this._lineBreakWidth-t;case"center":case g.TextAlign.Center:return(this._lineBreakWidth-t)/2;default:return 0}},s.prototype._destroyLines=function(){for(var t=0;t<this._lines.length;t++)this._lines[t].surface&&!this._lines[t].surface.destroyed()&&this._lines[t].surface.destroy();this._lines=void 0},s.prototype._invalidateSelf=function(){if(this.fontSize<0)throw g.ExceptionFactory.createAssertionError("Label#_invalidateSelf: fontSize must not be negative.");if(this.lineGap<-1*this.fontSize)throw g.ExceptionFactory.createAssertionError("Label#_invalidateSelf: lineGap must be greater than -1 * fontSize.");this._beforeWidth!==this.width&&(this._lineBreakWidth=this.width),(this._beforeText!==this.text||this._beforeFontSize!==this.fontSize||this._beforeFont!==this.font||this._beforeLineBreak!==this.lineBreak||this._beforeWidth!==this.width&&!0===this._beforeLineBreak||this._beforeTextAlign!==this.textAlign||this._beforeRubyEnabled!==this.rubyEnabled||this._beforeFixLineGap!==this.fixLineGap||this._beforeTrimMarginTop!==this.trimMarginTop||this._beforeWidthAutoAdjust!==this.widthAutoAdjust||this._isDifferentRubyOptions(this._beforeRubyOptions,this.rubyOptions))&&this._updateLines(),this.widthAutoAdjust&&(this.width=Math.ceil(this._lines.reduce(function(t,e){return Math.max(t,e.width)},0)));for(var t=this.lineGap*(this._lines.length-1),e=0;e<this._lines.length;e++)t+=this._lines[e].height;this.height=t,this._beforeText=this.text,this._beforeTextAlign=this.textAlign,this._beforeFontSize=this.fontSize,this._beforeLineBreak=this.lineBreak,this._beforeFont=this.font,this._beforeWidth=this.width,this._beforeRubyEnabled=this.rubyEnabled,this._beforeFixLineGap=this.fixLineGap,this._beforeTrimMarginTop=this.trimMarginTop,this._beforeWidthAutoAdjust=this.widthAutoAdjust,this._beforeRubyOptions.rubyFontSize=this.rubyOptions.rubyFontSize,this._beforeRubyOptions.rubyFont=this.rubyOptions.rubyFont,this._beforeRubyOptions.rubyGap=this.rubyOptions.rubyGap,this._beforeRubyOptions.rubyAlign=this.rubyOptions.rubyAlign},s.prototype._updateLines=function(){for(var t=this.rubyEnabled?this.rubyParser(this.text.replace(/\r\n|\n/g,"\r")):[this.text],t=c.flatmap(t,function(t){return"string"!=typeof t?t:t.replace(/\r\n|\n/g,"\r").match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}),e=this._divideToLines(t),i=[],r=this._beforeFontSize===this.fontSize&&this._beforeFont===this.font&&!this._isDifferentRubyOptions(this._beforeRubyOptions,this.rubyOptions),n=0;n<e.length;n++){var o=e[n],s=this._lines[n];r&&void 0!==s&&o.sourceText===s.sourceText&&o.width===s.width&&o.height===s.height?i.push(s):(s&&s.surface&&!s.surface.destroyed()&&s.surface.destroy(),this._drawLineInfoSurface(o),i.push(o))}for(n=i.length;n<this._lines.length;n++)(s=this._lines[n]).surface&&!s.surface.destroyed()&&s.surface.destroy();this._lines=i},s.prototype._drawLineInfoSurface=function(t){for(var e=t.fragmentDrawInfoArray,i=this._calcRubyHeightInfo(e),r=this.scene.game.resourceFactory.createSurface(Math.ceil(t.width),Math.ceil(t.height)),n=r.renderer(),o=(n.begin(),n.save(),i.hasRubyFragmentDrawInfo||this.fixLineGap?this.rubyOptions.rubyGap+i.maxRubyGlyphHeightWithOffsetY:0),s=t.minMinusOffsetY,h=0;h<e.length;h++){var a=e[h];a instanceof l.RubyFragmentDrawInfo?this._drawRubyFragmentDrawInfo(n,a,o-s,-i.minRubyMinusOffsetY):a instanceof l.StringDrawInfo&&this._drawStringGlyphs(n,this.font,a.glyphs,this.fontSize,0,o-s,0),n.translate(a.width,0)}n.restore(),n.end(),t.surface=r},s.prototype._drawStringGlyphs=function(t,e,i,r,n,o,s){void 0===s&&(s=0),t.save(),t.translate(n,o);for(var h=0;h<i.length;h++){var a=i[h],u=r/e.size,f=a.advanceWidth*u;(a.isSurfaceValid||(a=this._createGlyph(a.code,e)))&&(t.save(),t.transform([u,0,0,u,0,0]),0<a.width&&0<a.height&&t.drawImage(a.surface,a.x,a.y,a.width,a.height,a.offsetX,a.offsetY),t.restore(),t.translate(f+s,0))}t.restore()},s.prototype._drawRubyFragmentDrawInfo=function(t,e,i,r){var n,o,s,h,a=e.fragment,u=("rubyFontSize"in a?a:this.rubyOptions).rubyFontSize,f=("rubyAlign"in a?a:this.rubyOptions).rubyAlign,a=("rubyFont"in a?a:this.rubyOptions).rubyFont,y=e.rbWidth<e.rtWidth,l=e.width,b=e.rtWidth,p=e.rbWidth;switch(f){case c.RubyAlign.Center:h=s=0,n=y?0:(l-b)/2,o=y?(l-p)/2:0;break;case c.RubyAlign.SpaceAround:s=0<e.rubyGlyphs.length?(l-b)/e.rubyGlyphs.length:0,h=0,n=y?0:s/2,o=y?(l-p)/2:0;break;default:throw g.ExceptionFactory.createAssertionError("Label#_drawRubyFragmentDrawInfo: unknown rubyAlign.")}this._drawStringGlyphs(t,this.font,e.glyphs,this.fontSize,o,i,h),this._drawStringGlyphs(t,a,e.rubyGlyphs,u,n,r,s)},s.prototype._calcRubyHeightInfo=function(t){for(var e,i=this.rubyOptions.rubyFontSize,r=0,n=this.rubyOptions.rubyGap,o=!1,s=0,h=0;h<t.length;h++){var a,u,f,y=t[h];y instanceof l.RubyFragmentDrawInfo&&((u=y.fragment).rubyFontSize>i&&(i=u.rubyFontSize),n<u.rubyGap&&(n=u.rubyGap),a=(u.rubyFontSize||this.rubyOptions.rubyFontSize)/(u.rubyFont?u:this.rubyOptions).rubyFont.size,f=Math.max.apply(Math,y.rubyGlyphs.map(function(t){return 0<t.offsetY?t.height+t.offsetY:t.height})),y=Math.min.apply(Math,y.rubyGlyphs.map(function(t){return 0<t.offsetY?t.offsetY:0})),r<f*a&&(r=f*a),u=u.rubyFont||this.rubyOptions.rubyFont,u=this._calcStandardOffsetY(u),s<(f=(f-Math.min(y,u))*a)&&(s=f,e=Math.min(y,u)*a),o=!0)}return{maxRubyFontSize:i,maxRubyGlyphHeightWithOffsetY:r=0===r?this.rubyOptions.rubyFontSize:r,minRubyMinusOffsetY:this.trimMarginTop?e:0,maxRubyGap:n,hasRubyFragmentDrawInfo:o}},s.prototype._divideToLines=function(t){for(var e={resultLines:[],currentStringDrawInfo:new l.StringDrawInfo("",0,[]),currentLineInfo:{sourceText:"",fragmentDrawInfoArray:[],width:0,height:0,minMinusOffsetY:0,surface:void 0},reservedLineBreakPosition:null},i=0;i<t.length;i++)this._addFragmentToState(e,t,i);return this._flushCurrentStringDrawInfo(e),this._feedLine(e),e.resultLines},s.prototype._addFragmentToState=function(t,e,i){var r,n,o=e[i];null!==t.reservedLineBreakPosition&&t.reservedLineBreakPosition--,0===t.reservedLineBreakPosition&&(this._flushCurrentStringDrawInfo(t),this._feedLine(t),t.reservedLineBreakPosition=null),"string"==typeof o&&"\r"===o?(this._flushCurrentStringDrawInfo(t),this._feedLine(t)):"string"==typeof o?(r=g.Util.charCodeAt(o,0))&&(r=this._createGlyph(r,this.font))&&(n=this.fontSize/this.font.size,n=r.advanceWidth*n,this._needBreakLine(t,n)&&this._breakLine(t,e,i),t.currentStringDrawInfo.width+=n,t.currentStringDrawInfo.glyphs.push(r),t.currentStringDrawInfo.text+=o):(n=this._createRubyFragmentDrawInfo(o)).width<=0||(this._flushCurrentStringDrawInfo(t),this._needBreakLine(t,n.width)&&this._breakLine(t,e,i),t.currentLineInfo.width+=n.width,t.currentLineInfo.fragmentDrawInfoArray.push(n),t.currentLineInfo.sourceText+=o.text)},s.prototype._createStringGlyph=function(t,e){for(var i=[],r=0;r<t.length;r++){var n=g.Util.charCodeAt(t,r);n&&(n=this._createGlyph(n,e))&&i.push(n)}return i},s.prototype._createGlyph=function(t,e){e=e.glyphForCharacter(t);return e||(t=4294901760&t?String.fromCharCode((4294901760&t)>>>16,65535&t):String.fromCharCode(t),console.warn("Label#_invalidateSelf(): failed to get a glyph for '"+t+"' (BitmapFont might not have the glyph or DynamicFont might create a glyph larger than its atlas).")),e},s.prototype._createRubyFragmentDrawInfo=function(t){var e=this._createStringGlyph(t.rb,this.font),i=this._createStringGlyph(t.rt,this.rubyOptions.rubyFont),r=("rubyFont"in t?t:this.rubyOptions).rubyFont,n=("rubyFontSize"in t?t:this.rubyOptions).rubyFontSize,o=this.fontSize/this.font.size,n=n/r.size,r=0<e.length?e.map(function(t){return t.advanceWidth}).reduce(function(t,e){return t+e})*o:0,o=0<i.length?i.map(function(t){return t.advanceWidth}).reduce(function(t,e){return t+e})*n:0;return new l.RubyFragmentDrawInfo(t,o<r?r:o,r,o,e,i)},s.prototype._flushCurrentStringDrawInfo=function(t){0<t.currentStringDrawInfo.width&&(t.currentLineInfo.fragmentDrawInfoArray.push(t.currentStringDrawInfo),t.currentLineInfo.width+=t.currentStringDrawInfo.width,t.currentLineInfo.sourceText+=t.currentStringDrawInfo.text),t.currentStringDrawInfo=new l.StringDrawInfo("",0,[])},s.prototype._feedLine=function(t){var e=this.fontSize/this.font.size,i=1/0,r=0,n=0,o=(t.currentLineInfo.fragmentDrawInfoArray.forEach(function(t){t.glyphs.forEach(function(t){r>t.offsetY&&(r=t.offsetY),t.offsetY<i&&(i=t.offsetY);t=0<t.offsetY?t.height+t.offsetY:t.height;n<t&&(n=t)})}),r*=e,n=0<t.currentLineInfo.fragmentDrawInfoArray.length?n*e-r:this.fontSize,n=Math.ceil(n),this._calcRubyHeightInfo(t.currentLineInfo.fragmentDrawInfoArray));t.currentLineInfo.height=o.hasRubyFragmentDrawInfo||this.fixLineGap?n+o.maxRubyGlyphHeightWithOffsetY+o.maxRubyGap:n,t.currentLineInfo.minMinusOffsetY=r,this.trimMarginTop&&(o=Math.min(i,this._calcStandardOffsetY(this.font))*e,t.currentLineInfo.height-=o,t.currentLineInfo.minMinusOffsetY+=o),t.resultLines.push(t.currentLineInfo),t.currentLineInfo={sourceText:"",fragmentDrawInfoArray:[],width:0,height:0,minMinusOffsetY:0,surface:void 0}},s.prototype._needBreakLine=function(t,e){return this.lineBreak&&0<e&&null===t.reservedLineBreakPosition&&t.currentLineInfo.width+t.currentStringDrawInfo.width+e>this._lineBreakWidth&&0<t.currentLineInfo.width+t.currentStringDrawInfo.width},s.prototype._isDifferentRubyOptions=function(t,e){return t.rubyFontSize!==e.rubyFontSize||t.rubyFont!==e.rubyFont||t.rubyGap!==e.rubyGap||t.rubyAlign!==e.rubyAlign},s.prototype._calcStandardOffsetY=function(t){return t.glyphForCharacter("M".charCodeAt(0)).offsetY},s.prototype._breakLine=function(t,e,i){if(this.lineBreakRule){var r=this.lineBreakRule(e,i)-i;if(0===r)this._flushCurrentStringDrawInfo(t),this._feedLine(t);else if(0<r)t.reservedLineBreakPosition=r;else{this._flushCurrentStringDrawInfo(t);for(var n=[];r<0;){var o,s,h,a=t.currentLineInfo.fragmentDrawInfoArray,u=a[a.length-1];u instanceof l.RubyFragmentDrawInfo?(r++,n.push(u),a.pop()):-r>=u.text.length?(r+=u.text.length,n.push(u),a.pop()):(a=u.glyphs.splice(r),o=this.fontSize/this.font.size,s=a.reduce(function(t,e){return e.advanceWidth*o+t},0),u.width-=s,h=u.text.substring(u.text.length+r),u.text=u.text.substring(0,u.text.length+r),n.push(new l.StringDrawInfo(h,s,a)),r=0)}var f=0,y="",e=(n.forEach(function(t){f+=t.width,y+=t.text}),t.currentLineInfo.width-=f,t.currentLineInfo.sourceText);t.currentLineInfo.sourceText=e.substr(0,e.length-y.length),this._feedLine(t),t.currentLineInfo.fragmentDrawInfoArray=n,t.currentLineInfo.width=f,t.currentLineInfo.sourceText=y}}else this._flushCurrentStringDrawInfo(t),this._feedLine(t)},s);function s(t){var e=i.call(this,t)||this;return e.text=t.text,e.font=t.font,e.fontSize=t.fontSize||t.font.size,e._lineBreakWidth=t.width,e.lineBreak=!("lineBreak"in t)||t.lineBreak,e.lineGap=t.lineGap||0,e.textAlign="textAlign"in t?t.textAlign:"left",e.textColor=t.textColor,e.trimMarginTop="trimMarginTop"in t&&t.trimMarginTop,e.widthAutoAdjust="widthAutoAdjust"in t&&t.widthAutoAdjust,e.rubyEnabled=!("rubyEnabled"in t)||t.rubyEnabled,e.fixLineGap="fixLineGap"in t&&t.fixLineGap,e.rubyParser="rubyParser"in t?t.rubyParser:o.parse,e.lineBreakRule="lineBreakRule"in t?t.lineBreakRule:void 0,t.rubyOptions||(t.rubyOptions={}),e.rubyOptions=t.rubyOptions,e.rubyOptions.rubyFontSize="rubyFontSize"in t.rubyOptions?t.rubyOptions.rubyFontSize:t.fontSize/2,e.rubyOptions.rubyFont="rubyFont"in t.rubyOptions?t.rubyOptions.rubyFont:e.font,e.rubyOptions.rubyGap="rubyGap"in t.rubyOptions?t.rubyOptions.rubyGap:0,e.rubyOptions.rubyAlign="rubyAlign"in t.rubyOptions?t.rubyOptions.rubyAlign:c.RubyAlign.SpaceAround,e._lines=[],e._beforeText=void 0,e._beforeTextAlign=void 0,e._beforeFontSize=void 0,e._beforeLineBreak=void 0,e._beforeFont=void 0,e._beforeWidth=void 0,e._beforeRubyEnabled=void 0,e._beforeFixLineGap=void 0,e._beforeTrimMarginTop=void 0,e._beforeWidthAutoAdjust=void 0,e._beforeRubyOptions={},e._invalidateSelf(),e}e.exports=t}((g.module.exports,g.module.require),g.module);
		};



		window.gLocalAssetContainer["a_e_z_6"] = function(g) {
			(e=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.flatmap=e.RubyAlign=void 0,(r=e.RubyAlign||(e.RubyAlign={}))[r.Center=0]="Center",r[r.SpaceAround=1]="SpaceAround",e.flatmap=function(e,r){return Array.prototype.concat.apply([],e.map(r))}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["a_e_z_7"] = function(g) {
			((e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaultRubyParser=e.RubyAlign=void 0,e.Label=r("./Label"),e.FragmentDrawInfo=r("./FragmentDrawInfo"),e.RubyParser=r("./RubyParser"),e.RubyAlign=e.RubyParser.RubyAlign,r=r("./DefaultRubyParser"),e.defaultRubyParser=r.parse})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["a_e_z_8"] = function(g) {
			(e=>{Object.defineProperty(e,"__esModule",{value:!0})})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["a_e_z_9"] = function(g) {
			!function(e,t){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){e[n=void 0===n?i:n]=t[i]}),i=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),i(t("./application"),e),i(t("./messages"),e),i(t("./session"),e)}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["a_e_z_10"] = function(g) {
			(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.COEMessages=void 0,e.COEMessages={SessionStarted:"start",SessionClosed:"end",ChildSessionStart:"child_start",ChildSessionEnd:"child_end"}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["a_e_z_11"] = function(g) {
			(e=>{Object.defineProperty(e,"__esModule",{value:!0})})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["a_e_z_12"] = function(g) {
			!function(e,t){var k=this&&this.__assign||function(){return(k=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},F=(Object.defineProperty(e,"__esModule",{value:!0}),e.FallbackDialog=void 0,t("@akashic-extension/akashic-hover-plugin")),H=t("@akashic-extension/akashic-hover-plugin/lib/HoverPlugin");function I(e,t,n,i,a){for(var o=n-i|0;o<=Math.ceil(n+i);++o){var r=i*Math.cos(Math.asin((n-o)/i));e.fillRect(t-r,o,2*r,1,a)}}function U(e,t,n){e=g.game.resourceFactory.createSurface(Math.ceil(e),Math.ceil(t)),t=e.renderer();return t.begin(),n(t),t.end(),e}function D(i,a){var o=new g.Trigger,e=1e3/g.game.fps,r=0,s=0,c=a[0],d=!1;function t(e){(s+=e)>c.duration&&((d=++r>=a.length)?(s=c.duration,i.scene.onUpdate.addOnce(o.fire,o)):(s-=c.duration,c=a[r]));var e=Math.min(1,s/c.duration),t=c.scale,n=c.opacity;return t&&(i.scaleX=i.scaleY=t[0]+(t[1]-t[0])*e),n&&(i.opacity=n[0]+(n[1]-n[0])*e),i.modified(),d}return t(0),i.onUpdate.add(function(){return t(e)}),o}function L(e){var t,n,i,a,o,r,s,c,d,h,u,l,p,f,P,m,b,v,y,w,O,_,x,S,E,C,R=this;function M(e){return new g.Label(k({scene:b,font:p,local:!0,textAlign:g.TextAlign.Center,widthAutoAdjust:!1},e))}this.onEnd=new g.Trigger,this.isHoverPluginStarted=!1,this.timer=null,L.isSupported()&&(O=(t=g.game).width,v=t.height,n=O/1280,i=Math.round(32*n),a=Math.round(28*n),c=360*n,h="#4a8de1",u="#fff",l=960*n|0,y=(o=80*n)+1.3*i*2+(r=32*n)+(a+1.3*a)+(s=42*n)+(d=82*n)+72*n|0,p=new g.DynamicFont({game:g.game,fontFamily:g.FontFamily.SansSerif,size:i,fontWeight:g.FontWeight.Bold,fontColor:"#252525"}),E=-2&Math.ceil(32*n),f=E/2,w=U(E,E,function(e){I(e,f,f,f,u)}),P=U(E,E,function(e){I(e,f,f,f,h)}),m=U(E,E,function(e){I(e,f,f,f,h),I(e,f,f,12*n,u)}),b=this.scene=t.scene(),E=this.bgRect=new g.FilledRect({scene:b,local:!0,width:O,height:v,cssColor:"rgba(0, 0, 0, 0.5)",touchable:!0}),O=0,(v=this.dialogPane=new g.Pane({scene:b,local:!0,width:l,height:y,anchorX:.5,anchorY:.5,x:t.width/2|0,y:t.height/2|0,backgroundImage:w,backgroundEffector:new g.NinePatchSurfaceEffector(t,w.width/2-1),parent:E})).append(M({x:y=80*n|0,y:O+=o+.3*i|0,text:"",fontSize:i,width:w=800*n|0})),v.append(M({x:y,y:O+=1.3*i|0,text:""+e+"",fontSize:i,width:w})),v.append(M({x:y,y:O+=i+r|0,text:"",fontSize:a,width:w})),v.append(M({x:y,y:O+=1.3*a|0,text:"",fontSize:a,width:w})),O+=a+s|0,_=new g.Pane({scene:b,local:!0,width:c,height:d,x:l/2,y:O+d/2,anchorX:.5,anchorY:.5,backgroundImage:m,backgroundEffector:new g.NinePatchSurfaceEffector(t,m.width/2-1),parent:b,touchable:!0}),v.append(_),x=this.buttonLabel=M({x:0,y:(d-i)/2-5*n,text:"OK (15)",fontSize:i,width:c,textColor:h}),_.append(x),S=function(){_.backgroundImage=P,_.invalidate(),x.textColor=u,x.invalidate()},E=F.Converter.asHoverable(_),C=!1,E.hovered.add(function(){S(),C||(C=!0,D(_,[{duration:16,scale:[1,.9]},{duration:16,scale:[.9,1.1]},{duration:33,scale:[1.1,1]}]).add(function(){return C=!1}))}),E.unhovered.add(function(){_.backgroundImage=m,_.invalidate(),x.textColor=h,x.invalidate()}),_.onPointDown.add(S),_.onPointUp.add(function(){R.end()}),t.operationPluginManager.plugins[L.HOVER_PLUGIN_OPCODE]||t.operationPluginManager.register(H,L.HOVER_PLUGIN_OPCODE))}L.isSupported=function(){return"undefined"!=typeof window&&.4<=g.game.height/g.game.width&&H.isSupported()},L.prototype.start=function(e){var t=this,n=g.game,i=this.scene;n.scene()===i&&(n.onSceneChange.add(this._disablePluginOnSceneChange,this),n.operationPluginManager.start(L.HOVER_PLUGIN_OPCODE),this.isHoverPluginStarted=!0,D(this.dialogPane,[{duration:100,scale:[.5,1.1],opacity:[.5,1]},{duration:100,scale:[1.1,1],opacity:[1,1]}]),i.append(this.bgRect),i.onUpdate.add(this._assureFrontmost,this),this.timer=i.setInterval(function(){--e,t.buttonLabel.text="OK ("+e+")",t.buttonLabel.invalidate(),e<=0&&t.end()},1e3))},L.prototype.end=function(){var t=this;this.timer&&(this.scene.clearInterval(this.timer),this.timer=null),this.scene.onUpdate.remove(this._assureFrontmost,this),this.isHoverPluginStarted&&(g.game.operationPluginManager.stop(L.HOVER_PLUGIN_OPCODE),this.isHoverPluginStarted=!1),D(this.dialogPane,[{duration:100,opacity:[1,0],scale:[1,.8]}]),D(this.bgRect,[{duration:100,opacity:[1,0]}]).add(function(){var e=t.onEnd;t.onEnd=null,t.bgRect.destroy(),t.bgRect=null,t.dialogPane=null,t.scene=null,e.fire()})},L.prototype._disablePluginOnSceneChange=function(e){if(e!==this.scene)return g.game.operationPluginManager.stop(L.HOVER_PLUGIN_OPCODE),!0},L.prototype._assureFrontmost=function(){g.game._pushPostTickTask(this._doAssureFrontmost,this)},L.prototype._doAssureFrontmost=function(){var e=this.scene;e&&g.game.scene()!==e||e.children[e.children.length-1]!==this.bgRect&&(this.bgRect.remove(),e.append(this.bgRect))},L.HOVER_PLUGIN_OPCODE=-1e3,e.FallbackDialog=L}(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["a_e_z_13"] = function(g) {
			((e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resolvePlayerInfo=void 0;var t=n("./FallbackDialog"),a="undefined"!=typeof window?window.RPGAtsumaru:void 0;function o(){return""+(1e3*Math.random()|0)}var l=[{isSupported:function(){return!!(a&&a.user&&a.user.getSelfInformation)},resolve:function(e,n){a.user.getSelfInformation().then(function(e){n(null,{name:e.name,userData:{accepted:!0,premium:e.isPremium}})},function(e){n(e,null)})}},{isSupported:function(){var e=g.game.external.coeLimited;return!!(e&&e.startLocalSession&&e.exitLocalSession)},resolve:function(e,n){var a=g.game.playId+"__player-info-resolver",r=g.game.scene(),t=r.setTimeout(function(){n(t=null,{name:null,userData:{accepted:!1,premium:!1}}),g.game.external.coeLimited.exitLocalSession(a,{needsResult:!0})},1e3*(e+2));g.game.external.coeLimited.startLocalSession({sessionId:a,applicationName:"player-info-resolver",localEvents:[[32,0,":akashic",{type:"start",parameters:{limitSeconds:e}}]],messageHandler:function(e){null!=t&&(r.clearTimeout(t),n(null,e.result))}})}},{isSupported:function(){var e=g.game.external.atsumaru;return!(!e||!e.getSelfInformationProto)},resolve:function(e,a){g.game.external.atsumaru.getSelfInformationProto({callback:function(e,n){null!=e?a(new Error(e),null):n&&n.login?a(null,{name:n.name,userData:{accepted:!0,premium:n.premium}}):a(null,{name:o(),userData:{accepted:!1,premium:!1}})}})}},{isSupported:t.FallbackDialog.isSupported,resolve:function(e,n){var a=o(),r=new t.FallbackDialog(a);r.start(e),r.onEnd.addOnce(function(){n(null,{name:a,userData:{accepted:!1,premium:!1}})})}},{isSupported:function(){return!0},resolve:function(e,n){n(null,{name:"",userData:{accepted:!1,premium:!1,unnamed:!0}})}}],u=!1;e.resolvePlayerInfo=function(a,r){if(u)null!=r&&r(new Error("Last processing has not yet been completed."),null);else{var n=function(e,n){u=!1,null!=r&&r(e,n),e||(e=n.name,n=n.userData,!a)||!a.raises||n&&n.unnamed||g.game.raiseEvent(new g.PlayerInfoEvent({id:g.game.selfId,name:e,userData:n}))},e=a&&a.limitSeconds?a.limitSeconds:15,t=((e,n)=>{for(var a=0;a<e.length;++a)if(n(e[a]))return e[a]})(l,function(e){return e.isSupported()});try{u=!0,t.resolve(e,n)}catch(e){n(e)}}}})(g.module.exports,g.module.require);
		};



		window.gLocalAssetContainer["number0_glyphs"] = "{%22map%22:{%2232%22:{%22x%22:132,%22y%22:0,%22width%22:22,%22height%22:27},%2243%22:{%22x%22:154,%22y%22:0,%22width%22:22,%22height%22:27},%2245%22:{%22x%22:176,%22y%22:0,%22width%22:22,%22height%22:27},%2246%22:{%22x%22:198,%22y%22:0,%22width%22:22,%22height%22:27},%2248%22:{%22x%22:242,%22y%22:0,%22width%22:22,%22height%22:27},%2249%22:{%22x%22:264,%22y%22:0,%22width%22:22,%22height%22:27},%2250%22:{%22x%22:286,%22y%22:0,%22width%22:22,%22height%22:27},%2251%22:{%22x%22:308,%22y%22:0,%22width%22:22,%22height%22:27},%2252%22:{%22x%22:330,%22y%22:0,%22width%22:22,%22height%22:27},%2253%22:{%22x%22:352,%22y%22:0,%22width%22:22,%22height%22:27},%2254%22:{%22x%22:374,%22y%22:0,%22width%22:22,%22height%22:27},%2255%22:{%22x%22:396,%22y%22:0,%22width%22:22,%22height%22:27},%2256%22:{%22x%22:418,%22y%22:0,%22width%22:22,%22height%22:27},%2257%22:{%22x%22:440,%22y%22:0,%22width%22:22,%22height%22:27},%2258%22:{%22x%22:110,%22y%22:0,%22width%22:22,%22height%22:27},%2263%22:{%22x%22:220,%22y%22:0,%22width%22:22,%22height%22:27},%2267%22:{%22x%22:22,%22y%22:0,%22width%22:22,%22height%22:27},%2269%22:{%22x%22:88,%22y%22:0,%22width%22:22,%22height%22:27},%2279%22:{%22x%22:44,%22y%22:0,%22width%22:22,%22height%22:27},%2282%22:{%22x%22:66,%22y%22:0,%22width%22:22,%22height%22:27},%2283%22:{%22x%22:0,%22y%22:0,%22width%22:22,%22height%22:27}},%22height%22:27}";



		window.gLocalAssetContainer["number1_glyphs"] = "{%22map%22:{%2232%22:{%22x%22:132,%22y%22:0,%22width%22:22,%22height%22:27},%2243%22:{%22x%22:154,%22y%22:0,%22width%22:22,%22height%22:27},%2245%22:{%22x%22:176,%22y%22:0,%22width%22:22,%22height%22:27},%2246%22:{%22x%22:198,%22y%22:0,%22width%22:22,%22height%22:27},%2248%22:{%22x%22:242,%22y%22:0,%22width%22:22,%22height%22:27},%2249%22:{%22x%22:264,%22y%22:0,%22width%22:22,%22height%22:27},%2250%22:{%22x%22:286,%22y%22:0,%22width%22:22,%22height%22:27},%2251%22:{%22x%22:308,%22y%22:0,%22width%22:22,%22height%22:27},%2252%22:{%22x%22:330,%22y%22:0,%22width%22:22,%22height%22:27},%2253%22:{%22x%22:352,%22y%22:0,%22width%22:22,%22height%22:27},%2254%22:{%22x%22:374,%22y%22:0,%22width%22:22,%22height%22:27},%2255%22:{%22x%22:396,%22y%22:0,%22width%22:22,%22height%22:27},%2256%22:{%22x%22:418,%22y%22:0,%22width%22:22,%22height%22:27},%2257%22:{%22x%22:440,%22y%22:0,%22width%22:22,%22height%22:27},%2258%22:{%22x%22:110,%22y%22:0,%22width%22:22,%22height%22:27},%2263%22:{%22x%22:220,%22y%22:0,%22width%22:22,%22height%22:27},%2267%22:{%22x%22:22,%22y%22:0,%22width%22:22,%22height%22:27},%2269%22:{%22x%22:88,%22y%22:0,%22width%22:22,%22height%22:27},%2279%22:{%22x%22:44,%22y%22:0,%22width%22:22,%22height%22:27},%2282%22:{%22x%22:66,%22y%22:0,%22width%22:22,%22height%22:27},%2283%22:{%22x%22:0,%22y%22:0,%22width%22:22,%22height%22:27}},%22height%22:27}";



		window.gLocalAssetContainer["number2_glyphs"] = "{%22map%22:{%2232%22:{%22x%22:132,%22y%22:0,%22width%22:22,%22height%22:27},%2243%22:{%22x%22:154,%22y%22:0,%22width%22:22,%22height%22:27},%2245%22:{%22x%22:176,%22y%22:0,%22width%22:22,%22height%22:27},%2246%22:{%22x%22:198,%22y%22:0,%22width%22:22,%22height%22:27},%2248%22:{%22x%22:242,%22y%22:0,%22width%22:22,%22height%22:27},%2249%22:{%22x%22:264,%22y%22:0,%22width%22:22,%22height%22:27},%2250%22:{%22x%22:286,%22y%22:0,%22width%22:22,%22height%22:27},%2251%22:{%22x%22:308,%22y%22:0,%22width%22:22,%22height%22:27},%2252%22:{%22x%22:330,%22y%22:0,%22width%22:22,%22height%22:27},%2253%22:{%22x%22:352,%22y%22:0,%22width%22:22,%22height%22:27},%2254%22:{%22x%22:374,%22y%22:0,%22width%22:22,%22height%22:27},%2255%22:{%22x%22:396,%22y%22:0,%22width%22:22,%22height%22:27},%2256%22:{%22x%22:418,%22y%22:0,%22width%22:22,%22height%22:27},%2257%22:{%22x%22:440,%22y%22:0,%22width%22:22,%22height%22:27},%2258%22:{%22x%22:110,%22y%22:0,%22width%22:22,%22height%22:27},%2263%22:{%22x%22:220,%22y%22:0,%22width%22:22,%22height%22:27},%2267%22:{%22x%22:22,%22y%22:0,%22width%22:22,%22height%22:27},%2269%22:{%22x%22:88,%22y%22:0,%22width%22:22,%22height%22:27},%2279%22:{%22x%22:44,%22y%22:0,%22width%22:22,%22height%22:27},%2282%22:{%22x%22:66,%22y%22:0,%22width%22:22,%22height%22:27},%2283%22:{%22x%22:0,%22y%22:0,%22width%22:22,%22height%22:27}},%22height%22:27}";



		window.gLocalAssetContainer["number3_glyphs"] = "{%22map%22:{%2232%22:{%22x%22:132,%22y%22:0,%22width%22:22,%22height%22:27},%2243%22:{%22x%22:154,%22y%22:0,%22width%22:22,%22height%22:27},%2245%22:{%22x%22:176,%22y%22:0,%22width%22:22,%22height%22:27},%2246%22:{%22x%22:198,%22y%22:0,%22width%22:22,%22height%22:27},%2248%22:{%22x%22:242,%22y%22:0,%22width%22:22,%22height%22:27},%2249%22:{%22x%22:264,%22y%22:0,%22width%22:22,%22height%22:27},%2250%22:{%22x%22:286,%22y%22:0,%22width%22:22,%22height%22:27},%2251%22:{%22x%22:308,%22y%22:0,%22width%22:22,%22height%22:27},%2252%22:{%22x%22:330,%22y%22:0,%22width%22:22,%22height%22:27},%2253%22:{%22x%22:352,%22y%22:0,%22width%22:22,%22height%22:27},%2254%22:{%22x%22:374,%22y%22:0,%22width%22:22,%22height%22:27},%2255%22:{%22x%22:396,%22y%22:0,%22width%22:22,%22height%22:27},%2256%22:{%22x%22:418,%22y%22:0,%22width%22:22,%22height%22:27},%2257%22:{%22x%22:440,%22y%22:0,%22width%22:22,%22height%22:27},%2258%22:{%22x%22:110,%22y%22:0,%22width%22:22,%22height%22:27},%2263%22:{%22x%22:220,%22y%22:0,%22width%22:22,%22height%22:27},%2267%22:{%22x%22:22,%22y%22:0,%22width%22:22,%22height%22:27},%2269%22:{%22x%22:88,%22y%22:0,%22width%22:22,%22height%22:27},%2279%22:{%22x%22:44,%22y%22:0,%22width%22:22,%22height%22:27},%2282%22:{%22x%22:66,%22y%22:0,%22width%22:22,%22height%22:27},%2283%22:{%22x%22:0,%22y%22:0,%22width%22:22,%22height%22:27}},%22height%22:27}";



		window.gLocalAssetContainer["number_glyphs"] = "{%22map%22:{%2232%22:{%22x%22:110,%22y%22:0,%22width%22:22,%22height%22:27},%2243%22:{%22x%22:132,%22y%22:0,%22width%22:22,%22height%22:27},%2245%22:{%22x%22:154,%22y%22:0,%22width%22:22,%22height%22:27},%2246%22:{%22x%22:176,%22y%22:0,%22width%22:22,%22height%22:27},%2248%22:{%22x%22:220,%22y%22:0,%22width%22:22,%22height%22:27},%2249%22:{%22x%22:242,%22y%22:0,%22width%22:22,%22height%22:27},%2250%22:{%22x%22:264,%22y%22:0,%22width%22:22,%22height%22:27},%2251%22:{%22x%22:286,%22y%22:0,%22width%22:22,%22height%22:27},%2252%22:{%22x%22:308,%22y%22:0,%22width%22:22,%22height%22:27},%2253%22:{%22x%22:330,%22y%22:0,%22width%22:22,%22height%22:27},%2254%22:{%22x%22:352,%22y%22:0,%22width%22:22,%22height%22:27},%2255%22:{%22x%22:374,%22y%22:0,%22width%22:22,%22height%22:27},%2256%22:{%22x%22:396,%22y%22:0,%22width%22:22,%22height%22:27},%2257%22:{%22x%22:418,%22y%22:0,%22width%22:22,%22height%22:27},%2258%22:{%22x%22:88,%22y%22:0,%22width%22:22,%22height%22:27},%2263%22:{%22x%22:198,%22y%22:0,%22width%22:22,%22height%22:27},%2269%22:{%22x%22:66,%22y%22:0,%22width%22:22,%22height%22:27},%2273%22:{%22x%22:22,%22y%22:0,%22width%22:22,%22height%22:27},%2277%22:{%22x%22:44,%22y%22:0,%22width%22:22,%22height%22:27},%2284%22:{%22x%22:0,%22y%22:0,%22width%22:22,%22height%22:27}},%22height%22:27}";



		window.gLocalAssetContainer["hint_key_alpha"] = "{%22a_d%22:{%22x%22:0,%22y%22:0,%22width%22:153,%22height%22:74},%22a_h%22:{%22x%22:0,%22y%22:76,%22width%22:153,%22height%22:74},%22a_l%22:{%22x%22:0,%22y%22:152,%22width%22:153,%22height%22:75},%22a_p%22:{%22x%22:155,%22y%22:0,%22width%22:153,%22height%22:75},%22a_t%22:{%22x%22:155,%22y%22:77,%22width%22:153,%22height%22:74},%22a_x%22:{%22x%22:155,%22y%22:153,%22width%22:153,%22height%22:74},%22a_a%22:{%22x%22:0,%22y%22:229,%22width%22:152,%22height%22:74},%22a_b%22:{%22x%22:154,%22y%22:229,%22width%22:152,%22height%22:74},%22a_c%22:{%22x%22:0,%22y%22:305,%22width%22:152,%22height%22:74},%22a_e%22:{%22x%22:154,%22y%22:305,%22width%22:152,%22height%22:74},%22a_f%22:{%22x%22:310,%22y%22:0,%22width%22:152,%22height%22:74},%22a_g%22:{%22x%22:310,%22y%22:76,%22width%22:152,%22height%22:74},%22a_i%22:{%22x%22:310,%22y%22:152,%22width%22:152,%22height%22:75},%22a_j%22:{%22x%22:308,%22y%22:229,%22width%22:152,%22height%22:75},%22a_k%22:{%22x%22:0,%22y%22:381,%22width%22:152,%22height%22:75},%22a_m%22:{%22x%22:154,%22y%22:381,%22width%22:152,%22height%22:75},%22a_n%22:{%22x%22:308,%22y%22:306,%22width%22:152,%22height%22:75},%22a_o%22:{%22x%22:0,%22y%22:458,%22width%22:152,%22height%22:75},%22a_q%22:{%22x%22:154,%22y%22:458,%22width%22:152,%22height%22:74},%22a_r%22:{%22x%22:308,%22y%22:383,%22width%22:152,%22height%22:74},%22a_s%22:{%22x%22:308,%22y%22:459,%22width%22:152,%22height%22:74},%22a_u%22:{%22x%22:464,%22y%22:0,%22width%22:152,%22height%22:74},%22a_v%22:{%22x%22:464,%22y%22:76,%22width%22:152,%22height%22:74},%22a_w%22:{%22x%22:464,%22y%22:152,%22width%22:152,%22height%22:74},%22a_y%22:{%22x%22:464,%22y%22:228,%22width%22:152,%22height%22:75},%22a_z%22:{%22x%22:462,%22y%22:305,%22width%22:152,%22height%22:75}}";



		window.gLocalAssetContainer["hint_key_kana"] = "{%22nn%22:{%22x%22:0,%22y%22:0,%22width%22:120,%22height%22:72},%22semiVoiced%22:{%22x%22:0,%22y%22:74,%22width%22:120,%22height%22:72},%22small%22:{%22x%22:122,%22y%22:0,%22width%22:120,%22height%22:72},%22voiced%22:{%22x%22:122,%22y%22:74,%22width%22:120,%22height%22:72},%22wa%22:{%22x%22:0,%22y%22:148,%22width%22:120,%22height%22:72},%22wo%22:{%22x%22:122,%22y%22:148,%22width%22:120,%22height%22:72},%22ya%22:{%22x%22:0,%22y%22:222,%22width%22:120,%22height%22:72},%22yo%22:{%22x%22:122,%22y%22:222,%22width%22:120,%22height%22:72},%22yu%22:{%22x%22:244,%22y%22:0,%22width%22:120,%22height%22:72},%22a%22:{%22x%22:244,%22y%22:74,%22width%22:72,%22height%22:72},%22e%22:{%22x%22:244,%22y%22:148,%22width%22:72,%22height%22:72},%22ha%22:{%22x%22:244,%22y%22:222,%22width%22:72,%22height%22:72},%22he%22:{%22x%22:0,%22y%22:296,%22width%22:72,%22height%22:72},%22hi%22:{%22x%22:74,%22y%22:296,%22width%22:72,%22height%22:72},%22ho%22:{%22x%22:148,%22y%22:296,%22width%22:72,%22height%22:72},%22hu%22:{%22x%22:222,%22y%22:296,%22width%22:72,%22height%22:72},%22i%22:{%22x%22:296,%22y%22:296,%22width%22:72,%22height%22:72},%22ka%22:{%22x%22:366,%22y%22:0,%22width%22:72,%22height%22:72},%22ke%22:{%22x%22:318,%22y%22:74,%22width%22:72,%22height%22:72},%22ki%22:{%22x%22:318,%22y%22:148,%22width%22:72,%22height%22:72},%22ko%22:{%22x%22:318,%22y%22:222,%22width%22:72,%22height%22:72},%22ku%22:{%22x%22:0,%22y%22:370,%22width%22:72,%22height%22:72},%22ma%22:{%22x%22:74,%22y%22:370,%22width%22:72,%22height%22:72},%22me%22:{%22x%22:148,%22y%22:370,%22width%22:72,%22height%22:72},%22mi%22:{%22x%22:222,%22y%22:370,%22width%22:72,%22height%22:72},%22mo%22:{%22x%22:296,%22y%22:370,%22width%22:72,%22height%22:72},%22mu%22:{%22x%22:440,%22y%22:0,%22width%22:72,%22height%22:72},%22na%22:{%22x%22:392,%22y%22:74,%22width%22:72,%22height%22:72},%22ne%22:{%22x%22:392,%22y%22:148,%22width%22:72,%22height%22:72},%22ni%22:{%22x%22:392,%22y%22:222,%22width%22:72,%22height%22:72},%22no%22:{%22x%22:370,%22y%22:296,%22width%22:72,%22height%22:72},%22nu%22:{%22x%22:370,%22y%22:370,%22width%22:72,%22height%22:72},%22o%22:{%22x%22:0,%22y%22:444,%22width%22:72,%22height%22:72},%22ra%22:{%22x%22:74,%22y%22:444,%22width%22:72,%22height%22:72},%22re%22:{%22x%22:148,%22y%22:444,%22width%22:72,%22height%22:72},%22ri%22:{%22x%22:222,%22y%22:444,%22width%22:72,%22height%22:72},%22ro%22:{%22x%22:296,%22y%22:444,%22width%22:72,%22height%22:72},%22ru%22:{%22x%22:370,%22y%22:444,%22width%22:72,%22height%22:72},%22sa%22:{%22x%22:514,%22y%22:0,%22width%22:72,%22height%22:72},%22se%22:{%22x%22:466,%22y%22:74,%22width%22:72,%22height%22:72},%22si%22:{%22x%22:466,%22y%22:148,%22width%22:72,%22height%22:72},%22so%22:{%22x%22:466,%22y%22:222,%22width%22:72,%22height%22:72},%22su%22:{%22x%22:444,%22y%22:296,%22width%22:72,%22height%22:72},%22ta%22:{%22x%22:444,%22y%22:370,%22width%22:72,%22height%22:72},%22te%22:{%22x%22:444,%22y%22:444,%22width%22:72,%22height%22:72},%22ti%22:{%22x%22:0,%22y%22:518,%22width%22:72,%22height%22:72},%22to%22:{%22x%22:74,%22y%22:518,%22width%22:72,%22height%22:72},%22tu%22:{%22x%22:148,%22y%22:518,%22width%22:72,%22height%22:72},%22u%22:{%22x%22:222,%22y%22:518,%22width%22:72,%22height%22:72}}";



		window.gLocalAssetContainer["hint_key_sym"] = "{%22d_0%22:{%22x%22:0,%22y%22:0,%22width%22:110,%22height%22:72},%22d_1%22:{%22x%22:0,%22y%22:74,%22width%22:110,%22height%22:72},%22d_2%22:{%22x%22:112,%22y%22:0,%22width%22:110,%22height%22:72},%22d_3%22:{%22x%22:112,%22y%22:74,%22width%22:110,%22height%22:72},%22d_4%22:{%22x%22:0,%22y%22:148,%22width%22:110,%22height%22:72},%22d_5%22:{%22x%22:112,%22y%22:148,%22width%22:110,%22height%22:72},%22d_6%22:{%22x%22:0,%22y%22:222,%22width%22:110,%22height%22:72},%22d_7%22:{%22x%22:112,%22y%22:222,%22width%22:110,%22height%22:72},%22d_8%22:{%22x%22:224,%22y%22:0,%22width%22:110,%22height%22:72},%22d_9%22:{%22x%22:224,%22y%22:74,%22width%22:110,%22height%22:72},%22sym_0%22:{%22x%22:224,%22y%22:148,%22width%22:110,%22height%22:72},%22sym_1%22:{%22x%22:224,%22y%22:222,%22width%22:110,%22height%22:72},%22sym_10%22:{%22x%22:0,%22y%22:296,%22width%22:110,%22height%22:72},%22sym_11%22:{%22x%22:112,%22y%22:296,%22width%22:110,%22height%22:72},%22sym_12%22:{%22x%22:224,%22y%22:296,%22width%22:110,%22height%22:72},%22sym_13%22:{%22x%22:336,%22y%22:0,%22width%22:110,%22height%22:72},%22sym_14%22:{%22x%22:336,%22y%22:74,%22width%22:110,%22height%22:72},%22sym_15%22:{%22x%22:336,%22y%22:148,%22width%22:110,%22height%22:72},%22sym_16%22:{%22x%22:336,%22y%22:222,%22width%22:110,%22height%22:72},%22sym_17%22:{%22x%22:336,%22y%22:296,%22width%22:110,%22height%22:72},%22sym_18%22:{%22x%22:0,%22y%22:370,%22width%22:110,%22height%22:72},%22sym_19%22:{%22x%22:112,%22y%22:370,%22width%22:110,%22height%22:72},%22sym_2%22:{%22x%22:224,%22y%22:370,%22width%22:110,%22height%22:72},%22sym_3%22:{%22x%22:336,%22y%22:370,%22width%22:110,%22height%22:72},%22sym_4%22:{%22x%22:0,%22y%22:444,%22width%22:110,%22height%22:72},%22sym_5%22:{%22x%22:112,%22y%22:444,%22width%22:110,%22height%22:72},%22sym_6%22:{%22x%22:224,%22y%22:444,%22width%22:110,%22height%22:72},%22sym_7%22:{%22x%22:336,%22y%22:444,%22width%22:110,%22height%22:72},%22sym_8%22:{%22x%22:448,%22y%22:0,%22width%22:110,%22height%22:72},%22sym_9%22:{%22x%22:448,%22y%22:74,%22width%22:110,%22height%22:72}}";



		window.gLocalAssetContainer["notosansGlyph"] = "{%0A    %2212354%22: {%0A        %22x%22: 0,%0A        %22y%22: 0,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212356%22: {%0A        %22x%22: 72,%0A        %22y%22: 0,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212358%22: {%0A        %22x%22: 144,%0A        %22y%22: 0,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212360%22: {%0A        %22x%22: 216,%0A        %22y%22: 0,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212362%22: {%0A        %22x%22: 288,%0A        %22y%22: 0,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212363%22: {%0A        %22x%22: 360,%0A        %22y%22: 0,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212365%22: {%0A        %22x%22: 432,%0A        %22y%22: 0,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212367%22: {%0A        %22x%22: 504,%0A        %22y%22: 0,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212369%22: {%0A        %22x%22: 576,%0A        %22y%22: 0,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212371%22: {%0A        %22x%22: 648,%0A        %22y%22: 0,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212373%22: {%0A        %22x%22: 0,%0A        %22y%22: 72,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212375%22: {%0A        %22x%22: 72,%0A        %22y%22: 72,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212377%22: {%0A        %22x%22: 144,%0A        %22y%22: 72,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212379%22: {%0A        %22x%22: 216,%0A        %22y%22: 72,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212381%22: {%0A        %22x%22: 288,%0A        %22y%22: 72,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212383%22: {%0A        %22x%22: 360,%0A        %22y%22: 72,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212385%22: {%0A        %22x%22: 432,%0A        %22y%22: 72,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212388%22: {%0A        %22x%22: 504,%0A        %22y%22: 72,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212390%22: {%0A        %22x%22: 576,%0A        %22y%22: 72,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212392%22: {%0A        %22x%22: 648,%0A        %22y%22: 72,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212394%22: {%0A        %22x%22: 0,%0A        %22y%22: 144,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212395%22: {%0A        %22x%22: 72,%0A        %22y%22: 144,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212396%22: {%0A        %22x%22: 144,%0A        %22y%22: 144,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212397%22: {%0A        %22x%22: 216,%0A        %22y%22: 144,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212398%22: {%0A        %22x%22: 288,%0A        %22y%22: 144,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212399%22: {%0A        %22x%22: 360,%0A        %22y%22: 144,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212402%22: {%0A        %22x%22: 432,%0A        %22y%22: 144,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212405%22: {%0A        %22x%22: 504,%0A        %22y%22: 144,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212408%22: {%0A        %22x%22: 576,%0A        %22y%22: 144,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212411%22: {%0A        %22x%22: 648,%0A        %22y%22: 144,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212414%22: {%0A        %22x%22: 0,%0A        %22y%22: 216,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212415%22: {%0A        %22x%22: 72,%0A        %22y%22: 216,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212416%22: {%0A        %22x%22: 144,%0A        %22y%22: 216,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212417%22: {%0A        %22x%22: 216,%0A        %22y%22: 216,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212418%22: {%0A        %22x%22: 288,%0A        %22y%22: 216,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212420%22: {%0A        %22x%22: 360,%0A        %22y%22: 216,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212422%22: {%0A        %22x%22: 432,%0A        %22y%22: 216,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212424%22: {%0A        %22x%22: 504,%0A        %22y%22: 216,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212425%22: {%0A        %22x%22: 576,%0A        %22y%22: 216,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212426%22: {%0A        %22x%22: 648,%0A        %22y%22: 216,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212427%22: {%0A        %22x%22: 0,%0A        %22y%22: 288,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212428%22: {%0A        %22x%22: 72,%0A        %22y%22: 288,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212429%22: {%0A        %22x%22: 144,%0A        %22y%22: 288,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212431%22: {%0A        %22x%22: 216,%0A        %22y%22: 288,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212434%22: {%0A        %22x%22: 288,%0A        %22y%22: 288,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212435%22: {%0A        %22x%22: 360,%0A        %22y%22: 288,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212364%22: {%0A        %22x%22: 432,%0A        %22y%22: 288,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212366%22: {%0A        %22x%22: 504,%0A        %22y%22: 288,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212368%22: {%0A        %22x%22: 576,%0A        %22y%22: 288,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212370%22: {%0A        %22x%22: 648,%0A        %22y%22: 288,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212372%22: {%0A        %22x%22: 0,%0A        %22y%22: 360,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212374%22: {%0A        %22x%22: 72,%0A        %22y%22: 360,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212376%22: {%0A        %22x%22: 144,%0A        %22y%22: 360,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212378%22: {%0A        %22x%22: 216,%0A        %22y%22: 360,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212380%22: {%0A        %22x%22: 288,%0A        %22y%22: 360,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212382%22: {%0A        %22x%22: 360,%0A        %22y%22: 360,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212384%22: {%0A        %22x%22: 432,%0A        %22y%22: 360,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212386%22: {%0A        %22x%22: 504,%0A        %22y%22: 360,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212389%22: {%0A        %22x%22: 576,%0A        %22y%22: 360,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212391%22: {%0A        %22x%22: 648,%0A        %22y%22: 360,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212393%22: {%0A        %22x%22: 0,%0A        %22y%22: 432,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212400%22: {%0A        %22x%22: 72,%0A        %22y%22: 432,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212403%22: {%0A        %22x%22: 144,%0A        %22y%22: 432,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212406%22: {%0A        %22x%22: 216,%0A        %22y%22: 432,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212409%22: {%0A        %22x%22: 288,%0A        %22y%22: 432,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212412%22: {%0A        %22x%22: 360,%0A        %22y%22: 432,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212401%22: {%0A        %22x%22: 432,%0A        %22y%22: 432,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212404%22: {%0A        %22x%22: 504,%0A        %22y%22: 432,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212407%22: {%0A        %22x%22: 576,%0A        %22y%22: 432,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212410%22: {%0A        %22x%22: 648,%0A        %22y%22: 432,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212413%22: {%0A        %22x%22: 0,%0A        %22y%22: 504,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212353%22: {%0A        %22x%22: 72,%0A        %22y%22: 504,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212355%22: {%0A        %22x%22: 144,%0A        %22y%22: 504,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212357%22: {%0A        %22x%22: 216,%0A        %22y%22: 504,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212359%22: {%0A        %22x%22: 288,%0A        %22y%22: 504,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212361%22: {%0A        %22x%22: 360,%0A        %22y%22: 504,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212387%22: {%0A        %22x%22: 432,%0A        %22y%22: 504,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212419%22: {%0A        %22x%22: 504,%0A        %22y%22: 504,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212421%22: {%0A        %22x%22: 576,%0A        %22y%22: 504,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212423%22: {%0A        %22x%22: 648,%0A        %22y%22: 504,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212430%22: {%0A        %22x%22: 0,%0A        %22y%22: 576,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2223567%22: {%0A        %22x%22: 72,%0A        %22y%22: 576,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212443%22: {%0A        %22x%22: 144,%0A        %22y%22: 576,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212444%22: {%0A        %22x%22: 216,%0A        %22y%22: 576,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2297%22: {%0A        %22x%22: 288,%0A        %22y%22: 576,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2298%22: {%0A        %22x%22: 360,%0A        %22y%22: 576,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2299%22: {%0A        %22x%22: 432,%0A        %22y%22: 576,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22100%22: {%0A        %22x%22: 504,%0A        %22y%22: 576,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22101%22: {%0A        %22x%22: 576,%0A        %22y%22: 576,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22102%22: {%0A        %22x%22: 648,%0A        %22y%22: 576,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22103%22: {%0A        %22x%22: 0,%0A        %22y%22: 648,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22104%22: {%0A        %22x%22: 72,%0A        %22y%22: 648,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22105%22: {%0A        %22x%22: 144,%0A        %22y%22: 648,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22106%22: {%0A        %22x%22: 216,%0A        %22y%22: 648,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22107%22: {%0A        %22x%22: 288,%0A        %22y%22: 648,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22108%22: {%0A        %22x%22: 360,%0A        %22y%22: 648,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22109%22: {%0A        %22x%22: 432,%0A        %22y%22: 648,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22110%22: {%0A        %22x%22: 504,%0A        %22y%22: 648,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22111%22: {%0A        %22x%22: 576,%0A        %22y%22: 648,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22112%22: {%0A        %22x%22: 648,%0A        %22y%22: 648,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22113%22: {%0A        %22x%22: 0,%0A        %22y%22: 720,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22114%22: {%0A        %22x%22: 72,%0A        %22y%22: 720,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22115%22: {%0A        %22x%22: 144,%0A        %22y%22: 720,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22116%22: {%0A        %22x%22: 216,%0A        %22y%22: 720,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22117%22: {%0A        %22x%22: 288,%0A        %22y%22: 720,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22118%22: {%0A        %22x%22: 360,%0A        %22y%22: 720,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22119%22: {%0A        %22x%22: 432,%0A        %22y%22: 720,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22120%22: {%0A        %22x%22: 504,%0A        %22y%22: 720,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22121%22: {%0A        %22x%22: 576,%0A        %22y%22: 720,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %22122%22: {%0A        %22x%22: 648,%0A        %22y%22: 720,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2249%22: {%0A        %22x%22: 0,%0A        %22y%22: 792,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2250%22: {%0A        %22x%22: 72,%0A        %22y%22: 792,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2251%22: {%0A        %22x%22: 144,%0A        %22y%22: 792,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2252%22: {%0A        %22x%22: 216,%0A        %22y%22: 792,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2253%22: {%0A        %22x%22: 288,%0A        %22y%22: 792,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2254%22: {%0A        %22x%22: 360,%0A        %22y%22: 792,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2255%22: {%0A        %22x%22: 432,%0A        %22y%22: 792,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2256%22: {%0A        %22x%22: 504,%0A        %22y%22: 792,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2257%22: {%0A        %22x%22: 576,%0A        %22y%22: 792,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2248%22: {%0A        %22x%22: 648,%0A        %22y%22: 792,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2239%22: {%0A        %22x%22: 0,%0A        %22y%22: 864,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2265292%22: {%0A        %22x%22: 72,%0A        %22y%22: 864,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2265294%22: {%0A        %22x%22: 144,%0A        %22y%22: 864,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212539%22: {%0A        %22x%22: 216,%0A        %22y%22: 864,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2265311%22: {%0A        %22x%22: 288,%0A        %22y%22: 864,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2265281%22: {%0A        %22x%22: 360,%0A        %22y%22: 864,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2265309%22: {%0A        %22x%22: 432,%0A        %22y%22: 864,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2265374%22: {%0A        %22x%22: 504,%0A        %22y%22: 864,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212540%22: {%0A        %22x%22: 576,%0A        %22y%22: 864,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2265288%22: {%0A        %22x%22: 648,%0A        %22y%22: 864,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2265289%22: {%0A        %22x%22: 0,%0A        %22y%22: 936,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212300%22: {%0A        %22x%22: 72,%0A        %22y%22: 936,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2212301%22: {%0A        %22x%22: 144,%0A        %22y%22: 936,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2265308%22: {%0A        %22x%22: 216,%0A        %22y%22: 936,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2265310%22: {%0A        %22x%22: 288,%0A        %22y%22: 936,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2265286%22: {%0A        %22x%22: 360,%0A        %22y%22: 936,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2265283%22: {%0A        %22x%22: 432,%0A        %22y%22: 936,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2265284%22: {%0A        %22x%22: 504,%0A        %22y%22: 936,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %2265285%22: {%0A        %22x%22: 576,%0A        %22y%22: 936,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    },%0A    %229733%22: {%0A        %22x%22: 648,%0A        %22y%22: 936,%0A        %22width%22: 72,%0A        %22height%22: 72%0A    }%0A}";



		window.gLocalAssetContainer["countdown_glyphs"] = "{%22map%22:{%2233%22:{%22x%22:400,%22y%22:0,%22width%22:80,%22height%22:101},%2248%22:{%22x%22:720,%22y%22:0,%22width%22:80,%22height%22:101},%2249%22:{%22x%22:800,%22y%22:0,%22width%22:80,%22height%22:101},%2250%22:{%22x%22:880,%22y%22:0,%22width%22:80,%22height%22:101},%2251%22:{%22x%22:960,%22y%22:0,%22width%22:80,%22height%22:101},%2252%22:{%22x%22:1040,%22y%22:0,%22width%22:80,%22height%22:101},%2253%22:{%22x%22:1120,%22y%22:0,%22width%22:80,%22height%22:101},%2254%22:{%22x%22:1200,%22y%22:0,%22width%22:80,%22height%22:101},%2255%22:{%22x%22:1280,%22y%22:0,%22width%22:80,%22height%22:101},%2256%22:{%22x%22:1360,%22y%22:0,%22width%22:80,%22height%22:101},%2257%22:{%22x%22:1440,%22y%22:0,%22width%22:80,%22height%22:101},%2265%22:{%22x%22:160,%22y%22:0,%22width%22:80,%22height%22:101},%2268%22:{%22x%22:640,%22y%22:0,%22width%22:80,%22height%22:101},%2269%22:{%22x%22:480,%22y%22:0,%22width%22:80,%22height%22:101},%2278%22:{%22x%22:560,%22y%22:0,%22width%22:80,%22height%22:101},%2282%22:{%22x%22:240,%22y%22:0,%22width%22:80,%22height%22:101},%2283%22:{%22x%22:0,%22y%22:0,%22width%22:80,%22height%22:101},%2284%22:{%22x%22:320,%22y%22:0,%22width%22:80,%22height%22:101}},%22height%22:101}";



		window.gLocalAssetContainer["my_number0_glyphs"] = "{%22map%22:{%2232%22:{%22x%22:210,%22y%22:0,%22width%22:35,%22height%22:44},%2243%22:{%22x%22:245,%22y%22:0,%22width%22:35,%22height%22:44},%2245%22:{%22x%22:280,%22y%22:0,%22width%22:35,%22height%22:44},%2246%22:{%22x%22:315,%22y%22:0,%22width%22:35,%22height%22:44},%2248%22:{%22x%22:385,%22y%22:0,%22width%22:35,%22height%22:44},%2249%22:{%22x%22:420,%22y%22:0,%22width%22:35,%22height%22:44},%2250%22:{%22x%22:455,%22y%22:0,%22width%22:35,%22height%22:44},%2251%22:{%22x%22:490,%22y%22:0,%22width%22:35,%22height%22:44},%2252%22:{%22x%22:525,%22y%22:0,%22width%22:35,%22height%22:44},%2253%22:{%22x%22:560,%22y%22:0,%22width%22:35,%22height%22:44},%2254%22:{%22x%22:595,%22y%22:0,%22width%22:35,%22height%22:44},%2255%22:{%22x%22:630,%22y%22:0,%22width%22:35,%22height%22:44},%2256%22:{%22x%22:665,%22y%22:0,%22width%22:35,%22height%22:44},%2257%22:{%22x%22:700,%22y%22:0,%22width%22:35,%22height%22:44},%2258%22:{%22x%22:175,%22y%22:0,%22width%22:35,%22height%22:44},%2263%22:{%22x%22:350,%22y%22:0,%22width%22:35,%22height%22:44},%2267%22:{%22x%22:35,%22y%22:0,%22width%22:35,%22height%22:44},%2269%22:{%22x%22:140,%22y%22:0,%22width%22:35,%22height%22:44},%2279%22:{%22x%22:70,%22y%22:0,%22width%22:35,%22height%22:44},%2282%22:{%22x%22:105,%22y%22:0,%22width%22:35,%22height%22:44},%2283%22:{%22x%22:0,%22y%22:0,%22width%22:35,%22height%22:44}},%22height%22:44}";



		window.gLocalAssetContainer["my_number1_glyphs"] = "{%22map%22:{%2232%22:{%22x%22:210,%22y%22:0,%22width%22:35,%22height%22:44},%2243%22:{%22x%22:245,%22y%22:0,%22width%22:35,%22height%22:44},%2245%22:{%22x%22:280,%22y%22:0,%22width%22:35,%22height%22:44},%2246%22:{%22x%22:315,%22y%22:0,%22width%22:35,%22height%22:44},%2248%22:{%22x%22:385,%22y%22:0,%22width%22:35,%22height%22:44},%2249%22:{%22x%22:420,%22y%22:0,%22width%22:35,%22height%22:44},%2250%22:{%22x%22:455,%22y%22:0,%22width%22:35,%22height%22:44},%2251%22:{%22x%22:490,%22y%22:0,%22width%22:35,%22height%22:44},%2252%22:{%22x%22:525,%22y%22:0,%22width%22:35,%22height%22:44},%2253%22:{%22x%22:560,%22y%22:0,%22width%22:35,%22height%22:44},%2254%22:{%22x%22:595,%22y%22:0,%22width%22:35,%22height%22:44},%2255%22:{%22x%22:630,%22y%22:0,%22width%22:35,%22height%22:44},%2256%22:{%22x%22:665,%22y%22:0,%22width%22:35,%22height%22:44},%2257%22:{%22x%22:700,%22y%22:0,%22width%22:35,%22height%22:44},%2258%22:{%22x%22:175,%22y%22:0,%22width%22:35,%22height%22:44},%2263%22:{%22x%22:350,%22y%22:0,%22width%22:35,%22height%22:44},%2267%22:{%22x%22:35,%22y%22:0,%22width%22:35,%22height%22:44},%2269%22:{%22x%22:140,%22y%22:0,%22width%22:35,%22height%22:44},%2279%22:{%22x%22:70,%22y%22:0,%22width%22:35,%22height%22:44},%2282%22:{%22x%22:105,%22y%22:0,%22width%22:35,%22height%22:44},%2283%22:{%22x%22:0,%22y%22:0,%22width%22:35,%22height%22:44}},%22height%22:44}";



		window.gLocalAssetContainer["my_number2_glyphs"] = "{%22map%22:{%2232%22:{%22x%22:210,%22y%22:0,%22width%22:35,%22height%22:44},%2243%22:{%22x%22:245,%22y%22:0,%22width%22:35,%22height%22:44},%2245%22:{%22x%22:280,%22y%22:0,%22width%22:35,%22height%22:44},%2246%22:{%22x%22:315,%22y%22:0,%22width%22:35,%22height%22:44},%2248%22:{%22x%22:385,%22y%22:0,%22width%22:35,%22height%22:44},%2249%22:{%22x%22:420,%22y%22:0,%22width%22:35,%22height%22:44},%2250%22:{%22x%22:455,%22y%22:0,%22width%22:35,%22height%22:44},%2251%22:{%22x%22:490,%22y%22:0,%22width%22:35,%22height%22:44},%2252%22:{%22x%22:525,%22y%22:0,%22width%22:35,%22height%22:44},%2253%22:{%22x%22:560,%22y%22:0,%22width%22:35,%22height%22:44},%2254%22:{%22x%22:595,%22y%22:0,%22width%22:35,%22height%22:44},%2255%22:{%22x%22:630,%22y%22:0,%22width%22:35,%22height%22:44},%2256%22:{%22x%22:665,%22y%22:0,%22width%22:35,%22height%22:44},%2257%22:{%22x%22:700,%22y%22:0,%22width%22:35,%22height%22:44},%2258%22:{%22x%22:175,%22y%22:0,%22width%22:35,%22height%22:44},%2263%22:{%22x%22:350,%22y%22:0,%22width%22:35,%22height%22:44},%2267%22:{%22x%22:35,%22y%22:0,%22width%22:35,%22height%22:44},%2269%22:{%22x%22:140,%22y%22:0,%22width%22:35,%22height%22:44},%2279%22:{%22x%22:70,%22y%22:0,%22width%22:35,%22height%22:44},%2282%22:{%22x%22:105,%22y%22:0,%22width%22:35,%22height%22:44},%2283%22:{%22x%22:0,%22y%22:0,%22width%22:35,%22height%22:44}},%22height%22:44}";



		window.gLocalAssetContainer["my_number3_glyphs"] = "{%22map%22:{%2232%22:{%22x%22:210,%22y%22:0,%22width%22:35,%22height%22:44},%2243%22:{%22x%22:245,%22y%22:0,%22width%22:35,%22height%22:44},%2245%22:{%22x%22:280,%22y%22:0,%22width%22:35,%22height%22:44},%2246%22:{%22x%22:315,%22y%22:0,%22width%22:35,%22height%22:44},%2248%22:{%22x%22:385,%22y%22:0,%22width%22:35,%22height%22:44},%2249%22:{%22x%22:420,%22y%22:0,%22width%22:35,%22height%22:44},%2250%22:{%22x%22:455,%22y%22:0,%22width%22:35,%22height%22:44},%2251%22:{%22x%22:490,%22y%22:0,%22width%22:35,%22height%22:44},%2252%22:{%22x%22:525,%22y%22:0,%22width%22:35,%22height%22:44},%2253%22:{%22x%22:560,%22y%22:0,%22width%22:35,%22height%22:44},%2254%22:{%22x%22:595,%22y%22:0,%22width%22:35,%22height%22:44},%2255%22:{%22x%22:630,%22y%22:0,%22width%22:35,%22height%22:44},%2256%22:{%22x%22:665,%22y%22:0,%22width%22:35,%22height%22:44},%2257%22:{%22x%22:700,%22y%22:0,%22width%22:35,%22height%22:44},%2258%22:{%22x%22:175,%22y%22:0,%22width%22:35,%22height%22:44},%2263%22:{%22x%22:350,%22y%22:0,%22width%22:35,%22height%22:44},%2267%22:{%22x%22:35,%22y%22:0,%22width%22:35,%22height%22:44},%2269%22:{%22x%22:140,%22y%22:0,%22width%22:35,%22height%22:44},%2279%22:{%22x%22:70,%22y%22:0,%22width%22:35,%22height%22:44},%2282%22:{%22x%22:105,%22y%22:0,%22width%22:35,%22height%22:44},%2283%22:{%22x%22:0,%22y%22:0,%22width%22:35,%22height%22:44}},%22height%22:44}";



		window.gLocalAssetContainer["coupon_glyphs"] = "{%22map%22:{%2232%22:{%22x%22:0,%22y%22:0,%22width%22:22,%22height%22:27},%2243%22:{%22x%22:44,%22y%22:0,%22width%22:22,%22height%22:27},%2245%22:{%22x%22:22,%22y%22:0,%22width%22:22,%22height%22:27},%2248%22:{%22x%22:66,%22y%22:0,%22width%22:22,%22height%22:27},%2249%22:{%22x%22:88,%22y%22:0,%22width%22:22,%22height%22:27},%2250%22:{%22x%22:110,%22y%22:0,%22width%22:22,%22height%22:27},%2251%22:{%22x%22:132,%22y%22:0,%22width%22:22,%22height%22:27},%2252%22:{%22x%22:154,%22y%22:0,%22width%22:22,%22height%22:27},%2253%22:{%22x%22:176,%22y%22:0,%22width%22:22,%22height%22:27},%2254%22:{%22x%22:198,%22y%22:0,%22width%22:22,%22height%22:27},%2255%22:{%22x%22:220,%22y%22:0,%22width%22:22,%22height%22:27},%2256%22:{%22x%22:242,%22y%22:0,%22width%22:22,%22height%22:27},%2257%22:{%22x%22:264,%22y%22:0,%22width%22:22,%22height%22:27}},%22height%22:27}";




</script>

<script>

	window.addEventListener("load",function(){var e,n,o="sandboxDummyPlayId",t=engineFiles.pdiBrowser,a=engineFiles.gameDriver,i=new a.MemoryAmflowClient({playId:o}),r=(!0!==window.__akashic__.autoSendEventName&&"string"!=typeof window.__akashic__.autoSendEventName||(r=window.__akashic__.sandboxConfigFunc(),!0===(n=window.__akashic__.autoSendEventName)&&(n=r.autoSendEventName||r.autoSendEvents),r&&n&&r.events&&r.events[n]&&r.events[n].forEach(function(e){i.sendEvent(e)})),window.__akashic__.autoGivenArgsName&&(r=r||window.__akashic__.sandboxConfigFunc(),e=r.arguments[window.__akashic__.autoGivenArgsName]),n="file:"!==location.protocol?[t.WebAudioPlugin,t.HTMLAudioPlugin]:[t.HTMLAudioPlugin],document.getElementById("container")),d=new t.Platform({amflow:i,containerView:r,audioPlugins:n,disablePreventDefault:!0});function s(e){var n,o,t,a;d.containerController&&(n=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight,a=Math.min(n/e.width,o/e.height),t=Math.floor(e.width*a),e=Math.floor(e.height*a),d.containerController.changeScale(a,a),a={x:Math.floor((n-t)/2),y:Math.floor((o-e)/2)},d.containerController.inputHandlerLayer.setOffset(a))}r.addEventListener("touchstart",function(e){e.preventDefault()}),d.loadGameConfiguration=function(e,n){try{var o=window.gLocalAssetContainer["game.json"],o=decodeURIComponent(o);n(null,JSON.parse(o))}catch(e){n(e,null)}},d._resourceFactory.createScriptAsset=function(e,n){return new LocalScriptAssetV3(e,n)},"undefined"!=typeof LocalTextAssetV3&&(d._resourceFactory.createTextAsset=function(e,n){return new LocalTextAssetV3(e,n)}),(driver=new a.GameDriver({platform:d,player:{id:"9999",name:"sandbox-player"},errorHandler:function(e){console.log("ERRORHANDLER:",e)}})).gameCreatedTrigger.add(function(e){window.optionProps.magnify&&(s(e),window.addEventListener("resize",function(){s(e)}))}),driver.initialize({configurationUrl:"game.json",assetBase:"./",gameArgs:e,driverConfiguration:{playId:o,playToken:"dummyToken",executionMode:a.ExecutionMode.Active},loopConfiguration:{loopMode:a.LoopMode.Realtime}},function(e){if(e)throw e;try{var n;"undefined"!=typeof window&&window.RPGAtsumaru&&(n=window.RPGAtsumaru.volume.getCurrentValue(),d.setMasterVolume(n),window.RPGAtsumaru.volume.changed.subscribe(function(e){d.setMasterVolume(e)}),window.RPGAtsumaru.screenshot.setScreenshotHandler(function(){var e=d.getPrimarySurface().canvas.toDataURL("image/png");return Promise.resolve(e)}))}catch(e){console.error(e)}driver.startGame()})});

	window.g=require("@akashic/akashic-engine"),"gLocalAssetContainer"in window||(window.gLocalAssetContainer={}),"__akashic__"in window||(window.__akashic__={});

	class LocalScriptAssetV3{constructor(t,s,i=[]){this.type="script",this.id=t,this.originalPath=s,this.exports=i,this.path=this._assetPathFilter(s),this.onDestroyed=new g.Trigger,this.func=window.gLocalAssetContainer[t]}destroy(){this.onDestroyed.fire(this),this.id=void 0,this.originalPath=void 0,this.path=void 0,this.exports=void 0,this.onDestroyed.destroy(),this.onDestroyed=void 0}destroyed(){return void 0===this.id}inUse(){return!1}execute(t){return this.func(t),t.module.exports}_load(t){void 0!==this.func?setTimeout(()=>{t._onAssetLoad(this)},0):setTimeout(()=>{t._onAssetError(this,g.ExceptionFactory.createAssetLoadError("can not load script asset"))},0)}_assetPathFilter(t){return t}}

	class LocalTextAssetV3{constructor(t,s){this.type="text",this.id=t,this.originalPath=s,this.path=this._assetPathFilter(s),this.onDestroyed=new g.Trigger,this.data=decodeURIComponent(window.gLocalAssetContainer[t])}destroy(){this.onDestroyed.fire(this),this.id=void 0,this.originalPath=void 0,this.path=void 0,this.onDestroyed.destroy(),this.onDestroyed=void 0}destroyed(){return void 0===this.id}inUse(){return!1}_load(t){void 0!==this.data?setTimeout(()=>{t._onAssetLoad(this)},0):setTimeout(()=>{t._onAssetError(this,g.ExceptionFactory.createAssetLoadError("can not load text asset"))},0)}_assetPathFilter(t){return t}}

</script>

<style type="text/css">
* {
	margin: 0;
	border: 0;
	padding: 0;
}

html {
	width: 100%;
	height: 100%;
}

body {
	overflow: hidden;
	width: 100%;
	height: 100%;
}

#container {
	margin: 0px;
	padding: 0px;
	overflow: hidden;
	touch-action: none;
	width: 100%;
	height: 100%;

	/* iOS: body */
	position: absolute;
}

#container canvas {
	background-size: contain;
}

</style>



</head>
<body>
<div id="container">
</div>
</body>
</html>
